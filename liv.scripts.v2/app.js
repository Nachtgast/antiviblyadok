/*! For license information please see app.js.LICENSE.txt */
(()=>{var t,e,n={90215:(t,e,n)=>{"use strict";var a=Object.freeze({});function r(t){return null==t}function i(t){return null!=t}function s(t){return!0===t}function o(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function c(t){return null!==t&&"object"==typeof t}var l=Object.prototype.toString;function u(t){return"[object Object]"===l.call(t)}function d(t){return"[object RegExp]"===l.call(t)}function f(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function h(t){return i(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function p(t){return null==t?"":Array.isArray(t)||u(t)&&t.toString===l?JSON.stringify(t,null,2):String(t)}function m(t){var e=parseFloat(t);return isNaN(e)?t:e}function v(t,e){for(var n=Object.create(null),a=t.split(","),r=0;r<a.length;r++)n[a[r]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}var g=v("slot,component",!0),_=v("key,ref,slot,slot-scope,is");function y(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function C(t,e){return b.call(t,e)}function w(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}var k=/-(\w)/g,x=w((function(t){return t.replace(k,(function(t,e){return e?e.toUpperCase():""}))})),S=w((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),E=/\B([A-Z])/g,T=w((function(t){return t.replace(E,"-$1").toLowerCase()}));var A=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function n(n){var a=arguments.length;return a?a>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n};function R(t,e){e=e||0;for(var n=t.length-e,a=new Array(n);n--;)a[n]=t[n+e];return a}function O(t,e){for(var n in e)t[n]=e[n];return t}function P(t){for(var e={},n=0;n<t.length;n++)t[n]&&O(e,t[n]);return e}function L(t,e,n){}var D=function(t,e,n){return!1},I=function(t){return t};function M(t,e){if(t===e)return!0;var n=c(t),a=c(e);if(!n||!a)return!n&&!a&&String(t)===String(e);try{var r=Array.isArray(t),i=Array.isArray(e);if(r&&i)return t.length===e.length&&t.every((function(t,n){return M(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(r||i)return!1;var s=Object.keys(t),o=Object.keys(e);return s.length===o.length&&s.every((function(n){return M(t[n],e[n])}))}catch(t){return!1}}function N(t,e){for(var n=0;n<t.length;n++)if(M(t[n],e))return n;return-1}function j(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var F="data-server-rendered",B=["component","directive","filter"],U=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],V={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:D,isReservedAttr:D,isUnknownElement:D,getTagNamespace:L,parsePlatformTagName:I,mustUseProp:D,async:!0,_lifecycleHooks:U},H=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function Z(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function G(t,e,n,a){Object.defineProperty(t,e,{value:n,enumerable:!!a,writable:!0,configurable:!0})}var z=new RegExp("[^"+H.source+".$_\\d]");var q,K="__proto__"in{},W="undefined"!=typeof window,Y="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,X=Y&&WXEnvironment.platform.toLowerCase(),J=W&&window.navigator.userAgent.toLowerCase(),Q=J&&/msie|trident/.test(J),tt=J&&J.indexOf("msie 9.0")>0,et=J&&J.indexOf("edge/")>0,nt=(J&&J.indexOf("android"),J&&/iphone|ipad|ipod|ios/.test(J)||"ios"===X),at=(J&&/chrome\/\d+/.test(J),J&&/phantomjs/.test(J),J&&J.match(/firefox\/(\d+)/)),rt={}.watch,it=!1;if(W)try{var st={};Object.defineProperty(st,"passive",{get:function(){it=!0}}),window.addEventListener("test-passive",null,st)}catch(t){}var ot=function(){return void 0===q&&(q=!W&&!Y&&void 0!==n.g&&(n.g.process&&"server"===n.g.process.env.VUE_ENV)),q},ct=W&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function lt(t){return"function"==typeof t&&/native code/.test(t.toString())}var ut,dt="undefined"!=typeof Symbol&&lt(Symbol)&&"undefined"!=typeof Reflect&&lt(Reflect.ownKeys);ut="undefined"!=typeof Set&&lt(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ft=L,ht=0,pt=function(){this.id=ht++,this.subs=[]};pt.prototype.addSub=function(t){this.subs.push(t)},pt.prototype.removeSub=function(t){y(this.subs,t)},pt.prototype.depend=function(){pt.target&&pt.target.addDep(this)},pt.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},pt.target=null;var mt=[];function vt(t){mt.push(t),pt.target=t}function gt(){mt.pop(),pt.target=mt[mt.length-1]}var _t=function(t,e,n,a,r,i,s,o){this.tag=t,this.data=e,this.children=n,this.text=a,this.elm=r,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=o,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},yt={child:{configurable:!0}};yt.child.get=function(){return this.componentInstance},Object.defineProperties(_t.prototype,yt);var bt=function(t){void 0===t&&(t="");var e=new _t;return e.text=t,e.isComment=!0,e};function Ct(t){return new _t(void 0,void 0,void 0,String(t))}function wt(t){var e=new _t(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var kt=Array.prototype,xt=Object.create(kt);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(t){var e=kt[t];G(xt,t,(function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];var r,i=e.apply(this,n),s=this.__ob__;switch(t){case"push":case"unshift":r=n;break;case"splice":r=n.slice(2)}return r&&s.observeArray(r),s.dep.notify(),i}))}));var St=Object.getOwnPropertyNames(xt),Et=!0;function Tt(t){Et=t}var At=function(t){this.value=t,this.dep=new pt,this.vmCount=0,G(t,"__ob__",this),Array.isArray(t)?(K?function(t,e){t.__proto__=e}(t,xt):function(t,e,n){for(var a=0,r=n.length;a<r;a++){var i=n[a];G(t,i,e[i])}}(t,xt,St),this.observeArray(t)):this.walk(t)};function Rt(t,e){var n;if(c(t)&&!(t instanceof _t))return C(t,"__ob__")&&t.__ob__ instanceof At?n=t.__ob__:Et&&!ot()&&(Array.isArray(t)||u(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new At(t)),e&&n&&n.vmCount++,n}function Ot(t,e,n,a,r){var i=new pt,s=Object.getOwnPropertyDescriptor(t,e);if(!s||!1!==s.configurable){var o=s&&s.get,c=s&&s.set;o&&!c||2!==arguments.length||(n=t[e]);var l=!r&&Rt(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=o?o.call(t):n;return pt.target&&(i.depend(),l&&(l.dep.depend(),Array.isArray(e)&&Lt(e))),e},set:function(e){var a=o?o.call(t):n;e===a||e!=e&&a!=a||o&&!c||(c?c.call(t,e):n=e,l=!r&&Rt(e),i.notify())}})}}function $t(t,e,n){if(Array.isArray(t)&&f(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var a=t.__ob__;return t._isVue||a&&a.vmCount?n:a?(Ot(a.value,e,n),a.dep.notify(),n):(t[e]=n,n)}function Pt(t,e){if(Array.isArray(t)&&f(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||C(t,e)&&(delete t[e],n&&n.dep.notify())}}function Lt(t){for(var e=void 0,n=0,a=t.length;n<a;n++)(e=t[n])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Lt(e)}At.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Ot(t,e[n])},At.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Rt(t[e])};var Dt=V.optionMergeStrategies;function It(t,e){if(!e)return t;for(var n,a,r,i=dt?Reflect.ownKeys(e):Object.keys(e),s=0;s<i.length;s++)"__ob__"!==(n=i[s])&&(a=t[n],r=e[n],C(t,n)?a!==r&&u(a)&&u(r)&&It(a,r):$t(t,n,r));return t}function Mt(t,e,n){return n?function(){var a="function"==typeof e?e.call(n,n):e,r="function"==typeof t?t.call(n,n):t;return a?It(a,r):r}:e?t?function(){return It("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Nt(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}(n):n}function jt(t,e,n,a){var r=Object.create(t||null);return e?O(r,e):r}Dt.data=function(t,e,n){return n?Mt(t,e,n):e&&"function"!=typeof e?t:Mt(t,e)},U.forEach((function(t){Dt[t]=Nt})),B.forEach((function(t){Dt[t+"s"]=jt})),Dt.watch=function(t,e,n,a){if(t===rt&&(t=void 0),e===rt&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var r={};for(var i in O(r,t),e){var s=r[i],o=e[i];s&&!Array.isArray(s)&&(s=[s]),r[i]=s?s.concat(o):Array.isArray(o)?o:[o]}return r},Dt.props=Dt.methods=Dt.inject=Dt.computed=function(t,e,n,a){if(!t)return e;var r=Object.create(null);return O(r,t),e&&O(r,e),r},Dt.provide=Mt;var Ft=function(t,e){return void 0===e?t:e};function Bt(t,e,n){if("function"==typeof e&&(e=e.options),function(t,e){var n=t.props;if(n){var a,r,i={};if(Array.isArray(n))for(a=n.length;a--;)"string"==typeof(r=n[a])&&(i[x(r)]={type:null});else if(u(n))for(var s in n)r=n[s],i[x(s)]=u(r)?r:{type:r};t.props=i}}(e),function(t,e){var n=t.inject;if(n){var a=t.inject={};if(Array.isArray(n))for(var r=0;r<n.length;r++)a[n[r]]={from:n[r]};else if(u(n))for(var i in n){var s=n[i];a[i]=u(s)?O({from:i},s):{from:s}}}}(e),function(t){var e=t.directives;if(e)for(var n in e){var a=e[n];"function"==typeof a&&(e[n]={bind:a,update:a})}}(e),!e._base&&(e.extends&&(t=Bt(t,e.extends,n)),e.mixins))for(var a=0,r=e.mixins.length;a<r;a++)t=Bt(t,e.mixins[a],n);var i,s={};for(i in t)o(i);for(i in e)C(t,i)||o(i);function o(a){var r=Dt[a]||Ft;s[a]=r(t[a],e[a],n,a)}return s}function Ut(t,e,n,a){if("string"==typeof n){var r=t[e];if(C(r,n))return r[n];var i=x(n);if(C(r,i))return r[i];var s=S(i);return C(r,s)?r[s]:r[n]||r[i]||r[s]}}function Vt(t,e,n,a){var r=e[t],i=!C(n,t),s=n[t],o=Gt(Boolean,r.type);if(o>-1)if(i&&!C(r,"default"))s=!1;else if(""===s||s===T(t)){var c=Gt(String,r.type);(c<0||o<c)&&(s=!0)}if(void 0===s){s=function(t,e,n){if(!C(e,"default"))return;var a=e.default;0;if(t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n])return t._props[n];return"function"==typeof a&&"Function"!==Ht(e.type)?a.call(t):a}(a,r,t);var l=Et;Tt(!0),Rt(s),Tt(l)}return s}function Ht(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Zt(t,e){return Ht(t)===Ht(e)}function Gt(t,e){if(!Array.isArray(e))return Zt(e,t)?0:-1;for(var n=0,a=e.length;n<a;n++)if(Zt(e[n],t))return n;return-1}function zt(t,e,n){vt();try{if(e)for(var a=e;a=a.$parent;){var r=a.$options.errorCaptured;if(r)for(var i=0;i<r.length;i++)try{if(!1===r[i].call(a,t,e,n))return}catch(t){Kt(t,a,"errorCaptured hook")}}Kt(t,e,n)}finally{gt()}}function qt(t,e,n,a,r){var i;try{(i=n?t.apply(e,n):t.call(e))&&!i._isVue&&h(i)&&!i._handled&&(i.catch((function(t){return zt(t,a,r+" (Promise/async)")})),i._handled=!0)}catch(t){zt(t,a,r)}return i}function Kt(t,e,n){if(V.errorHandler)try{return V.errorHandler.call(null,t,e,n)}catch(e){e!==t&&Wt(e,null,"config.errorHandler")}Wt(t,e,n)}function Wt(t,e,n){if(!W&&!Y||"undefined"==typeof console)throw t;console.error(t)}var Yt,Xt=!1,Jt=[],Qt=!1;function te(){Qt=!1;var t=Jt.slice(0);Jt.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&lt(Promise)){var ee=Promise.resolve();Yt=function(){ee.then(te),nt&&setTimeout(L)},Xt=!0}else if(Q||"undefined"==typeof MutationObserver||!lt(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Yt="undefined"!=typeof setImmediate&&lt(setImmediate)?function(){setImmediate(te)}:function(){setTimeout(te,0)};else{var ne=1,ae=new MutationObserver(te),re=document.createTextNode(String(ne));ae.observe(re,{characterData:!0}),Yt=function(){ne=(ne+1)%2,re.data=String(ne)},Xt=!0}function ie(t,e){var n;if(Jt.push((function(){if(t)try{t.call(e)}catch(t){zt(t,e,"nextTick")}else n&&n(e)})),Qt||(Qt=!0,Yt()),!t&&"undefined"!=typeof Promise)return new Promise((function(t){n=t}))}var se=new ut;function oe(t){ce(t,se),se.clear()}function ce(t,e){var n,a,r=Array.isArray(t);if(!(!r&&!c(t)||Object.isFrozen(t)||t instanceof _t)){if(t.__ob__){var i=t.__ob__.dep.id;if(e.has(i))return;e.add(i)}if(r)for(n=t.length;n--;)ce(t[n],e);else for(n=(a=Object.keys(t)).length;n--;)ce(t[a[n]],e)}}var le=w((function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),a="!"===(t=n?t.slice(1):t).charAt(0);return{name:t=a?t.slice(1):t,once:n,capture:a,passive:e}}));function ue(t,e){function n(){var t=arguments,a=n.fns;if(!Array.isArray(a))return qt(a,null,arguments,e,"v-on handler");for(var r=a.slice(),i=0;i<r.length;i++)qt(r[i],null,t,e,"v-on handler")}return n.fns=t,n}function de(t,e,n,a,i,o){var c,l,u,d;for(c in t)l=t[c],u=e[c],d=le(c),r(l)||(r(u)?(r(l.fns)&&(l=t[c]=ue(l,o)),s(d.once)&&(l=t[c]=i(d.name,l,d.capture)),n(d.name,l,d.capture,d.passive,d.params)):l!==u&&(u.fns=l,t[c]=u));for(c in e)r(t[c])&&a((d=le(c)).name,e[c],d.capture)}function fe(t,e,n){var a;t instanceof _t&&(t=t.data.hook||(t.data.hook={}));var o=t[e];function c(){n.apply(this,arguments),y(a.fns,c)}r(o)?a=ue([c]):i(o.fns)&&s(o.merged)?(a=o).fns.push(c):a=ue([o,c]),a.merged=!0,t[e]=a}function he(t,e,n,a,r){if(i(e)){if(C(e,n))return t[n]=e[n],r||delete e[n],!0;if(C(e,a))return t[n]=e[a],r||delete e[a],!0}return!1}function pe(t){return o(t)?[Ct(t)]:Array.isArray(t)?ve(t):void 0}function me(t){return i(t)&&i(t.text)&&!1===t.isComment}function ve(t,e){var n,a,c,l,u=[];for(n=0;n<t.length;n++)r(a=t[n])||"boolean"==typeof a||(l=u[c=u.length-1],Array.isArray(a)?a.length>0&&(me((a=ve(a,(e||"")+"_"+n))[0])&&me(l)&&(u[c]=Ct(l.text+a[0].text),a.shift()),u.push.apply(u,a)):o(a)?me(l)?u[c]=Ct(l.text+a):""!==a&&u.push(Ct(a)):me(a)&&me(l)?u[c]=Ct(l.text+a.text):(s(t._isVList)&&i(a.tag)&&r(a.key)&&i(e)&&(a.key="__vlist"+e+"_"+n+"__"),u.push(a)));return u}function ge(t,e){if(t){for(var n=Object.create(null),a=dt?Reflect.ownKeys(t):Object.keys(t),r=0;r<a.length;r++){var i=a[r];if("__ob__"!==i){for(var s=t[i].from,o=e;o;){if(o._provided&&C(o._provided,s)){n[i]=o._provided[s];break}o=o.$parent}if(!o)if("default"in t[i]){var c=t[i].default;n[i]="function"==typeof c?c.call(e):c}else 0}}return n}}function _e(t,e){if(!t||!t.length)return{};for(var n={},a=0,r=t.length;a<r;a++){var i=t[a],s=i.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,i.context!==e&&i.fnContext!==e||!s||null==s.slot)(n.default||(n.default=[])).push(i);else{var o=s.slot,c=n[o]||(n[o]=[]);"template"===i.tag?c.push.apply(c,i.children||[]):c.push(i)}}for(var l in n)n[l].every(ye)&&delete n[l];return n}function ye(t){return t.isComment&&!t.asyncFactory||" "===t.text}function be(t,e,n){var r,i=Object.keys(e).length>0,s=t?!!t.$stable:!i,o=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(s&&n&&n!==a&&o===n.$key&&!i&&!n.$hasNormal)return n;for(var c in r={},t)t[c]&&"$"!==c[0]&&(r[c]=Ce(e,c,t[c]))}else r={};for(var l in e)l in r||(r[l]=we(e,l));return t&&Object.isExtensible(t)&&(t._normalized=r),G(r,"$stable",s),G(r,"$key",o),G(r,"$hasNormal",i),r}function Ce(t,e,n){var a=function(){var t=arguments.length?n.apply(null,arguments):n({});return(t=t&&"object"==typeof t&&!Array.isArray(t)?[t]:pe(t))&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:a,enumerable:!0,configurable:!0}),a}function we(t,e){return function(){return t[e]}}function ke(t,e){var n,a,r,s,o;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),a=0,r=t.length;a<r;a++)n[a]=e(t[a],a);else if("number"==typeof t)for(n=new Array(t),a=0;a<t;a++)n[a]=e(a+1,a);else if(c(t))if(dt&&t[Symbol.iterator]){n=[];for(var l=t[Symbol.iterator](),u=l.next();!u.done;)n.push(e(u.value,n.length)),u=l.next()}else for(s=Object.keys(t),n=new Array(s.length),a=0,r=s.length;a<r;a++)o=s[a],n[a]=e(t[o],o,a);return i(n)||(n=[]),n._isVList=!0,n}function xe(t,e,n,a){var r,i=this.$scopedSlots[t];i?(n=n||{},a&&(n=O(O({},a),n)),r=i(n)||e):r=this.$slots[t]||e;var s=n&&n.slot;return s?this.$createElement("template",{slot:s},r):r}function Se(t){return Ut(this.$options,"filters",t)||I}function Ee(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function Te(t,e,n,a,r){var i=V.keyCodes[e]||n;return r&&a&&!V.keyCodes[e]?Ee(r,a):i?Ee(i,t):a?T(a)!==e:void 0}function Ae(t,e,n,a,r){if(n)if(c(n)){var i;Array.isArray(n)&&(n=P(n));var s=function(s){if("class"===s||"style"===s||_(s))i=t;else{var o=t.attrs&&t.attrs.type;i=a||V.mustUseProp(e,o,s)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var c=x(s),l=T(s);c in i||l in i||(i[s]=n[s],r&&((t.on||(t.on={}))["update:"+s]=function(t){n[s]=t}))};for(var o in n)s(o)}else;return t}function Re(t,e){var n=this._staticTrees||(this._staticTrees=[]),a=n[t];return a&&!e||$e(a=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),a}function Oe(t,e,n){return $e(t,"__once__"+e+(n?"_"+n:""),!0),t}function $e(t,e,n){if(Array.isArray(t))for(var a=0;a<t.length;a++)t[a]&&"string"!=typeof t[a]&&Pe(t[a],e+"_"+a,n);else Pe(t,e,n)}function Pe(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function Le(t,e){if(e)if(u(e)){var n=t.on=t.on?O({},t.on):{};for(var a in e){var r=n[a],i=e[a];n[a]=r?[].concat(r,i):i}}else;return t}function De(t,e,n,a){e=e||{$stable:!n};for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?De(i,e,n):i&&(i.proxy&&(i.fn.proxy=!0),e[i.key]=i.fn)}return a&&(e.$key=a),e}function Ie(t,e){for(var n=0;n<e.length;n+=2){var a=e[n];"string"==typeof a&&a&&(t[e[n]]=e[n+1])}return t}function Me(t,e){return"string"==typeof t?e+t:t}function Ne(t){t._o=Oe,t._n=m,t._s=p,t._l=ke,t._t=xe,t._q=M,t._i=N,t._m=Re,t._f=Se,t._k=Te,t._b=Ae,t._v=Ct,t._e=bt,t._u=De,t._g=Le,t._d=Ie,t._p=Me}function je(t,e,n,r,i){var o,c=this,l=i.options;C(r,"_uid")?(o=Object.create(r))._original=r:(o=r,r=r._original);var u=s(l._compiled),d=!u;this.data=t,this.props=e,this.children=n,this.parent=r,this.listeners=t.on||a,this.injections=ge(l.inject,r),this.slots=function(){return c.$slots||be(t.scopedSlots,c.$slots=_e(n,r)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return be(t.scopedSlots,this.slots())}}),u&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=be(t.scopedSlots,this.$slots)),l._scopeId?this._c=function(t,e,n,a){var i=Ge(o,t,e,n,a,d);return i&&!Array.isArray(i)&&(i.fnScopeId=l._scopeId,i.fnContext=r),i}:this._c=function(t,e,n,a){return Ge(o,t,e,n,a,d)}}function Fe(t,e,n,a,r){var i=wt(t);return i.fnContext=n,i.fnOptions=a,e.slot&&((i.data||(i.data={})).slot=e.slot),i}function Be(t,e){for(var n in e)t[x(n)]=e[n]}Ne(je.prototype);var Ue={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;Ue.prepatch(n,n)}else{(t.componentInstance=function(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},a=t.data.inlineTemplate;i(a)&&(n.render=a.render,n.staticRenderFns=a.staticRenderFns);return new t.componentOptions.Ctor(n)}(t,nn)).$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions;!function(t,e,n,r,i){0;var s=r.data.scopedSlots,o=t.$scopedSlots,c=!!(s&&!s.$stable||o!==a&&!o.$stable||s&&t.$scopedSlots.$key!==s.$key),l=!!(i||t.$options._renderChildren||c);t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r);if(t.$options._renderChildren=i,t.$attrs=r.data.attrs||a,t.$listeners=n||a,e&&t.$options.props){Tt(!1);for(var u=t._props,d=t.$options._propKeys||[],f=0;f<d.length;f++){var h=d[f],p=t.$options.props;u[h]=Vt(h,p,e,t)}Tt(!0),t.$options.propsData=e}n=n||a;var m=t.$options._parentListeners;t.$options._parentListeners=n,en(t,n,m),l&&(t.$slots=_e(i,r.context),t.$forceUpdate());0}(e.componentInstance=t.componentInstance,n.propsData,n.listeners,e,n.children)},insert:function(t){var e,n=t.context,a=t.componentInstance;a._isMounted||(a._isMounted=!0,cn(a,"mounted")),t.data.keepAlive&&(n._isMounted?((e=a)._inactive=!1,un.push(e)):sn(a,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?on(e,!0):e.$destroy())}},Ve=Object.keys(Ue);function He(t,e,n,o,l){if(!r(t)){var u=n.$options._base;if(c(t)&&(t=u.extend(t)),"function"==typeof t){var d;if(r(t.cid)&&void 0===(t=function(t,e){if(s(t.error)&&i(t.errorComp))return t.errorComp;if(i(t.resolved))return t.resolved;var n=Ke;n&&i(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n);if(s(t.loading)&&i(t.loadingComp))return t.loadingComp;if(n&&!i(t.owners)){var a=t.owners=[n],o=!0,l=null,u=null;n.$on("hook:destroyed",(function(){return y(a,n)}));var d=function(t){for(var e=0,n=a.length;e<n;e++)a[e].$forceUpdate();t&&(a.length=0,null!==l&&(clearTimeout(l),l=null),null!==u&&(clearTimeout(u),u=null))},f=j((function(n){t.resolved=We(n,e),o?a.length=0:d(!0)})),p=j((function(e){i(t.errorComp)&&(t.error=!0,d(!0))})),m=t(f,p);return c(m)&&(h(m)?r(t.resolved)&&m.then(f,p):h(m.component)&&(m.component.then(f,p),i(m.error)&&(t.errorComp=We(m.error,e)),i(m.loading)&&(t.loadingComp=We(m.loading,e),0===m.delay?t.loading=!0:l=setTimeout((function(){l=null,r(t.resolved)&&r(t.error)&&(t.loading=!0,d(!1))}),m.delay||200)),i(m.timeout)&&(u=setTimeout((function(){u=null,r(t.resolved)&&p(null)}),m.timeout)))),o=!1,t.loading?t.loadingComp:t.resolved}}(d=t,u)))return function(t,e,n,a,r){var i=bt();return i.asyncFactory=t,i.asyncMeta={data:e,context:n,children:a,tag:r},i}(d,e,n,o,l);e=e||{},On(t),i(e.model)&&function(t,e){var n=t.model&&t.model.prop||"value",a=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var r=e.on||(e.on={}),s=r[a],o=e.model.callback;i(s)?(Array.isArray(s)?-1===s.indexOf(o):s!==o)&&(r[a]=[o].concat(s)):r[a]=o}(t.options,e);var f=function(t,e,n){var a=e.options.props;if(!r(a)){var s={},o=t.attrs,c=t.props;if(i(o)||i(c))for(var l in a){var u=T(l);he(s,c,l,u,!0)||he(s,o,l,u,!1)}return s}}(e,t);if(s(t.options.functional))return function(t,e,n,r,s){var o=t.options,c={},l=o.props;if(i(l))for(var u in l)c[u]=Vt(u,l,e||a);else i(n.attrs)&&Be(c,n.attrs),i(n.props)&&Be(c,n.props);var d=new je(n,c,s,r,t),f=o.render.call(null,d._c,d);if(f instanceof _t)return Fe(f,n,d.parent,o);if(Array.isArray(f)){for(var h=pe(f)||[],p=new Array(h.length),m=0;m<h.length;m++)p[m]=Fe(h[m],n,d.parent,o);return p}}(t,f,e,n,o);var p=e.on;if(e.on=e.nativeOn,s(t.options.abstract)){var m=e.slot;e={},m&&(e.slot=m)}!function(t){for(var e=t.hook||(t.hook={}),n=0;n<Ve.length;n++){var a=Ve[n],r=e[a],i=Ue[a];r===i||r&&r._merged||(e[a]=r?Ze(i,r):i)}}(e);var v=t.options.name||l;return new _t("vue-component-"+t.cid+(v?"-"+v:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:f,listeners:p,tag:l,children:o},d)}}}function Ze(t,e){var n=function(n,a){t(n,a),e(n,a)};return n._merged=!0,n}function Ge(t,e,n,a,r,l){return(Array.isArray(n)||o(n))&&(r=a,a=n,n=void 0),s(l)&&(r=2),function(t,e,n,a,r){if(i(n)&&i(n.__ob__))return bt();i(n)&&i(n.is)&&(e=n.is);if(!e)return bt();0;Array.isArray(a)&&"function"==typeof a[0]&&((n=n||{}).scopedSlots={default:a[0]},a.length=0);2===r?a=pe(a):1===r&&(a=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(a));var s,o;if("string"==typeof e){var l;o=t.$vnode&&t.$vnode.ns||V.getTagNamespace(e),s=V.isReservedTag(e)?new _t(V.parsePlatformTagName(e),n,a,void 0,void 0,t):n&&n.pre||!i(l=Ut(t.$options,"components",e))?new _t(e,n,a,void 0,void 0,t):He(l,n,t,a,e)}else s=He(e,n,t,a);return Array.isArray(s)?s:i(s)?(i(o)&&ze(s,o),i(n)&&function(t){c(t.style)&&oe(t.style);c(t.class)&&oe(t.class)}(n),s):bt()}(t,e,n,a,r)}function ze(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),i(t.children))for(var a=0,o=t.children.length;a<o;a++){var c=t.children[a];i(c.tag)&&(r(c.ns)||s(n)&&"svg"!==c.tag)&&ze(c,e,n)}}var qe,Ke=null;function We(t,e){return(t.__esModule||dt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),c(t)?e.extend(t):t}function Ye(t){return t.isComment&&t.asyncFactory}function Xe(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(i(n)&&(i(n.componentOptions)||Ye(n)))return n}}function Je(t,e){qe.$on(t,e)}function Qe(t,e){qe.$off(t,e)}function tn(t,e){var n=qe;return function a(){var r=e.apply(null,arguments);null!==r&&n.$off(t,a)}}function en(t,e,n){qe=t,de(e,n||{},Je,Qe,tn,t),qe=void 0}var nn=null;function an(t){var e=nn;return nn=t,function(){nn=e}}function rn(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function sn(t,e){if(e){if(t._directInactive=!1,rn(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)sn(t.$children[n]);cn(t,"activated")}}function on(t,e){if(!(e&&(t._directInactive=!0,rn(t))||t._inactive)){t._inactive=!0;for(var n=0;n<t.$children.length;n++)on(t.$children[n]);cn(t,"deactivated")}}function cn(t,e){vt();var n=t.$options[e],a=e+" hook";if(n)for(var r=0,i=n.length;r<i;r++)qt(n[r],t,null,t,a);t._hasHookEvent&&t.$emit("hook:"+e),gt()}var ln=[],un=[],dn={},fn=!1,hn=!1,pn=0;var mn=0,vn=Date.now;if(W&&!Q){var gn=window.performance;gn&&"function"==typeof gn.now&&vn()>document.createEvent("Event").timeStamp&&(vn=function(){return gn.now()})}function _n(){var t,e;for(mn=vn(),hn=!0,ln.sort((function(t,e){return t.id-e.id})),pn=0;pn<ln.length;pn++)(t=ln[pn]).before&&t.before(),e=t.id,dn[e]=null,t.run();var n=un.slice(),a=ln.slice();pn=ln.length=un.length=0,dn={},fn=hn=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,sn(t[e],!0)}(n),function(t){var e=t.length;for(;e--;){var n=t[e],a=n.vm;a._watcher===n&&a._isMounted&&!a._isDestroyed&&cn(a,"updated")}}(a),ct&&V.devtools&&ct.emit("flush")}var yn=0,bn=function(t,e,n,a,r){this.vm=t,r&&(t._watcher=this),t._watchers.push(this),a?(this.deep=!!a.deep,this.user=!!a.user,this.lazy=!!a.lazy,this.sync=!!a.sync,this.before=a.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++yn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ut,this.newDepIds=new ut,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(t){if(!z.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}(e),this.getter||(this.getter=L)),this.value=this.lazy?void 0:this.get()};bn.prototype.get=function(){var t;vt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;zt(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&oe(t),gt(),this.cleanupDeps()}return t},bn.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},bn.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},bn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==dn[e]){if(dn[e]=!0,hn){for(var n=ln.length-1;n>pn&&ln[n].id>t.id;)n--;ln.splice(n+1,0,t)}else ln.push(t);fn||(fn=!0,ie(_n))}}(this)},bn.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||c(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){zt(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},bn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},bn.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},bn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var Cn={enumerable:!0,configurable:!0,get:L,set:L};function wn(t,e,n){Cn.get=function(){return this[e][n]},Cn.set=function(t){this[e][n]=t},Object.defineProperty(t,n,Cn)}function kn(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var n=t.$options.propsData||{},a=t._props={},r=t.$options._propKeys=[];t.$parent&&Tt(!1);var i=function(i){r.push(i);var s=Vt(i,e,n,t);Ot(a,i,s),i in t||wn(t,"_props",i)};for(var s in e)i(s);Tt(!0)}(t,e.props),e.methods&&function(t,e){t.$options.props;for(var n in e)t[n]="function"!=typeof e[n]?L:A(e[n],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;u(e=t._data="function"==typeof e?function(t,e){vt();try{return t.call(e,e)}catch(t){return zt(t,e,"data()"),{}}finally{gt()}}(e,t):e||{})||(e={});var n=Object.keys(e),a=t.$options.props,r=(t.$options.methods,n.length);for(;r--;){var i=n[r];0,a&&C(a,i)||Z(i)||wn(t,"_data",i)}Rt(e,!0)}(t):Rt(t._data={},!0),e.computed&&function(t,e){var n=t._computedWatchers=Object.create(null),a=ot();for(var r in e){var i=e[r],s="function"==typeof i?i:i.get;0,a||(n[r]=new bn(t,s||L,L,xn)),r in t||Sn(t,r,i)}}(t,e.computed),e.watch&&e.watch!==rt&&function(t,e){for(var n in e){var a=e[n];if(Array.isArray(a))for(var r=0;r<a.length;r++)An(t,n,a[r]);else An(t,n,a)}}(t,e.watch)}var xn={lazy:!0};function Sn(t,e,n){var a=!ot();"function"==typeof n?(Cn.get=a?En(e):Tn(n),Cn.set=L):(Cn.get=n.get?a&&!1!==n.cache?En(e):Tn(n.get):L,Cn.set=n.set||L),Object.defineProperty(t,e,Cn)}function En(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),pt.target&&e.depend(),e.value}}function Tn(t){return function(){return t.call(this,this)}}function An(t,e,n,a){return u(n)&&(a=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,a)}var Rn=0;function On(t){var e=t.options;if(t.super){var n=On(t.super);if(n!==t.superOptions){t.superOptions=n;var a=function(t){var e,n=t.options,a=t.sealedOptions;for(var r in n)n[r]!==a[r]&&(e||(e={}),e[r]=n[r]);return e}(t);a&&O(t.extendOptions,a),(e=t.options=Bt(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function $n(t){this._init(t)}function Pn(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,a=n.cid,r=t._Ctor||(t._Ctor={});if(r[a])return r[a];var i=t.name||n.options.name;var s=function(t){this._init(t)};return(s.prototype=Object.create(n.prototype)).constructor=s,s.cid=e++,s.options=Bt(n.options,t),s.super=n,s.options.props&&function(t){var e=t.options.props;for(var n in e)wn(t.prototype,"_props",n)}(s),s.options.computed&&function(t){var e=t.options.computed;for(var n in e)Sn(t.prototype,n,e[n])}(s),s.extend=n.extend,s.mixin=n.mixin,s.use=n.use,B.forEach((function(t){s[t]=n[t]})),i&&(s.options.components[i]=s),s.superOptions=n.options,s.extendOptions=t,s.sealedOptions=O({},s.options),r[a]=s,s}}function Ln(t){return t&&(t.Ctor.options.name||t.tag)}function Dn(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!d(t)&&t.test(e)}function In(t,e){var n=t.cache,a=t.keys,r=t._vnode;for(var i in n){var s=n[i];if(s){var o=Ln(s.componentOptions);o&&!e(o)&&Mn(n,i,a,r)}}}function Mn(t,e,n,a){var r=t[e];!r||a&&r.tag===a.tag||r.componentInstance.$destroy(),t[e]=null,y(n,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=Rn++,e._isVue=!0,t&&t._isComponent?function(t,e){var n=t.$options=Object.create(t.constructor.options),a=e._parentVnode;n.parent=e.parent,n._parentVnode=a;var r=a.componentOptions;n.propsData=r.propsData,n._parentListeners=r.listeners,n._renderChildren=r.children,n._componentTag=r.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=Bt(On(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&en(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,r=n&&n.context;t.$slots=_e(e._renderChildren,r),t.$scopedSlots=a,t._c=function(e,n,a,r){return Ge(t,e,n,a,r,!1)},t.$createElement=function(e,n,a,r){return Ge(t,e,n,a,r,!0)};var i=n&&n.data;Ot(t,"$attrs",i&&i.attrs||a,null,!0),Ot(t,"$listeners",e._parentListeners||a,null,!0)}(e),cn(e,"beforeCreate"),function(t){var e=ge(t.$options.inject,t);e&&(Tt(!1),Object.keys(e).forEach((function(n){Ot(t,n,e[n])})),Tt(!0))}(e),kn(e),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(e),cn(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}($n),function(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=$t,t.prototype.$delete=Pt,t.prototype.$watch=function(t,e,n){var a=this;if(u(e))return An(a,t,e,n);(n=n||{}).user=!0;var r=new bn(a,t,e,n);if(n.immediate)try{e.call(a,r.value)}catch(t){zt(t,a,'callback for immediate watcher "'+r.expression+'"')}return function(){r.teardown()}}}($n),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){var a=this;if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)a.$on(t[r],n);else(a._events[t]||(a._events[t]=[])).push(n),e.test(t)&&(a._hasHookEvent=!0);return a},t.prototype.$once=function(t,e){var n=this;function a(){n.$off(t,a),e.apply(n,arguments)}return a.fn=e,n.$on(t,a),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var a=0,r=t.length;a<r;a++)n.$off(t[a],e);return n}var i,s=n._events[t];if(!s)return n;if(!e)return n._events[t]=null,n;for(var o=s.length;o--;)if((i=s[o])===e||i.fn===e){s.splice(o,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?R(n):n;for(var a=R(arguments,1),r='event handler for "'+t+'"',i=0,s=n.length;i<s;i++)qt(n[i],e,a,e,r)}return e}}($n),function(t){t.prototype._update=function(t,e){var n=this,a=n.$el,r=n._vnode,i=an(n);n._vnode=t,n.$el=r?n.__patch__(r,t):n.__patch__(n.$el,t,e,!1),i(),a&&(a.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){cn(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._watcher&&t._watcher.teardown();for(var n=t._watchers.length;n--;)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),cn(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}($n),function(t){Ne(t.prototype),t.prototype.$nextTick=function(t){return ie(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,a=n.render,r=n._parentVnode;r&&(e.$scopedSlots=be(r.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=r;try{Ke=e,t=a.call(e._renderProxy,e.$createElement)}catch(n){zt(n,e,"render"),t=e._vnode}finally{Ke=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof _t||(t=bt()),t.parent=r,t}}($n);var Nn=[String,RegExp,Array],jn={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Nn,exclude:Nn,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Mn(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",(function(e){In(t,(function(t){return Dn(e,t)}))})),this.$watch("exclude",(function(e){In(t,(function(t){return!Dn(e,t)}))}))},render:function(){var t=this.$slots.default,e=Xe(t),n=e&&e.componentOptions;if(n){var a=Ln(n),r=this.include,i=this.exclude;if(r&&(!a||!Dn(r,a))||i&&a&&Dn(i,a))return e;var s=this.cache,o=this.keys,c=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;s[c]?(e.componentInstance=s[c].componentInstance,y(o,c),o.push(c)):(s[c]=e,o.push(c),this.max&&o.length>parseInt(this.max)&&Mn(s,o[0],o,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return V}};Object.defineProperty(t,"config",e),t.util={warn:ft,extend:O,mergeOptions:Bt,defineReactive:Ot},t.set=$t,t.delete=Pt,t.nextTick=ie,t.observable=function(t){return Rt(t),t},t.options=Object.create(null),B.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,O(t.options.components,jn),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=R(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=Bt(this.options,t),this}}(t),Pn(t),function(t){B.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&u(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}(t)}($n),Object.defineProperty($n.prototype,"$isServer",{get:ot}),Object.defineProperty($n.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty($n,"FunctionalRenderContext",{value:je}),$n.version="2.6.10";var Fn=v("style,class"),Bn=v("input,textarea,option,select,progress"),Un=function(t,e,n){return"value"===n&&Bn(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Vn=v("contenteditable,draggable,spellcheck"),Hn=v("events,caret,typing,plaintext-only"),Zn=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Gn="http://www.w3.org/1999/xlink",zn=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},qn=function(t){return zn(t)?t.slice(6,t.length):""},Kn=function(t){return null==t||!1===t};function Wn(t){for(var e=t.data,n=t,a=t;i(a.componentInstance);)(a=a.componentInstance._vnode)&&a.data&&(e=Yn(a.data,e));for(;i(n=n.parent);)n&&n.data&&(e=Yn(e,n.data));return function(t,e){if(i(t)||i(e))return Xn(t,Jn(e));return""}(e.staticClass,e.class)}function Yn(t,e){return{staticClass:Xn(t.staticClass,e.staticClass),class:i(t.class)?[t.class,e.class]:e.class}}function Xn(t,e){return t?e?t+" "+e:t:e||""}function Jn(t){return Array.isArray(t)?function(t){for(var e,n="",a=0,r=t.length;a<r;a++)i(e=Jn(t[a]))&&""!==e&&(n&&(n+=" "),n+=e);return n}(t):c(t)?function(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}(t):"string"==typeof t?t:""}var Qn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ta=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ea=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),na=function(t){return ta(t)||ea(t)};function aa(t){return ea(t)?"svg":"math"===t?"math":void 0}var ra=Object.create(null);var ia=v("text,number,password,search,email,tel,url");function sa(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}var oa=Object.freeze({createElement:function(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(t,e){return document.createElementNS(Qn[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),ca={create:function(t,e){la(e)},update:function(t,e){t.data.ref!==e.data.ref&&(la(t,!0),la(e))},destroy:function(t){la(t,!0)}};function la(t,e){var n=t.data.ref;if(i(n)){var a=t.context,r=t.componentInstance||t.elm,s=a.$refs;e?Array.isArray(s[n])?y(s[n],r):s[n]===r&&(s[n]=void 0):t.data.refInFor?Array.isArray(s[n])?s[n].indexOf(r)<0&&s[n].push(r):s[n]=[r]:s[n]=r}}var ua=new _t("",{},[]),da=["create","activate","update","remove","destroy"];function fa(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&i(t.data)===i(e.data)&&function(t,e){if("input"!==t.tag)return!0;var n,a=i(n=t.data)&&i(n=n.attrs)&&n.type,r=i(n=e.data)&&i(n=n.attrs)&&n.type;return a===r||ia(a)&&ia(r)}(t,e)||s(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&r(e.asyncFactory.error))}function ha(t,e,n){var a,r,s={};for(a=e;a<=n;++a)i(r=t[a].key)&&(s[r]=a);return s}var pa={create:ma,update:ma,destroy:function(t){ma(t,ua)}};function ma(t,e){(t.data.directives||e.data.directives)&&function(t,e){var n,a,r,i=t===ua,s=e===ua,o=ga(t.data.directives,t.context),c=ga(e.data.directives,e.context),l=[],u=[];for(n in c)a=o[n],r=c[n],a?(r.oldValue=a.value,r.oldArg=a.arg,ya(r,"update",e,t),r.def&&r.def.componentUpdated&&u.push(r)):(ya(r,"bind",e,t),r.def&&r.def.inserted&&l.push(r));if(l.length){var d=function(){for(var n=0;n<l.length;n++)ya(l[n],"inserted",e,t)};i?fe(e,"insert",d):d()}u.length&&fe(e,"postpatch",(function(){for(var n=0;n<u.length;n++)ya(u[n],"componentUpdated",e,t)}));if(!i)for(n in o)c[n]||ya(o[n],"unbind",t,t,s)}(t,e)}var va=Object.create(null);function ga(t,e){var n,a,r=Object.create(null);if(!t)return r;for(n=0;n<t.length;n++)(a=t[n]).modifiers||(a.modifiers=va),r[_a(a)]=a,a.def=Ut(e.$options,"directives",a.name);return r}function _a(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function ya(t,e,n,a,r){var i=t.def&&t.def[e];if(i)try{i(n.elm,t,n,a,r)}catch(a){zt(a,n.context,"directive "+t.name+" "+e+" hook")}}var ba=[ca,pa];function Ca(t,e){var n=e.componentOptions;if(!(i(n)&&!1===n.Ctor.options.inheritAttrs||r(t.data.attrs)&&r(e.data.attrs))){var a,s,o=e.elm,c=t.data.attrs||{},l=e.data.attrs||{};for(a in i(l.__ob__)&&(l=e.data.attrs=O({},l)),l)s=l[a],c[a]!==s&&wa(o,a,s);for(a in(Q||et)&&l.value!==c.value&&wa(o,"value",l.value),c)r(l[a])&&(zn(a)?o.removeAttributeNS(Gn,qn(a)):Vn(a)||o.removeAttribute(a))}}function wa(t,e,n){t.tagName.indexOf("-")>-1?ka(t,e,n):Zn(e)?Kn(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Vn(e)?t.setAttribute(e,function(t,e){return Kn(e)||"false"===e?"false":"contenteditable"===t&&Hn(e)?e:"true"}(e,n)):zn(e)?Kn(n)?t.removeAttributeNS(Gn,qn(e)):t.setAttributeNS(Gn,e,n):ka(t,e,n)}function ka(t,e,n){if(Kn(n))t.removeAttribute(e);else{if(Q&&!tt&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var a=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",a)};t.addEventListener("input",a),t.__ieph=!0}t.setAttribute(e,n)}}var xa={create:Ca,update:Ca};function Sa(t,e){var n=e.elm,a=e.data,s=t.data;if(!(r(a.staticClass)&&r(a.class)&&(r(s)||r(s.staticClass)&&r(s.class)))){var o=Wn(e),c=n._transitionClasses;i(c)&&(o=Xn(o,Jn(c))),o!==n._prevClass&&(n.setAttribute("class",o),n._prevClass=o)}}var Ea,Ta,Aa,Ra,Oa,$a,Pa={create:Sa,update:Sa},La=/[\w).+\-_$\]]/;function Da(t){var e,n,a,r,i,s=!1,o=!1,c=!1,l=!1,u=0,d=0,f=0,h=0;for(a=0;a<t.length;a++)if(n=e,e=t.charCodeAt(a),s)39===e&&92!==n&&(s=!1);else if(o)34===e&&92!==n&&(o=!1);else if(c)96===e&&92!==n&&(c=!1);else if(l)47===e&&92!==n&&(l=!1);else if(124!==e||124===t.charCodeAt(a+1)||124===t.charCodeAt(a-1)||u||d||f){switch(e){case 34:o=!0;break;case 39:s=!0;break;case 96:c=!0;break;case 40:f++;break;case 41:f--;break;case 91:d++;break;case 93:d--;break;case 123:u++;break;case 125:u--}if(47===e){for(var p=a-1,m=void 0;p>=0&&" "===(m=t.charAt(p));p--);m&&La.test(m)||(l=!0)}}else void 0===r?(h=a+1,r=t.slice(0,a).trim()):v();function v(){(i||(i=[])).push(t.slice(h,a).trim()),h=a+1}if(void 0===r?r=t.slice(0,a).trim():0!==h&&v(),i)for(a=0;a<i.length;a++)r=Ia(r,i[a]);return r}function Ia(t,e){var n=e.indexOf("(");if(n<0)return'_f("'+e+'")('+t+")";var a=e.slice(0,n),r=e.slice(n+1);return'_f("'+a+'")('+t+(")"!==r?","+r:r)}function Ma(t,e){console.error("[Vue compiler]: "+t)}function Na(t,e){return t?t.map((function(t){return t[e]})).filter((function(t){return t})):[]}function ja(t,e,n,a,r){(t.props||(t.props=[])).push(qa({name:e,value:n,dynamic:r},a)),t.plain=!1}function Fa(t,e,n,a,r){(r?t.dynamicAttrs||(t.dynamicAttrs=[]):t.attrs||(t.attrs=[])).push(qa({name:e,value:n,dynamic:r},a)),t.plain=!1}function Ba(t,e,n,a){t.attrsMap[e]=n,t.attrsList.push(qa({name:e,value:n},a))}function Ua(t,e,n,a,r,i,s,o){(t.directives||(t.directives=[])).push(qa({name:e,rawName:n,value:a,arg:r,isDynamicArg:i,modifiers:s},o)),t.plain=!1}function Va(t,e,n){return n?"_p("+e+',"'+t+'")':t+e}function Ha(t,e,n,r,i,s,o,c){var l;(r=r||a).right?c?e="("+e+")==='click'?'contextmenu':("+e+")":"click"===e&&(e="contextmenu",delete r.right):r.middle&&(c?e="("+e+")==='click'?'mouseup':("+e+")":"click"===e&&(e="mouseup")),r.capture&&(delete r.capture,e=Va("!",e,c)),r.once&&(delete r.once,e=Va("~",e,c)),r.passive&&(delete r.passive,e=Va("&",e,c)),r.native?(delete r.native,l=t.nativeEvents||(t.nativeEvents={})):l=t.events||(t.events={});var u=qa({value:n.trim(),dynamic:c},o);r!==a&&(u.modifiers=r);var d=l[e];Array.isArray(d)?i?d.unshift(u):d.push(u):l[e]=d?i?[u,d]:[d,u]:u,t.plain=!1}function Za(t,e,n){var a=Ga(t,":"+e)||Ga(t,"v-bind:"+e);if(null!=a)return Da(a);if(!1!==n){var r=Ga(t,e);if(null!=r)return JSON.stringify(r)}}function Ga(t,e,n){var a;if(null!=(a=t.attrsMap[e]))for(var r=t.attrsList,i=0,s=r.length;i<s;i++)if(r[i].name===e){r.splice(i,1);break}return n&&delete t.attrsMap[e],a}function za(t,e){for(var n=t.attrsList,a=0,r=n.length;a<r;a++){var i=n[a];if(e.test(i.name))return n.splice(a,1),i}}function qa(t,e){return e&&(null!=e.start&&(t.start=e.start),null!=e.end&&(t.end=e.end)),t}function Ka(t,e,n){var a=n||{},r=a.number,i="$$v",s=i;a.trim&&(s="(typeof $$v === 'string'? $$v.trim(): $$v)"),r&&(s="_n("+s+")");var o=Wa(e,s);t.model={value:"("+e+")",expression:JSON.stringify(e),callback:"function ($$v) {"+o+"}"}}function Wa(t,e){var n=function(t){if(t=t.trim(),Ea=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<Ea-1)return(Ra=t.lastIndexOf("."))>-1?{exp:t.slice(0,Ra),key:'"'+t.slice(Ra+1)+'"'}:{exp:t,key:null};Ta=t,Ra=Oa=$a=0;for(;!Ja();)Qa(Aa=Xa())?er(Aa):91===Aa&&tr(Aa);return{exp:t.slice(0,Oa),key:t.slice(Oa+1,$a)}}(t);return null===n.key?t+"="+e:"$set("+n.exp+", "+n.key+", "+e+")"}function Xa(){return Ta.charCodeAt(++Ra)}function Ja(){return Ra>=Ea}function Qa(t){return 34===t||39===t}function tr(t){var e=1;for(Oa=Ra;!Ja();)if(Qa(t=Xa()))er(t);else if(91===t&&e++,93===t&&e--,0===e){$a=Ra;break}}function er(t){for(var e=t;!Ja()&&(t=Xa())!==e;);}var nr,ar="__r";function rr(t,e,n){var a=nr;return function r(){var i=e.apply(null,arguments);null!==i&&or(t,r,n,a)}}var ir=Xt&&!(at&&Number(at[1])<=53);function sr(t,e,n,a){if(ir){var r=mn,i=e;e=i._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=r||t.timeStamp<=0||t.target.ownerDocument!==document)return i.apply(this,arguments)}}nr.addEventListener(t,e,it?{capture:n,passive:a}:n)}function or(t,e,n,a){(a||nr).removeEventListener(t,e._wrapper||e,n)}function cr(t,e){if(!r(t.data.on)||!r(e.data.on)){var n=e.data.on||{},a=t.data.on||{};nr=e.elm,function(t){if(i(t.__r)){var e=Q?"change":"input";t[e]=[].concat(t.__r,t[e]||[]),delete t.__r}i(t.__c)&&(t.change=[].concat(t.__c,t.change||[]),delete t.__c)}(n),de(n,a,sr,or,rr,e.context),nr=void 0}}var lr,ur={create:cr,update:cr};function dr(t,e){if(!r(t.data.domProps)||!r(e.data.domProps)){var n,a,s=e.elm,o=t.data.domProps||{},c=e.data.domProps||{};for(n in i(c.__ob__)&&(c=e.data.domProps=O({},c)),o)n in c||(s[n]="");for(n in c){if(a=c[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),a===o[n])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===n&&"PROGRESS"!==s.tagName){s._value=a;var l=r(a)?"":String(a);fr(s,l)&&(s.value=l)}else if("innerHTML"===n&&ea(s.tagName)&&r(s.innerHTML)){(lr=lr||document.createElement("div")).innerHTML="<svg>"+a+"</svg>";for(var u=lr.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;u.firstChild;)s.appendChild(u.firstChild)}else if(a!==o[n])try{s[n]=a}catch(t){}}}}function fr(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}(t,e)||function(t,e){var n=t.value,a=t._vModifiers;if(i(a)){if(a.number)return m(n)!==m(e);if(a.trim)return n.trim()!==e.trim()}return n!==e}(t,e))}var hr={create:dr,update:dr},pr=w((function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach((function(t){if(t){var a=t.split(n);a.length>1&&(e[a[0].trim()]=a[1].trim())}})),e}));function mr(t){var e=vr(t.style);return t.staticStyle?O(t.staticStyle,e):e}function vr(t){return Array.isArray(t)?P(t):"string"==typeof t?pr(t):t}var gr,_r=/^--/,yr=/\s*!important$/,br=function(t,e,n){if(_r.test(e))t.style.setProperty(e,n);else if(yr.test(n))t.style.setProperty(T(e),n.replace(yr,""),"important");else{var a=wr(e);if(Array.isArray(n))for(var r=0,i=n.length;r<i;r++)t.style[a]=n[r];else t.style[a]=n}},Cr=["Webkit","Moz","ms"],wr=w((function(t){if(gr=gr||document.createElement("div").style,"filter"!==(t=x(t))&&t in gr)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<Cr.length;n++){var a=Cr[n]+e;if(a in gr)return a}}));function kr(t,e){var n=e.data,a=t.data;if(!(r(n.staticStyle)&&r(n.style)&&r(a.staticStyle)&&r(a.style))){var s,o,c=e.elm,l=a.staticStyle,u=a.normalizedStyle||a.style||{},d=l||u,f=vr(e.data.style)||{};e.data.normalizedStyle=i(f.__ob__)?O({},f):f;var h=function(t,e){var n,a={};if(e)for(var r=t;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(n=mr(r.data))&&O(a,n);(n=mr(t.data))&&O(a,n);for(var i=t;i=i.parent;)i.data&&(n=mr(i.data))&&O(a,n);return a}(e,!0);for(o in d)r(h[o])&&br(c,o,"");for(o in h)(s=h[o])!==d[o]&&br(c,o,null==s?"":s)}}var xr={create:kr,update:kr},Sr=/\s+/;function Er(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Sr).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Tr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Sr).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",a=" "+e+" ";n.indexOf(a)>=0;)n=n.replace(a," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function Ar(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&O(e,Rr(t.name||"v")),O(e,t),e}return"string"==typeof t?Rr(t):void 0}}var Rr=w((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),Or=W&&!tt,$r="transition",Pr="animation",Lr="transition",Dr="transitionend",Ir="animation",Mr="animationend";Or&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Lr="WebkitTransition",Dr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Ir="WebkitAnimation",Mr="webkitAnimationEnd"));var Nr=W?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function jr(t){Nr((function(){Nr(t)}))}function Fr(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Er(t,e))}function Br(t,e){t._transitionClasses&&y(t._transitionClasses,e),Tr(t,e)}function Ur(t,e,n){var a=Hr(t,e),r=a.type,i=a.timeout,s=a.propCount;if(!r)return n();var o=r===$r?Dr:Mr,c=0,l=function(){t.removeEventListener(o,u),n()},u=function(e){e.target===t&&++c>=s&&l()};setTimeout((function(){c<s&&l()}),i+1),t.addEventListener(o,u)}var Vr=/\b(transform|all)(,|$)/;function Hr(t,e){var n,a=window.getComputedStyle(t),r=(a[Lr+"Delay"]||"").split(", "),i=(a[Lr+"Duration"]||"").split(", "),s=Zr(r,i),o=(a[Ir+"Delay"]||"").split(", "),c=(a[Ir+"Duration"]||"").split(", "),l=Zr(o,c),u=0,d=0;return e===$r?s>0&&(n=$r,u=s,d=i.length):e===Pr?l>0&&(n=Pr,u=l,d=c.length):d=(n=(u=Math.max(s,l))>0?s>l?$r:Pr:null)?n===$r?i.length:c.length:0,{type:n,timeout:u,propCount:d,hasTransform:n===$r&&Vr.test(a[Lr+"Property"])}}function Zr(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return Gr(e)+Gr(t[n])})))}function Gr(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function zr(t,e){var n=t.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var a=Ar(t.data.transition);if(!r(a)&&!i(n._enterCb)&&1===n.nodeType){for(var s=a.css,o=a.type,l=a.enterClass,u=a.enterToClass,d=a.enterActiveClass,f=a.appearClass,h=a.appearToClass,p=a.appearActiveClass,v=a.beforeEnter,g=a.enter,_=a.afterEnter,y=a.enterCancelled,b=a.beforeAppear,C=a.appear,w=a.afterAppear,k=a.appearCancelled,x=a.duration,S=nn,E=nn.$vnode;E&&E.parent;)S=E.context,E=E.parent;var T=!S._isMounted||!t.isRootInsert;if(!T||C||""===C){var A=T&&f?f:l,R=T&&p?p:d,O=T&&h?h:u,$=T&&b||v,P=T&&"function"==typeof C?C:g,L=T&&w||_,D=T&&k||y,I=m(c(x)?x.enter:x);0;var M=!1!==s&&!tt,N=Wr(P),F=n._enterCb=j((function(){M&&(Br(n,O),Br(n,R)),F.cancelled?(M&&Br(n,A),D&&D(n)):L&&L(n),n._enterCb=null}));t.data.show||fe(t,"insert",(function(){var e=n.parentNode,a=e&&e._pending&&e._pending[t.key];a&&a.tag===t.tag&&a.elm._leaveCb&&a.elm._leaveCb(),P&&P(n,F)})),$&&$(n),M&&(Fr(n,A),Fr(n,R),jr((function(){Br(n,A),F.cancelled||(Fr(n,O),N||(Kr(I)?setTimeout(F,I):Ur(n,o,F)))}))),t.data.show&&(e&&e(),P&&P(n,F)),M||N||F()}}}function qr(t,e){var n=t.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var a=Ar(t.data.transition);if(r(a)||1!==n.nodeType)return e();if(!i(n._leaveCb)){var s=a.css,o=a.type,l=a.leaveClass,u=a.leaveToClass,d=a.leaveActiveClass,f=a.beforeLeave,h=a.leave,p=a.afterLeave,v=a.leaveCancelled,g=a.delayLeave,_=a.duration,y=!1!==s&&!tt,b=Wr(h),C=m(c(_)?_.leave:_);0;var w=n._leaveCb=j((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),y&&(Br(n,u),Br(n,d)),w.cancelled?(y&&Br(n,l),v&&v(n)):(e(),p&&p(n)),n._leaveCb=null}));g?g(k):k()}function k(){w.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),f&&f(n),y&&(Fr(n,l),Fr(n,d),jr((function(){Br(n,l),w.cancelled||(Fr(n,u),b||(Kr(C)?setTimeout(w,C):Ur(n,o,w)))}))),h&&h(n,w),y||b||w())}}function Kr(t){return"number"==typeof t&&!isNaN(t)}function Wr(t){if(r(t))return!1;var e=t.fns;return i(e)?Wr(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Yr(t,e){!0!==e.data.show&&zr(e)}var Xr=function(t){var e,n,a={},c=t.modules,l=t.nodeOps;for(e=0;e<da.length;++e)for(a[da[e]]=[],n=0;n<c.length;++n)i(c[n][da[e]])&&a[da[e]].push(c[n][da[e]]);function u(t){var e=l.parentNode(t);i(e)&&l.removeChild(e,t)}function d(t,e,n,r,o,c,u){if(i(t.elm)&&i(c)&&(t=c[u]=wt(t)),t.isRootInsert=!o,!function(t,e,n,r){var o=t.data;if(i(o)){var c=i(t.componentInstance)&&o.keepAlive;if(i(o=o.hook)&&i(o=o.init)&&o(t,!1),i(t.componentInstance))return f(t,e),h(n,t.elm,r),s(c)&&function(t,e,n,r){var s,o=t;for(;o.componentInstance;)if(i(s=(o=o.componentInstance._vnode).data)&&i(s=s.transition)){for(s=0;s<a.activate.length;++s)a.activate[s](ua,o);e.push(o);break}h(n,t.elm,r)}(t,e,n,r),!0}}(t,e,n,r)){var d=t.data,m=t.children,v=t.tag;i(v)?(t.elm=t.ns?l.createElementNS(t.ns,v):l.createElement(v,t),_(t),p(t,m,e),i(d)&&g(t,e),h(n,t.elm,r)):s(t.isComment)?(t.elm=l.createComment(t.text),h(n,t.elm,r)):(t.elm=l.createTextNode(t.text),h(n,t.elm,r))}}function f(t,e){i(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,m(t)?(g(t,e),_(t)):(la(t),e.push(t))}function h(t,e,n){i(t)&&(i(n)?l.parentNode(n)===t&&l.insertBefore(t,e,n):l.appendChild(t,e))}function p(t,e,n){if(Array.isArray(e)){0;for(var a=0;a<e.length;++a)d(e[a],n,t.elm,null,!0,e,a)}else o(t.text)&&l.appendChild(t.elm,l.createTextNode(String(t.text)))}function m(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return i(t.tag)}function g(t,n){for(var r=0;r<a.create.length;++r)a.create[r](ua,t);i(e=t.data.hook)&&(i(e.create)&&e.create(ua,t),i(e.insert)&&n.push(t))}function _(t){var e;if(i(e=t.fnScopeId))l.setStyleScope(t.elm,e);else for(var n=t;n;)i(e=n.context)&&i(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e),n=n.parent;i(e=nn)&&e!==t.context&&e!==t.fnContext&&i(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e)}function y(t,e,n,a,r,i){for(;a<=r;++a)d(n[a],i,t,e,!1,n,a)}function b(t){var e,n,r=t.data;if(i(r))for(i(e=r.hook)&&i(e=e.destroy)&&e(t),e=0;e<a.destroy.length;++e)a.destroy[e](t);if(i(e=t.children))for(n=0;n<t.children.length;++n)b(t.children[n])}function C(t,e,n,a){for(;n<=a;++n){var r=e[n];i(r)&&(i(r.tag)?(w(r),b(r)):u(r.elm))}}function w(t,e){if(i(e)||i(t.data)){var n,r=a.remove.length+1;for(i(e)?e.listeners+=r:e=function(t,e){function n(){0==--n.listeners&&u(t)}return n.listeners=e,n}(t.elm,r),i(n=t.componentInstance)&&i(n=n._vnode)&&i(n.data)&&w(n,e),n=0;n<a.remove.length;++n)a.remove[n](t,e);i(n=t.data.hook)&&i(n=n.remove)?n(t,e):e()}else u(t.elm)}function k(t,e,n,a){for(var r=n;r<a;r++){var s=e[r];if(i(s)&&fa(t,s))return r}}function x(t,e,n,o,c,u){if(t!==e){i(e.elm)&&i(o)&&(e=o[c]=wt(e));var f=e.elm=t.elm;if(s(t.isAsyncPlaceholder))i(e.asyncFactory.resolved)?T(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(s(e.isStatic)&&s(t.isStatic)&&e.key===t.key&&(s(e.isCloned)||s(e.isOnce)))e.componentInstance=t.componentInstance;else{var h,p=e.data;i(p)&&i(h=p.hook)&&i(h=h.prepatch)&&h(t,e);var v=t.children,g=e.children;if(i(p)&&m(e)){for(h=0;h<a.update.length;++h)a.update[h](t,e);i(h=p.hook)&&i(h=h.update)&&h(t,e)}r(e.text)?i(v)&&i(g)?v!==g&&function(t,e,n,a,s){var o,c,u,f=0,h=0,p=e.length-1,m=e[0],v=e[p],g=n.length-1,_=n[0],b=n[g],w=!s;for(;f<=p&&h<=g;)r(m)?m=e[++f]:r(v)?v=e[--p]:fa(m,_)?(x(m,_,a,n,h),m=e[++f],_=n[++h]):fa(v,b)?(x(v,b,a,n,g),v=e[--p],b=n[--g]):fa(m,b)?(x(m,b,a,n,g),w&&l.insertBefore(t,m.elm,l.nextSibling(v.elm)),m=e[++f],b=n[--g]):fa(v,_)?(x(v,_,a,n,h),w&&l.insertBefore(t,v.elm,m.elm),v=e[--p],_=n[++h]):(r(o)&&(o=ha(e,f,p)),r(c=i(_.key)?o[_.key]:k(_,e,f,p))?d(_,a,t,m.elm,!1,n,h):fa(u=e[c],_)?(x(u,_,a,n,h),e[c]=void 0,w&&l.insertBefore(t,u.elm,m.elm)):d(_,a,t,m.elm,!1,n,h),_=n[++h]);f>p?y(t,r(n[g+1])?null:n[g+1].elm,n,h,g,a):h>g&&C(0,e,f,p)}(f,v,g,n,u):i(g)?(i(t.text)&&l.setTextContent(f,""),y(f,null,g,0,g.length-1,n)):i(v)?C(0,v,0,v.length-1):i(t.text)&&l.setTextContent(f,""):t.text!==e.text&&l.setTextContent(f,e.text),i(p)&&i(h=p.hook)&&i(h=h.postpatch)&&h(t,e)}}}function S(t,e,n){if(s(n)&&i(t.parent))t.parent.data.pendingInsert=e;else for(var a=0;a<e.length;++a)e[a].data.hook.insert(e[a])}var E=v("attrs,class,staticClass,staticStyle,key");function T(t,e,n,a){var r,o=e.tag,c=e.data,l=e.children;if(a=a||c&&c.pre,e.elm=t,s(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(c)&&(i(r=c.hook)&&i(r=r.init)&&r(e,!0),i(r=e.componentInstance)))return f(e,n),!0;if(i(o)){if(i(l))if(t.hasChildNodes())if(i(r=c)&&i(r=r.domProps)&&i(r=r.innerHTML)){if(r!==t.innerHTML)return!1}else{for(var u=!0,d=t.firstChild,h=0;h<l.length;h++){if(!d||!T(d,l[h],n,a)){u=!1;break}d=d.nextSibling}if(!u||d)return!1}else p(e,l,n);if(i(c)){var m=!1;for(var v in c)if(!E(v)){m=!0,g(e,n);break}!m&&c.class&&oe(c.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,o){if(!r(e)){var c,u=!1,f=[];if(r(t))u=!0,d(e,f);else{var h=i(t.nodeType);if(!h&&fa(t,e))x(t,e,f,null,null,o);else{if(h){if(1===t.nodeType&&t.hasAttribute(F)&&(t.removeAttribute(F),n=!0),s(n)&&T(t,e,f))return S(e,f,!0),t;c=t,t=new _t(l.tagName(c).toLowerCase(),{},[],void 0,c)}var p=t.elm,v=l.parentNode(p);if(d(e,f,p._leaveCb?null:v,l.nextSibling(p)),i(e.parent))for(var g=e.parent,_=m(e);g;){for(var y=0;y<a.destroy.length;++y)a.destroy[y](g);if(g.elm=e.elm,_){for(var w=0;w<a.create.length;++w)a.create[w](ua,g);var k=g.data.hook.insert;if(k.merged)for(var E=1;E<k.fns.length;E++)k.fns[E]()}else la(g);g=g.parent}i(v)?C(0,[t],0,0):i(t.tag)&&b(t)}}return S(e,f,u),e.elm}i(t)&&b(t)}}({nodeOps:oa,modules:[xa,Pa,ur,hr,xr,W?{create:Yr,activate:Yr,remove:function(t,e){!0!==t.data.show?qr(t,e):e()}}:{}].concat(ba)});tt&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&ii(t,"input")}));var Jr={inserted:function(t,e,n,a){"select"===n.tag?(a.elm&&!a.elm._vOptions?fe(n,"postpatch",(function(){Jr.componentUpdated(t,e,n)})):Qr(t,e,n.context),t._vOptions=[].map.call(t.options,ni)):("textarea"===n.tag||ia(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",ai),t.addEventListener("compositionend",ri),t.addEventListener("change",ri),tt&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Qr(t,e,n.context);var a=t._vOptions,r=t._vOptions=[].map.call(t.options,ni);if(r.some((function(t,e){return!M(t,a[e])})))(t.multiple?e.value.some((function(t){return ei(t,r)})):e.value!==e.oldValue&&ei(e.value,r))&&ii(t,"change")}}};function Qr(t,e,n){ti(t,e,n),(Q||et)&&setTimeout((function(){ti(t,e,n)}),0)}function ti(t,e,n){var a=e.value,r=t.multiple;if(!r||Array.isArray(a)){for(var i,s,o=0,c=t.options.length;o<c;o++)if(s=t.options[o],r)i=N(a,ni(s))>-1,s.selected!==i&&(s.selected=i);else if(M(ni(s),a))return void(t.selectedIndex!==o&&(t.selectedIndex=o));r||(t.selectedIndex=-1)}}function ei(t,e){return e.every((function(e){return!M(e,t)}))}function ni(t){return"_value"in t?t._value:t.value}function ai(t){t.target.composing=!0}function ri(t){t.target.composing&&(t.target.composing=!1,ii(t.target,"input"))}function ii(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function si(t){return!t.componentInstance||t.data&&t.data.transition?t:si(t.componentInstance._vnode)}var oi={model:Jr,show:{bind:function(t,e,n){var a=e.value,r=(n=si(n)).data&&n.data.transition,i=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;a&&r?(n.data.show=!0,zr(n,(function(){t.style.display=i}))):t.style.display=a?i:"none"},update:function(t,e,n){var a=e.value;!a!=!e.oldValue&&((n=si(n)).data&&n.data.transition?(n.data.show=!0,a?zr(n,(function(){t.style.display=t.__vOriginalDisplay})):qr(n,(function(){t.style.display="none"}))):t.style.display=a?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,a,r){r||(t.style.display=t.__vOriginalDisplay)}}},ci={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function li(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?li(Xe(e.children)):t}function ui(t){var e={},n=t.$options;for(var a in n.propsData)e[a]=t[a];var r=n._parentListeners;for(var i in r)e[x(i)]=r[i];return e}function di(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var fi=function(t){return t.tag||Ye(t)},hi=function(t){return"show"===t.name},pi={name:"transition",props:ci,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(fi)).length){0;var a=this.mode;0;var r=n[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return r;var i=li(r);if(!i)return r;if(this._leaving)return di(t,r);var s="__transition-"+this._uid+"-";i.key=null==i.key?i.isComment?s+"comment":s+i.tag:o(i.key)?0===String(i.key).indexOf(s)?i.key:s+i.key:i.key;var c=(i.data||(i.data={})).transition=ui(this),l=this._vnode,u=li(l);if(i.data.directives&&i.data.directives.some(hi)&&(i.data.show=!0),u&&u.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(i,u)&&!Ye(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var d=u.data.transition=O({},c);if("out-in"===a)return this._leaving=!0,fe(d,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),di(t,r);if("in-out"===a){if(Ye(i))return l;var f,h=function(){f()};fe(c,"afterEnter",h),fe(c,"enterCancelled",h),fe(d,"delayLeave",(function(t){f=t}))}}return r}}},mi=O({tag:String,moveClass:String},ci);function vi(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function gi(t){t.data.newPos=t.elm.getBoundingClientRect()}function _i(t){var e=t.data.pos,n=t.data.newPos,a=e.left-n.left,r=e.top-n.top;if(a||r){t.data.moved=!0;var i=t.elm.style;i.transform=i.WebkitTransform="translate("+a+"px,"+r+"px)",i.transitionDuration="0s"}}delete mi.mode;var yi={Transition:pi,TransitionGroup:{props:mi,beforeMount:function(){var t=this,e=this._update;this._update=function(n,a){var r=an(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,r(),e.call(t,n,a)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),a=this.prevChildren=this.children,r=this.$slots.default||[],i=this.children=[],s=ui(this),o=0;o<r.length;o++){var c=r[o];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))i.push(c),n[c.key]=c,(c.data||(c.data={})).transition=s;else;}if(a){for(var l=[],u=[],d=0;d<a.length;d++){var f=a[d];f.data.transition=s,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?l.push(f):u.push(f)}this.kept=t(e,null,l),this.removed=u}return t(e,null,i)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(vi),t.forEach(gi),t.forEach(_i),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,a=n.style;Fr(n,e),a.transform=a.WebkitTransform=a.transitionDuration="",n.addEventListener(Dr,n._moveCb=function t(a){a&&a.target!==n||a&&!/transform$/.test(a.propertyName)||(n.removeEventListener(Dr,t),n._moveCb=null,Br(n,e))})}})))},methods:{hasMove:function(t,e){if(!Or)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){Tr(n,t)})),Er(n,e),n.style.display="none",this.$el.appendChild(n);var a=Hr(n);return this.$el.removeChild(n),this._hasMove=a.hasTransform}}}};$n.config.mustUseProp=Un,$n.config.isReservedTag=na,$n.config.isReservedAttr=Fn,$n.config.getTagNamespace=aa,$n.config.isUnknownElement=function(t){if(!W)return!0;if(na(t))return!1;if(t=t.toLowerCase(),null!=ra[t])return ra[t];var e=document.createElement(t);return t.indexOf("-")>-1?ra[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:ra[t]=/HTMLUnknownElement/.test(e.toString())},O($n.options.directives,oi),O($n.options.components,yi),$n.prototype.__patch__=W?Xr:L,$n.prototype.$mount=function(t,e){return function(t,e,n){var a;return t.$el=e,t.$options.render||(t.$options.render=bt),cn(t,"beforeMount"),a=function(){t._update(t._render(),n)},new bn(t,a,L,{before:function(){t._isMounted&&!t._isDestroyed&&cn(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,cn(t,"mounted")),t}(this,t=t&&W?sa(t):void 0,e)},W&&setTimeout((function(){V.devtools&&ct&&ct.emit("init",$n)}),0);var bi=/\{\{((?:.|\r?\n)+?)\}\}/g,Ci=/[-.*+?^${}()|[\]\/\\]/g,wi=w((function(t){var e=t[0].replace(Ci,"\\$&"),n=t[1].replace(Ci,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+n,"g")}));var ki={staticKeys:["staticClass"],transformNode:function(t,e){e.warn;var n=Ga(t,"class");n&&(t.staticClass=JSON.stringify(n));var a=Za(t,"class",!1);a&&(t.classBinding=a)},genData:function(t){var e="";return t.staticClass&&(e+="staticClass:"+t.staticClass+","),t.classBinding&&(e+="class:"+t.classBinding+","),e}};var xi,Si={staticKeys:["staticStyle"],transformNode:function(t,e){e.warn;var n=Ga(t,"style");n&&(t.staticStyle=JSON.stringify(pr(n)));var a=Za(t,"style",!1);a&&(t.styleBinding=a)},genData:function(t){var e="";return t.staticStyle&&(e+="staticStyle:"+t.staticStyle+","),t.styleBinding&&(e+="style:("+t.styleBinding+"),"),e}},Ei=function(t){return(xi=xi||document.createElement("div")).innerHTML=t,xi.textContent},Ti=v("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Ai=v("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),Ri=v("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),Oi=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,$i=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Pi="[a-zA-Z_][\\-\\.0-9_a-zA-Z"+H.source+"]*",Li="((?:"+Pi+"\\:)?"+Pi+")",Di=new RegExp("^<"+Li),Ii=/^\s*(\/?)>/,Mi=new RegExp("^<\\/"+Li+"[^>]*>"),Ni=/^<!DOCTYPE [^>]+>/i,ji=/^<!\--/,Fi=/^<!\[/,Bi=v("script,style,textarea",!0),Ui={},Vi={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},Hi=/&(?:lt|gt|quot|amp|#39);/g,Zi=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,Gi=v("pre,textarea",!0),zi=function(t,e){return t&&Gi(t)&&"\n"===e[0]};function qi(t,e){var n=e?Zi:Hi;return t.replace(n,(function(t){return Vi[t]}))}var Ki,Wi,Yi,Xi,Ji,Qi,ts,es,ns=/^@|^v-on:/,as=/^v-|^@|^:/,rs=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,is=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,ss=/^\(|\)$/g,os=/^\[.*\]$/,cs=/:(.*)$/,ls=/^:|^\.|^v-bind:/,us=/\.[^.\]]+(?=[^\]]*$)/g,ds=/^v-slot(:|$)|^#/,fs=/[\r\n]/,hs=/\s+/g,ps=w(Ei),ms="_empty_";function vs(t,e,n){return{type:1,tag:t,attrsList:e,attrsMap:ks(e),rawAttrsMap:{},parent:n,children:[]}}function gs(t,e){Ki=e.warn||Ma,Qi=e.isPreTag||D,ts=e.mustUseProp||D,es=e.getTagNamespace||D;var n=e.isReservedTag||D;(function(t){return!!t.component||!n(t.tag)}),Yi=Na(e.modules,"transformNode"),Xi=Na(e.modules,"preTransformNode"),Ji=Na(e.modules,"postTransformNode"),Wi=e.delimiters;var a,r,i=[],s=!1!==e.preserveWhitespace,o=e.whitespace,c=!1,l=!1;function u(t){if(d(t),c||t.processed||(t=_s(t,e)),i.length||t===a||a.if&&(t.elseif||t.else)&&bs(a,{exp:t.elseif,block:t}),r&&!t.forbidden)if(t.elseif||t.else)s=t,(o=function(t){for(var e=t.length;e--;){if(1===t[e].type)return t[e];t.pop()}}(r.children))&&o.if&&bs(o,{exp:s.elseif,block:s});else{if(t.slotScope){var n=t.slotTarget||'"default"';(r.scopedSlots||(r.scopedSlots={}))[n]=t}r.children.push(t),t.parent=r}var s,o;t.children=t.children.filter((function(t){return!t.slotScope})),d(t),t.pre&&(c=!1),Qi(t.tag)&&(l=!1);for(var u=0;u<Ji.length;u++)Ji[u](t,e)}function d(t){if(!l)for(var e;(e=t.children[t.children.length-1])&&3===e.type&&" "===e.text;)t.children.pop()}return function(t,e){for(var n,a,r=[],i=e.expectHTML,s=e.isUnaryTag||D,o=e.canBeLeftOpenTag||D,c=0;t;){if(n=t,a&&Bi(a)){var l=0,u=a.toLowerCase(),d=Ui[u]||(Ui[u]=new RegExp("([\\s\\S]*?)(</"+u+"[^>]*>)","i")),f=t.replace(d,(function(t,n,a){return l=a.length,Bi(u)||"noscript"===u||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),zi(u,n)&&(n=n.slice(1)),e.chars&&e.chars(n),""}));c+=t.length-f.length,t=f,E(u,c-l,c)}else{var h=t.indexOf("<");if(0===h){if(ji.test(t)){var p=t.indexOf("--\x3e");if(p>=0){e.shouldKeepComment&&e.comment(t.substring(4,p),c,c+p+3),k(p+3);continue}}if(Fi.test(t)){var m=t.indexOf("]>");if(m>=0){k(m+2);continue}}var v=t.match(Ni);if(v){k(v[0].length);continue}var g=t.match(Mi);if(g){var _=c;k(g[0].length),E(g[1],_,c);continue}var y=x();if(y){S(y),zi(y.tagName,t)&&k(1);continue}}var b=void 0,C=void 0,w=void 0;if(h>=0){for(C=t.slice(h);!(Mi.test(C)||Di.test(C)||ji.test(C)||Fi.test(C)||(w=C.indexOf("<",1))<0);)h+=w,C=t.slice(h);b=t.substring(0,h)}h<0&&(b=t),b&&k(b.length),e.chars&&b&&e.chars(b,c-b.length,c)}if(t===n){e.chars&&e.chars(t);break}}function k(e){c+=e,t=t.substring(e)}function x(){var e=t.match(Di);if(e){var n,a,r={tagName:e[1],attrs:[],start:c};for(k(e[0].length);!(n=t.match(Ii))&&(a=t.match($i)||t.match(Oi));)a.start=c,k(a[0].length),a.end=c,r.attrs.push(a);if(n)return r.unarySlash=n[1],k(n[0].length),r.end=c,r}}function S(t){var n=t.tagName,c=t.unarySlash;i&&("p"===a&&Ri(n)&&E(a),o(n)&&a===n&&E(n));for(var l=s(n)||!!c,u=t.attrs.length,d=new Array(u),f=0;f<u;f++){var h=t.attrs[f],p=h[3]||h[4]||h[5]||"",m="a"===n&&"href"===h[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;d[f]={name:h[1],value:qi(p,m)}}l||(r.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:d,start:t.start,end:t.end}),a=n),e.start&&e.start(n,d,l,t.start,t.end)}function E(t,n,i){var s,o;if(null==n&&(n=c),null==i&&(i=c),t)for(o=t.toLowerCase(),s=r.length-1;s>=0&&r[s].lowerCasedTag!==o;s--);else s=0;if(s>=0){for(var l=r.length-1;l>=s;l--)e.end&&e.end(r[l].tag,n,i);r.length=s,a=s&&r[s-1].tag}else"br"===o?e.start&&e.start(t,[],!0,n,i):"p"===o&&(e.start&&e.start(t,[],!1,n,i),e.end&&e.end(t,n,i))}E()}(t,{warn:Ki,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,outputSourceRange:e.outputSourceRange,start:function(t,n,s,o,d){var f=r&&r.ns||es(t);Q&&"svg"===f&&(n=function(t){for(var e=[],n=0;n<t.length;n++){var a=t[n];xs.test(a.name)||(a.name=a.name.replace(Ss,""),e.push(a))}return e}(n));var h,p=vs(t,n,r);f&&(p.ns=f),"style"!==(h=p).tag&&("script"!==h.tag||h.attrsMap.type&&"text/javascript"!==h.attrsMap.type)||ot()||(p.forbidden=!0);for(var m=0;m<Xi.length;m++)p=Xi[m](p,e)||p;c||(!function(t){null!=Ga(t,"v-pre")&&(t.pre=!0)}(p),p.pre&&(c=!0)),Qi(p.tag)&&(l=!0),c?function(t){var e=t.attrsList,n=e.length;if(n)for(var a=t.attrs=new Array(n),r=0;r<n;r++)a[r]={name:e[r].name,value:JSON.stringify(e[r].value)},null!=e[r].start&&(a[r].start=e[r].start,a[r].end=e[r].end);else t.pre||(t.plain=!0)}(p):p.processed||(ys(p),function(t){var e=Ga(t,"v-if");if(e)t.if=e,bs(t,{exp:e,block:t});else{null!=Ga(t,"v-else")&&(t.else=!0);var n=Ga(t,"v-else-if");n&&(t.elseif=n)}}(p),function(t){null!=Ga(t,"v-once")&&(t.once=!0)}(p)),a||(a=p),s?u(p):(r=p,i.push(p))},end:function(t,e,n){var a=i[i.length-1];i.length-=1,r=i[i.length-1],u(a)},chars:function(t,e,n){if(r&&(!Q||"textarea"!==r.tag||r.attrsMap.placeholder!==t)){var a,i,u,d=r.children;if(t=l||t.trim()?"script"===(a=r).tag||"style"===a.tag?t:ps(t):d.length?o?"condense"===o&&fs.test(t)?"":" ":s?" ":"":"")l||"condense"!==o||(t=t.replace(hs," ")),!c&&" "!==t&&(i=function(t,e){var n=e?wi(e):bi;if(n.test(t)){for(var a,r,i,s=[],o=[],c=n.lastIndex=0;a=n.exec(t);){(r=a.index)>c&&(o.push(i=t.slice(c,r)),s.push(JSON.stringify(i)));var l=Da(a[1].trim());s.push("_s("+l+")"),o.push({"@binding":l}),c=r+a[0].length}return c<t.length&&(o.push(i=t.slice(c)),s.push(JSON.stringify(i))),{expression:s.join("+"),tokens:o}}}(t,Wi))?u={type:2,expression:i.expression,tokens:i.tokens,text:t}:" "===t&&d.length&&" "===d[d.length-1].text||(u={type:3,text:t}),u&&d.push(u)}},comment:function(t,e,n){if(r){var a={type:3,text:t,isComment:!0};0,r.children.push(a)}}}),a}function _s(t,e){var n;!function(t){var e=Za(t,"key");if(e){t.key=e}}(t),t.plain=!t.key&&!t.scopedSlots&&!t.attrsList.length,function(t){var e=Za(t,"ref");e&&(t.ref=e,t.refInFor=function(t){var e=t;for(;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}(t))}(t),function(t){var e;"template"===t.tag?(e=Ga(t,"scope"),t.slotScope=e||Ga(t,"slot-scope")):(e=Ga(t,"slot-scope"))&&(t.slotScope=e);var n=Za(t,"slot");n&&(t.slotTarget='""'===n?'"default"':n,t.slotTargetDynamic=!(!t.attrsMap[":slot"]&&!t.attrsMap["v-bind:slot"]),"template"===t.tag||t.slotScope||Fa(t,"slot",n,function(t,e){return t.rawAttrsMap[":"+e]||t.rawAttrsMap["v-bind:"+e]||t.rawAttrsMap[e]}(t,"slot")));if("template"===t.tag){var a=za(t,ds);if(a){0;var r=Cs(a),i=r.name,s=r.dynamic;t.slotTarget=i,t.slotTargetDynamic=s,t.slotScope=a.value||ms}}else{var o=za(t,ds);if(o){0;var c=t.scopedSlots||(t.scopedSlots={}),l=Cs(o),u=l.name,d=l.dynamic,f=c[u]=vs("template",[],t);f.slotTarget=u,f.slotTargetDynamic=d,f.children=t.children.filter((function(t){if(!t.slotScope)return t.parent=f,!0})),f.slotScope=o.value||ms,t.children=[],t.plain=!1}}}(t),"slot"===(n=t).tag&&(n.slotName=Za(n,"name")),function(t){var e;(e=Za(t,"is"))&&(t.component=e);null!=Ga(t,"inline-template")&&(t.inlineTemplate=!0)}(t);for(var a=0;a<Yi.length;a++)t=Yi[a](t,e)||t;return function(t){var e,n,a,r,i,s,o,c,l=t.attrsList;for(e=0,n=l.length;e<n;e++){if(a=r=l[e].name,i=l[e].value,as.test(a))if(t.hasBindings=!0,(s=ws(a.replace(as,"")))&&(a=a.replace(us,"")),ls.test(a))a=a.replace(ls,""),i=Da(i),(c=os.test(a))&&(a=a.slice(1,-1)),s&&(s.prop&&!c&&"innerHtml"===(a=x(a))&&(a="innerHTML"),s.camel&&!c&&(a=x(a)),s.sync&&(o=Wa(i,"$event"),c?Ha(t,'"update:"+('+a+")",o,null,!1,0,l[e],!0):(Ha(t,"update:"+x(a),o,null,!1,0,l[e]),T(a)!==x(a)&&Ha(t,"update:"+T(a),o,null,!1,0,l[e])))),s&&s.prop||!t.component&&ts(t.tag,t.attrsMap.type,a)?ja(t,a,i,l[e],c):Fa(t,a,i,l[e],c);else if(ns.test(a))a=a.replace(ns,""),(c=os.test(a))&&(a=a.slice(1,-1)),Ha(t,a,i,s,!1,0,l[e],c);else{var u=(a=a.replace(as,"")).match(cs),d=u&&u[1];c=!1,d&&(a=a.slice(0,-(d.length+1)),os.test(d)&&(d=d.slice(1,-1),c=!0)),Ua(t,a,r,i,d,c,s,l[e])}else Fa(t,a,JSON.stringify(i),l[e]),!t.component&&"muted"===a&&ts(t.tag,t.attrsMap.type,a)&&ja(t,a,"true",l[e])}}(t),t}function ys(t){var e;if(e=Ga(t,"v-for")){var n=function(t){var e=t.match(rs);if(!e)return;var n={};n.for=e[2].trim();var a=e[1].trim().replace(ss,""),r=a.match(is);r?(n.alias=a.replace(is,"").trim(),n.iterator1=r[1].trim(),r[2]&&(n.iterator2=r[2].trim())):n.alias=a;return n}(e);n&&O(t,n)}}function bs(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function Cs(t){var e=t.name.replace(ds,"");return e||"#"!==t.name[0]&&(e="default"),os.test(e)?{name:e.slice(1,-1),dynamic:!0}:{name:'"'+e+'"',dynamic:!1}}function ws(t){var e=t.match(us);if(e){var n={};return e.forEach((function(t){n[t.slice(1)]=!0})),n}}function ks(t){for(var e={},n=0,a=t.length;n<a;n++)e[t[n].name]=t[n].value;return e}var xs=/^xmlns:NS\d+/,Ss=/^NS\d+:/;function Es(t){return vs(t.tag,t.attrsList.slice(),t.parent)}var Ts=[ki,Si,{preTransformNode:function(t,e){if("input"===t.tag){var n,a=t.attrsMap;if(!a["v-model"])return;if((a[":type"]||a["v-bind:type"])&&(n=Za(t,"type")),a.type||n||!a["v-bind"]||(n="("+a["v-bind"]+").type"),n){var r=Ga(t,"v-if",!0),i=r?"&&("+r+")":"",s=null!=Ga(t,"v-else",!0),o=Ga(t,"v-else-if",!0),c=Es(t);ys(c),Ba(c,"type","checkbox"),_s(c,e),c.processed=!0,c.if="("+n+")==='checkbox'"+i,bs(c,{exp:c.if,block:c});var l=Es(t);Ga(l,"v-for",!0),Ba(l,"type","radio"),_s(l,e),bs(c,{exp:"("+n+")==='radio'"+i,block:l});var u=Es(t);return Ga(u,"v-for",!0),Ba(u,":type",n),_s(u,e),bs(c,{exp:r,block:u}),s?c.else=!0:o&&(c.elseif=o),c}}}}];var As,Rs,Os={expectHTML:!0,modules:Ts,directives:{model:function(t,e,n){n;var a=e.value,r=e.modifiers,i=t.tag,s=t.attrsMap.type;if(t.component)return Ka(t,a,r),!1;if("select"===i)!function(t,e,n){var a='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(n&&n.number?"_n(val)":"val")+"});";a=a+" "+Wa(e,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),Ha(t,"change",a,null,!0)}(t,a,r);else if("input"===i&&"checkbox"===s)!function(t,e,n){var a=n&&n.number,r=Za(t,"value")||"null",i=Za(t,"true-value")||"true",s=Za(t,"false-value")||"false";ja(t,"checked","Array.isArray("+e+")?_i("+e+","+r+")>-1"+("true"===i?":("+e+")":":_q("+e+","+i+")")),Ha(t,"change","var $$a="+e+",$$el=$event.target,$$c=$$el.checked?("+i+"):("+s+");if(Array.isArray($$a)){var $$v="+(a?"_n("+r+")":r)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Wa(e,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Wa(e,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Wa(e,"$$c")+"}",null,!0)}(t,a,r);else if("input"===i&&"radio"===s)!function(t,e,n){var a=n&&n.number,r=Za(t,"value")||"null";ja(t,"checked","_q("+e+","+(r=a?"_n("+r+")":r)+")"),Ha(t,"change",Wa(e,r),null,!0)}(t,a,r);else if("input"===i||"textarea"===i)!function(t,e,n){var a=t.attrsMap.type;0;var r=n||{},i=r.lazy,s=r.number,o=r.trim,c=!i&&"range"!==a,l=i?"change":"range"===a?ar:"input",u="$event.target.value";o&&(u="$event.target.value.trim()");s&&(u="_n("+u+")");var d=Wa(e,u);c&&(d="if($event.target.composing)return;"+d);ja(t,"value","("+e+")"),Ha(t,l,d,null,!0),(o||s)&&Ha(t,"blur","$forceUpdate()")}(t,a,r);else{if(!V.isReservedTag(i))return Ka(t,a,r),!1}return!0},text:function(t,e){e.value&&ja(t,"textContent","_s("+e.value+")",e)},html:function(t,e){e.value&&ja(t,"innerHTML","_s("+e.value+")",e)}},isPreTag:function(t){return"pre"===t},isUnaryTag:Ti,mustUseProp:Un,canBeLeftOpenTag:Ai,isReservedTag:na,getTagNamespace:aa,staticKeys:function(t){return t.reduce((function(t,e){return t.concat(e.staticKeys||[])}),[]).join(",")}(Ts)},$s=w((function(t){return v("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(t?","+t:""))}));function Ps(t,e){t&&(As=$s(e.staticKeys||""),Rs=e.isReservedTag||D,Ls(t),Ds(t,!1))}function Ls(t){if(t.static=function(t){if(2===t.type)return!1;if(3===t.type)return!0;return!(!t.pre&&(t.hasBindings||t.if||t.for||g(t.tag)||!Rs(t.tag)||function(t){for(;t.parent;){if("template"!==(t=t.parent).tag)return!1;if(t.for)return!0}return!1}(t)||!Object.keys(t).every(As)))}(t),1===t.type){if(!Rs(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var e=0,n=t.children.length;e<n;e++){var a=t.children[e];Ls(a),a.static||(t.static=!1)}if(t.ifConditions)for(var r=1,i=t.ifConditions.length;r<i;r++){var s=t.ifConditions[r].block;Ls(s),s.static||(t.static=!1)}}}function Ds(t,e){if(1===t.type){if((t.static||t.once)&&(t.staticInFor=e),t.static&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var n=0,a=t.children.length;n<a;n++)Ds(t.children[n],e||!!t.for);if(t.ifConditions)for(var r=1,i=t.ifConditions.length;r<i;r++)Ds(t.ifConditions[r].block,e)}}var Is=/^([\w$_]+|\([^)]*?\))\s*=>|^function\s*(?:[\w$]+)?\s*\(/,Ms=/\([^)]*?\);*$/,Ns=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,js={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Fs={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},Bs=function(t){return"if("+t+")return null;"},Us={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Bs("$event.target !== $event.currentTarget"),ctrl:Bs("!$event.ctrlKey"),shift:Bs("!$event.shiftKey"),alt:Bs("!$event.altKey"),meta:Bs("!$event.metaKey"),left:Bs("'button' in $event && $event.button !== 0"),middle:Bs("'button' in $event && $event.button !== 1"),right:Bs("'button' in $event && $event.button !== 2")};function Vs(t,e){var n=e?"nativeOn:":"on:",a="",r="";for(var i in t){var s=Hs(t[i]);t[i]&&t[i].dynamic?r+=i+","+s+",":a+='"'+i+'":'+s+","}return a="{"+a.slice(0,-1)+"}",r?n+"_d("+a+",["+r.slice(0,-1)+"])":n+a}function Hs(t){if(!t)return"function(){}";if(Array.isArray(t))return"["+t.map((function(t){return Hs(t)})).join(",")+"]";var e=Ns.test(t.value),n=Is.test(t.value),a=Ns.test(t.value.replace(Ms,""));if(t.modifiers){var r="",i="",s=[];for(var o in t.modifiers)if(Us[o])i+=Us[o],js[o]&&s.push(o);else if("exact"===o){var c=t.modifiers;i+=Bs(["ctrl","shift","alt","meta"].filter((function(t){return!c[t]})).map((function(t){return"$event."+t+"Key"})).join("||"))}else s.push(o);return s.length&&(r+=function(t){return"if(!$event.type.indexOf('key')&&"+t.map(Zs).join("&&")+")return null;"}(s)),i&&(r+=i),"function($event){"+r+(e?"return "+t.value+"($event)":n?"return ("+t.value+")($event)":a?"return "+t.value:t.value)+"}"}return e||n?t.value:"function($event){"+(a?"return "+t.value:t.value)+"}"}function Zs(t){var e=parseInt(t,10);if(e)return"$event.keyCode!=="+e;var n=js[t],a=Fs[t];return"_k($event.keyCode,"+JSON.stringify(t)+","+JSON.stringify(n)+",$event.key,"+JSON.stringify(a)+")"}var Gs={on:function(t,e){t.wrapListeners=function(t){return"_g("+t+","+e.value+")"}},bind:function(t,e){t.wrapData=function(n){return"_b("+n+",'"+t.tag+"',"+e.value+","+(e.modifiers&&e.modifiers.prop?"true":"false")+(e.modifiers&&e.modifiers.sync?",true":"")+")"}},cloak:L},zs=function(t){this.options=t,this.warn=t.warn||Ma,this.transforms=Na(t.modules,"transformCode"),this.dataGenFns=Na(t.modules,"genData"),this.directives=O(O({},Gs),t.directives);var e=t.isReservedTag||D;this.maybeComponent=function(t){return!!t.component||!e(t.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function qs(t,e){var n=new zs(e);return{render:"with(this){return "+(t?Ks(t,n):'_c("div")')+"}",staticRenderFns:n.staticRenderFns}}function Ks(t,e){if(t.parent&&(t.pre=t.pre||t.parent.pre),t.staticRoot&&!t.staticProcessed)return Ws(t,e);if(t.once&&!t.onceProcessed)return Ys(t,e);if(t.for&&!t.forProcessed)return Qs(t,e);if(t.if&&!t.ifProcessed)return Xs(t,e);if("template"!==t.tag||t.slotTarget||e.pre){if("slot"===t.tag)return function(t,e){var n=t.slotName||'"default"',a=ao(t,e),r="_t("+n+(a?","+a:""),i=t.attrs||t.dynamicAttrs?so((t.attrs||[]).concat(t.dynamicAttrs||[]).map((function(t){return{name:x(t.name),value:t.value,dynamic:t.dynamic}}))):null,s=t.attrsMap["v-bind"];!i&&!s||a||(r+=",null");i&&(r+=","+i);s&&(r+=(i?"":",null")+","+s);return r+")"}(t,e);var n;if(t.component)n=function(t,e,n){var a=e.inlineTemplate?null:ao(e,n,!0);return"_c("+t+","+to(e,n)+(a?","+a:"")+")"}(t.component,t,e);else{var a;(!t.plain||t.pre&&e.maybeComponent(t))&&(a=to(t,e));var r=t.inlineTemplate?null:ao(t,e,!0);n="_c('"+t.tag+"'"+(a?","+a:"")+(r?","+r:"")+")"}for(var i=0;i<e.transforms.length;i++)n=e.transforms[i](t,n);return n}return ao(t,e)||"void 0"}function Ws(t,e){t.staticProcessed=!0;var n=e.pre;return t.pre&&(e.pre=t.pre),e.staticRenderFns.push("with(this){return "+Ks(t,e)+"}"),e.pre=n,"_m("+(e.staticRenderFns.length-1)+(t.staticInFor?",true":"")+")"}function Ys(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return Xs(t,e);if(t.staticInFor){for(var n="",a=t.parent;a;){if(a.for){n=a.key;break}a=a.parent}return n?"_o("+Ks(t,e)+","+e.onceId+++","+n+")":Ks(t,e)}return Ws(t,e)}function Xs(t,e,n,a){return t.ifProcessed=!0,Js(t.ifConditions.slice(),e,n,a)}function Js(t,e,n,a){if(!t.length)return a||"_e()";var r=t.shift();return r.exp?"("+r.exp+")?"+i(r.block)+":"+Js(t,e,n,a):""+i(r.block);function i(t){return n?n(t,e):t.once?Ys(t,e):Ks(t,e)}}function Qs(t,e,n,a){var r=t.for,i=t.alias,s=t.iterator1?","+t.iterator1:"",o=t.iterator2?","+t.iterator2:"";return t.forProcessed=!0,(a||"_l")+"(("+r+"),function("+i+s+o+"){return "+(n||Ks)(t,e)+"})"}function to(t,e){var n="{",a=function(t,e){var n=t.directives;if(!n)return;var a,r,i,s,o="directives:[",c=!1;for(a=0,r=n.length;a<r;a++){i=n[a],s=!0;var l=e.directives[i.name];l&&(s=!!l(t,i,e.warn)),s&&(c=!0,o+='{name:"'+i.name+'",rawName:"'+i.rawName+'"'+(i.value?",value:("+i.value+"),expression:"+JSON.stringify(i.value):"")+(i.arg?",arg:"+(i.isDynamicArg?i.arg:'"'+i.arg+'"'):"")+(i.modifiers?",modifiers:"+JSON.stringify(i.modifiers):"")+"},")}if(c)return o.slice(0,-1)+"]"}(t,e);a&&(n+=a+","),t.key&&(n+="key:"+t.key+","),t.ref&&(n+="ref:"+t.ref+","),t.refInFor&&(n+="refInFor:true,"),t.pre&&(n+="pre:true,"),t.component&&(n+='tag:"'+t.tag+'",');for(var r=0;r<e.dataGenFns.length;r++)n+=e.dataGenFns[r](t);if(t.attrs&&(n+="attrs:"+so(t.attrs)+","),t.props&&(n+="domProps:"+so(t.props)+","),t.events&&(n+=Vs(t.events,!1)+","),t.nativeEvents&&(n+=Vs(t.nativeEvents,!0)+","),t.slotTarget&&!t.slotScope&&(n+="slot:"+t.slotTarget+","),t.scopedSlots&&(n+=function(t,e,n){var a=t.for||Object.keys(e).some((function(t){var n=e[t];return n.slotTargetDynamic||n.if||n.for||eo(n)})),r=!!t.if;if(!a)for(var i=t.parent;i;){if(i.slotScope&&i.slotScope!==ms||i.for){a=!0;break}i.if&&(r=!0),i=i.parent}var s=Object.keys(e).map((function(t){return no(e[t],n)})).join(",");return"scopedSlots:_u(["+s+"]"+(a?",null,true":"")+(!a&&r?",null,false,"+function(t){var e=5381,n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e>>>0}(s):"")+")"}(t,t.scopedSlots,e)+","),t.model&&(n+="model:{value:"+t.model.value+",callback:"+t.model.callback+",expression:"+t.model.expression+"},"),t.inlineTemplate){var i=function(t,e){var n=t.children[0];0;if(n&&1===n.type){var a=qs(n,e.options);return"inlineTemplate:{render:function(){"+a.render+"},staticRenderFns:["+a.staticRenderFns.map((function(t){return"function(){"+t+"}"})).join(",")+"]}"}}(t,e);i&&(n+=i+",")}return n=n.replace(/,$/,"")+"}",t.dynamicAttrs&&(n="_b("+n+',"'+t.tag+'",'+so(t.dynamicAttrs)+")"),t.wrapData&&(n=t.wrapData(n)),t.wrapListeners&&(n=t.wrapListeners(n)),n}function eo(t){return 1===t.type&&("slot"===t.tag||t.children.some(eo))}function no(t,e){var n=t.attrsMap["slot-scope"];if(t.if&&!t.ifProcessed&&!n)return Xs(t,e,no,"null");if(t.for&&!t.forProcessed)return Qs(t,e,no);var a=t.slotScope===ms?"":String(t.slotScope),r="function("+a+"){return "+("template"===t.tag?t.if&&n?"("+t.if+")?"+(ao(t,e)||"undefined")+":undefined":ao(t,e)||"undefined":Ks(t,e))+"}",i=a?"":",proxy:true";return"{key:"+(t.slotTarget||'"default"')+",fn:"+r+i+"}"}function ao(t,e,n,a,r){var i=t.children;if(i.length){var s=i[0];if(1===i.length&&s.for&&"template"!==s.tag&&"slot"!==s.tag){var o=n?e.maybeComponent(s)?",1":",0":"";return""+(a||Ks)(s,e)+o}var c=n?function(t,e){for(var n=0,a=0;a<t.length;a++){var r=t[a];if(1===r.type){if(ro(r)||r.ifConditions&&r.ifConditions.some((function(t){return ro(t.block)}))){n=2;break}(e(r)||r.ifConditions&&r.ifConditions.some((function(t){return e(t.block)})))&&(n=1)}}return n}(i,e.maybeComponent):0,l=r||io;return"["+i.map((function(t){return l(t,e)})).join(",")+"]"+(c?","+c:"")}}function ro(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function io(t,e){return 1===t.type?Ks(t,e):3===t.type&&t.isComment?function(t){return"_e("+JSON.stringify(t.text)+")"}(t):"_v("+(2===(n=t).type?n.expression:oo(JSON.stringify(n.text)))+")";var n}function so(t){for(var e="",n="",a=0;a<t.length;a++){var r=t[a],i=oo(r.value);r.dynamic?n+=r.name+","+i+",":e+='"'+r.name+'":'+i+","}return e="{"+e.slice(0,-1)+"}",n?"_d("+e+",["+n.slice(0,-1)+"])":e}function oo(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)");function co(t,e){try{return new Function(t)}catch(n){return e.push({err:n,code:t}),L}}function lo(t){var e=Object.create(null);return function(n,a,r){(a=O({},a)).warn;delete a.warn;var i=a.delimiters?String(a.delimiters)+n:n;if(e[i])return e[i];var s=t(n,a);var o={},c=[];return o.render=co(s.render,c),o.staticRenderFns=s.staticRenderFns.map((function(t){return co(t,c)})),e[i]=o}}var uo,fo,ho=(uo=function(t,e){var n=gs(t.trim(),e);!1!==e.optimize&&Ps(n,e);var a=qs(n,e);return{ast:n,render:a.render,staticRenderFns:a.staticRenderFns}},function(t){function e(e,n){var a=Object.create(t),r=[],i=[];if(n)for(var s in n.modules&&(a.modules=(t.modules||[]).concat(n.modules)),n.directives&&(a.directives=O(Object.create(t.directives||null),n.directives)),n)"modules"!==s&&"directives"!==s&&(a[s]=n[s]);a.warn=function(t,e,n){(n?i:r).push(t)};var o=uo(e.trim(),a);return o.errors=r,o.tips=i,o}return{compile:e,compileToFunctions:lo(e)}})(Os),po=(ho.compile,ho.compileToFunctions);function mo(t){return(fo=fo||document.createElement("div")).innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',fo.innerHTML.indexOf("&#10;")>0}var vo=!!W&&mo(!1),go=!!W&&mo(!0),_o=w((function(t){var e=sa(t);return e&&e.innerHTML})),yo=$n.prototype.$mount;$n.prototype.$mount=function(t,e){if((t=t&&sa(t))===document.body||t===document.documentElement)return this;var n=this.$options;if(!n.render){var a=n.template;if(a)if("string"==typeof a)"#"===a.charAt(0)&&(a=_o(a));else{if(!a.nodeType)return this;a=a.innerHTML}else t&&(a=function(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}(t));if(a){0;var r=po(a,{outputSourceRange:!1,shouldDecodeNewlines:vo,shouldDecodeNewlinesForHref:go,delimiters:n.delimiters,comments:n.comments},this),i=r.render,s=r.staticRenderFns;n.render=i,n.staticRenderFns=s}}return yo.call(this,t,e)},$n.compile=po;const bo=$n;function Co(t,e){for(var n in e)t[n]=e[n];return t}var wo=/[!'()*]/g,ko=function(t){return"%"+t.charCodeAt(0).toString(16)},xo=/%2C/g,So=function(t){return encodeURIComponent(t).replace(wo,ko).replace(xo,",")};function Eo(t){try{return decodeURIComponent(t)}catch(t){0}return t}var To=function(t){return null==t||"object"==typeof t?t:String(t)};function Ao(t){var e={};return(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach((function(t){var n=t.replace(/\+/g," ").split("="),a=Eo(n.shift()),r=n.length>0?Eo(n.join("=")):null;void 0===e[a]?e[a]=r:Array.isArray(e[a])?e[a].push(r):e[a]=[e[a],r]})),e):e}function Ro(t){var e=t?Object.keys(t).map((function(e){var n=t[e];if(void 0===n)return"";if(null===n)return So(e);if(Array.isArray(n)){var a=[];return n.forEach((function(t){void 0!==t&&(null===t?a.push(So(e)):a.push(So(e)+"="+So(t)))})),a.join("&")}return So(e)+"="+So(n)})).filter((function(t){return t.length>0})).join("&"):null;return e?"?"+e:""}var Oo=/\/?$/;function $o(t,e,n,a){var r=a&&a.options.stringifyQuery,i=e.query||{};try{i=Po(i)}catch(t){}var s={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:i,params:e.params||{},fullPath:Io(e,r),matched:t?Do(t):[]};return n&&(s.redirectedFrom=Io(n,r)),Object.freeze(s)}function Po(t){if(Array.isArray(t))return t.map(Po);if(t&&"object"==typeof t){var e={};for(var n in t)e[n]=Po(t[n]);return e}return t}var Lo=$o(null,{path:"/"});function Do(t){for(var e=[];t;)e.unshift(t),t=t.parent;return e}function Io(t,e){var n=t.path,a=t.query;void 0===a&&(a={});var r=t.hash;return void 0===r&&(r=""),(n||"/")+(e||Ro)(a)+r}function Mo(t,e,n){return e===Lo?t===e:!!e&&(t.path&&e.path?t.path.replace(Oo,"")===e.path.replace(Oo,"")&&(n||t.hash===e.hash&&No(t.query,e.query)):!(!t.name||!e.name)&&(t.name===e.name&&(n||t.hash===e.hash&&No(t.query,e.query)&&No(t.params,e.params))))}function No(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var n=Object.keys(t).sort(),a=Object.keys(e).sort();return n.length===a.length&&n.every((function(n,r){var i=t[n];if(a[r]!==n)return!1;var s=e[n];return null==i||null==s?i===s:"object"==typeof i&&"object"==typeof s?No(i,s):String(i)===String(s)}))}function jo(t){for(var e=0;e<t.matched.length;e++){var n=t.matched[e];for(var a in n.instances){var r=n.instances[a],i=n.enteredCbs[a];if(r&&i){delete n.enteredCbs[a];for(var s=0;s<i.length;s++)r._isBeingDestroyed||i[s](r)}}}}var Fo={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var n=e.props,a=e.children,r=e.parent,i=e.data;i.routerView=!0;for(var s=r.$createElement,o=n.name,c=r.$route,l=r._routerViewCache||(r._routerViewCache={}),u=0,d=!1;r&&r._routerRoot!==r;){var f=r.$vnode?r.$vnode.data:{};f.routerView&&u++,f.keepAlive&&r._directInactive&&r._inactive&&(d=!0),r=r.$parent}if(i.routerViewDepth=u,d){var h=l[o],p=h&&h.component;return p?(h.configProps&&Bo(p,i,h.route,h.configProps),s(p,i,a)):s()}var m=c.matched[u],v=m&&m.components[o];if(!m||!v)return l[o]=null,s();l[o]={component:v},i.registerRouteInstance=function(t,e){var n=m.instances[o];(e&&n!==t||!e&&n===t)&&(m.instances[o]=e)},(i.hook||(i.hook={})).prepatch=function(t,e){m.instances[o]=e.componentInstance},i.hook.init=function(t){t.data.keepAlive&&t.componentInstance&&t.componentInstance!==m.instances[o]&&(m.instances[o]=t.componentInstance),jo(c)};var g=m.props&&m.props[o];return g&&(Co(l[o],{route:c,configProps:g}),Bo(v,i,c,g)),s(v,i,a)}};function Bo(t,e,n,a){var r=e.props=function(t,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(t);case"boolean":return e?t.params:void 0;default:0}}(n,a);if(r){r=e.props=Co({},r);var i=e.attrs=e.attrs||{};for(var s in r)t.props&&s in t.props||(i[s]=r[s],delete r[s])}}function Uo(t,e,n){var a=t.charAt(0);if("/"===a)return t;if("?"===a||"#"===a)return e+t;var r=e.split("/");n&&r[r.length-1]||r.pop();for(var i=t.replace(/^\//,"").split("/"),s=0;s<i.length;s++){var o=i[s];".."===o?r.pop():"."!==o&&r.push(o)}return""!==r[0]&&r.unshift(""),r.join("/")}function Vo(t){return t.replace(/\/\//g,"/")}var Ho=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},Zo=ic,Go=Yo,zo=function(t,e){return Qo(Yo(t,e),e)},qo=Qo,Ko=rc,Wo=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Yo(t,e){for(var n,a=[],r=0,i=0,s="",o=e&&e.delimiter||"/";null!=(n=Wo.exec(t));){var c=n[0],l=n[1],u=n.index;if(s+=t.slice(i,u),i=u+c.length,l)s+=l[1];else{var d=t[i],f=n[2],h=n[3],p=n[4],m=n[5],v=n[6],g=n[7];s&&(a.push(s),s="");var _=null!=f&&null!=d&&d!==f,y="+"===v||"*"===v,b="?"===v||"*"===v,C=n[2]||o,w=p||m;a.push({name:h||r++,prefix:f||"",delimiter:C,optional:b,repeat:y,partial:_,asterisk:!!g,pattern:w?ec(w):g?".*":"[^"+tc(C)+"]+?"})}}return i<t.length&&(s+=t.substr(i)),s&&a.push(s),a}function Xo(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function Jo(t){return encodeURI(t).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function Qo(t,e){for(var n=new Array(t.length),a=0;a<t.length;a++)"object"==typeof t[a]&&(n[a]=new RegExp("^(?:"+t[a].pattern+")$",ac(e)));return function(e,a){for(var r="",i=e||{},s=(a||{}).pretty?Xo:encodeURIComponent,o=0;o<t.length;o++){var c=t[o];if("string"!=typeof c){var l,u=i[c.name];if(null==u){if(c.optional){c.partial&&(r+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(Ho(u)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var d=0;d<u.length;d++){if(l=s(u[d]),!n[o].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(l)+"`");r+=(0===d?c.prefix:c.delimiter)+l}}else{if(l=c.asterisk?Jo(u):s(u),!n[o].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+l+'"');r+=c.prefix+l}}else r+=c}return r}}function tc(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function ec(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function nc(t,e){return t.keys=e,t}function ac(t){return t&&t.sensitive?"":"i"}function rc(t,e,n){Ho(e)||(n=e||n,e=[]);for(var a=(n=n||{}).strict,r=!1!==n.end,i="",s=0;s<t.length;s++){var o=t[s];if("string"==typeof o)i+=tc(o);else{var c=tc(o.prefix),l="(?:"+o.pattern+")";e.push(o),o.repeat&&(l+="(?:"+c+l+")*"),i+=l=o.optional?o.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")"}}var u=tc(n.delimiter||"/"),d=i.slice(-u.length)===u;return a||(i=(d?i.slice(0,-u.length):i)+"(?:"+u+"(?=$))?"),i+=r?"$":a&&d?"":"(?="+u+"|$)",nc(new RegExp("^"+i,ac(n)),e)}function ic(t,e,n){return Ho(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var a=0;a<n.length;a++)e.push({name:a,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return nc(t,e)}(t,e):Ho(t)?function(t,e,n){for(var a=[],r=0;r<t.length;r++)a.push(ic(t[r],e,n).source);return nc(new RegExp("(?:"+a.join("|")+")",ac(n)),e)}(t,e,n):function(t,e,n){return rc(Yo(t,n),e,n)}(t,e,n)}Zo.parse=Go,Zo.compile=zo,Zo.tokensToFunction=qo,Zo.tokensToRegExp=Ko;var sc=Object.create(null);function oc(t,e,n){e=e||{};try{var a=sc[t]||(sc[t]=Zo.compile(t));return"string"==typeof e.pathMatch&&(e[0]=e.pathMatch),a(e,{pretty:!0})}catch(t){return""}finally{delete e[0]}}function cc(t,e,n,a){var r="string"==typeof t?{path:t}:t;if(r._normalized)return r;if(r.name){var i=(r=Co({},t)).params;return i&&"object"==typeof i&&(r.params=Co({},i)),r}if(!r.path&&r.params&&e){(r=Co({},r))._normalized=!0;var s=Co(Co({},e.params),r.params);if(e.name)r.name=e.name,r.params=s;else if(e.matched.length){var o=e.matched[e.matched.length-1].path;r.path=oc(o,s,e.path)}else 0;return r}var c=function(t){var e="",n="",a=t.indexOf("#");a>=0&&(e=t.slice(a),t=t.slice(0,a));var r=t.indexOf("?");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{path:t,query:n,hash:e}}(r.path||""),l=e&&e.path||"/",u=c.path?Uo(c.path,l,n||r.append):l,d=function(t,e,n){void 0===e&&(e={});var a,r=n||Ao;try{a=r(t||"")}catch(t){a={}}for(var i in e){var s=e[i];a[i]=Array.isArray(s)?s.map(To):To(s)}return a}(c.query,r.query,a&&a.options.parseQuery),f=r.hash||c.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:u,query:d,hash:f}}var lc,uc=function(){},dc={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(t){var e=this,n=this.$router,a=this.$route,r=n.resolve(this.to,a,this.append),i=r.location,s=r.route,o=r.href,c={},l=n.options.linkActiveClass,u=n.options.linkExactActiveClass,d=null==l?"router-link-active":l,f=null==u?"router-link-exact-active":u,h=null==this.activeClass?d:this.activeClass,p=null==this.exactActiveClass?f:this.exactActiveClass,m=s.redirectedFrom?$o(null,cc(s.redirectedFrom),null,n):s;c[p]=Mo(a,m,this.exactPath),c[h]=this.exact||this.exactPath?c[p]:function(t,e){return 0===t.path.replace(Oo,"/").indexOf(e.path.replace(Oo,"/"))&&(!e.hash||t.hash===e.hash)&&function(t,e){for(var n in e)if(!(n in t))return!1;return!0}(t.query,e.query)}(a,m);var v=c[p]?this.ariaCurrentValue:null,g=function(t){fc(t)&&(e.replace?n.replace(i,uc):n.push(i,uc))},_={click:fc};Array.isArray(this.event)?this.event.forEach((function(t){_[t]=g})):_[this.event]=g;var y={class:c},b=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:o,route:s,navigate:g,isActive:c[h],isExactActive:c[p]});if(b){if(1===b.length)return b[0];if(b.length>1||!b.length)return 0===b.length?t():t("span",{},b)}if("a"===this.tag)y.on=_,y.attrs={href:o,"aria-current":v};else{var C=hc(this.$slots.default);if(C){C.isStatic=!1;var w=C.data=Co({},C.data);for(var k in w.on=w.on||{},w.on){var x=w.on[k];k in _&&(w.on[k]=Array.isArray(x)?x:[x])}for(var S in _)S in w.on?w.on[S].push(_[S]):w.on[S]=g;var E=C.data.attrs=Co({},C.data.attrs);E.href=o,E["aria-current"]=v}else y.on=_}return t(this.tag,y,this.$slots.default)}};function fc(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function hc(t){if(t)for(var e,n=0;n<t.length;n++){if("a"===(e=t[n]).tag)return e;if(e.children&&(e=hc(e.children)))return e}}var pc="undefined"!=typeof window;function mc(t,e,n,a,r){var i=e||[],s=n||Object.create(null),o=a||Object.create(null);t.forEach((function(t){vc(i,s,o,t,r)}));for(var c=0,l=i.length;c<l;c++)"*"===i[c]&&(i.push(i.splice(c,1)[0]),l--,c--);return{pathList:i,pathMap:s,nameMap:o}}function vc(t,e,n,a,r,i){var s=a.path,o=a.name;var c=a.pathToRegexpOptions||{},l=function(t,e,n){n||(t=t.replace(/\/$/,""));if("/"===t[0])return t;if(null==e)return t;return Vo(e.path+"/"+t)}(s,r,c.strict);"boolean"==typeof a.caseSensitive&&(c.sensitive=a.caseSensitive);var u={path:l,regex:gc(l,c),components:a.components||{default:a.component},alias:a.alias?"string"==typeof a.alias?[a.alias]:a.alias:[],instances:{},enteredCbs:{},name:o,parent:r,matchAs:i,redirect:a.redirect,beforeEnter:a.beforeEnter,meta:a.meta||{},props:null==a.props?{}:a.components?a.props:{default:a.props}};if(a.children&&a.children.forEach((function(a){var r=i?Vo(i+"/"+a.path):void 0;vc(t,e,n,a,u,r)})),e[u.path]||(t.push(u.path),e[u.path]=u),void 0!==a.alias)for(var d=Array.isArray(a.alias)?a.alias:[a.alias],f=0;f<d.length;++f){0;var h={path:d[f],children:a.children};vc(t,e,n,h,r,u.path||"/")}o&&(n[o]||(n[o]=u))}function gc(t,e){return Zo(t,[],e)}function _c(t,e){var n=mc(t),a=n.pathList,r=n.pathMap,i=n.nameMap;function s(t,n,s){var o=cc(t,n,!1,e),l=o.name;if(l){var u=i[l];if(!u)return c(null,o);var d=u.regex.keys.filter((function(t){return!t.optional})).map((function(t){return t.name}));if("object"!=typeof o.params&&(o.params={}),n&&"object"==typeof n.params)for(var f in n.params)!(f in o.params)&&d.indexOf(f)>-1&&(o.params[f]=n.params[f]);return o.path=oc(u.path,o.params),c(u,o,s)}if(o.path){o.params={};for(var h=0;h<a.length;h++){var p=a[h],m=r[p];if(yc(m.regex,o.path,o.params))return c(m,o,s)}}return c(null,o)}function o(t,n){var a=t.redirect,r="function"==typeof a?a($o(t,n,null,e)):a;if("string"==typeof r&&(r={path:r}),!r||"object"!=typeof r)return c(null,n);var o=r,l=o.name,u=o.path,d=n.query,f=n.hash,h=n.params;if(d=o.hasOwnProperty("query")?o.query:d,f=o.hasOwnProperty("hash")?o.hash:f,h=o.hasOwnProperty("params")?o.params:h,l){i[l];return s({_normalized:!0,name:l,query:d,hash:f,params:h},void 0,n)}if(u){var p=function(t,e){return Uo(t,e.parent?e.parent.path:"/",!0)}(u,t);return s({_normalized:!0,path:oc(p,h),query:d,hash:f},void 0,n)}return c(null,n)}function c(t,n,a){return t&&t.redirect?o(t,a||n):t&&t.matchAs?function(t,e,n){var a=s({_normalized:!0,path:oc(n,e.params)});if(a){var r=a.matched,i=r[r.length-1];return e.params=a.params,c(i,e)}return c(null,e)}(0,n,t.matchAs):$o(t,n,a,e)}return{match:s,addRoute:function(t,e){var n="object"!=typeof t?i[t]:void 0;mc([e||t],a,r,i,n),n&&mc(n.alias.map((function(t){return{path:t,children:[e]}})),a,r,i,n)},getRoutes:function(){return a.map((function(t){return r[t]}))},addRoutes:function(t){mc(t,a,r,i)}}}function yc(t,e,n){var a=e.match(t);if(!a)return!1;if(!n)return!0;for(var r=1,i=a.length;r<i;++r){var s=t.keys[r-1];s&&(n[s.name||"pathMatch"]="string"==typeof a[r]?Eo(a[r]):a[r])}return!0}var bc=pc&&window.performance&&window.performance.now?window.performance:Date;function Cc(){return bc.now().toFixed(3)}var wc=Cc();function kc(){return wc}function xc(t){return wc=t}var Sc=Object.create(null);function Ec(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var t=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(t,""),n=Co({},window.history.state);return n.key=kc(),window.history.replaceState(n,"",e),window.addEventListener("popstate",Rc),function(){window.removeEventListener("popstate",Rc)}}function Tc(t,e,n,a){if(t.app){var r=t.options.scrollBehavior;r&&t.app.$nextTick((function(){var i=function(){var t=kc();if(t)return Sc[t]}(),s=r.call(t,e,n,a?i:null);s&&("function"==typeof s.then?s.then((function(t){Dc(t,i)})).catch((function(t){0})):Dc(s,i))}))}}function Ac(){var t=kc();t&&(Sc[t]={x:window.pageXOffset,y:window.pageYOffset})}function Rc(t){Ac(),t.state&&t.state.key&&xc(t.state.key)}function Oc(t){return Pc(t.x)||Pc(t.y)}function $c(t){return{x:Pc(t.x)?t.x:window.pageXOffset,y:Pc(t.y)?t.y:window.pageYOffset}}function Pc(t){return"number"==typeof t}var Lc=/^#\d/;function Dc(t,e){var n,a="object"==typeof t;if(a&&"string"==typeof t.selector){var r=Lc.test(t.selector)?document.getElementById(t.selector.slice(1)):document.querySelector(t.selector);if(r){var i=t.offset&&"object"==typeof t.offset?t.offset:{};e=function(t,e){var n=document.documentElement.getBoundingClientRect(),a=t.getBoundingClientRect();return{x:a.left-n.left-e.x,y:a.top-n.top-e.y}}(r,i={x:Pc((n=i).x)?n.x:0,y:Pc(n.y)?n.y:0})}else Oc(t)&&(e=$c(t))}else a&&Oc(t)&&(e=$c(t));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:t.behavior}):window.scrollTo(e.x,e.y))}var Ic,Mc=pc&&((-1===(Ic=window.navigator.userAgent).indexOf("Android 2.")&&-1===Ic.indexOf("Android 4.0")||-1===Ic.indexOf("Mobile Safari")||-1!==Ic.indexOf("Chrome")||-1!==Ic.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function Nc(t,e){Ac();var n=window.history;try{if(e){var a=Co({},n.state);a.key=kc(),n.replaceState(a,"",t)}else n.pushState({key:xc(Cc())},"",t)}catch(n){window.location[e?"replace":"assign"](t)}}function jc(t){Nc(t,!0)}function Fc(t,e,n){var a=function(r){r>=t.length?n():t[r]?e(t[r],(function(){a(r+1)})):a(r+1)};a(0)}var Bc={redirected:2,aborted:4,cancelled:8,duplicated:16};function Uc(t,e){return Hc(t,e,Bc.redirected,'Redirected when going from "'+t.fullPath+'" to "'+function(t){if("string"==typeof t)return t;if("path"in t)return t.path;var e={};return Zc.forEach((function(n){n in t&&(e[n]=t[n])})),JSON.stringify(e,null,2)}(e)+'" via a navigation guard.')}function Vc(t,e){return Hc(t,e,Bc.cancelled,'Navigation cancelled from "'+t.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function Hc(t,e,n,a){var r=new Error(a);return r._isRouter=!0,r.from=t,r.to=e,r.type=n,r}var Zc=["params","query","hash"];function Gc(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function zc(t,e){return Gc(t)&&t._isRouter&&(null==e||t.type===e)}function qc(t){return function(e,n,a){var r=!1,i=0,s=null;Kc(t,(function(t,e,n,o){if("function"==typeof t&&void 0===t.cid){r=!0,i++;var c,l=Xc((function(e){var r;((r=e).__esModule||Yc&&"Module"===r[Symbol.toStringTag])&&(e=e.default),t.resolved="function"==typeof e?e:lc.extend(e),n.components[o]=e,--i<=0&&a()})),u=Xc((function(t){var e="Failed to resolve async component "+o+": "+t;s||(s=Gc(t)?t:new Error(e),a(s))}));try{c=t(l,u)}catch(t){u(t)}if(c)if("function"==typeof c.then)c.then(l,u);else{var d=c.component;d&&"function"==typeof d.then&&d.then(l,u)}}})),r||a()}}function Kc(t,e){return Wc(t.map((function(t){return Object.keys(t.components).map((function(n){return e(t.components[n],t.instances[n],t,n)}))})))}function Wc(t){return Array.prototype.concat.apply([],t)}var Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function Xc(t){var e=!1;return function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];if(!e)return e=!0,t.apply(this,n)}}var Jc=function(t,e){this.router=t,this.base=function(t){if(!t)if(pc){var e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else t="/";"/"!==t.charAt(0)&&(t="/"+t);return t.replace(/\/$/,"")}(e),this.current=Lo,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function Qc(t,e,n,a){var r=Kc(t,(function(t,a,r,i){var s=function(t,e){"function"!=typeof t&&(t=lc.extend(t));return t.options[e]}(t,e);if(s)return Array.isArray(s)?s.map((function(t){return n(t,a,r,i)})):n(s,a,r,i)}));return Wc(a?r.reverse():r)}function tl(t,e){if(e)return function(){return t.apply(e,arguments)}}Jc.prototype.listen=function(t){this.cb=t},Jc.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},Jc.prototype.onError=function(t){this.errorCbs.push(t)},Jc.prototype.transitionTo=function(t,e,n){var a,r=this;try{a=this.router.match(t,this.current)}catch(t){throw this.errorCbs.forEach((function(e){e(t)})),t}var i=this.current;this.confirmTransition(a,(function(){r.updateRoute(a),e&&e(a),r.ensureURL(),r.router.afterHooks.forEach((function(t){t&&t(a,i)})),r.ready||(r.ready=!0,r.readyCbs.forEach((function(t){t(a)})))}),(function(t){n&&n(t),t&&!r.ready&&(zc(t,Bc.redirected)&&i===Lo||(r.ready=!0,r.readyErrorCbs.forEach((function(e){e(t)}))))}))},Jc.prototype.confirmTransition=function(t,e,n){var a=this,r=this.current;this.pending=t;var i=function(t){!zc(t)&&Gc(t)&&(a.errorCbs.length?a.errorCbs.forEach((function(e){e(t)})):console.error(t)),n&&n(t)},s=t.matched.length-1,o=r.matched.length-1;if(Mo(t,r)&&s===o&&t.matched[s]===r.matched[o])return this.ensureURL(),i(function(t,e){var n=Hc(t,e,Bc.duplicated,'Avoided redundant navigation to current location: "'+t.fullPath+'".');return n.name="NavigationDuplicated",n}(r,t));var c=function(t,e){var n,a=Math.max(t.length,e.length);for(n=0;n<a&&t[n]===e[n];n++);return{updated:e.slice(0,n),activated:e.slice(n),deactivated:t.slice(n)}}(this.current.matched,t.matched),l=c.updated,u=c.deactivated,d=c.activated,f=[].concat(function(t){return Qc(t,"beforeRouteLeave",tl,!0)}(u),this.router.beforeHooks,function(t){return Qc(t,"beforeRouteUpdate",tl)}(l),d.map((function(t){return t.beforeEnter})),qc(d)),h=function(e,n){if(a.pending!==t)return i(Vc(r,t));try{e(t,r,(function(e){!1===e?(a.ensureURL(!0),i(function(t,e){return Hc(t,e,Bc.aborted,'Navigation aborted from "'+t.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}(r,t))):Gc(e)?(a.ensureURL(!0),i(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(i(Uc(r,t)),"object"==typeof e&&e.replace?a.replace(e):a.push(e)):n(e)}))}catch(t){i(t)}};Fc(f,h,(function(){Fc(function(t){return Qc(t,"beforeRouteEnter",(function(t,e,n,a){return function(t,e,n){return function(a,r,i){return t(a,r,(function(t){"function"==typeof t&&(e.enteredCbs[n]||(e.enteredCbs[n]=[]),e.enteredCbs[n].push(t)),i(t)}))}}(t,n,a)}))}(d).concat(a.router.resolveHooks),h,(function(){if(a.pending!==t)return i(Vc(r,t));a.pending=null,e(t),a.router.app&&a.router.app.$nextTick((function(){jo(t)}))}))}))},Jc.prototype.updateRoute=function(t){this.current=t,this.cb&&this.cb(t)},Jc.prototype.setupListeners=function(){},Jc.prototype.teardown=function(){this.listeners.forEach((function(t){t()})),this.listeners=[],this.current=Lo,this.pending=null};var el=function(t){function e(e,n){t.call(this,e,n),this._startLocation=nl(this.base)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this;if(!(this.listeners.length>0)){var e=this.router,n=e.options.scrollBehavior,a=Mc&&n;a&&this.listeners.push(Ec());var r=function(){var n=t.current,r=nl(t.base);t.current===Lo&&r===t._startLocation||t.transitionTo(r,(function(t){a&&Tc(e,t,n,!0)}))};window.addEventListener("popstate",r),this.listeners.push((function(){window.removeEventListener("popstate",r)}))}},e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,n){var a=this,r=this.current;this.transitionTo(t,(function(t){Nc(Vo(a.base+t.fullPath)),Tc(a.router,t,r,!1),e&&e(t)}),n)},e.prototype.replace=function(t,e,n){var a=this,r=this.current;this.transitionTo(t,(function(t){jc(Vo(a.base+t.fullPath)),Tc(a.router,t,r,!1),e&&e(t)}),n)},e.prototype.ensureURL=function(t){if(nl(this.base)!==this.current.fullPath){var e=Vo(this.base+this.current.fullPath);t?Nc(e):jc(e)}},e.prototype.getCurrentLocation=function(){return nl(this.base)},e}(Jc);function nl(t){var e=window.location.pathname;return t&&0===e.toLowerCase().indexOf(t.toLowerCase())&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}var al=function(t){function e(e,n,a){t.call(this,e,n),a&&function(t){var e=nl(t);if(!/^\/#/.test(e))return window.location.replace(Vo(t+"/#"+e)),!0}(this.base)||rl()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this;if(!(this.listeners.length>0)){var e=this.router.options.scrollBehavior,n=Mc&&e;n&&this.listeners.push(Ec());var a=function(){var e=t.current;rl()&&t.transitionTo(il(),(function(a){n&&Tc(t.router,a,e,!0),Mc||cl(a.fullPath)}))},r=Mc?"popstate":"hashchange";window.addEventListener(r,a),this.listeners.push((function(){window.removeEventListener(r,a)}))}},e.prototype.push=function(t,e,n){var a=this,r=this.current;this.transitionTo(t,(function(t){ol(t.fullPath),Tc(a.router,t,r,!1),e&&e(t)}),n)},e.prototype.replace=function(t,e,n){var a=this,r=this.current;this.transitionTo(t,(function(t){cl(t.fullPath),Tc(a.router,t,r,!1),e&&e(t)}),n)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;il()!==e&&(t?ol(e):cl(e))},e.prototype.getCurrentLocation=function(){return il()},e}(Jc);function rl(){var t=il();return"/"===t.charAt(0)||(cl("/"+t),!1)}function il(){var t=window.location.href,e=t.indexOf("#");return e<0?"":t=t.slice(e+1)}function sl(t){var e=window.location.href,n=e.indexOf("#");return(n>=0?e.slice(0,n):e)+"#"+t}function ol(t){Mc?Nc(sl(t)):window.location.hash=t}function cl(t){Mc?jc(sl(t)):window.location.replace(sl(t))}var ll=function(t){function e(e,n){t.call(this,e,n),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,n){var a=this;this.transitionTo(t,(function(t){a.stack=a.stack.slice(0,a.index+1).concat(t),a.index++,e&&e(t)}),n)},e.prototype.replace=function(t,e,n){var a=this;this.transitionTo(t,(function(t){a.stack=a.stack.slice(0,a.index).concat(t),e&&e(t)}),n)},e.prototype.go=function(t){var e=this,n=this.index+t;if(!(n<0||n>=this.stack.length)){var a=this.stack[n];this.confirmTransition(a,(function(){var t=e.current;e.index=n,e.updateRoute(a),e.router.afterHooks.forEach((function(e){e&&e(a,t)}))}),(function(t){zc(t,Bc.duplicated)&&(e.index=n)}))}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(Jc),ul=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=_c(t.routes||[],this);var e=t.mode||"hash";switch(this.fallback="history"===e&&!Mc&&!1!==t.fallback,this.fallback&&(e="hash"),pc||(e="abstract"),this.mode=e,e){case"history":this.history=new el(this,t.base);break;case"hash":this.history=new al(this,t.base,this.fallback);break;case"abstract":this.history=new ll(this,t.base);break;default:0}},dl={currentRoute:{configurable:!0}};function fl(t,e){return t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}ul.prototype.match=function(t,e,n){return this.matcher.match(t,e,n)},dl.currentRoute.get=function(){return this.history&&this.history.current},ul.prototype.init=function(t){var e=this;if(this.apps.push(t),t.$once("hook:destroyed",(function(){var n=e.apps.indexOf(t);n>-1&&e.apps.splice(n,1),e.app===t&&(e.app=e.apps[0]||null),e.app||e.history.teardown()})),!this.app){this.app=t;var n=this.history;if(n instanceof el||n instanceof al){var a=function(t){n.setupListeners(),function(t){var a=n.current,r=e.options.scrollBehavior;Mc&&r&&"fullPath"in t&&Tc(e,t,a,!1)}(t)};n.transitionTo(n.getCurrentLocation(),a,a)}n.listen((function(t){e.apps.forEach((function(e){e._route=t}))}))}},ul.prototype.beforeEach=function(t){return fl(this.beforeHooks,t)},ul.prototype.beforeResolve=function(t){return fl(this.resolveHooks,t)},ul.prototype.afterEach=function(t){return fl(this.afterHooks,t)},ul.prototype.onReady=function(t,e){this.history.onReady(t,e)},ul.prototype.onError=function(t){this.history.onError(t)},ul.prototype.push=function(t,e,n){var a=this;if(!e&&!n&&"undefined"!=typeof Promise)return new Promise((function(e,n){a.history.push(t,e,n)}));this.history.push(t,e,n)},ul.prototype.replace=function(t,e,n){var a=this;if(!e&&!n&&"undefined"!=typeof Promise)return new Promise((function(e,n){a.history.replace(t,e,n)}));this.history.replace(t,e,n)},ul.prototype.go=function(t){this.history.go(t)},ul.prototype.back=function(){this.go(-1)},ul.prototype.forward=function(){this.go(1)},ul.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(t){return Object.keys(t.components).map((function(e){return t.components[e]}))}))):[]},ul.prototype.resolve=function(t,e,n){var a=cc(t,e=e||this.history.current,n,this),r=this.match(a,e),i=r.redirectedFrom||r.fullPath;return{location:a,route:r,href:function(t,e,n){var a="hash"===n?"#"+e:e;return t?Vo(t+"/"+a):a}(this.history.base,i,this.mode),normalizedTo:a,resolved:r}},ul.prototype.getRoutes=function(){return this.matcher.getRoutes()},ul.prototype.addRoute=function(t,e){this.matcher.addRoute(t,e),this.history.current!==Lo&&this.history.transitionTo(this.history.getCurrentLocation())},ul.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==Lo&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(ul.prototype,dl),ul.install=function t(e){if(!t.installed||lc!==e){t.installed=!0,lc=e;var n=function(t){return void 0!==t},a=function(t,e){var a=t.$options._parentVnode;n(a)&&n(a=a.data)&&n(a=a.registerRouteInstance)&&a(t,e)};e.mixin({beforeCreate:function(){n(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,a(this,this)},destroyed:function(){a(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",Fo),e.component("RouterLink",dc);var r=e.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}},ul.version="3.5.1",ul.isNavigationFailure=zc,ul.NavigationFailureType=Bc,ul.START_LOCATION=Lo,pc&&window.Vue&&window.Vue.use(ul);const hl=ul;var pl=n(89279);function ml(t){if(!window.__show_logs)return!1;var e=[].slice.call(arguments);"undefined"!=typeof console&&(t=t||"debug")in console&&console[t].apply(console,e[1])}function vl(){ml("log",arguments)}function gl(){ml("warn",arguments)}function _l(){ml("error",arguments)}function yl(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const bl=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.reloadTimer=null,this.reloadCounter=0,this.reloadMax=n||1e4,this.started=!1,this.reloadTimeouts=e||{0:1e3,10:3e3,30:1e4}}var e,n,a;return e=t,(n=[{key:"getReloadTimeout",value:function(){var t=this,e=this.reloadTimeouts[0]||null,n=this.reloadCounter;return Object.keys(this.reloadTimeouts).forEach((function(a){var r=t.reloadTimeouts[a];n>=a&&(e=r)})),e}},{key:"start",value:function(t){this.started||(this.started=!0,this._start(t)),this.paused=!1}},{key:"pause",value:function(){this.paused=!0}},{key:"_start",value:function(t){var e=this,n=this.getReloadTimeout();if(!n||this.reloadCounter>=this.reloadMax)return this.cancel(),!1;t?(this.started=!0,this.reloadTimer=setTimeout((function(){e.paused||!1!==t()&&e.reloadCounter++,e._start(t)}),n)):this.cancel()}},{key:"refresh",value:function(){this.reloadCounter=0}},{key:"cancel",value:function(){this.reloadTimer&&clearTimeout(this.reloadTimer),this.reloadTimer=null,this.started=!1,this.refresh()}}])&&yl(e.prototype,n),a&&yl(e,a),t}();var Cl=n(5465);function wl(t){return(wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xl(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Sl(t,e){return(Sl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function El(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Al(t);if(e){var r=Al(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Tl(this,n)}}function Tl(t,e){return!e||"object"!==wl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Al(t){return(Al=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sl(t,e)}(i,t);var e,n,a,r=El(i);function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return kl(this,i),(e=r.call(this)).uri=t,e.ws=null,e.reconnectOnError=void 0===n.reconnectOnError||n.reconnectOnError,e.stopReconnect=!1,e.handlers=new Map,e.authorized=!1,e.reloader=new bl({0:3e3,10:5e3,20:1e4}),e.on("error",(function(){})),e}return e=i,a=[{key:"make",value:function(t){return i._conn||(i._conn=new i(t)),i._conn}}],(n=[{key:"connect",value:function(){var t=this;if(this.isOpened())return log("already opened");this.reloader.pause(),log("connecting to",this.uri),this.reconnectCount++;var e=new WebSocket(this.uri);this.ws=e,e.onopen=function(e){t.emit("open"),t.reconnectCount||t.emit("opened"),t.reconnect(!1)},e.onmessage=function(e){var n,a,r;try{n=JSON.parse(e.data)}catch(t){error("parse error: "+e.data)}n&&(a=n.mess||"",r=n.response||{},["money","ping"].indexOf(n.mess),"authorized"===a&&(t.authorized=r,t.emit("authorized",r)),"stopReconnect"===a&&(t.stopReconnect=!0,t.reconnect(!1)),"ping"===a&&t.send("pong",{from:"ping",imAlive:(new Date).getTime()}),"money"===a&&t.send("pong",{from:"money",imAlive:(new Date).getTime()}),t.emit("message",a,r,n),t.emit("message."+a,r,n),t.handlers&&t.handlers.forEach((function(t){if(t){if(t.__sessionId&&t.__sessionId!==r.__sessionId)return!1;"function"==typeof t[a]&&t[a](r)}})),window.mobileAppInterfaceReceiver&&window.mobileAppInterfaceReceiver.avail()&&window.mobileAppInterfaceReceiver.call("wsMessage",n))},e.onerror=function(e){t.emit("error","ws error")},e.onclose=function(e){error("ws closed",e.target?e.target.url:"",e.code),t._close(),t.reconnect()}}},{key:"send",value:function(t,e){this.isOpened()?("string"==typeof t&&(t={mess:t,data:e||{}}),-1===["pong"].indexOf(t.mess)&&log("Send:",t,e),this.ws.send(JSON.stringify(t))):error("error send ws, not opened")}},{key:"isOpened",value:function(){return this.ws&&this.ws.readyState===WebSocket.OPEN}},{key:"isAuth",value:function(){return this.authorized}},{key:"_close",value:function(t){t&&(this.stopReconnect=!0,this.isOpened()&&this.ws.close()),this.emit("close",t),this.ws=null}},{key:"close",value:function(){this._close(!0)}},{key:"reconnect",value:function(t){var e=this;this.reconnectOnError&&!this.stopReconnect&&(void 0===t||t?this.reloader.start((function(){e.connect()})):this.reloader.cancel())}},{key:"start",value:function(t){this.isOpened()?t():this.on("open",(function(){t()}))}},{key:"ready",value:function(t){this.isOpened()?t():this.once("open",(function(){t()}))}},{key:"relay",value:function(t,e,n,a){"object"!==wl(n)||a||(a=n,n=null),n&&this.once("mess."+t+"Accept",(function(t){n(t)})),this.send("relay",{mess:t,clientId:e,params:a})}},{key:"replay",value:function(t,e,n){this.relay(t+"Accept",e,null,n)}},{key:"echo",value:function(t,e,n){n&&this.once("message.__echo"+Cl.Z.firstToUpper(t),(function(t){n(t)})),this.send(t,e)}}])&&xl(e.prototype,n),a&&xl(e,a),i}(n(17187));Rl._conn=null;const Ol=Rl;function $l(t){return($l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pl(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Ll(t,e){return(Ll=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Ml(t);if(e){var r=Ml(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Il(this,n)}}function Il(t,e){return!e||"object"!==$l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ml(t){return(Ml=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Nl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ll(t,e)}(i,t);var e,n,a,r=Dl(i);function i(t){var e;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).config=t,e.firebaseConfig=Object.assign({},t.firebaseConfig),e.messaging=null,!window.firebase||!window.firebase.messaging)throw new Error("firebase load error");return e.firebase=window.firebase,e.token=null,e}return e=i,(n=[{key:"initNotify",value:function(){var t=this;this.messaging||(this.firebase.initializeApp(this.firebaseConfig),this.messaging=this.firebase.messaging()),window.Notification.requestPermission().then((function(){t.messaging.onMessage((function(e){log("Message received",e);var n=Object.assign({tag:"appnotyfy"},e.notification||{},e.data||{});t.notify(n),t.emit("message",n,e)}),(function(t){error(t)})),log(t.messaging),t.emit("permission",Notification.permission.toLowerCase()),t.registerEndpoint()}),(function(e){t.error(e),t.emit("permission",Notification.permission.toLowerCase())})).catch((function(e){t.emit("permission",Notification.permission.toLowerCase()),t.error(e)}))}},{key:"notify",value:function(t){var e,n=t.title||"Сообщение";if("object"!==$l(t)&&(t={body:opt}),t=Object.assign({icon:"/i/logo128.png",badge:"/i/logo128_g.png"},t),"function"==typeof window.Notification)try{e=new Notification(n,t),log("Notification",e),e.onclick=function(){"function"==typeof t.click&&t.click.call(this),t.link&&(window.location=t.link),this.close()}}catch(e){"TypeError"===e.name?this.notifySW(t):error(e)}else this.notifySW(t)}},{key:"notifySW",value:function(t){this.messaging&&this.messaging.swRegistration?this.messaging.swRegistration.showNotification(t.title,t):error("no sw from firebase")}},{key:"registerEndpoint",value:function(t){var e=this;if(!this.messaging)return errror("messaging not inited");this.messaging.getToken().then((function(n){n?(e.token=n,e.emit("token",n,t)):e.error("error get token")})).catch((function(t){e.error(t)}))}},{key:"error",value:function(t){this.emit("error",t)}}])&&Pl(e.prototype,n),a&&Pl(e,a),i}(n(17187));const jl={name:"popover",props:{template:{required:!0},element:{type:HTMLElement,required:!0},params:{type:Object},data:{type:Object},placement:{type:String,default:"auto"},cls:{type:String,default:""},id:{type:String},autoclose:{type:Boolean,default:!0}},data:function(){return{}},destroyed:function(){this.destroy()},created:function(){var t=this;this.hideTm=null,this.popover=null;var e=this,n=Object.assign(this.params,{parent:this.$parent});n.methods||(n.methods={}),n.methods.close=function(){e.close()},this.templateNode=this.$root.make(this.template,n),this.$on("update",(function(e){for(var n in e)t.templateNode.hasOwnProperty(n)&&(t.templateNode[n]=e[n])}))},mounted:function(){var t=this;this.templateNode.$mount();var e,n=this.templateNode.$el;this.$root.onMount((function(){var a={html:!0,trigger:"click",container:t.$root.$el,content:function(){return n},placement:t.placement,animation:!1,customClass:t.cls};e=new bootstrap.Popover(t.element,a),t.popover=e,t.element.addEventListener("shown.bs.popover",t.onShownBsPopover),t.element.addEventListener("hidden.bs.popover",t.onHiddenBsPopover)}))},methods:{onShownBsPopover:function(){var t=this;if(this.templateNode.$emit("popover-toggle",!0),!this.autoclose)return!1;this.element.addEventListener("mouseleave",(function(e){t.hideTm&&clearTimeout(t.hideTm),t.popover.tip.addEventListener("mouseenter",(function(){t.hideTm&&clearTimeout(t.hideTm)}),{once:!0}),t.popover.tip.addEventListener("mouseleave",(function(){t.popover.hide()}),{once:!0}),t.hideTm=setTimeout((function(){t.popover.hide()}),100)}),{once:!0})},onHiddenBsPopover:function(){this.templateNode.$emit("popover-toggle",!1)},close:function(){this.popover&&this.popover.hide()},destroy:function(){if(this.popover&&this.popover.tip&&this.popover.tip.parentNode,this.popover)try{this.popover.dispose()}catch(t){this.$emit("error",t)}this.templateNode&&this.templateNode.$destroy(),this.element&&(this.element.removeEventListener("shown.bs.popover",this.onShownBsPopover),this.element.removeEventListener("hidden.bs.popover",this.onHiddenBsPopover))}}};var Fl=n(51900);const Bl=(0,Fl.Z)(jl,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null).exports;var Ul=[];const Vl={name:"modal",props:{cls:String,title:{type:String},text:{type:String},icon:{type:String},size:{type:String},save:{type:String},fixedY:{},fixedX:{},centered:{default:!0},scroll:{},noclose:{type:Boolean,default:!1},backdrop:{type:Boolean,default:!0},footer:{type:Boolean,default:!0},header:{type:Boolean,default:!0},autodestroy:{type:Boolean,default:!0},bodyPadding:{},backdropStyle:Object,component:{type:Array},raw:{type:Boolean,default:!1}},data:function(){return{isloading:!1,footerShow:this.footer,headerShow:this.header,background:!1}},created:function(){this.buttons=[]},destroyed:function(){this.$parent&&this.$parent!==this.$root&&this.$parent.$destroy(),this.close()},closeAll:function(){for(var t=Ul.length;t--;)Ul[t].close()},computed:{primary:function(){return this.$refs.primary||this.$slots.save}},mounted:function(){var t=this,e={focus:!1};this.backdrop||(e.backdrop="static",e.keyboard=!1);var n=new bootstrap.Modal(this.$el,e);this.$el.addEventListener("shown.bs.modal",(function(){t.backdropStyle&&n._backdrop&&Object.assign(n._backdrop.style,t.backdropStyle)})),this.$el.addEventListener("hidden.bs.modal",(function(){t.$emit("hidden"),t.autodestroy&&(t.$emit("close"),n.dispose(),t.$el.remove(),t._isDestroyed||t.$destroy());var e=Ul.length;if(!t.background&&Ul.length>1)for(var a=Ul.length-2;a>=0;a--)if(Ul[a].isShown()){Ul[a].front();break}for(;e--;)Ul[e]._uid===t._uid&&t.autodestroy&&Ul.splice(e,1)})),$(this.$el).on("click",".modal-footer .btn",(function(e){e.target.nodeName.toLowerCase();var n=e.target.getAttribute("href");if(n&&"#"!==n||"button"===e.target.type||t.$emit("save"),"#"===n)return!1})),this.modal=n,this.front()},methods:{loading:function(t){this.isloading=void 0===t||t,this.buttonsDisable(this.isloading)},buttonsDisable:function(t){var e=$(this.$refs.footer).find("button");void 0===t||t?e.attr("disabled",!0):e.removeAttr("disabled")},close:function(){this.modal.hide()},back:function(t){this.background=void 0===t||!0===t,this.modal._backdrop&&(this.background?this.modal._backdrop.classList.add("background"):this.modal._backdrop.classList.remove("background"))},front:function(){if(this._isDestroyed)return error("modal has been destroyed");for(var t=Ul.length;t--;)Ul[t]._uid===this._uid?Ul.splice(t,1):Ul[t].back();Ul.push(this),this.back(!1),this.modal.show()},closed:function(){return!this.$el.classList.contains("show")||this.background},isVisible:function(){},isShown:function(){return this.modal&&this.modal._isShown}}};const Hl=(0,Fl.Z)(Vl,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal app-modal",class:t.cls,attrs:{tabindex:"-1","data-background":t.background}},[n("div",{staticClass:"modal-dialog",class:{"modal-lg":"lg"===t.size,"modal-xl":"xl"===t.size,"modal-fullscreen":"full"===t.size,"modal-dialog-centered":t.centered,"modal-dialog-scrollable":void 0!==t.scroll&&!1!==t.scroll,"fixed-y":void 0!==t.fixedY&&!1!==t.fixedY,"fixed-x":void 0!==t.fixedX&&!1!==t.fixedX}},[n("div",{staticClass:"modal-content"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.headerShow,expression:"headerShow"}],staticClass:"modal-header"},[t._t("header",[n("h5",{staticClass:"modal-title text-truncate"},[t.icon?n("i",{class:t.icon}):t._e(),t._v("\n                        "+t._s(t.title)+"\n                    ")])]),t._v(" "),t.noclose?t._e():n("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})],2),t._v(" "),n("div",{staticClass:"modal-body",class:{"p-0":void 0!==t.bodyPadding&&(!t.bodyPadding||"0"===t.bodyPadding)}},[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.isloading,expression:"isloading"}]}),t._v(" "),t.raw?n("div",{domProps:{innerHTML:t._s(t.text)}}):t._t("default",[t._v("\n                    "+t._s(t.text)+"\n                ")]),t._v(" "),t.component?n(t.component[0],t._b({tag:"component"},"component",t.component[1],!1)):t._e()],2),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.footerShow,expression:"footerShow"}],ref:"footer",staticClass:"modal-footer"},[t._t("footer",[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v("Закрыть")]),t._v(" "),t.save?[n("button",{ref:"save",staticClass:"btn btn-primary"},[t._v(t._s(t.save))])]:t._t("save")])],2)])])])}),[],!1,null,null,null).exports;const Zl={name:"app_popover",props:{text:{type:String,required:!0}}};const Gl=(0,Fl.Z)(Zl,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"app-popover"},[t._v("\n    "+t._s(t.text)+"\n")])}),[],!1,null,null,null).exports;function zl(t){return(zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ql(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Kl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kl(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function Kl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const Wl={props:{root_comp:{type:String,default:"modal"}},data:function(){return{isFloating:!1,utils:Cl.Z,_mounted:!1}},destroyed:function(){this._wsHander&&this.$root.$off("wsmess",this._wsHander),this.$emit("destroyed",this)},created:function(){this._wsHander=null,this._floatingName=this.$options.name||"default"},mounted:function(){var t=this;if(this.$el&&this.$el instanceof HTMLElement?this.$el.setAttribute("data-app-component",this.$options.name||"true"):error("error in template",this.$options.name,this.$options.__file,this),this._mounted=!0,this.$emit("mount",this),this.$root.floatingSupported&&(void 0===this.$options.autoFloating||this.$options.autoFloating)){var e=this._compPosition();e&&(e.resizeable&&this.resizeable(),e.draggable&&(this.$root._mounted?this.draggable():this.$root.$on("mount",(function(){t.draggable()}))),(e.resizeable||e.draggable)&&(this.isFloating=!0))}},watch:{isFloating:function(){this.$el.animate("pulse",.1),this.isFloating?(this.$root.addFloating(this),this.$el.setAttribute("data-floating",!0)):(this.$root.removeFloating(this),this.$el.removeAttribute("data-floating"))}},components:{rub:{props:{money:{}},data:function(){return{}},template:'<small><slot></slot><template v-if="money !== undefined">{{moneyFormat}}</template> <i class="fa fa-rub" aria-hidden="true"></i></small>',computed:{moneyFormat:function(){return void 0!==this.money?this.formatMoney(this.money):void 0}},methods:{},created:function(){}}},computed:{global:function(){return this.$root.appSettingsGlobal},static:function(){return this.$root.sharedBuffer},_modal_or_div:function(){return"modal"===this.root_comp?Hl:{template:"<div><slot></slot></div>"}}},methods:{formatMoney:function(t){return Cl.Z.formatMoney(t)},onFloatingActive:function(){this.$root.zIndexFloatingReset(),this.$el.style.setProperty("z-index",2)},getParent:function(t){for(var e=this.$parent;e;){if(e.$options.name===t)return e;e=e.$parent}},getFirstChild:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.$children,r=ql(a);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.$options.name===t)return i;if(n&&i.$children.length>0){var s=i.getFirstChild(t,n);if(s)return s}}}catch(t){r.e(t)}finally{r.f()}},getAllChilds:function(){var t,e=[],n=ql(this.$children);try{for(n.s();!(t=n.n()).done;){var a=t.value;e.push(a);var r,i=ql(a.getAllChilds());try{for(i.s();!(r=i.n()).done;){var s=r.value;e.push(s)}}catch(t){i.e(t)}finally{i.f()}}}catch(t){n.e(t)}finally{n.f()}return e},onMount:function(t){this._mounted?t():this.$once("mount",(function(){t()}))},_compPosition:function(t){var e="position_"+this._floatingName,n=Cl.Z.storage(e);return t&&"object"===zl(t)?Cl.Z.storage(e,Object.assign(n||{},t)):null===t&&Cl.Z.storageRemove(e),n},resizeable:function(t){var e=this;if(void 0===t||"object"===zl(t)){t=Object.assign(this.$options.resizeable||{},t||{});var n=this.$el.getBoundingClientRect(),a=this.$el;if(!a)return error("no elem for resizable");$(a).resizable(Object.assign({handles:"n, e, s, w, se",cancel:"input,textarea,button,select,option,super-smiles",minWidth:350,minHeight:300,resize:function(t,n){e._compPosition({width:n.size.width,height:n.size.height})},create:function(t,a){e._compPosition({resizeable:!0});var r=e._compPosition()||{};r.width||(r.width=n.width),r.height||(r.height=n.height),e.$el.style.width=r.width+"px",e.$el.style.height=r.height+"px"}},t))}else t||$(this.$el).resizeableDestroy()},draggable:function(t){var e=this;if(void 0===t||"object"===zl(t)){t=Object.assign(this.$options.draggable||{},t||{});var n=this.$root.$el;$(this.$el).draggable(Object.assign({handle:"header",containment:n,drag:function(t,n){n.position.top<3&&(n.position.top=3),e._compPosition({top:n.position.top,left:n.position.left})},create:function(){e._compPosition({draggable:!0});var t=e.$el.getBoundingClientRect();e.$el.style.width=t.width+"px";var a=e._compPosition();a&&("left"in a&&(e.$el.style.left=a.left+"px"),"top"in a&&(e.$el.style.top=a.top+"px"),setTimeout((function(){Cl.Z.rectIsOverflow(e.$el,n)&&(error("bounding overflow"),e.$el.style.removeProperty("left"),e.$el.style.removeProperty("top"))}),1e3))}},t))}else t||$(this.$el).draggableDestroy()},floating:function(t){void 0===t||t?(this.isFloating=!0,this.draggable(),this.resizeable()):t||(this.draggable(!1),this.resizeable(!1),this._compPosition({draggable:!1,resizeable:!1}),this.isFloating=!1)},popover:function(t,e,n,a){a||(a={});var r=this.$root.make(Bl,{parent:this,propsData:Object.assign(a,{template:t,element:e,params:n})});return r.$mount(),r},make:function(t,e){var n,a=this;if("string"==typeof t){if(!(n=this.$options.components[t]||""))throw Error("component not found: "+t)}else n=t;return"function"!=typeof n||n.component?this.$root.createCompFromObject(n,e):new Promise((function(t,r){n().then((function(n){t(a.$root.createCompFromObject(n.default,e))})).catch((function(t){r(t)}))}))},render:function(t,e){var n=this,a=this.make(t,{propsData:e});return a instanceof Promise?a.then((function(t){t.$mount()})).catch((function(t){n.$root.popupFixErr(t)})):a.$mount(),a},idStatic:function(t){var e="_id_static_"+(t||"");return this[e]||(this[e]="auto_id_"+Cl.Z.makeid(10)),this[e]},idRand:function(t){return(t||"")+Cl.Z.makeid(10)},$api:function(t,e,n){var a=this;return"loading"in this&&(this.loading=!0),pl.V.make(e,n||{}).then((function(e){return t.call(a,e),e})).catch((function(t){a.$root.popupFixErr(t)})).always((function(){"loading"in a&&(a.loading=!1)}))},extractData:function(t){return Fg.extractData(t)},setWsHandler:function(t){this._wsHander=t,this.$root.$on("wsmess",this._wsHander)}}};const Yl={name:"chat_user_popup",props:{chat:Object,user:Object},data:function(){return{duration:0,hasShown:!1}},destroyed:function(){this.unwatchClock&&this.unwatchClock()},created:function(){var t=this;this.updateDuration(),this.unwatchClock=this.chat.$watch("clock",(function(){t.updateDuration()}))},methods:{updateDuration:function(){this.chat.clock&&(this.duration=(this.chat.clock-this.user.joinAt)/1e3,this.duration=Cl.Z.secToHHMMSS(this.duration.toFixed(0)))},close:function(){var t=this.getParent("modal");t&&t.close()}}};const Xl=(0,Fl.Z)(Yl,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("div",{staticClass:"app-user-popover"},[n("div",{staticClass:"row flex-nowrap align-items-center g-0 mb-2"},[n("div",{directives:[{name:"user",rawName:"v-user",value:t.user.info.uid||!1,expression:"user.info.uid || false"}],staticClass:"col-auto me-2",on:{click:t.close}},[n("img",{staticStyle:{height:"50px"},attrs:{src:t.user.info.avatar}})]),t._v(" "),n("div",{staticClass:"col col-nick"},[n("h4",{staticClass:"text-truncate"},[n("a",{directives:[{name:"user",rawName:"v-user",value:t.user.info.uid||!1,expression:"user.info.uid || false"}],attrs:{target:"_blank",href:t.user.info.profile},on:{click:function(e){return t.close()}}},[t._v(t._s(t.user.nickname))])]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.user.info.statusText,expression:"user.info.statusText"}],staticClass:"badge bg-success"},[t._v(t._s(t.user.info.statusText))])])]),t._v(" "),t.user.self?n("div",{staticClass:"my-1"},[n("strong",[t._v("ЭТО Я :-))")])]):t._e(),t._v(" "),t.user.ignored?n("div",{staticClass:"my-1"},[n("span",{staticClass:"badge bg-danger"},[t._v("В игноре")])]):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.user.self,expression:"!user.self"}],staticClass:"row g-0 flex-column gap-2"},[t.chat.self.moder?n("ban",{attrs:{client:t.user,"as-moder":t.chat.self.moderator&&!t.chat.self.owner,"moder-nickname":t.chat.self.nickname},on:{click:function(e){return t.close()}}}):t._e(),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:(t.chat.self.moderator||t.chat.self.owner)&&!t.user.self&&!t.user.owner,expression:"((chat.self.moderator || chat.self.owner) && !user.self && !user.owner)"}],staticClass:"btn",class:{"btn-secondary":!t.user.moder,"btn-success":t.user.moder},on:{click:function(e){return t.chat.moderToggle(t.user)}}},[n("i",{staticClass:"em em-male-police-officer",attrs:{"aria-role":"presentation","aria-label":""}}),t._v(" "),t.user.moder?n("span",{staticClass:"text-decoration-line-through"},[t._v("Удалить из смотрящих")]):n("span",[t._v("Назначить смотрящим")])]),t._v(" "),n("button",{directives:[{name:"mess",rawName:"v-mess",value:t.user.info.uid,expression:"user.info.uid"},{name:"show",rawName:"v-show",value:t.user.info.uid,expression:"user.info.uid"}],staticClass:"btn btn-secondary"},[n("i",{staticClass:"fa fa-commenting-o",attrs:{"aria-hidden":"true"}}),t._v("\n            Сообщение\n        ")]),t._v(" "),n("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.chat.private(t.user),t.close()}}},[n("i",{staticClass:"fa fa-user-secret",attrs:{"aria-hidden":"true"}}),t._v("\n            Приват\n        ")]),t._v(" "),n("button",{staticClass:"btn",class:{"btn-warning":!t.user.ignored,"btn-success":t.user.ignored},on:{click:function(e){return t.$root.ignor(t.user.info.uid,t.user.id)}}},[n("i",{staticClass:"fa fa-ban",attrs:{"aria-hidden":"true"}}),t._v("\n            "+t._s(t.user.ignored?"Не игнорировать":"Добавить в игнор")+"\n        ")]),t._v(" "),t.user.info.uid?n("complaint",{attrs:{subject:"user","subject-id":t.user.info.uid,room:t.user.roomAlias}},[n("i",{staticClass:"fa fa-flag "}),t._v("\n            Отправить жалобу\n        ")]):t._e()],1),t._v(" "),n("div",{staticClass:"row align-items-center gx-1 my-1"},[t.user.info.country_flag?n("div",{staticClass:"col-auto",domProps:{innerHTML:t._s(t.user.info.country_flag)}}):t._e(),t._v(" "),t.user.info.country?n("div",{staticClass:"col-auto"},[t._v(t._s(t.user.info.country))]):t._e(),t._v(" "),t.user.info.city?n("div",{staticClass:"col-auto"},[t._v(t._s(t.user.info.city))]):t._e(),t._v(" "),t.user.info.extended&&t.user.info.extended.sex?n("div",{staticClass:"col-auto"},["f"==t.user.info.extended.sex?n("span",{attrs:{"data-title":"Женский пол"}},[n("i",{staticClass:"em em-girl",attrs:{"aria-role":"presentation","aria-label":"GIRL"}})]):"m"==t.user.info.extended.sex?n("span",{attrs:{"data-title":"Мужской пол"}},[n("i",{staticClass:"em em-face_with_cowboy_hat",attrs:{"aria-role":"presentation","aria-label":"FACE WITH COWBOY HAT"}})]):"t"==t.user.info.extended.sex?n("span",{attrs:{"data-title":"Транс"}},[n("i",{staticClass:"em em-female_elf",attrs:{"aria-role":"presentation","aria-label":""}})]):t._e()]):t._e(),t._v(" "),n("div",{staticClass:"col-auto"},[t.user.info.age?n("strong",[t._v(t._s(t.user.info.age))]):t._e()])]),t._v(" "),t.hasShown?n("about",{attrs:{inline:!0,excluded:["sex","city","birth"],client:t.user}}):t._e(),t._v(" "),n("div",{staticClass:"d-flex justify-content-between mt-3"},[n("div",[n("span",{staticClass:"app-link",on:{click:function(e){t.chat.toNick(t.user),t.close()}}},[n("i",{staticClass:"fa fa-pencil-square-o",attrs:{"aria-hidden":"true"}}),t._v(" написать в чат")])]),t._v(" "),n("div",{staticClass:"mx-2"},[t.duration?n("span",[n("i",{staticClass:"fa fa-clock-o",attrs:{"data-title":"В чате"}}),t._v(" "+t._s(t.duration))]):t._e()])])],1):t._e()}),[],!1,null,null,null).exports;function Jl(t){return(Jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}bo.directive("popover",{bind:function(t,e,n){var a=Gl,r={text:e.value};"object"===Jl(e.value)&&(a=e.value,r=e.arg||{}),n.context.popover(a,t,{propsData:r})},inserted:function(t,e,n){}}),bo.directive("user",{bind:function(t,e,n){},inserted:function(t,e,n){var a=e.value;t.classList.add("app-user-link"),t.addEventListener("click",(function(t){t.preventDefault(),a&&n.context.$root.openUser(a)}))}});var Ql,tu={bind:function(t,e,n){},inserted:function(t,e,n){n.context.$root.onMount((function(){var n={animation:!1,placement:"top",title:e.value};"help"===e.name&&(t.style.cursor="help"),t.addEventListener("mouseleave",(function(){t.removeTooltip(!0)})),t.addEventListener("click",(function(){t.removeTooltip(!0)})),new bootstrap.Tooltip(t,n)}))},update:function(t,e,n){var a=bootstrap.Tooltip.getInstance(t);a&&a.config&&(a.config.title=e.value)},unbind:function(t,e,n){t.removeTooltip()}};function eu(t,e){t.querySelectorAll("img").forEach((function(t){t.complete&&0!==t.naturalWidth?e(t):t.addEventListener("load",(function(){e(t)}))}))}function nu(t){return(nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}bo.directive("title",tu),bo.directive("help",tu),bo.directive("mess",{bind:function(t,e,n){},inserted:function(t,e,n){t.addEventListener("click",(function(t){t.preventDefault(),n.context.global.uid?n.context.$root.openMessages(e.value):n.context.$root.popupFixErr("Вы не авторизованы")}))}}),bo.directive("scroll",{bind:function(t,e,n){},inserted:function(t,e,n){t.addEventListener("scroll",(function(a){if("function"==typeof e.value){var r=t.scrollHeight-t.clientHeight;t.scrollTop>=r&&r>0&&e.value.call(n.context)}}))}}),bo.directive("upload",{bind:function(t,e,n){},inserted:function(t,e,n){t.addEventListener("paste",(function(t){var e=n.context.getFirstChild("uploader",!0);e&&e.attachFromClipboard(t)}))}}),bo.directive("nick-style",{bind:function(t,e,n){var a=n.context,r=e.value.font,i=e.value.theme||a.$root.themeColor;if(r&&"object"===Jl(r)&&r.dark&&r.light){var s=r[i],o=r.cls?r.cls:"";s&&Object.assign(t.style,s),o instanceof Array&&o.length>0&&(-1!==o.indexOf("app-text-anim")&&(t.dataset.textAnimTimeout=3e3),t.classList.add(o))}},inserted:function(t,e,n){}}),bo.directive("parse-smiles",{bind:function(t,e,n){var a=n.context,r=e.value,i=e.value.theme||a.$root.themeColor;r=Cl.Z.escapeHtml(r),r=a.$root.smiles.replaceCodes(r,i,5),t.innerHTML=r},inserted:function(t,e,n){}}),bo.directive("on-image",{inserted:function(t,e,n){n.context;eu(t,e.value)}}),$.fn.TextAnim=(Ql=function(t){var e=t.data(),n=t.text(),a=e.textAnimTimeout;return t.contents().filter((function(){return 3===this.nodeType})).each((function(t,e){var n="",r=e.textContent.trim();if(r.length){var i,s=r.match(/./gi);if(s)for(n=$('<span class="text-animated"/>'),t=0;t<s.length;t++)i=s[t],n.append("<span>"+i+"</span>");if(n.length>0){$(e).replaceWith(n);var o=n.find(">span"),c=setInterval((function(){o.each((function(t,e){e.style.setProperty("color",Cl.Z.getRandomColor(),"important")}))}),500);a&&setTimeout((function(){n.replaceWith(document.createTextNode(r)),clearInterval(c)}),a)}}})),n},function(t,e){return this.each((function(){Ql($(this),{})}))}),$.fn.find2=function(t,e){var n=$(this),a=n.find(t);return n.is(t)&&a.add(n),a},$.fn.isOverflow=function(){var t=this[0];return t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth},$.fn.scrollEnd=function(t){this[0]||error("not defined",this);var e=this[0].scrollHeight;t?this.animate({scrollTop:e},{duration:t}):this.scrollTop(e-this.height())},$.fn.infiniteScroll=function(t){var e,n,a=this,r=$(this);"HTML"===this[0].nodeName&&(a=$(document)),a.on("scroll",(function(){var a=r.scrollTop(),i=!(a>=e)&&r.scrollBottom();e=a,!i&&r.isOverflow()&&r.iScrollEndY(t.distance)?n||(n=!0,"function"==typeof t.callback&&t.callback()):n=!1}))},$.fn.resizeableDestroy=function(){var t=this[0];t.classList.contains("ui-resizable")&&(log("resizable off"),this.resizable("destroy"),t.style.removeProperty("height"),t.style.removeProperty("width"))},$.fn.draggableDestroy=function(){var t=this[0];t.classList.contains("ui-draggable")&&(log("draggable off"),this.draggable("destroy"),t.style.removeProperty("left"),t.style.removeProperty("top"),t.style.removeProperty("right"),t.style.removeProperty("bottom"))},HTMLElement.prototype.removeTooltip=function(t){var e=bootstrap.Tooltip.getInstance(this);e&&(t?e.hide():(e.tip&&!e.tip.parentNode&&(e.tip=null),e.dispose()))},HTMLElement.prototype.insertAtCaret=function(t){var e=this;if(document.selection)e.focus(),document.selection.createRange().text=t;else if(e.selectionStart||"0"==e.selectionStart){var n=e.selectionStart,a=e.selectionEnd;e.value=e.value.substring(0,n)+t+e.value.substring(a,e.value.length)}else e.value+=t},HTMLElement.prototype.animate=function(t,e,n){var a=this;return new Promise((function(r,i){var s=a,o="animate__"+t;a.classList.add("animate__animated"),a.classList.add(o),e&&a.style.setProperty("--animate-duration",e+"s"),n&&a.style.setProperty("--animate-repeat",n),a.addEventListener("animationend",(function(t){t.stopPropagation(),s.classList.remove("animate__animated",o),s.style.removeProperty("--animate-duration"),s.style.removeProperty("--animate-repeat"),r()}),{once:!0})}))},Object.defineProperty(Array.prototype,"removeObjects",{enumerable:!1,value:function(t){for(var e=0;e<this.length;e++)t(this[e])&&this.splice(e,1)}}),Object.defineProperty(Array.prototype,"shuffle",{enumerable:!1,value:function(){for(var t,e=[],n=this.length;n;)(t=Math.floor(Math.random()*this.length))in this&&(e.push(this[t]),delete this[t],n--);return e}}),Object.defineProperty(Array.prototype,"includesArray",{enumerable:!1,value:function(t){var e=!1;return this.forEach((function(n,a){if(-1!==t.indexOf(n))return e=!0,!1})),e}}),Object.defineProperty(Array.prototype,"unset",{enumerable:!1,value:function(t){for(var e,n,a=this.length;a--;)n=this[a],t&&("function"==typeof t?e=t(this[a]):"object"===nu(t)?e=JSON.stringify(n)===JSON.stringify(t):"string"!=typeof t&&"number"!=typeof t||("object"===nu(n)?e=n.id===t:nu(n)===nu(t)&&(e=n===t))),!0===e&&this.splice(a,1)}}),Object.defineProperty(Array.prototype,"pushItems",{enumerable:!1,value:function(t){for(var e=0;e<t.length;e++)this.push(t[e]);return this}}),Object.defineProperty(Array.prototype,"updateItems",{enumerable:!1,value:function(t){for(var e=0;e<this.length;e++)Object.assign(this[e],t)}}),Object.defineProperty(String.prototype,"replaceAll",{enumerable:!1,value:function(t,e){var n=t instanceof RegExp?t:new RegExp(t,"g");return this.replace(n,e)}}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return/function ([^(]*)/.exec(this+"")[1]}}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var n=0;n<this.length;n++)t.call(e,this[n],n,this)}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var a=arguments[1],r=0;r<n;){var i=e[r];if(t.call(a,i,r,e))return i;r++}},configurable:!0,writable:!0});const au={parse:function(t,e,n){this.rules.forEach((function(a){var r=[];t.matches(a.filter)&&r.push(t),t.querySelectorAll(a.filter).forEach((function(t){r.push(t)}));for(var i=0,s=r;i<s.length;i++){var o=s[i];"function"==typeof a[n]&&a[n].call(e,o)}}))},global:function(){$(document).on("hidden.bs.modal",(function(){$(".modal.show").length>0&&$("body").addClass("modal-open")}))},rules:[{filter:"[data-title],[data-help]",removed:function(t){t.removeTooltip()},added:function(t){var e=t.dataset.title||t.dataset.help;if(e){var n={container:this.$el,animation:!1,placement:"top",title:e};t.addEventListener("mouseleave",(function(){this.removeTooltip(!0)})),t.addEventListener("click",(function(){this.removeTooltip(!0)})),new bootstrap.Tooltip(t,n)}}},{filter:".app-colorpicker",added:function(t){$(t).spectrum($.extend({preferredFormat:"hex"},t.dataset))}},{filter:".app-text-anim",added:function(t){$(t).TextAnim(t.dataset)}},{filter:".app-radio",added:function(t){$(t).find("input[type=radio]").is(":checked")&&$(t).addClass("active"),$(t).on("click",(function(t){"input"!==t.target.nodeName.toLowerCase()&&($(this).find("input[type=radio]").trigger("click"),$(this).parents(".app-radio-container:first").find(".app-radio").removeClass("active"),$(this).addClass("active"))}))}},{filter:".app-datepicker",added:function(t){!t.dataset.format&&/^\d{4}-\d{2}-\d{2}$/.test(t.value)&&(t.value=t.value.split("-").reverse().join(".")),$(t).datepicker(Object.assign({language:"ru",format:"dd.mm.yyyy",autoclose:!0,todayHighlight:!0,endDate:"new Date()"},t.dataset)).on("changeDate",(function(t){log(t)})),t.setAttribute("autocomplete","off")}},{filter:"[data-passgen]",added:function(t){$(t).on("click",(function(){var e=t.dataset.passgen,n=t.dataset.length,a=$("#"+e);a.length>0&&(n||(n=a.attr("minlength")||6),a.val(Cl.Z.makeid(n)))}))}},{filter:"[autofocus]",added:function(t){setTimeout((function(){t.insertAtCaret(""),t.focus()}),100)}},{filter:"a.app-url-parsed",added:function(t){t.classList.contains("self")||t.addEventListener("click",(function(t){if(!confirm("Вы переходите на сторонний сайт, который может потенциально содержать вирусы и прочее вредоносное содержание.\n\nПЕРЕЙТИ ПО ССЫЛКЕ НА СВОЙ СТРАХ И РИСК?"))return t.preventDefault(),!1}))}}]};const ru={name:"messaging_public_create",props:{group:{type:Object}},data:function(){return{members:[],loading:!1,saved:!1}},computed:{users:function(){return this.members instanceof Array?this.members.map((function(t){return t})):[]}},created:function(){var t=this;this.group&&(this.loading=!0,pl.V.make("getGroupMembers",{group_id:this.group.id}).then((function(e){t.members=e.members})).catch((function(e){t.$root.popupFixErr(e)})).always((function(){t.loading=!1})))},mounted:function(){},methods:{onSuccess:function(t){var e=this;this.saved=!0,setTimeout((function(){e.$root.openMessages({group:t.chat_id}),e.$refs.modal.close()}),1e3)}}};const iu=(0,Fl.Z)(ru,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{ref:"modal",attrs:{title:t.group?t.group.name:"Создание группового чата",save:t.group?"Сохранить":"Создать"}},[n("forma",{directives:[{name:"show",rawName:"v-show",value:!t.saved,expression:"!saved"}],attrs:{action:"/api/groupChatCreate"},on:{success:function(e){return t.onSuccess(e)}}},[t.group?n("input",{attrs:{type:"hidden",name:"group_id"},domProps:{value:t.group.id}}):t._e(),t._v(" "),n("div",{staticClass:"form-group form-floating"},[n("input",{staticClass:"form-control",attrs:{name:"name",placeholder:"Название чата"},domProps:{value:t.group?t.group.name:""}}),t._v(" "),n("label",[t._v("Название чата")])]),t._v(" "),n("div",{staticClass:"form-group border p-3"},[n("strong",[t._v("Участники группы:")]),t._v(" "),t.loading?t._e():n("users-selecter",{staticClass:"mt-2",attrs:{users:t.users,placeholder:"начните вводить имя пользователя"}})],1)]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.saved,expression:"saved"}],staticClass:"alert alert-success  text-center"},[n("i",{staticClass:"fa fa-check"}),t._v(" "),n("strong",[t._v(t._s(t.group?"Сохранено":"Группа создана"))])])],1)}),[],!1,null,null,null).exports;function su(t){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ou(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return cu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cu(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function cu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const lu={name:"messaging",props:{messaging:{default:null},messages:{default:null},uid:{},group:{},groups:{},listHidden:{type:Boolean,default:!1},support:{type:Boolean,default:!1},loadList:{type:Boolean,default:!0},subject:{type:String}},data:function(){return{currentUid:this.uid,currentGroup:this.group,messaging$:this.support?null:this.messaging||null,groups$:this.support?null:this.groups||null,messages$:this.messages,endOfData:!1,page:0,loading:!1,searching:!1,loadingMessages:!1,messLoadParams:{},submitParams:{},limit:0,filterList:""}},destroyed:function(){this.ws&&this.ws.off("message",this.messageListener)},watch:{$route:function(t,e){},searching:function(){var t=this;this.searching&&this.$nextTick((function(){t.$refs.searchInput.focus()}))}},computed:{messagingFiltered:function(){var t=this;return this.messaging$ instanceof Array?this.messaging$.filter((function(e){var n=e.user||{};return!(t.filterList&&!Cl.Z.findIn(t.filterList,[e.text,n.name,n.alias]))})):this.messaging$}},created:function(){this.ws=this.$root.ws,this.support&&(this.submitParams.support=1),this.ws.on("message",this.messageListener)},mounted:function(){var t=this;null===this.messaging$&&this.load({uid:this.uid}),(this.currentUid||this.currentGroup)&&this.$nextTick((function(){t.open(t.currentUid?t.currentUid:{group:t.currentGroup})}))},methods:{addGroup:function(){this.render(iu)},updateGroup:function(t){this.render(iu,{group:t})},getTab:function(t){if(this.messaging$ instanceof Array){var e,n=ou(this.messaging$);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a.uid==t)return a}}catch(t){n.e(t)}finally{n.f()}}},getTabGroup:function(t){if(this.groups$ instanceof Array){var e,n=ou(this.groups$);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a.id==t)return a}}catch(t){n.e(t)}finally{n.f()}}},move:function(t){this.messaging$.unset((function(e){return e.uid===t.uid})),this.messaging$.unshift(t),this.sacrollStart()},sacrollStart:function(){this.$refs.tabs.scroll(0,0)},open:function(t,e){var n,a,r,i,s=this,o={offset:0,page:1};if("object"!==su(t)&&t?n=t:(t||(t={}),(o=Object.assign(o,t)).uid?n=o.uid:o.group?a=o.group:this.currentUid?n=this.currentUid:this.currentGroup&&(a=this.currentGroup)),n)n=parseInt(n),o.uid=n,r=this.currentUid!==n,(i=this.getTab(n))||null===this.messaging$||this.load({uid_only:n}),i&&!e&&r&&this.move(i),this.currentGroup=null,this.currentUid=n;else{if(!a)return error("bad params for open");a=parseInt(a),o.group=a,r=this.currentGroup!==a,(i=this.getTabGroup(a))||null===this.groups$||this.load({group_only:a}),this.currentUid=null,this.currentGroup=a}this.support&&(o.support=1),this.messages$&&!r?this.messages$.list=[]:(this.messages$=null,this.searching=!1),this.loadingMessages=!0,this.messLoadParams=o,pl.V.make("/api/messages",o).then((function(t){if(n){var e=s.getTab(n);e&&(e.unread=0)}s.messages$=t})).catch((function(t){s.$root.popupFixErr(t)})).always((function(){s.loadingMessages=!1}))},load:function(t){var e=this;t||(t={}),this.loading=!0;var n={};this.support&&(n.support=1),this.loadList||(n.nolist=1),pl.V.make("getMesssaging",Object.assign(n,t)).then((function(n){if(null!==n.list){if(t.uid_only)n.list.length>0&&(e.messaging$.unshift(n.list[0]),e.sacrollStart());else if(t.offset)for(var a=0;a<n.list.length;a++)e.messaging$.push(n.list[a]);else e.messaging$=n.list;e.endOfData=0===n.list.length,e.limit=n.limit}n.groups&&(e.groups$=n.groups)})).catch((function(t){e.$root.popupFixErr(t)})).always((function(){e.loading=!1}))},cleanMess:function(t){var e=this.getFirstChild("user_messages");e&&e.clean(),this.messaging$ instanceof Array&&t&&this.messaging$.unset((function(e){return t===e.uid}))},loadMore:function(){if(this.messaging$){if(this.page++,this.endOfData)return}else this.page=0;this.load({offset:this.page})},clickOnTab:function(t,e){this.currentGroup=null,t.unread=0,this.currentUid!==t.uid&&this.open(t.uid,e)},clickOnGroup:function(t,e){this.currentUid=null,t.unread=0,this.currentGroup!==t.id&&this.open({group:t.id},e)},search:function(t){var e=this.$refs.searchInput.value;this.open({filter:{__search:e}})},leaveGroup:function(t){this.groups$.unset((function(e){return e.id===t})),this.currentGroup=null,this.currentUid=null},messageListener:function(t,e,n){var a;switch(t){case"mess":if("support"===e.tag&&!this.support&&this.global.moder)return;var r;a=this.getFirstChild("user_messages");var i=e.group||e.from,s=e.group?"currentGroup":"currentUid",o=e.group?"id":"uid";if(r=e.group?this.getTabGroup(e.group):this.getTab(e.from),!e.group){var c=this.$refs["typing"+i];c&&c[0].stop()}a&&this[s]==i&&(a.addMess(e.mess),a.typing(!1)),r&&r[o]!=this[s]&&r.unread++;break;case"typedMess":var l=this.getFirstChild("user_messages"),u=this.$refs["typing"+e.from];if(this.currentUid==e.from)l&&l.typing();else{this.getTab(e.from);u&&u[0].start()}break;case"removedMess":(a=this.getFirstChild("user_messages"))&&a.removedMess(e.id)}}}};const uu=(0,Fl.Z)(lu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-messaging row g-0 flex-nowrap border",attrs:{"data-current-id":t.currentUid||t.currentGroup||!1}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.listHidden,expression:"!listHidden"}],ref:"tabs",staticClass:"col-auto nav flex-nowrap bg-light panel-left flex-column nav-pills border-end users-list",attrs:{role:"tablist","aria-orientation":"vertical"}},[n("div",{staticClass:"row g-0"},[n("div",{staticClass:"col"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filterList,expression:"filterList"}],staticClass:"form-control",domProps:{value:t.filterList},on:{input:function(e){e.target.composing||(t.filterList=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.addGroup()}}},[n("i",{staticClass:"fa fa-plus"})])])]),t._v(" "),n("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"users-list-inner "},[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading&&null===t.messaging$,expression:"loading && messaging$ === null"}],staticClass:"my-3",attrs:{inline:""}}),t._v(" "),t._l(t.groups$,(function(e){return n("a",{staticClass:"nav-link  mw-100",class:{active:e.id==t.currentGroup},attrs:{href:"#"},on:{click:function(n){return t.clickOnGroup(e,n)}}},[n("div",{staticClass:"row g-0 flex-nowrap"},[n("div",{staticClass:"col-auto me-2"},[n("img",{staticStyle:{height:"50px"},attrs:{src:e.owner?e.owner.avatar:"/i/group_chat.png"}})]),t._v(" "),n("div",{staticClass:"col text-truncate"},[n("strong",{},[n("i",{staticClass:"fa fa-group"}),t._v("\n                                "+t._s(e.name)+" ("+t._s(e.members_count)+")\n                            ")]),t._v(" "),e.owner?n("div",{staticClass:"text-truncate"},[n("small",{staticClass:"text-muted"},[t._v(t._s(e.owner.name))])]):t._e()]),t._v(" "),n("div",{staticClass:"col-auto"},[e.unread>0?n("span",{staticClass:"badge bg-danger"},[t._v("\n                                "+t._s(e.unread)+"\n                            ")]):t._e(),t._v(" "),e.count>0?n("span",{staticClass:"badge bg-secondary d-none"},[t._v("\n                                "+t._s(e.count)+"\n                            ")]):t._e()])])])})),t._v(" "),t._l(t.messagingFiltered,(function(e,a){return n("a",{staticClass:"nav-link  mw-100",class:{active:e.uid==t.currentUid},attrs:{href:"#"},on:{click:function(n){return t.clickOnTab(e,n)}}},[n("div",{staticClass:"row g-0 flex-nowrap"},[n("div",{staticClass:"col-auto me-2"},[n("img",{staticClass:"app-avatar",attrs:{src:e.user?e.user.avatar:t.global.imageBlank}})]),t._v(" "),n("div",{staticClass:"col text-truncate"},[n("div",{staticClass:"row g-0 flex-nowrap text-truncate"},[n("div",{staticClass:"col text-truncate pe-2"},[n("div",{staticClass:"text-truncate"},[t._v("\n                                        "+t._s(e.user?e.user.name:"удален")+"\n                                    ")])]),t._v(" "),n("div",{staticClass:"col-auto"},[n("small",{staticClass:"text-muted"},[t._v(t._s(e.date_max))])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.typing,expression:"!tab.typing"}],staticClass:"row g-0 flex-nowrap"},[n("div",{staticClass:"col text-truncate pe-2"},[n("small",{staticClass:"text-muted"},[t._v(t._s(e.text))])]),t._v(" "),n("div",{staticClass:"col-auto"},[e.unread>0?n("span",{staticClass:"badge bg-danger"},[t._v("\n                                        "+t._s(e.unread)+"\n                                    ")]):t._e(),t._v(" "),e.count>0?n("span",{staticClass:"badge d-none bg-secondary"},[t._v("\n                                        "+t._s(e.count)+"\n                                    ")]):t._e()])]),t._v(" "),n("typing",{ref:"typing"+e.uid,refInFor:!0,on:{state:function(t){e.typing=t}}})],1)])])})),t._v(" "),!t.endOfData&&t.messaging$&&t.messaging$.length>=t.limit?[t.loading?n("div",[t._m(0)]):n("div",{staticClass:"mb-5 mt-2 text-center"},[n("span",{staticClass:"dotted",on:{click:function(e){return t.loadMore()}}},[n("i",{staticClass:"fa fa-arrow-down"}),t._v("\n                            загрузи ещё\n                        ")])])]:t._e()],2)]),t._v(" "),n("div",{staticClass:"col h-100 p-2 position-relative message-output"},[t.currentUid||t.currentGroup?[n("loader",{directives:[{name:"show",rawName:"v-show",value:!t.messages$,expression:"!messages$"}]}),t._v(" "),t.messages$?n("div",{staticClass:"row g-0 flex-column h-100 flex-nowrap"},[n("div",{staticClass:"row g-0 col-auto user-info"},[n("div",{staticClass:"col-auto col-back"},[n("button",{staticClass:"btn btn-light",on:{click:function(e){t.currentUid=null,t.currentGroup=null}}},[n("i",{staticClass:"fa fa-arrow-left"})])]),t._v(" "),n("div",{staticClass:"col text-truncate"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.searching,expression:"!searching"}],staticClass:"row g-0 flex-nowrap"},[t.currentUid?[n("div",{staticClass:"col-auto me-2"},[n("a",{directives:[{name:"user",rawName:"v-user",value:t.currentUid,expression:"currentUid"}],attrs:{href:"/user/"+t.currentUid}},[n("img",{staticClass:"app-avatar",attrs:{src:t.messages$.user?t.messages$.user.avatar:t.global.imageBlank}})])]),t._v(" "),n("div",{staticClass:"col text-truncate pe-1"},[n("div",{staticClass:"mw-100 text-truncate"},[t.messages$.isFriend?n("i",{staticClass:"fa fa-handshake-o",attrs:{"data-title":"В друзьях","aria-hidden":"true"}}):t._e(),t._v(" "),n("span",{directives:[{name:"user",rawName:"v-user",value:t.currentUid,expression:"currentUid"}]},[t._v(t._s(t.messages$.user?t.messages$.user.name:"Удален"))])]),t._v(" "),n("div",[t.messages$.user&&t.messages$.user.online?n("small",{staticClass:"badge bg-success animate__animated animate__flash"},[t._v("В сети")]):n("small",{staticClass:"text-muted"},[t._v(t._s(t.messages$.user&&t.messages$.user.onlineLast))])])])]:[n("div",{staticClass:"col-auto me-2"},[n("img",{staticClass:"app-avatar",attrs:{src:t.messages$.user.owner?t.messages$.user.owner.avatar:t.global.imageBlank}})]),t._v(" "),n("div",{staticClass:"col text-truncate pe-1"},[n("div",{staticClass:"mw-100 text-truncate"},[n("div",{staticClass:"text-truncate"},[n("strong",[t._v("("+t._s(t.messages$.user.members_count)+") "+t._s(t.messages$.user.name))])]),t._v(" "),t.messages$.user.owner?n("small",{directives:[{name:"user",rawName:"v-user",value:t.messages$.user.owner.id,expression:"messages$.user.owner.id"}]},[t._v(t._s(t.messages$.user.owner.name))]):t._e()])])]],2),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.searching,expression:"searching"}],staticClass:"row g-0 flex-nowrap"},[n("div",{staticClass:"col"},[n("input",{ref:"searchInput",staticClass:"form-control",attrs:{placeholder:"поиск..."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}}})]),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.search(e)}}},[n("i",{staticClass:"fa fa-search"})]),t._v(" "),n("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.searching=!1,t.open()}}},[n("i",{staticClass:"fa fa-remove"}),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("отмена")])])])])]),t._v(" "),n("div",{staticClass:"col-auto"},[t._m(1),t._v(" "),n("div",{staticClass:"dropdown-menu dropdown-menu-end"},[n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.searching=!0}}},[n("i",{staticClass:"fa fa-search"}),t._v("\n                                    Поиск сообщений\n                                ")]),t._v(" "),t.currentUid?[t.support?t._e():n("friend-button",{staticClass:" dropdown-item",attrs:{tag:"a",uid:t.currentUid,"is-friend":t.messages$.isFriend}},[n("i",{staticClass:"fa fa-handshake-o",attrs:{"aria-hidden":"true"}}),t._v(" Подружиться")]),t._v(" "),t.support?t._e():n("user-blacklist",{staticClass:"dropdown-item text-warning",attrs:{tag:"a",uid:t.currentUid},model:{value:t.messages$.isBlackList,callback:function(e){t.$set(t.messages$,"isBlackList",e)},expression:"messages$.isBlackList"}}),t._v(" "),t.support?t._e():n("action",{staticClass:" dropdown-item",attrs:{action:"action/removeDialog",tag:"a",confirm:"Удалить всю переписку?",data:{uid:t.currentUid,action:"removeDialog",obj:"message"},href:"#"},on:{success:function(e){return t.cleanMess(t.currentUid)}}},[n("i",{staticClass:"fa fa-trash-o text-danger",attrs:{"aria-hidden":"true"}}),t._v(" Удалить переписку")])]:[t.messages$.user.isOwner?[n("a",{staticClass:" dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.updateGroup(t.messages$.user)}}},[n("i",{staticClass:"fa fa-wrench",attrs:{"aria-hidden":"true"}}),t._v(" "),n("strong",[t._v("Управление")])]),t._v(" "),n("action",{staticClass:" dropdown-item",attrs:{action:"/api/removeGroup",tag:"a",confirm:"Точно удалить?",data:{group_id:t.currentGroup},href:"#"},on:{success:function(e){return t.leaveGroup(t.currentGroup)}}},[n("i",{staticClass:"fa fa-trash-o text-danger",attrs:{"aria-hidden":"true"}}),t._v(" Удалить группу")])]:t._e(),t._v(" "),t.messages$.user.isOwner?t._e():n("action",{staticClass:" dropdown-item",attrs:{action:"/api/leaveGroup",tag:"a",confirm:"Точно покинуть?",data:{group_id:t.currentGroup},href:"#"},on:{success:function(e){return t.leaveGroup(t.currentGroup)}}},[n("i",{staticClass:"fa fa-sign-out text-danger",attrs:{"aria-hidden":"true"}}),t._v(" Покинуть группу")])]],2)])]),t._v(" "),n("user-message",{ref:"userMessages",staticClass:"col",attrs:{subject:t.subject,loading:t.loadingMessages,"load-params":t.messLoadParams,"submit-params":t.submitParams,messages:t.messages$.list,owner:t.messages$.user}})],1):t._e()]:[t._m(2)]],2)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center my-4"},[e("div",{staticClass:"spinner-grow",attrs:{role:"status"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-light",attrs:{"data-bs-toggle":"dropdown"}},[e("i",{staticClass:"fa fa-ellipsis-h",attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-centerred-abs"},[n("i",{staticClass:"fa fa-mouse-pointer",attrs:{"aria-hidden":"true"}}),t._v(" Выберите собеседника\n                ")])}],!1,null,null,null).exports;var du=!0;const fu={name:"room_loader",props:{alias:{type:String}},data:function(){return{roomOpened:!1,currentRoom:null,alias$:this.$route.params.alias}},watch:{$route:function(t,e){this.load(t.params.alias)}},created:function(){var t=Fg.data.room;t&&(!Cl.Z.isNumber(this.alias$)&&t.alias===this.alias$||Cl.Z.isNumber(this.alias$)&&t.id==this.alias$)&&du?(du=!1,this.roomOpened=!0,this.currentRoom=t):this.load(this.alias$)},mounted:function(){},methods:{load:function(t){var e=this;return this.roomOpened=!0,this.currentRoom=null,window.scrollTo(0,0),pl.V.make("getRoom",{room_id:t}).then((function(t){var n=t.room;e.currentRoom=n})).catch((function(t){e.$root.popupFixErr(t),e.roomOpened=!1}))}}};const hu=(0,Fl.Z)(fu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.roomOpened,expression:"roomOpened"}],ref:"currentRoomHolderContainer",staticClass:"app-room-popup-container"},[n("div",{ref:"currentRoomHolder",staticClass:"app-room-popup g-0"},[n("loader",{directives:[{name:"show",rawName:"v-show",value:!t.currentRoom,expression:"!currentRoom"}]}),t._v(" "),t.currentRoom?n("room",{key:t.currentRoom.id,attrs:{config:t.currentRoom}}):t._e()],1)])}),[],!1,null,null,null).exports;const pu={name:"create_room",props:{prop:{type:String}},data:function(){return{}},created:function(){},mounted:function(){},methods:{success:function(t){this.$root.openRoom(t.alias)}}};const mu=(0,Fl.Z)(pu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row g-0 justify-content-center"},[n("forma",{attrs:{action:"/api/createRoom"},on:{success:t.success}},[n("input",{attrs:{type:"hidden",name:"stream",value:"1"}}),t._v(" "),n("div",{staticClass:"form-group"},[n("input",{staticClass:"form-control form-control-lg",attrs:{autocomplete:"off",type:"text",name:"name",value:"",placeholder:"Название (заголовок) трансляции",required:"",autofocus:""}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("span",[t._v("Придумайте свой уникальный URL, например "),n("strong",[t._v("vasya007")])]),t._v(" "),n("input",{staticClass:"form-control",attrs:{autocomplete:"off",type:"text",name:"alias",placeholder:"URL"},domProps:{value:t.global.user.alias}}),t._v(" "),n("div",{staticClass:"lh-1"},[n("small",{staticClass:"text-muted"},[t._v("\n                    Эта ссылка будет постоянно принадлежать вам, до тех пор, пока вы не удалите трансляцию\n                ")])])]),t._v(" "),n("div",{staticClass:"row flex-lg-row"},[n("div",{staticClass:"col-12 col-sm-auto mb-3"},[n("uploader",{attrs:{alias:"cover",label:"Обложка трансляции","preview-size":"medium","max-width":"200",obj:"chat_room",image:""}})],1),t._v(" "),n("div",{staticClass:"col-12 col-sm"},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"adult",value:"1"}}),t._v(" "),n("span",{staticClass:"form-check-label text-danger"},[n("strong",[t._v("Будет содержание для взрослых")])])]),t._v(" "),n("div",{staticClass:"lh-1"},[n("small",{staticClass:"text-muted"},[t._v("\n                        Если ваша трансляция будет содержать материалы, предназначенный для взрослых, установите этот флажок\n                    ")])]),t._v(" "),n("div",{staticClass:"text-end my-3"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-check"}),t._v("\n                        Создать трансляцию\n                    ")])])])])])],1)}),[],!1,null,null,null).exports;const vu={name:"streams",props:{items:{type:Array}},data:function(){return{rooms:this.items||Fg.data.streams}},destroyed:function(){this.ws&&this.ws.off("message",this.messageListener),window.removeEventListener("resize",this.recalcLayouts)},created:function(){var t=this;this.ws=this.$root.ws,this.ws.on("message",this.messageListener),this.$watch("rooms",(function(){t.$nextTick((function(){t.loadImages()}))}),{deep:!0})},computed:{roomsComputed:function(){var t=this,e=this.rooms instanceof Array?this.rooms.map((function(e){var n=t.global.user;return Object.assign({},e,{userHidden:n&&e.owner&&n.streams_hidden instanceof Array&&-1!==n.streams_hidden.indexOf(e.owner.id.toString())})})):[];return e.length>5&&e.splice(Cl.Z.rand(0,5),0,{__adv:!0}),e}},mounted:function(){this.rooms instanceof Array||this.load(),this.loadImages()},methods:{messageListener:function(t,e,n){switch(t){case"streamsUpdate":e.room;break;case"streamOff":this.removeRoom(e.room);break;case"streamsListUpdate":log("streams count",e.list.length),this.rooms=e.list,"start"===e.type&&e.alert}},load:function(){var t=this;(new pl.V).request("streamsFront").then((function(e,n){t.rooms=e,t.$nextTick((function(){t.loadImages()}))})).catch((function(e){error(e),t.$root.popupFixErr(e)}))},loadImages:function(){$(this.$el).find(".image .cover img:not(.loading)").each((function(t,e){0!==e.naturalWidth&&e.complete?$(this).siblings(".loading").remove():(e.style.display="none",$(e).on("load",(function(){$(this).siblings(".loading").remove(),e.style.display="inline"})))}))},openRoom:function(t,e){return t.preventDefault(),this.$root.openRoom(e.alias),!1},removeRoom:function(t){for(var e=0;e<this.rooms.length;e++)if(this.rooms[e].id===t.id){log("room removed from list",t.name),this.rooms.splice(e,1);break}}}};const gu=(0,Fl.Z)(vu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-list list-streams my-3"},[t.roomsComputed.length?n("div",{staticClass:"row"},t._l(t.roomsComputed,(function(e,a){return n("div",{directives:[{name:"show",rawName:"v-show",value:"room"!==t.$route.name||t.$route.params.alias!==e.alias,expression:"$route.name !== 'room' || $route.params.alias !== item.alias"}],key:e.id,staticClass:"col-xl-3 col-lg-3 col-md-4 col-sm-6 col-6 position-relative",class:{"user-hidden2":e.userHidden}},[e.__adv?n("div",{staticClass:"position-relative"},[n("adv",{staticClass:"border",attrs:{"auto-height":!0,type:"RU"===t.global.country.iso?"yandex":"google",scope:"streamsList"}})],1):n("div",{staticClass:"app-list-item card bg-light mb-3 position-relative"},[e.userHidden&&e.owner?n("div",{directives:[{name:"user",rawName:"v-user",value:e.owner.id,expression:"item.owner.id"}],staticClass:"user-hidden-holder position-absolute w-100 h-100 bg-dark"},[n("div",{staticClass:"position-absolute top-50 start-50 translate-middle"},[t._v("🙈 Скрыто")])]):t._e(),t._v(" "),n("div",{staticClass:"image position-relative"},[e.count>10||t.global.debug?n("span",{staticClass:"counter position-absolute top-0 end-0 bg-success text-white badge"},[t._v(t._s(e.count))]):t._e(),t._v(" "),n("div",{staticClass:"position-absolute start-0 top-0 ms-1 mt-1"},[e.adult?n("img",{staticStyle:{height:"33px"},attrs:{src:"/i/adult.png"}}):t._e()]),t._v(" "),e.owner?n("div",{staticClass:"position-absolute bottom-0 start-0 hover-info"},[n("div",{staticClass:"p-2 row g-0 flex-nowrap"},[n("div",{staticClass:"col text-truncate"},[n("user",{attrs:{user:e.owner}})],1),t._v(" "),t.global.moder?n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-secondary ",on:{click:function(n){return t.$root.roomSettingsOpen(e.owner.id)}}},[n("i",{staticClass:"fa fa-rss"})])]):t._e()])]):t._e(),t._v(" "),t._e(),t._v(" "),n("a",{staticClass:"cover",attrs:{href:e.link},on:{click:function(n){return t.openRoom(n,e)}}},[n("img",{staticClass:"loading",attrs:{src:"/i/loading_stream.jpg"}}),t._v(" "),n("img",{attrs:{src:e.cover_list&&!e.adult?e.cover_list:"/i/room_hover.png"}})])]),t._v(" "),n("div",{staticClass:"card-body p-0"},[n("div",{staticClass:"app-text-overflow px-2"},[e.pass_required?n("i",{staticClass:"fa fa-lock text-danger",attrs:{"data-title":"Для просмотра нужен пароль"}}):t._e(),t._v(" "),n("a",{attrs:{href:e.link,title:e.name},on:{click:function(n){return t.openRoom(n,e)}}},[t._v(t._s(e.name))])])])])])})),0):n("div",{staticClass:"alert alert-secondary text-center"},[t._v("\n        В данный момент трансляций нет\n    ")])])}),[],!1,null,null,null).exports;function _u(t){return(_u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}const yu={name:"user_info",props:{uid:{},user:{},type:{default:"modal"},params:{type:Object,default:function(){return{}}}},data:function(){return{streamVideoShow:!1,streamVideoFrames:!1,loading:!1,user$:this.user,showExtInfo:!1}},components:{"pay-button-copy":{props:{user:{}},template:'<pay-button :owner-id="user.id" v-if="user.room.donate" :donate="user.room.donate" :owner="user"></pay-button><button class="btn btn-primary" v-popover="\'Пользователь не создал донат 😒\'" v-else>Донат</button>'}},computed:{parentComp:function(){return"modal"===this.type?Hl:{template:"<div><slot></slot></div>"}},background:function(){return this.user$&&this.user$.room&&this.user$.room.background}},destroyed:function(){"modal"!==this.type&&this.$root.bodyBackground(!1)},created:function(){"object"!==_u(this.user$)||this.user$.id?!this.user$&&this.uid&&this.load():this.user$=null,this.background&&this.$root.bodyBackground(this.background)},mounted:function(){},methods:{load:function(){var t=this;this.loading=!0,pl.V.make("getUser",Object.assign(this.params,{uid:this.uid})).then((function(e){t.user$=e.user,t.background&&t.$root.bodyBackground(t.background,"modal"===t.type?t.$el:null)})).catch((function(e){t.$root.popupFixErr(e)})).always((function(){t.loading=!1}))}}};const bu=(0,Fl.Z)(yu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.parentComp,t._b({tag:"component",staticClass:"app-user-info",class:{"container-lg":"modal"!==t.type,"bg-body":"modal"!==t.type,"has-background":t.background}},"component","modal"===t.type?{header:!1,size:"xl"}:{},!1),["modal"===t.type?n("button",{staticClass:"btn-close position-absolute top-0 end-0 ",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}}):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"my-3 text-center"},[n("img",{attrs:{src:"/i/lubka.gif"}}),t._v(" "),n("h3",[t._v("Загружаю данные"),n("br"),t._v(" о пользователе...")])]),t._v(" "),t.user$?[n("div",{staticClass:"row g-0 flex-nowrap",class:{"pt-2":"modal"!==t.type&&t.background}},[n("div",{staticClass:"col-auto me-1"},[n("a",{attrs:{href:t.user$.link,target:"_blank"}},[n("img",{staticClass:"app-avatar",attrs:{src:t.user$.avatar}})])]),t._v(" "),n("div",{staticClass:"col text-truncate"},[n("h4",{directives:[{name:"nick-style",rawName:"v-nick-style",value:{font:t.user$.font},expression:"{font: user$.font}"}],staticClass:"text-truncate m-0 lh-1"},[t._v(t._s(t.user$.name+(t.global.admin?"#"+t.user$.id:"")))]),t._v(" "),n("div",{staticClass:"text-wrap",staticStyle:{"line-height":"2rem"}},[t.user$.country?n("small",{staticClass:"float-start me-2 app-flag",domProps:{innerHTML:t._s(t.user$.country.flag)}}):t._e(),t._v(" "),t.user$.online?n("small",{staticClass:"badge bg-success animate__animated animate__flash"},[t._v("В сети")]):n("small",{staticClass:"text-muted",attrs:{"data-title":"был на сайте"}},[t._v(t._s(t.user$.onlineLast))]),t._v(" "),t.user$.streamer?n("small",{staticClass:"badge bg-primary cursor-pointer",on:{click:function(e){return e.preventDefault(),t.$root.openChatHistory({ownerId:t.user$.id})}}},[n("i",{staticClass:"fa fa-rss"}),t._v(" транслятор "),n("span",{attrs:{"data-title":"Макс. смотрело"}},[t._v("("+t._s(t.user$.chat_max_count)+")")])]):t._e(),t._v(" "),t.user$.moder?n("small",{staticClass:"badge bg-info",attrs:{"data-title":"модератор сайта"}},[t._v("модератор")]):t._e(),t._v(" "),t.user$.donater&&t.user$.donater.text?n("span",{class:t.user$.donater.cls,style:t.user$.donater.styles},[t.user$.donater.icon?n("i",{class:t.user$.donater.icon}):t._e(),t._v(" "+t._s(t.user$.donater.text)+"\n                    ")]):t._e(),t._v(" "),t.user$.chatersStatus&&t.user$.chatersStatus.text?n("small",{class:t.user$.chatersStatus.cls,style:t.user$.chatersStatus.styles,attrs:{"data-help":t.user$.chatters||!1}},[t.user$.chatersStatus.icon?n("i",{class:t.user$.chatersStatus.icon}):t._e(),t._v(" "+t._s(t.user$.chatersStatus.text)+"\n                    ")]):t._e(),t._v(" "),t.user$.trusted?n("small",{staticClass:"badge bg-success"},[n("i",{staticClass:"fa fa-check",attrs:{"data-title":"Проверенный пользователь"}})]):t._e(),t._v(" "),t.user$.status?n("small",{staticClass:"text-nowrap"},[n("em",[t._v(t._s(t.user$.status))])]):t._e(),t._v(" "),n("small",{staticClass:"text-nowrap text-muted",attrs:{"data-title":"дата регистрации"}},[n("i",{staticClass:"fa fa-clock-o"}),t._v(" "+t._s(t.user$.date_reg))])])])]),t._v(" "),t.global.moder?n("div",{staticClass:"text-end"},[n("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.showExtInfo=!t.showExtInfo}}},[n("i",{staticClass:"em em-male-police-officer",attrs:{"aria-role":"presentation","aria-label":""}}),t._v("\n                Детальная информация\n            ")])]):t._e(),t._v(" "),t.showExtInfo&&t.global.moder?[n("user-info-moder",{staticClass:"p-3",attrs:{user:t.user$}}),t._v(" "),n("user-info-admin",{staticClass:"p-3",attrs:{user:t.user$}})]:t._e(),t._v(" "),t.user$.trashed?n("div",{staticClass:"alert alert-danger text-center my-3"},[n("strong",[n("i",{staticClass:"fa fa-trash"}),t._v(" Пользователь удален "),t.user$.trashed_date?n("em",[t._v(t._s(t.user$.trashed_date))]):t._e()])]):t._e(),t._v(" "),t.user$.inBlackList?n("div",{staticClass:"alert alert-warning text-center my-3 animate__animated animate__flash border"},[n("i",{staticClass:"fa fa-ban"}),t._v(" "),n("strong",[t._v("Пользователь в черном списке")])]):t._e(),t._v(" "),t.user$.deactivate?n("div",{staticClass:"alert alert-warning text-center my-3 animate__animated animate__flash border"},[n("i",{staticClass:"fa fa-info-circle"}),t._v(" "),n("strong",[t._v("Пользователь деактивирован")])]):t._e(),t._v(" "),t.user$.stream?[n("div",{staticClass:"row g-0 my-1 align-items-start"},[n("div",{staticClass:"bg-dark position-relative col-md-6"},[n("div",{staticClass:"m-2 position-absolute bottom-0 end-0",staticStyle:{"z-index":"1"}},[t.user$.streamVideo?n("button",{directives:[{name:"show",rawName:"v-show",value:!t.streamVideoFrames,expression:"!streamVideoFrames"}],staticClass:"btn btn-secondary btn-sm",style:!!t.streamVideoShow&&"margin-bottom: 4rem",on:{click:function(e){t.streamVideoShow=!t.streamVideoShow}}},[n("i",{staticClass:"fa",class:{"fa-play":!t.streamVideoShow,"fa-arrow-left":t.streamVideoShow}}),t._v(" "+t._s(t.streamVideoShow?"Скрыть запись":"Показать запись")+"\n                        ")]):t._e(),t._v(" "),t.user$.streamFrames?n("button",{directives:[{name:"show",rawName:"v-show",value:!t.streamVideoShow,expression:"!streamVideoShow"}],staticClass:"btn btn-secondary btn-sm",on:{click:function(e){t.streamVideoFrames=!t.streamVideoFrames}}},[n("i",{staticClass:"fa",class:{"fa-camera":!t.streamVideoFrames,"fa-arrow-left":t.streamVideoFrames}}),t._v(" "+t._s(t.streamVideoFrames?"Скрыть кадры":"Показать кадры")+"\n                        ")]):t._e()]),t._v(" "),t.user$.room.cover?n("router-link",{directives:[{name:"show",rawName:"v-show",value:!t.streamVideoShow,expression:"!streamVideoShow"}],attrs:{to:t.user$.room.link}},[n("img",{staticClass:"w-100",attrs:{src:t.user$.room.cover}})]):t._e(),t._v(" "),n("div",{staticClass:"position-absolute top-0 start-0 px-2 py-1 bg-light m-2"},[t.user$.stream.live?[n("strong",{staticClass:"animate__animated animate__flash animate__infinite"},[n("i",{staticClass:"fa fa-circle text-danger"}),t._v(" Сейчас идет!")]),t._v(" "),n("span",{staticClass:"badge bg-success",attrs:{"data-title":"зрителей"}},[t._v(t._s(t.user$.live_count))]),t._v(" "),n("i",{staticClass:"fa fa-clock-o",attrs:{"aria-hidden":"true","data-title":"продолжительность"}}),t._v(" "),n("strong",[t._v(t._s(t.user$.stream.duration))])]:[n("strong",[t._v("[остановлена]")]),t._v(" "),t.user$.stream.stopped?n("span",[t._v(t._s(t.user$.stream.stopped)+",")]):t._e(),t._v(" зрителей было "),n("strong",[t._v(t._s(t.user$.room.count_stopped))]),t._v(" "),n("i",{staticClass:"fa fa-clock-o",attrs:{"aria-hidden":"true","data-title":"продолжительность"}}),t._v(" "),n("strong",[t._v(t._s(t.user$.stream.duration))])]],2),t._v(" "),t.user$.streamVideo?n("video",{directives:[{name:"show",rawName:"v-show",value:t.streamVideoShow,expression:"streamVideoShow"}],staticClass:"w-100",attrs:{src:t.user$.streamVideo.url,muted:"",playsinline:"",controls:"",loop:""},domProps:{muted:!0}}):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.streamVideoFrames,expression:"streamVideoFrames"}],staticClass:" position-absolute start-0 top-0 w-100 h-100 overflow-auto row g-0"},t._l(t.user$.streamFrames,(function(e){return n("a",{staticClass:"col-3 position-relative hover-parent border",attrs:{"data-fancybox":"stream-gallery","data-caption":!!e.date&&e.date,href:e.url}},[e.date?n("span",{staticClass:"hover-child badge bg-light position-absolute start-0 top-0 m-1"},[t._v(t._s(e.date))]):t._e(),t._v(" "),n("img",{staticClass:"w-100",attrs:{src:e.small}})])})),0)],1),t._v(" "),n("div",{staticClass:"col-md-6 px-0 px-sm-2"},[n("h5",{staticClass:"my-2"},[n("i",{staticClass:"em em-satellite_antenna",attrs:{"aria-role":"presentation","aria-label":"SATELLITE ANTENNA"}}),t._v(" "),n("router-link",{staticClass:"text",attrs:{to:t.user$.room.link}},[t._v(t._s(t.user$.room.name+(t.global.admin?"#"+t.user$.room.id:"")))])],1),t._v(" "),n("div",{staticClass:"row my-2"},[n("div",{staticClass:"col-12 col-sm-6 mb-1 mb-sm-0"},[n("pay-button-copy",{staticClass:"btn-lg  w-100 text-truncate",attrs:{user:t.user$}})],1),t._v(" "),n("div",{staticClass:"col-12 col-sm-6"},[n("subscribe",{staticClass:"btn-secondary btn-lg w-100 text-truncate",class:{"btn-secondary":t.user$.room.isSubscribed,"btn-success":!t.user$.room.isSubscribed},attrs:{"room-id":t.user$.room.id,count:t.user$.room.subscribersCount},model:{value:t.user$.room.isSubscribed,callback:function(e){t.$set(t.user$.room,"isSubscribed",e)},expression:"user$.room.isSubscribed"}})],1)]),t._v(" "),t.user$.room.text?n("div",{staticClass:"my-2 py-1 px-3 border"},[t._v(t._s(t.user$.room.text))]):t._e(),t._v(" "),t.user$.room.donaters&&t.user$.room.donaters.length?n("div",{staticClass:"my-3"},[n("strong",{staticClass:"text-danger"},[n("i",{staticClass:"fa fa-fire"}),t._v("\n                            ТОП-донатеры\n                        ")]),t._v(" "),n("donaters-list",{staticClass:"bg-bg room-info-part",attrs:{"show-only":"top",compact:!0,donaters:t.user$.room.donaters}})],1):t._e(),t._v(" "),t.user$.records&&t.user$.records.length?n("div",{staticClass:"my-3"},[n("scroller",{staticClass:"row g-0 flex-nowrap"},t._l(t.user$.records,(function(e){return n("a",{staticClass:"col-auto d-block position-relative border",attrs:{href:e.url},on:{click:function(n){return n.preventDefault(),t.$root.openRecord(e)}}},[n("img",{staticStyle:{"max-height":"150px"},attrs:{src:e.poster&&e.poster.small?e.poster.small:t.global.imageBlank}}),t._v(" "),n("div",{staticClass:"position-absolute start-0 bottom-0 bg-dark text-white px-2"},[n("strong",[t._v(t._s(e.date)+" / "+t._s(e.duration)+" sec.")])])])})),0)],1):t._e(),t._v(" "),n("div",{staticClass:"my-2"},[n("likeMe",{attrs:{obj:"chat_room",negative:t.user$.room.negative,positive:t.user$.room.positive,"obj-id":t.user$.room.id}}),t._v(" "),n("a",{staticClass:"btn btn-secondary",attrs:{href:t.user$.link_history,target:"_blank","data-title":"История чата"},on:{click:function(e){return e.preventDefault(),t.$root.openChatHistory({ownerId:t.user$.id})}}},[n("i",{staticClass:"fa fa-history",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",{staticClass:"d-none "},[t._v("История чата")])]),t._v(" "),n("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-title":"Статистика"},on:{click:function(e){return t.$root.openStreamChart({uid:t.user$.id})}}},[n("i",{staticClass:"fa fa-line-chart",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",{staticClass:"d-none d-none"},[t._v("Статистика")])])],1),t._v(" "),n("share",{staticClass:"d-inline-block my-2",attrs:{image:t.user$.room.cover,limit:10}}),t._v(" "),n("label",{staticClass:"form-check form-switch my-2"},[n("action",{staticClass:"form-check-input",attrs:{tag:"input",type:"checkbox",action:"/api/action/streamListHiddenToggle",data:{uid:t.user$.id,action:"streamListHiddenToggle",obj:"user"}},model:{value:t.user$.isStreamListHidden,callback:function(e){t.$set(t.user$,"isStreamListHidden",e)},expression:"user$.isStreamListHidden"}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Не показывать в списке трансляций")])],1)],1)])]:t._e(),t._v(" "),t.user$.advType?n("adv",{staticClass:"my-3",attrs:{type:t.user$.advType,scope:"user"}}):t._e(),t._v(" "),t.user$.stream?n("h5",{staticClass:"mt-3 mb-0 px-2 px-md-0"},[n("i",{staticClass:"fa fa-user"}),t._v("\n            ИНФО пользователя:\n        ")]):t._e(),t._v(" "),n("div",{staticClass:"row g-0"},[n("div",{staticClass:"position-relative col-md-6 order-last order-md-first"},[n("a",{attrs:{href:!!t.user$.cover.avaiable&&t.user$.cover.big,"data-fancybox":t.user$.cover.avaiable}},[n("img",{staticClass:"w-100",class:{border:t.user$.cover.avaiable},attrs:{src:t.user$.cover.avaiable?t.user$.cover.meta.isAnim?t.user$.cover.__:t.user$.cover.medium:t.global.imageBlank}})])]),t._v(" "),n("div",{staticClass:"col-md-6 px-0 px-sm-2"},[t.user$.isOwner?t._e():n("div",{staticClass:"mb-2 row gy-1 gx-0 w-100"},[n("button",{directives:[{name:"mess",rawName:"v-mess",value:t.user$.id,expression:"user$.id"}],staticClass:"btn btn-success"},[n("i",{staticClass:"fa fa-comment-o"}),t._v(" "),n("span",{},[t._v("Сообщение")])]),t._v(" "),n("friend-button",{staticClass:"btn-secondary",attrs:{uid:t.user$.id,"is-friend":t.user$.isFriend}}),t._v(" "),n("user-blacklist",{staticClass:"btn",class:{"btn-warning":!t.user$.inBlackList,"btn-success":t.user$.inBlackList},attrs:{uid:t.user$.id},model:{value:t.user$.inBlackList,callback:function(e){t.$set(t.user$,"inBlackList",e)},expression:"user$.inBlackList"}}),t._v(" "),n("complaint",{staticClass:"btn-danger",attrs:{subject:"user","subject-id":t.user$.id}},[n("i",{staticClass:"fa fa-flag "}),t._v(" "),n("span",{},[t._v("Жалоба")])])],1),t._v(" "),t.user$.text?n("div",{staticClass:"mb-1 bg-light p-3 text-center border"},[t._v("\n                    "+t._s(t.user$.text)+"\n                ")]):t._e(),t._v(" "),t.user$.extInfo?n("div",{staticClass:"my-3"},[n("about",{attrs:{uid:t.user$.id,info:t.user$.extInfo,inline:!0}})],1):t._e(),t._v(" "),t.user$.trusted?n("div",{staticClass:"mb-2 text-success d-none d-md-block"},[n("i",{staticClass:"em em-white_check_mark",attrs:{"aria-role":"presentation","aria-label":"WHITE HEAVY CHECK MARK"}}),t._v(" "),n("strong",[t._v("Этот пользователь проверен")])]):t._e(),t._v(" "),t.user$.donater.text?n("div",{staticClass:"mb-2 text-primary d-none d-md-block"},[n("i",{staticClass:"em em-muscle",attrs:{"aria-role":"presentation","aria-label":"WHITE HEAVY CHECK MARK"}}),t._v(" "),n("strong",[t._v("Этот пользователь донатер")])]):t._e(),t._v(" "),t.user$.status?n("div",{staticClass:"mb-2 d-none d-md-block"},[n("i",{staticClass:"em em-thinking_face",attrs:{"data-title":"Чем занят пользователь","aria-role":"presentation","aria-label":"THINKING FACE"}}),t._v(" "),n("strong",[t._v(t._s(t.user$.status))])]):t._e(),t._v(" "),t.user$.donater?n("div",{staticClass:"mb-2  d-none d-md-block"},[n("i",{staticClass:"em em-hourglass",attrs:{"aria-role":"presentation","aria-label":"HOURGLASS"}}),t._v("\n                    Дата регистрации: "+t._s(t.user$.date_reg)+"\n                ")]):t._e()])]),t._v(" "),n("div",{staticClass:"py-3 px-2"},[n("comments",{attrs:{obj:"user",count:t.user$.commentsCount,"obj-id":t.user$.id}})],1),t._v(" "),t.user$.posts&&t.user$.posts.length>0?n("div",{staticClass:"py-3 px-2"},[n("h4",[n("i",{staticClass:"fa fa-bullhorn"}),t._v(" Мои заметки")]),t._v(" "),n("posts",{attrs:{posts:t.user$.posts,"user-alias":t.user$.alias||t.user$.id,embed:!0}}),t._v(" "),n("router-link",{attrs:{to:"/posts/"+(t.user$.alias||t.user$.id)}},[n("i",{staticClass:"fa fa-list"}),t._v("\n                Все мои заметки\n            ")])],1):t._e()]:t._e()],2)}),[],!1,null,null,null).exports;const Cu={name:"",props:{root_comp:{type:String,default:"modal"}},data:function(){return{showReq:!1,showDanat:!1,data:false,ask:""}},created:function(){this.load()},mounted:function(){},methods:{load:function(){var t=this;this.$api((function(e){t.data=e}),"getSupport")},openReq:function(){this.global.uid?this.$root.openSupportMessages({subject:this.ask}):this.$root.openFeedback()},donat:function(){this.$root.modal({title:"Подарок сайту",text:"Поддержите сайт, сделав пожертвование. Ваш вклад настолько важен, насколько вы даже не представляете!"})}}};const wu=(0,Fl.Z)(Cu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t._modal_or_div,t._b({tag:"component"},"component","modal"===t.root_comp?{title:"Поддержка / Support",footer:!1}:{},!1),[n("list-form",{attrs:{name:"ask"},model:{value:t.ask,callback:function(e){t.ask=e},expression:"ask"}},[n("li",[t._v("\n            Не могу запустить трансляцию\n            "),n("em",[t._v("\n                * "),n("a",{attrs:{target:"_blank",href:"/help"}},[t._v("ознакомьтесь с настройками")]),n("br"),t._v("\n                * отключите антивирусы (NOD иногда блокирует камеру)"),n("br"),t._v("\n                * проверьте "),n("a",{attrs:{target:"_blank",href:"/page/camera_microphone_check"}},[t._v("доступность камеры и микрофона")]),n("br"),t._v("\n                * попробуйте запустить через "),n("a",{attrs:{target:"_blank",href:"/page/nastrojka_obs_studio_dlya_translyacii"}},[t._v("OBS Studio")])]),t._v(" "),n("ul",[n("li",[t._v("На других сайтах работает камера, на вашем нет"),n("em",[t._v("разрешение на камеру браузер запрашивает для каждого сайта по отдельности. Если вы разрешили камеру на одном сайте, это не означает что она будет доступна на всех")])]),t._v(" "),n("li",[t._v("\n                    Нет звука или видео\n                    "),n("em",[n("a",{attrs:{target:"_blank",href:"/checkDevices"}},[t._v("Проверить камеру и микрофон")]),n("br"),t._v(" "),n("a",{attrs:{target:"_blank",href:"/checkFlash"}},[t._v("Проверить flash")])])])])]),t._v(" "),n("li",[t._v("\n            Меня забанили\n            "),n("ul",[n("li",[t._v("\n                    Забанил автор чата или его смотрящие\n                    "),n("em",[t._v("Напишите автору трансляции. Администрация не несет ответственности за это")])]),t._v(" "),n("li",[t._v("\n                    Забанил модератор сайта\n                    "),n("em",[t._v("\n                        Если вы не согласны с причиной бана,\n                        напишите модератору, который вас забанил или в поддержку. Вас обязательно разбанят\n                    ")])])])]),t._v(" "),n("li",[t._v("\n            Не могу войти на сайт\n            "),n("ul",[n("li",[t._v("\n                    Забыл пароль\n                    "),n("em",[n("a",{attrs:{target:"_blank",href:"/password/reset"}},[t._v("Cмените пароль")])])]),t._v(" "),n("li",[t._v("\n                    Потерял доступ к почте\n                    "),n("em",[t._v("Зарегистрируйте новый акаунт")])]),t._v(" "),n("li",[t._v("\n                    Не могу войти через соц. сеть\n                    "),n("em",[t._v("Такое иногда бывает (в основном из-за сетевых задержек с провайдером, через которого вы авторизуетесь). Попробуйте повторить попытку чуть позже. Если после многих неудачных попыток так и не удалось войти — напишите")])])])]),t._v(" "),n("li",[t._v("\n            Не пришла проверочная ссылка после регистрации\n            "),n("em",[t._v("\n                Обычно письмо приходит в течении 5-10 секунд, но в некоторых случаях с задержкой. Если письмо не пришло в течении 10-15 минут — напишите\n            ")])]),t._v(" "),n("li",[t._v("\n            Как удалить профиль?\n            "),n("em",[n("a",{attrs:{target:"_blank",href:"/profile/remove_profile"}},[t._v("На странице своего профиля")])])]),t._v(" "),n("li",[t._v("\n            Не работает прокрутка в чате "),n("em",[t._v("Установите в своем браузере масштаб 100%")])]),t._v(" "),n("li",[t._v("\n            Приложение IOS\n            "),n("ul",[n("li",[t._v("Будет ли приложение под Айфон? "),n("em",[t._v("Да")]),t._v(" "),n("ul",[n("li",[t._v("Как скоро? "),n("em",[t._v("В ближайшее время")])])])])])]),t._v(" "),n("li",[t._v("\n            Сколько стоит стать модератором? "),n("em",[t._v("57 568 долл.")])]),t._v(" "),n("li",[t._v("\n\n            Конфиденциальность\n            "),n("em",[n("a",{attrs:{target:"_blank",href:"/page/security"}},[t._v("Политика безопасности")])]),t._v(" "),n("ul",[n("li",[t._v("Могут ли модераторы читать мои личные сообщения? "),n("em",[t._v("Нет")])]),t._v(" "),n("li",[t._v("Могут ли модераторы узнать мой IP адрес? "),n("em",[t._v("Нет")])]),t._v(" "),n("li",[t._v("Могут ли модераторы узнать мой E-mail адрес? "),n("em",[t._v("Нет")])]),t._v(" "),n("li",[t._v("Могут ли я узнать IP адрес пользователя или город? "),n("em",[t._v("Нет")])])])]),t._v(" "),n("li",{on:{click:function(e){t.showReq=!0}}},[t._v("\n            Другой вопрос / Other\n        ")])]),t._v(" "),t.ask?n("div",{staticClass:"mb-3 mt-2"},[n("button",{staticClass:"text-center w-100 btn btn-danger btn-lg",on:{click:t.openReq}},[n("i",{staticClass:"em em-male-police-officer",attrs:{"aria-role":"presentation","aria-label":""}}),t._v("\n            подать заявление\n        ")]),t._v(" "),t.data?n("div",{staticClass:"mt-1"},[t._v("модераторов на сайте:\n\n            "),n("strong",{class:{"text-success":t.data.modersOnline,"text-danger":!t.data.modersOnline}},[t._v("\n                "+t._s(t.data.modersOnline)+"\n            ")])]):t._e()]):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDanat,expression:"!showDanat"}],staticClass:"text-end my-2",on:{click:function(e){t.showDanat=!0}}},[n("span",{staticClass:"dotted"},[t._v("Что ещё тут можно?")])]),t._v(" "),t.data?n("div",{directives:[{name:"show",rawName:"v-show",value:t.showDanat,expression:"showDanat"}],staticClass:"mt-2"},[n("button",{staticClass:"btn btn-secondary",on:{click:t.donat}},[t._v("Донат сайту")]),t._v(" "),t._l(t.data.donations,(function(e){return n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(n){return t.$root.openPay({offerId:e.id})}}},[t._v("\n            "+t._s(e.price)+" "),n("rub")],1)})),t._v(" "),n("img",{attrs:{src:"/i/gosha.gif"}})],2):t._e()],1)}),[],!1,null,null,null).exports;const ku={name:"",props:{compParent:{default:"modal"},ownerId:{},uid:{},text:{type:String},room:{type:Number},roomId:{type:Number},from:{}},data:function(){var t=Fg.data.history;return{history$:this.history||t&&t.history||null,user$:this.room||t&&t.user||null,room$:this.room||t&&t.room||null,from$:this.from||t&&t.from||null,room_id$:this.roomId,endOfData:!1,text$:this.text,uid$:this.uid,limit:0,loading:!1,offset:0}},created:function(){this.history$||this.load()},computed:{compParentProps:function(){if("modal"===this.compParent)return{size:"xl",fixedY:!0}},historyes:function(){var t=this;return this.history$ instanceof Array?this.history$.map((function(e,n){var a="",r=n>0?t.history$[n-1]:null;return(!r||r&&r.room_name!==e.room_name)&&(a=e.room_name),Object.assign({},{roomName:a},e)})):[]}},mounted:function(){},methods:{loadMore:function(){this.endOfData||(this.offset++,this.load({offset:this.offset}))},load:function(t){var e=this;if(this.loading)return error("loading state...");this.loading=!0,t||(t={}),!t.offset&&this.$refs.scroller&&this.$refs.scroller.scroll(0,0),pl.V.make("chatHistory",Object.assign({owner_id:this.ownerId,uid:this.uid$,room:this.room_id$,text:this.text$},t)).then((function(n){t.offset?e.history$.pushItems(n.history):(e.history$=n.history,e.from$=e.uid$&&(n.from||(n.history.length>0?n.history[0].nickname:""))||null,e.offset=0,e.user$=n.user,e.$nextTick((function(){}))),e.endOfData=0===n.history.length,e.limit=n.limit})).catch((function(t){e.$root.popupFixErr(t)})).always((function(){e.loading=!1}))}}};const xu=(0,Fl.Z)(ku,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.compParent,t._b({tag:"component",staticClass:"app-history",class:{"app-vh":"modal"!==t.compParent}},"component",t.compParentProps,!1),[n("div",{staticClass:"row g-0 flex-column h-100"},[n("div",{staticClass:"col-auto"},[n("form",{staticClass:"d-flex my-2",on:{submit:function(e){return e.preventDefault(),t.load()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.text$,expression:"text$"}],staticClass:"form-control",attrs:{placeholder:"поиск..."},domProps:{value:t.text$},on:{input:function(e){e.target.composing||(t.text$=e.target.value)}}}),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:t.text$,expression:"text$"}],staticClass:"btn btn-secondary mx-1",attrs:{type:"button"},on:{click:function(e){t.text$="",t.load()}}},[n("i",{staticClass:"fa fa-close"})]),t._v(" "),n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-search"}),t._v(" поиск\n                ")])]),t._v(" "),t.from$&&t.uid$?n("div",{staticClass:"my-2"},[n("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(e){t.uid$=null,t.load()}}},[n("i",{staticClass:"fa fa-close"})]),t._v(" "),n("user",{attrs:{user:t.from$}})],1):t._e()]),t._v(" "),t.user$?n("div",[t._v("\n            История чата "),n("user",{attrs:{user:t.user$}})],1):t._e(),t._v(" "),t.historyes&&t.historyes.length>0?n("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.loadMore,expression:"loadMore"}],ref:"scroller",staticClass:"col overflow-auto table-responsive"},[n("table",{staticClass:"table table-striped table-hover"},[n("thead"),t._v(" "),n("tbody",[t._l(t.historyes,(function(e){return[e.roomName?n("tr",{staticClass:"text-end"},[n("td",{attrs:{colspan:"4"}},[n("h5",{staticClass:"m-0"},[n("i",{staticClass:"fa fa-rss"}),t._v(" "),t.global.moder?n("span",{},[t._v("#"+t._s(e.room_id))]):t._e(),t._v("\n                                    "+t._s(e.roomName)+"\n                                ")]),t._v(" "),n("div",[n("small",{staticClass:"text-muted"},[t._v("текущая трансляция")])])])]):t._e(),t._v(" "),n("tr",{key:e.id},[n("td",{staticClass:"text-nowrap text-truncate",staticStyle:{"max-width":"300px"}},[n("user",{staticClass:"text-muted",attrs:{user:e.user,nickname:e.nickname}})],1),t._v(" "),n("td",{staticClass:"text-break"},[n("div",{domProps:{innerHTML:t._s(e.html)}})]),t._v(" "),n("td",{directives:[{name:"show",rawName:"v-show",value:e.uid&&!t.uid$,expression:"item.uid && !uid$"}],staticClass:"text-nowrap"},[n("a",{attrs:{href:"#"},on:{click:function(n){n.preventDefault(),t.uid$=e.uid,t.load()}}},[n("i",{staticClass:"fa fa-search"})])]),t._v(" "),n("td",{staticClass:"text-nowrap"},[n("small",{staticClass:"text-muted"},[t._v(t._s(e.date))])])])]}))],2)]),t._v(" "),n("load-more",{directives:[{name:"show",rawName:"v-show",value:t.history$.length>=t.limit&&!t.endOfData,expression:"history$.length >= limit && !endOfData"}],staticClass:"my-4",attrs:{loading:t.loading},on:{click:function(e){return t.loadMore()}}})],1):t._e()])])}),[],!1,null,null,null).exports;var Su=Cl.Z.getComponents(n(65603),"");const Eu={name:"seller",props:{tag:{type:String,default:"modal"},tab:{type:String,default:"home"}},data:function(){return{comp:"modal"===this.tag?Hl:{template:"<div><slot></slot></div>"},state:{fixedY:!1},currentTab:this.tab}},computed:{seller:function(){return this.global.user&&this.global.user.seller}},watch:{currentTab:function(){this.state.fixedY=!1,"transaction"===this.currentTab&&(this.state.fixedY=!0)}},components:Su,created:function(){this.tabs=[{name:"Дом",id:"home",icon:"fa fa-home"},{name:"Вывод",id:"money_out",icon:"fa fa-external-link"},{name:"Операции",id:"transaction",icon:"fa fa-exchange"}]},mounted:function(){},methods:{onSellerCreate:function(){}}};const Tu=(0,Fl.Z)(Eu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.comp,t._b({tag:"component",class:{"app-h-100":!0}},"component","modal"===t.tag?{fixedY:t.state.fixedY,footer:!1,size:t.seller?"lg":"sm",title:"Ливачи"}:{},!1),[t.seller?n("div",{staticClass:"row g-0 flex-nowrap flex-column flex-md-row col",class:{"h-100":t.state.fixedY}},[n("div",{staticClass:"col-auto nav flex-nowrap bg-light overflow-auto flex-row flex-md-column mb-3 mb-md-0 nav-pills flex-nowrap",attrs:{id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"}},t._l(t.tabs,(function(e,a){return n("a",{staticClass:"nav-link  mw-100 text-nowrap",class:{active:e.id===t.currentTab},attrs:{href:"#"},on:{click:function(n){t.currentTab=e.id}}},[e.icon?n("i",{class:e.icon}):t._e(),t._v(" "),n("span",{staticClass:" ms-2 d-sm-inline",class:{"d-none":"money_out"!==e.id&&!1}},[t._v(t._s(e.name))])])})),0),t._v(" "),n("div",{ref:"contentEl",staticClass:"col h-100 mw-100 position-relative overflow-x border p-3"},[n(t.currentTab,{tag:"component",staticClass:"h-100",model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1)]):n("div",{},[n("forma",{attrs:{action:"/api/seller_create"},on:{success:function(e){return t.onSellerCreate()}}},[t._v("\n\n            На сайте вы можете принимать донаты (подарки) в своей трансляци. Для этого вам нужно создать счет, куда будут поступать ливачи\n            "),n("label",{staticClass:"form-check my-3"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",checked:"checked",name:"agree",value:"1",required:""}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Я согласен с "),n("a",{attrs:{target:"_blank",href:"/page/rules"}},[t._v("условиями")])])]),t._v(" "),n("div",{staticClass:"col-auto text-end"},[n("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-check"}),t._v("\n                    Создать счет\n                ")])])])],1)])}),[],!1,null,null,null).exports;const Au={name:"page",props:{page:{type:Object},alias:{type:String,required:!0}},data:function(){return{page$:this.page,alias$:this.alias,loading:!1}},beforeRouteEnter:function(t,e,n){n((function(t){t.page$=t.extractData("page"),void 0===t.page$&&t.load()}))},beforeRouteUpdate:function(t,e,n){this.alias$=t.params.alias,this.load(),n()},created:function(){},mounted:function(){},methods:{load:function(){var t=this;this.$api((function(e){t.page$=e.page,t.$root.header(t.page$.head)}),"getPage",{alias:this.alias$})}}};const Ru=(0,Fl.Z)(Au,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-page"},[t.global.admin?n("div",{staticClass:"text-end"},[n("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){return t.$root.contentEditOpen(t.alias$,t.page$,t.global.catalog?t.global.catalog.id:"")}}},[n("i",{staticClass:"fa fa-pencil"}),t._v("\n            "+t._s(t.page$?"Редактировать":"Создать страницу")+"\n        ")])]):t._e(),t._v(" "),n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),t.page$&&!t.loading?n("div",[t.page$.cover.avaiable?n("img",{staticClass:"float-start me-4 mw-100",attrs:{src:t.page$.cover.small}}):t._e(),t._v(" "),n("div",{staticClass:"page-content",domProps:{innerHTML:t._s(t.page$.html)}}),t._v(" "),n("div",{staticClass:"clearfix mb-4"}),t._v(" "),t.page$.commentsCanRead?n("comments",{attrs:{"can-write":t.page$.commentsCanWrite,count:t.page$.commentsCount,item:t.page$,obj:"page","obj-id":t.page$.id}}):t._e()],1):t._e()],1)}),[],!1,null,null,null).exports;const Ou={name:"catalog",props:{pages:{type:Array,default:null},catalog:{type:Object},category:{type:String},cid:{type:Number},limit:{type:Number,default:0},front:{type:Boolean,default:!1}},data:function(){return{cid$:this.cid||(this.catalog?this.catalog.id:"")||null,loading:!1,endOfData:!1,pages$:this.pages,offset:0}},created:function(){null===this.pages$&&this.load()},mounted:function(){},methods:{load:function(t){var e=this;this.loading=!0,t||(t={});var n=Object.assign({cid:this.cid$,category:this.category||"",front:this.front},t);pl.V.make("getPages",n).then((function(n){var a=n.pages;n.cid&&(e.cid$=n.cid),e.endOfData=0===a.length||a.length<n.limit,t.offset?e.pages$.pushItems(a):e.pages$=a,e.$emit("input",e.pages)})).catch((function(t){e.$root.popupFixErr(t)})).always((function(){e.loading=!1}))},loadMore:function(){this.endOfData||(this.offset++,this.load({offset:this.offset}))}}};const $u=(0,Fl.Z)(Ou,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-catalog"},[t.global.admin?n("div",{staticClass:"text-end mb-3"},[n("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){return t.$root.contentEditOpen(null,null,t.cid$)}}},[n("i",{staticClass:"fa fa-pencil"}),t._v("\n            Создать страницу\n        ")])]):t._e(),t._v(" "),n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{inline:""}}),t._v(" "),t.pages$&&t.pages$.length>0?[t._t("top"),t._v(" "),t._l(t.pages$,(function(e){return n("div",{staticClass:"mb-3 bg-light p-3 border clearfix"},[e.cover.avaiable?n("a",{attrs:{href:e.link}},[n("img",{staticClass:"float-start me-2 mw-100",attrs:{src:e.cover.small}})]):t._e(),t._v(" "),e.new?n("span",{staticClass:"badge text-danger pl-0"},[t._v("новое")]):t._e(),t._v(" "),n("strong",[n("small",{},[t._v(t._s(e.date))])]),t._v(" "),e.head?n("h5",[n("a",{attrs:{href:e.link}},[t._v(t._s(e.head))])]):n("div",{domProps:{innerHTML:t._s(e.html)}}),t._v(" "),n("div",{staticClass:"my-2"},[n("a",{attrs:{href:e.link}},[n("i",{staticClass:"fa fa-commenting-o"}),t._v(" "),e.commentsCount?[t._v("\n                        Комментарии "),n("span",[t._v("("+t._s(e.commentsCount)+")")])]:[t._v("\n                        Оставить комментарий\n                    ")]],2)]),t._v(" "),e.views?n("div",{staticClass:"my-2"},[n("i",{staticClass:"fa fa-eye"}),t._v("\n                Просмотров: "+t._s(e.views)+"\n            ")]):t._e()])})),t._v(" "),t._t("default"),t._v(" "),n("load-more",{directives:[{name:"show",rawName:"v-show",value:!t.endOfData&&!t.front,expression:"!endOfData && !front"}],staticClass:"my-5",attrs:{loading:t.loading},on:{click:t.loadMore}})]:t._e()],2)}),[],!1,null,null,null).exports;const Pu={name:"users",props:{users:{type:Array,default:null},cityes:{type:Array,default:null},city:{type:Number},autoload:{type:Boolean}},data:function(){return{users$:this.users||null,offset:0,endOfData:!1,state:{city:this.city},isResseting:!1,autoload$:null===this.users}},created:function(){var t=this;this.$root.$on("scroll-data",(function(){t.loadMore()})),this.$watch("state",(function(){t.state.result&&t.result(t.state.result)}),{deep:!0})},mounted:function(){},methods:{loadMore:function(){this.endOfData||(this.offset++,this.load({offset:this.offset}))},result:function(t){var e=t.users;t.offset?this.users$.pushItems(e):(this.users$=e,this.offset=0),this.endOfData=0===e.length||e.length<t.limit},load:function(t){this.$refs.forma&&this.$refs.forma.load(t)},reset:function(){var t=this;this.isResseting=!0,this.autoload$=!0,this.$nextTick((function(){t.isResseting=!1}))}}};const Lu=(0,Fl.Z)(Pu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isResseting?t._e():n("user-search-form",{ref:"forma",staticClass:"border container-fluid p-3 mb-3",attrs:{autoload:t.autoload$,city:t.city,action:"/api/getUsers",cityes:t.cityes},on:{reset:t.reset},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}),t._v(" "),n("adv",{staticClass:"my-3",attrs:{type:"google",scope:"users"}}),t._v(" "),t.users$&&t.users$.length>0?n("div",{staticClass:"row"},t._l(t.users$,(function(e){return n("div",{key:e.id,staticClass:"col-xl-2 col-lg-3 col-md-4 col-sm-6 col-6 mb-3"},[n("div",{staticClass:"border"},[n("div",{staticClass:"position-relative"},[n("div",{staticClass:"position-absolute start-0 top-0 p-1"},[e.online?n("span",{staticClass:"badge bg-success"},[t._v("online")]):t._e(),t._v(" "),e.streamer?n("small",{staticClass:"badge bg-danger",attrs:{"data-help":"транслятор"}},[n("i",{staticClass:"fa fa-rss"}),t._v(" "+t._s(e.chat_max_count||"")+"\n                        ")]):t._e(),t._v(" "),e.donater&&e.donater.text?n("small",{class:e.donater.cls,style:e.donater.styles},[e.donater.icon?n("i",{class:e.donater.icon}):t._e(),t._v(" "+t._s(e.donater.text)+"\n                        ")]):t._e(),t._v(" "),e.chatersStatus&&e.chatersStatus.text?n("small",{class:e.chatersStatus.cls,style:e.chatersStatus.styles,attrs:{"data-help":e.chatters||!1}},[e.chatersStatus.icon?n("i",{class:e.chatersStatus.icon}):t._e(),t._v(" "+t._s(e.chatersStatus.text)+"\n                        ")]):t._e(),t._v(" "),e.trusted?n("small",{staticClass:"badge bg-primary",attrs:{"data-help":"уважаемый пользователь"}},[n("i",{staticClass:"fa fa-check"})]):t._e()]),t._v(" "),n("a",{directives:[{name:"user",rawName:"v-user",value:e.id,expression:"user.id"}],attrs:{href:e.link}},[n("img",{staticClass:"w-100",attrs:{src:e.cover.small||t.global.imageBlank}})])]),t._v(" "),n("div",{staticClass:"p-2"},[n("user",{attrs:{user:e}})],1)])])})),0):null!==t.users$?n("div",{staticClass:"alert alert-secondary text-center"},[t._v("\n        По заданным параметрам пользователи не найдены."),n("br"),t._v("\n        Измените критерии поиска\n    ")]):t._e(),t._v(" "),n("load-more",{directives:[{name:"show",rawName:"v-show",value:!t.endOfData,expression:"!endOfData"}],staticClass:"my-4",attrs:{loading:t.state.loading},on:{click:function(e){return t.loadMore()}}})],1)}),[],!1,null,null,null).exports;const Du={name:"login_form",props:{value:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const Iu=(0,Fl.Z)(Du,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("forma",{attrs:{action:"/api/login"},on:{success:function(e){return t.$root.$emit("login")}}},[n("div",{staticClass:"form-group"},[n("input",{staticClass:"form-control",attrs:{type:"email",placeholder:"E-MAIL",name:"login",value:"",required:"",autocomplete:"email"}})]),t._v(" "),n("div",{staticClass:"mb-1 form-group"},[n("input",{staticClass:"form-control",attrs:{type:"password",placeholder:"ПАРОЛЬ",name:"password",required:"",autocomplete:"current-password"}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"row justify-content-between"},[n("div",{staticClass:"col-auto"},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"remember",value:"1",checked:""}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Запомнить меня")])])]),t._v(" "),n("div",{staticClass:"col-auto"},[n("a",{attrs:{href:"/password/reset"},on:{click:function(e){e.preventDefault(),t.value.currentComp="reset"}}},[t._v("Забыли пароль?")])])])]),t._v(" "),n("div",{staticClass:"text-end my-3 d-flex justify-content-between"},[n("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(e){t.value.currentComp="register"}}},[n("i",{staticClass:"fa fa-flash"}),t._v("\n                Регистрация\n            ")]),t._v(" "),n("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-sign-in",attrs:{"aria-hidden":"true"}}),t._v(" Вход")])])]),t._v(" "),n("social-auth",{staticClass:"justify-content-between g-2 gy-2"})],1)}),[],!1,null,null,null).exports;const Mu={name:"register_form",props:{value:{type:Object}},data:function(){return{aliasValid:null,aliasErr:"",aliasChecking:!1,origin:location.origin,currentAlias:""}},created:function(){this.chkAliasTm=null},mounted:function(){var t=this;this.aliasEl=this.$refs.alias;var e=$(this.aliasEl);$(this.$refs.name).on("keydown paste input",(function(n){var a=$(this).val(),r=Cl.Z.ruslandToLatin(a,"_").toLowerCase();r=(r=(r=(r=r.replace(/[^0-9a-z\_]+/g,"_")).replace(/^\_+/g,"")).replace(/\_+$/g,"")).replace(/\_\_+/g," "),t.currentAlias=r,e.trigger("keydown"),!r&&this.chkAliasTm&&clearTimeout(this.chkAliasTm),t.checkAlias(r,1e3)})),e.on("blur paste",(function(){var e=$(this);t.checkAlias(e.val(),300)}))},methods:{checkAlias:function(t,e){var n=this;if(this.aliasValid=null,this.aliasErr="",this.aliasChecking=!1,t||(this.aliasValid=!1),!new RegExp(this.global.aliasRg,"i").test(t))return this.aliasValid=!1,void(this.aliasErr="логин введен некорректно");this.chkAliasTm&&clearTimeout(this.chkAliasTm),e?this.chkAliasTm=setTimeout((function(){n.checkAlias(t,0)}),e):(this.aliasChecking=!0,pl.V.make("checkAlias",{alias:t}).then((function(){n.aliasEl.value&&(n.aliasErr="",n.aliasValid=!0)})).catch((function(t){n.aliasErr=t,n.aliasValid=!1})).always((function(){n.aliasChecking=!1})))},success:function(t){this.value.currentCompProps={linkMail:t.linkMail,email:t.email},this.value.currentComp="complete"}}};const Nu=(0,Fl.Z)(Mu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("forma",{attrs:{action:"/api/register"},on:{success:t.success}},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"control-label",attrs:{for:"reg_name"}},[n("i",{staticClass:"fa fa-question-circle",attrs:{"aria-hidden":"true","data-title":"Любое имя"}}),t._v("\n            Ваше имя или кличка\n        ")]),t._v(" "),n("input",{ref:"name",staticClass:"form-control",attrs:{id:"reg_name",type:"text",autocomplete:"off",name:"name",value:"",required:"",autofocus:""}}),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("Пример: Сергей Пантелеевич")])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"control-label",attrs:{for:"reg_login"}},[n("i",{staticClass:"fa fa-question-circle",attrs:{"aria-hidden":"true","data-title":"Адрес вашей страницы"}}),t._v("\n            Логин (нужно выдумать, только латиница)\n        ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.currentAlias,expression:"currentAlias"}],ref:"alias",staticClass:"form-control",class:{"is-valid":!0===t.aliasValid,"is-invalid":!1===t.aliasValid},attrs:{id:"reg_login",autocomplete:"off",maxlength:"30",disabled:t.aliasChecking,"data-pattern":t.global.aliasRgAllow,type:"text",name:"alias",required:""},domProps:{value:t.currentAlias},on:{input:function(e){e.target.composing||(t.currentAlias=e.target.value)}}}),t._v(" "),t.aliasErr?n("div",[n("small",{staticClass:"text-danger"},[t._v(t._s(t.aliasErr))])]):t._e(),t._v(" "),n("small",{directives:[{name:"show",rawName:"v-show",value:t.currentAlias,expression:"currentAlias"}],staticClass:"text-muted text-break"},[t._v(t._s(t.origin)+"/user/"),n("strong",[t._v(t._s(t.currentAlias))])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"control-label",attrs:{for:"reg_email"}},[n("span",{staticClass:"fa fa-envelope-o"}),t._v(" E-Mail (временная почта запрещена!)")]),t._v(" "),n("input",{staticClass:"form-control",attrs:{id:"reg_email",type:"email",name:"login",value:"",required:""}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"control-label",attrs:{for:"reg_password"}},[n("span",{staticClass:"fa fa-key"}),t._v(" Пароль")]),t._v(" "),n("div",{staticClass:"input-group"},[n("input",{staticClass:"form-control",attrs:{id:"reg_password",type:"text",minlength:"6",autocomplete:"off",name:"password",required:""}}),t._v(" "),n("span",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-passgen":"reg_password","data-title":"Придумай пароль за меня!"}},[n("i",{staticClass:"fa fa-random",attrs:{"aria-hidden":"true"}})])])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"rules_accept",value:"1",required:""}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("С "),n("a",{attrs:{target:"_blank",href:"/page/rules"}},[t._v("правилами")]),t._v(" согласен")])])]),t._v(" "),n("captcha"),t._v(" "),n("div",{staticClass:"text-end my-3 d-flex justify-content-between"},[n("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(e){t.value.currentComp="login"}}},[n("i",{staticClass:"fa fa-lock",attrs:{"aria-hidden":"true"}}),t._v(" Войти")]),t._v(" "),n("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("Регистрация")])])],1)}),[],!1,null,null,null).exports;var ju=n(4837);const Fu={name:"complete_form",props:{email:{type:String},linkMail:{type:String},value:{type:Object}},data:function(){return{email$:this.email,ok:"",registerSuccess:!1,resendDisabled:!1}},created:function(){this.waitTm=null,!this.email$&&this.global.userPending&&(this.email$=this.global.userPending.login)},destroyed:function(){this.waitTm&&clearTimeout(this.waitTm)},mounted:function(){var t=this;setTimeout((function(){t.$refs.confirmCode.focus()}),10)},methods:{success:function(t,e){var n=this;this.ok=!0,this.resendDisabled=!0,this.waitTm&&clearTimeout(this.waitTm),this.waitTm=setTimeout((function(){n.resendDisabled=!1}),6e3)},rereg:function(){this.value.currentComp="register",this.global.userPending=null},confirmRegDone:function(){this.registerSuccess=!0,setTimeout((function(){window.location="/?register_success"}),1500)}}};const Bu=(0,Fl.Z)(Fu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.registerSuccess?n("div",{staticClass:"alert alert-success text-center"},[n("strong",[t._v("Вы успешно зарегистрированны!")])]):n("div",[t._v("\n        На "),n("strong",[t._v(t._s(t.email$))]),t._v(" была отправлена ссылка для подтверждения регистрации\n\n\n\n        "),t.linkMail?[n("hr"),t._v(" "),n("div",{staticClass:"text-center"},[n("a",{staticClass:"btn btn-success",attrs:{href:t.linkMail,target:"_blank"}},[n("i",{staticClass:"fa fa-refresh"}),t._v(" Проверить почту")])])]:t._e(),t._v(" "),n("div",{staticClass:"my-2"},[t._m(0),t._v(" "),n("forma",{attrs:{action:"/api/confirmReg"},on:{success:t.confirmRegDone}},[n("div",{staticClass:"row g-0"},[n("div",{staticClass:"col"},[n("input",{ref:"confirmCode",staticClass:"form-control",attrs:{autocomplete:"off",name:"code",value:"",placeholder:"КОД ПОДТВЕРЖДЕНИЯ"}})]),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("ввести")])])]),t._v(" "),n("action",{ref:"reReg",staticClass:"dotted",attrs:{tag:"span","data-title":"Если не правильно ввели e-mail",action:"/api/rereg"},on:{success:t.rereg}},[t._v("\n\n                    не правильно указали e-mail?\n                ")])],1)],1),t._v(" "),n("div",{staticClass:"mt-3 text-center"},[n("action",{ref:"sendVerifyEmail",staticClass:"btn btn-warning",attrs:{action:"/api/action/sendVerifyEmail",data:{action:"sendVerifyEmail",obj:"user",opt:{reg:1}},"disabled-force":t.resendDisabled},on:{success:t.success}},[n("i",{staticClass:"fa fa-paper-plane",attrs:{"aria-hidden":"true"}}),t._v("\n                Отправить повторно\n            ")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.ok,expression:"ok"}],staticClass:"my-2"},[n("small",{staticClass:"text-danger"},[t._v("\n                    На e-mail "),n("strong",[t._v(t._s(t.email$))]),t._v(" была отправлена проверочная ссылка\n                ")])])],1)],2)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("small",[n("strong",[t._v("введите код, отправленный на почту")])])}],!1,null,null,null).exports,Uu={name:"enter_modal",props:{tab:{type:String},email:{type:String},comp:{type:String,default:"modal"}},components:{login:Iu,register:Nu,reset:ju.Z,complete:Bu},data:function(){return{currentEmail:this.email||"",linkMail:"",state:{currentComp:this.tab||"login",currentCompProps:{}},backdropStyle:{background:"radial-gradient(ellipse at bottom, #1b3323 0%, #000000 100%)",opacity:1}}},computed:{comp$:function(){return"modal"===this.comp?Hl:{template:"<div><slot></slot></div>"}}},created:function(){},mounted:function(){this.modal=this.$refs.modal},methods:{}};const Vu=(0,Fl.Z)(Uu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.comp$,t._b({ref:"modal",tag:"component"},"component","modal"===t.comp?{backdrop:!1,footer:!1,backdropStyle:t.backdropStyle}:{},!1),["modal"===t.comp?n("div",{attrs:{slot:"header"},slot:"header"},[n("h5",{staticClass:"modal-title text-truncate"},[n("img",{attrs:{src:"/i/logo.png"}}),t._v(" "),"register"===t.state.currentComp?[t._v("\n                Регистрация на Ливаче\n            ")]:t._e(),t._v(" "),"login"===t.state.currentComp?[t._v("\n                Вход на Ливачу\n            ")]:t._e(),t._v(" "),"reset"===t.state.currentComp?[t._v("\n                Смена пароля\n            ")]:t._e()],2)]):t._e(),t._v(" "),n(t.state.currentComp,t._b({tag:"component",model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},"component",t.state.currentCompProps,!1)),t._v(" "),t._e()],1)}),[],!1,null,null,null).exports;const Hu={name:"reset_go",props:{token:{},value:{type:Object}},data:function(){return{ok:!1}},created:function(){},mounted:function(){},methods:{}};const Zu=(0,Fl.Z)(Hu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row justify-content-center"},[n("forma",{staticClass:"col col-md-6 col-lg-4 col-xl-4",attrs:{action:"/api/resetPass"},on:{success:function(e){t.ok=!0}}},[n("input",{attrs:{type:"hidden",name:"token"},domProps:{value:t.token}}),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{},[n("input",{staticClass:"form-control",attrs:{disabled:t.ok,placeholder:"пароль",name:"pass",value:"",required:"",autofocus:"",autocomplete:"off"}})])]),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{},[n("input",{staticClass:"form-control",attrs:{disabled:t.ok,placeholder:"повторите пароль",name:"pass2",value:"",required:"",autocomplete:"off"}})])]),t._v(" "),n("captcha"),t._v(" "),t._t("default"),t._v(" "),n("div",{staticClass:"d-flex justify-content-between"},[n("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.ok}},[n("i",{staticClass:"fa fa-unlock-alt",attrs:{"aria-hidden":"true"}}),t._v(" Сменить пароль")])])],2)],1)}),[],!1,null,null,null).exports;var Gu=Cl.Z.getComponents(n(35361),"");const zu={name:"myprofile",props:{comp:{type:String,default:"modal"},tab:{type:String,default:"home"}},data:function(){return{currentTab:this.tab,state:{fixedY:!1}}},computed:{comp$:function(){return"modal"===this.comp?Hl:{template:"<div><slot></slot></div>"}}},watch:{currentTab:function(){this.state.fixedY=!1},$route:function(t){this.currentTab=t.params.tab}},components:Gu,created:function(){this.tabs=[{name:"Основное",id:"home",icon:"fa  fa-home"},{name:"Анкета",id:"intim",icon:"fa fa-address-card-o"},{name:"Приватность",id:"private",icon:"fa fa-user-secret"},{name:"Уведомления",id:"sw-notify",icon:"fa fa-bell"},{name:"Подписки",id:"subscribers",icon:"fa fa-heart"},{name:"Настройки",id:"settings",icon:"fa fa-cog"},{name:"Черный список",id:"blacklist",icon:"fa fa-ban"},{name:"Безопасность",id:"security",icon:"fa fa-shield"},{name:"QR code",id:"qr",icon:"fa fa-qrcode"},{name:"Удалить профиль",id:"remove_profile",icon:"fa fa-trash"}]},mounted:function(){},methods:{changeTab:function(t){"modal"===this.comp?this.currentTab=t.id:this.$router.push("/profile/"+t.id)}}};const qu=(0,Fl.Z)(zu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.comp$,t._b({tag:"component"},"component","modal"===t.comp?{title:"Профиль",size:"lg",fixedY:t.state.fixedY,footer:!1}:{},!1),[t.global.user?n("div",{staticClass:"row g-0 flex-nowrap flex-column flex-md-row col",class:{"h-100":t.state.fixedY}},[n("div",{staticClass:"col-auto nav flex-nowrap bg-light overflow-auto flex-row flex-md-column me-md-3 mb-3 mb-md-0 nav-pills flex-nowrap",attrs:{id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"}},t._l(t.tabs,(function(e,a){return n("a",{staticClass:"nav-link  mw-100 text-nowrap",class:{active:e.id===t.currentTab},attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.changeTab(e)}}},[e.icon?n("i",{class:e.icon}):t._e(),t._v(" "),n("span",{staticClass:"d-none ms-2 d-sm-inline"},[t._v(t._s(e.name))])])})),0),t._v(" "),n("div",{ref:"contentEl",staticClass:"col h-100  position-relative overflow-auto"},[n(t.currentTab,{tag:"component",model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1)]):n("div",{staticClass:"alert alert-danger text-center"},[n("strong",[t._v("Вы не авторизованы")])])])}),[],!1,null,null,null).exports;const Ku={name:"feedback",props:{prop:{type:String}},data:function(){return{email:""}},created:function(){this.email=this.global.email||""},mounted:function(){},methods:{}};const Wu=(0,Fl.Z)(Ku,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t._modal_or_div,t._b({tag:"component"},"component","modal"===t.root_comp?{title:"Обратная связь",footer:!1}:{},!1),[n("p",[t._v("\n    По всем "),n("strong",[t._v("ОБЩИМ ВОПРОСАМ")]),t._v(" просьба обращаться посредством данной формы.\n    Если вы не получили ответа, значит ваш вопрос решается через "),n("a",{attrs:{href:"/support"}},[t._v("поддержку")])]),t._v(" "),n("forma",{attrs:{action:"/api/report",once:!0}},[n("div",{staticClass:"form-group"},[n("label",[t._v("E-mail:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",name:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Тема / Subject:")]),t._v(" "),n("list-form",{attrs:{name:"subject"}},[n("li",[t._v("\n                    Удаление информации\n                    "),n("ul",[n("li",[t._v("Публикация персональных данных")]),t._v(" "),n("li",[t._v("Порнография, контент для взрослых")]),t._v(" "),n("li",[t._v("Авторское право / Copyright")]),t._v(" "),n("li",[t._v("Нарушение закона")])])]),t._v(" "),n("li",[t._v("Реклама")]),t._v(" "),n("li",[t._v("Другой ВАЖНЫЙ вопрос / Other")])])],1),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Сообщение администрации / Message:")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"comment",required:""}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("captcha",{attrs:{ver:2}})],1),t._v(" "),n("div",{staticClass:"form-group text-end"},[n("button",{staticClass:"btn btn-secondary"},[n("i",{staticClass:"fa fa-send"}),t._v("\n                Отправить\n            ")])]),t._v(" "),n("input",{attrs:{type:"hidden",name:"report",value:"feedback"}})])],1)}),[],!1,null,null,null).exports;const Yu={name:"blog",props:{posts:{type:Array},userAlias:{type:String,default:""},front:{type:Boolean,default:!1},embed:{type:Boolean,default:!1}},data:function(){return{userAlias$:this.userAlias,posts$:this.posts||null,loading:!1,endOfData:!1,offset:0,loadParams:{all:!1}}},beforeRouteEnter:function(t,e,n){n((function(t){t.posts$=t.extractData("posts")||t.posts,t.posts$||t.load()}))},beforeRouteUpdate:function(t,e,n){this.userAlias$=t.params.userAlias,this.load(),n()},created:function(){var t=this;this.$watch("loadParams",(function(){t.offset=0,t.load()}),{deep:!0})},mounted:function(){},methods:{load:function(t){var e=this;this.loading=!0,t||(t={});var n=Object.assign({},this.loadParams,{user:this.userAlias$,front:this.front},t);pl.V.make("getPosts",n).then((function(n){var a=n.posts;e.endOfData=0===a.length||a.length<n.limit,t.offset?e.posts$.pushItems(a):e.posts$=a,"blog"===e.$route.name&&(n.owner?(e.$root.header(n.owner.name),e.$root.nav([{text:"Все заметки",link:"/posts"},{text:"Заметки автора"}])):e.$root.nav("Все заметки")),e.$emit("input",e.posts$)})).catch((function(t){e.$root.popupFixErr(t)})).always((function(){e.loading=!1}))},loadMore:function(){this.endOfData||(this.offset++,this.load({offset:this.offset}))}}};const Xu=(0,Fl.Z)(Yu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{inline:""}}),t._v(" "),t.front||t.embed?t._e():[t.global.admin?n("label",{staticClass:"form-check form-switch form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.loadParams.all,expression:"loadParams.all"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.loadParams.all)?t._i(t.loadParams.all,null)>-1:t.loadParams.all},on:{change:function(e){var n=t.loadParams.all,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&t.$set(t.loadParams,"all",n.concat([null])):i>-1&&t.$set(t.loadParams,"all",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.loadParams,"all",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Показать все")])]):t._e(),t._v(" "),n("div",{staticClass:"text-end mb-2"},[t.global.user?n("router-link",{staticClass:"btn btn-secondary btn-sm",attrs:{to:"/posts/"+(t.global.user.alias||t.global.user.id)}},[n("i",{staticClass:"fa fa-list"}),t._v("\n                Мои заметки\n            ")]):t._e(),t._v(" "),n("router-link",{staticClass:"btn btn-secondary btn-sm",attrs:{to:"/post_new"}},[n("i",{staticClass:"fa fa-plus"}),t._v("\n                Создать заметку\n            ")])],1)],t._v(" "),t.posts$&&t.posts$.length>0?[t._t("top"),t._v(" "),t.front?t._e():n("adv",{attrs:{type:"yandex",scope:"posts"}}),t._v(" "),t._l(t.posts$,(function(e){return n("div",{key:e.id,staticClass:"mb-3 bg-light p-3 border clearfix position-relative"},[n("router-link",{attrs:{to:e.link}},[e.cover.avaiable?n("img",{staticClass:"float-start me-2 mw-100",attrs:{src:e.cover.small}}):t._e()]),t._v(" "),n("strong",[n("small",{},[t._v(t._s(e.date))])]),t._v(" "),n("h5",[n("router-link",{attrs:{to:e.link}},[t._v(t._s(e.title))])],1),t._v(" "),n("div",{staticClass:"position-absolute bottom-0 end-0"},[void 0===e.moderated||e.moderated?0===e.allow?[t._m(1,!0)]:t._e():[t._m(0,!0)],t._v(" "),e.editable?n("router-link",{staticClass:"badge bg-secondary",attrs:{to:e.editable,"data-title":"Редактировать"}},[n("i",{staticClass:"fa fa-pencil"})]):t._e(),t._v(" "),void 0===e.published||e.published?t._e():n("span",{staticClass:"badge bg-secondary",attrs:{"data-title":"Черновик"}},[n("i",{staticClass:"fa fa-file-o"})]),t._v(" "),e.views>1?n("span",{staticClass:"badge bg-secondary",attrs:{"data-help":"Просмотров"}},[n("i",{staticClass:"fa fa-bar-chart",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(e.views))]):t._e(),t._v(" "),e.commentsAllow||e.commentsCount>0?n("router-link",{staticClass:"badge",class:{"bg-success text-white":e.commentsAllow,"bg-secondary":!e.commentsAllow},attrs:{to:e.link+"#comments"}},[n("i",{staticClass:"fa fa-commenting-o",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(e.commentsCount>0||!e.commentsAllow?"комментарии":"оставить комментарий")+" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.commentsCount>0,expression:"post.commentsCount > 0"}]},[t._v("("+t._s(e.commentsCount)+")")])]):t._e()],2)],1)})),t._v(" "),t._t("default"),t._v(" "),n("load-more",{directives:[{name:"show",rawName:"v-show",value:!t.embed&&!t.endOfData&&!t.front,expression:"!embed && !endOfData &&  !front"}],staticClass:"my-5",attrs:{loading:t.loading},on:{click:t.loadMore}})]:t._e()],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"badge bg-secondary",attrs:{"data-title":"Ожидает проверку"}},[e("i",{staticClass:"fa fa-hourglass-end text-warning"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"badge bg-danger",attrs:{"data-title":"Заметка отклонена"}},[e("i",{staticClass:"fa fa-exclamation-triangle"})])}],!1,null,null,null).exports;const Ju={name:"",props:{post:{type:Object},postId:{}},data:function(){return{post$:this.post||null,postId$:this.postId,loading:!1}},created:function(){},beforeRouteEnter:function(t,e,n){n((function(t){t.post$=t.extractData("post"),void 0===t.post$&&t.load()}))},beforeRouteUpdate:function(t,e,n){this.postId$=t.params.postId,this.load(),n()},mounted:function(){},methods:{load:function(){var t=this;this.$api((function(e){t.post$=e.post,t.$root.header(t.post$.title),t.$root.title(t.post$.title),t.$root.nav("Заметки","/posts");var n=t.post$.owner;n&&t.$root.nav(n.name,n.link_blog)}),"getPost",{post_id:this.postId$})}}};const Qu=(0,Fl.Z)(Ju,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-post"},[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{inline:""}}),t._v(" "),n("adv",{attrs:{type:"yandex",scope:"post"}}),t._v(" "),t.post$?[t.post$.editable?n("div",{staticClass:"text-end"},[n("router-link",{staticClass:"btn btn-secondary btn-sm",attrs:{to:t.post$.editable}},[n("i",{staticClass:"fa fa-pencil"}),t._v(" Редактировать\n            ")])],1):t._e(),t._v(" "),t.post$.cover.avaiable?n("a",{staticClass:"float-start d-inline-block me-2",attrs:{"data-fancybox":"",href:t.post$.cover.big}},[n("img",{attrs:{src:t.post$.cover.small}})]):t._e(),t._v(" "),n("div",{domProps:{innerHTML:t._s(t.post$.html)}}),t._v(" "),n("div",{staticClass:"text-end"},[n("small",{staticClass:"text-muted"},[t._v("Автор: "),n("user",{attrs:{user:t.post$.owner}})],1),n("br"),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("Дата: "+t._s(t.post$.date))])]),t._v(" "),n("div",{staticClass:"clearfix mb-2"}),t._v(" "),n("comments",{staticClass:"mt-3",attrs:{"can-write":t.post$.commentsAllow,count:t.post$.commentsCount,item:t.post$,obj:"blog","obj-id":t.post$.id}})]:t._e()],2)}),[],!1,null,null,null).exports;const td={name:"post_preview",props:{post:{type:Object}},components:{post:Qu},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const ed=(0,Fl.Z)(td,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{size:"full",title:t.post.title}},[n("post",{attrs:{post:t.post}})],1)}),[],!1,null,null,null).exports,nd={name:"post_edit",props:{postId:{},post:{}},data:function(){return{post$:this.post,canPublish:!1,uploader:null,smiles:null,removed:!1}},computed:{commentsAllow:{set:function(t){this.post$.commentsAllow=t},get:function(){return this.post$&&this.post$.commentsAllow?"allow":"disallow"}}},created:function(){var t=this;this.post$&&this.$root.header(this.post$.title),this.$watch("post$",(function(){t.post$&&t.$root.header(t.post$.title)}))},beforeRouteEnter:function(t,e,n){n((function(e){e.post$=t.params.post||e.extractData("post"),e.post$&&e.$root.header(e.post$.title),e.post$||"post_edit"!==t.name||e.load()}))},mounted:function(){},methods:{editToggle:function(t){var e=t.post;this.$router.push({name:"post_edit",params:{post:e,postId:e.id}})},postSaved:function(t){this.canPublish="save"===t.action,this.post$=t.post},published:function(){this.canPublish=!1},preview:function(){this.post$&&this.render(ed,{post:this.post$})},load:function(){var t=this;this.$api((function(e){t.post$=e.post}),"getMyPostEdit",{id:this.postId})}}};const ad=(0,Fl.Z)(nd,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.removed?[t._m(0)]:["post_new"===t.$route.name?[n("forma",{attrs:{action:"/api/postSave"},on:{success:t.editToggle}},[n("input",{attrs:{type:"hidden",name:"action",value:"save"}}),t._v(" "),n("div",{staticClass:"form-group"},[n("input",{staticClass:"form-control form-control-lg font-weight-bold",attrs:{name:"title",required:"",autocomplete:"off",maxlength:t.global.blog.title_max,minlength:t.global.blog.title_min,placeholder:"Заголовок заметки"}})]),t._v(" "),n("div",{staticClass:"form-group text-end"},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"",value:""}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("С "),n("a",{attrs:{target:"_blank",href:"/page/rules"}},[t._v("правилами")]),t._v(" ознакомлен")])])]),t._v(" "),n("div",{staticClass:"form-group text-end"},[t.global.user?n("router-link",{staticClass:"btn btn-secondary",attrs:{to:t.global.user.link_blog}},[n("strong",[n("i",{staticClass:"fa fa-list"}),t._v(" Мои заметки")])]):t._e(),t._v(" "),n("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-pencil"}),t._v(" Продолжить")])],1)])]:t.post$?[n("forma",{attrs:{action:"/api/postSave"},on:{success:t.postSaved}},[n("input",{attrs:{type:"hidden",name:"post_id"},domProps:{value:t.post$.id}}),t._v(" "),n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.post$.title,expression:"post$.title"}],staticClass:"form-control form-control-lg font-weight-bold",attrs:{name:"title",required:"",autocomplete:"off",maxlength:t.global.blog.title_max,minlength:t.global.blog.title_min,placeholder:"Заголовок заметки"},domProps:{value:t.post$.title},on:{input:function(e){e.target.composing||t.$set(t.post$,"title",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group collapse",attrs:{id:"collapseAdvance"}},[n("div",{staticClass:"row gy-3"},[n("div",{staticClass:"col-auto"},[n("uploader",{attrs:{image:t.post$.cover.small||"",label:"Обложка заметки",obj:"blog","obj-id":t.post$.id,alias:"cover"}})],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("div",{staticClass:"mb-2"},[n("span",{staticClass:"d-block d-md-inline"},[t._v("Комментарии:")]),t._v(" "),t._l([{n:"Разрешены",v:"allow"},{n:"Запрещены",v:"disallow"}],(function(e){return n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.commentsAllow,expression:"commentsAllow"}],staticClass:"form-check-input",attrs:{type:"radio",name:"comments_allow"},domProps:{value:e.v,checked:t._q(t.commentsAllow,e.v)},on:{change:function(n){t.commentsAllow=e.v}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v(t._s(e.n))])])}))],2),t._v(" "),n("div",[n("action",{staticClass:"btn btn-danger",attrs:{type:"button",action:"action/remove",confirm:"Удалить эту заметку?",data:{post_id:t.post$.id,action:"remove",obj:"blog"}},on:{success:function(e){t.removed=!0}}},[n("i",{staticClass:"fa fa-trash"}),t._v(" Удалить заметку")])],1)])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"d-flex mb-1 justify-content-between"},[n("div",[n("small",{staticClass:"dotted",attrs:{"data-bs-toggle":"collapse",href:"#collapseSmiles"}},[n("i",{staticClass:"fa fa-smile-o",attrs:{"aria-hidden":"true"}}),t._v(" Смайлики")])]),t._v(" "),n("div",[n("small",{staticClass:"dotted",attrs:{"data-bs-toggle":"collapse",href:"#collapseAdvance"}},[n("i",{staticClass:"fa fa-sliders",attrs:{"aria-hidden":"true"}}),t._v(" Дополнительные настройки")])])]),t._v(" "),n("div",{staticClass:"collapse",attrs:{id:"collapseSmiles"}},[n("smiles",{attrs:{"recent-height":0},on:{mount:function(e){t.smiles=e}}})],1),t._v(" "),n("uploader",{staticStyle:{height:"10px",overflow:"hidden"},attrs:{obj:"blog",onlyprogress:!0,"max-files":0,"obj-id":t.post$.id},on:{mount:function(e){t.uploader=e}}}),t._v(" "),t.uploader&&t.smiles?n("html-editor",{attrs:{features:"blog",uploader:t.uploader,smiles:t.smiles,name:"text",id:t.idStatic("edit_post")}},[t._v("\n                        "+t._s(t.post$.editor_html)+"\n                    ")]):t._e()],1),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"row gx-0 gy-3 justify-content-between"},[n("div",{staticClass:"col-auto"},[n("action",{directives:[{name:"show",rawName:"v-show",value:t.canPublish,expression:"canPublish"}],staticClass:"btn btn-primary",attrs:{type:"button",action:"action/publish",data:{post_id:t.post$.id,action:"publish",obj:"blog"}},on:{success:t.published}},[n("i",{staticClass:"fa fa-check"}),t._v("\n                                Опубликовать\n                            ")])],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.preview}},[n("i",{staticClass:"fa fa-eye",attrs:{"aria-hidden":"true"}}),t._v("\n                                Предосмотр\n                            ")]),t._v(" "),n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit",name:"action",value:"save"}},[n("i",{staticClass:"fa fa-file"}),t._v("\n                                Сохранить черновик\n                            ")])])])])])]:[n("loader",{attrs:{inline:""}})]]],2)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert alert-danger text-center"},[n("i",{staticClass:"fa fa-trash"}),t._v(" "),n("strong",[t._v("Заметка удалена")])])}],!1,null,null,null).exports;const rd={name:"services",props:{services:{type:Array}},data:function(){return{services$:this.services}},created:function(){this.services$=this.extractData("services")||this.services||[]},mounted:function(){},methods:{}};const id=(0,Fl.Z)(rd,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row"},t._l(t.services$,(function(e){return n("a",{key:e.id,staticClass:"col-lg-3 col-md-4 col-sm-6 col-6 position-relative d-block mb-3",attrs:{href:e.link},on:{click:function(n){return n.preventDefault(),t.$root.openPay({offerId:e.id})}}},[n("div",{},[n("img",{staticClass:"w-100",attrs:{src:e.logo}})]),t._v(" "),n("div",{staticClass:"text-truncate"},[t._v("\n                "+t._s(e.name)+"\n            ")])])})),0)])}),[],!1,null,null,null).exports;const sd={name:"comments_page",props:{prop:{type:String}},data:function(){return{obj$:null}},beforeRouteEnter:function(t,e,n){n((function(t){}))},created:function(){this.obj$=this.extractData("obj")},mounted:function(){},methods:{}};const od=(0,Fl.Z)(sd,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.obj$?n("comments",{attrs:{show:!0,"can-write":t.obj$.commentsAllow,count:t.obj$.commentsCount,item:t.obj$,obj:t.obj$._c,"obj-id":t.obj$.id}}):t._e()],1)}),[],!1,null,null,null).exports;const cd={name:"",props:{android:{type:Object}},data:function(){return{android$:this.android}},created:function(){},beforeRouteEnter:function(t,e,n){n((function(t){t.android$=t.extractData("android")||t.android||{}}))},mounted:function(){},methods:{}};const ld=(0,Fl.Z)(cd,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row justify-content-center"},[t.android$?[n("div",{staticClass:"col-auto text-center"},[n("a",{attrs:{href:t.utils.isTouch()?"market://details?id=com.panteley.broadcaster":"https://play.google.com/store/apps/details?id=com.panteley.broadcaster"}},[n("img",{attrs:{src:"/i/gplay.png"}}),n("br"),t._v("\n\t\t\t\tGoogle Play"),n("br"),t._v(" "),n("small",[t._v("версия для трансляторов")]),n("br")])]),t._v(" "),t.android$.current?n("div",{staticClass:"col-auto text-center"},[n("div",{staticClass:"text-center"},[n("a",{attrs:{href:t.android$.current.link}},[n("img",{attrs:{src:"/i/apk.jpg"}}),n("br"),t._v(" "),n("strong",[t._v("Установить последнюю версию")])])]),t._v(" "),n("table",{staticClass:"mx-auto table-bordered"},[n("tr",[n("td",{staticClass:"text-right p-1"},[t._v("Дата выхода:")]),t._v(" "),n("td",{staticClass:"p-1"},[n("strong",[t._v(t._s(t.android$.current.date))])])]),t._v(" "),n("tr",[n("td",{staticClass:"text-right p-1"},[t._v("Версия:")]),t._v(" "),n("td",{staticClass:"p-1"},[n("code",[t._v(t._s(t.android$.current.verName))])])])])]):t._e(),t._v(" "),n("pagex",{attrs:{page:t.android$.page,alias:t.android$.alias}}),t._v(" "),t.android$.releases?n("div",{staticClass:"mt-3 table-responsive"},[t._v("\n\t\t\tИстория версий:\n\t\t\t"),n("table",{staticClass:"table"},[t._m(0),t._v(" "),n("tbody",t._l(t.android$.releases,(function(e){return n("tr",[n("td",[t._v(t._s(e.date))]),t._v(" "),n("td",[n("a",{attrs:{href:e.link}},[t._v(t._s(e.verName))])])])})),0)])]):t._e()]:t._e()],2)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("Дата")]),t._v(" "),n("th",[t._v("Версия")])])])}],!1,null,null,null).exports;const ud={name:"oauth_success",props:{},data:function(){return{result:null}},created:function(){this.result=Fg.data.oauth_result||null,this.result&&window.opener&&this.$root.postMessage("oauth",this.result,window.opener)},mounted:function(){},methods:{}};const dd=(0,Fl.Z)(ud,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.result?n("div",[t._m(0),t._v(" "),n("small",[t._v("можете закрыть эту страницу")])]):t._e()])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert alert-success text-center"},[n("strong",[t._v("Авторизация прошла успешно!")])])}],!1,null,null,null).exports;const fd={name:"donation_form",props:{donation:{type:Object},order:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const hd=(0,Fl.Z)(fd,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.order?n("div",{staticClass:"my-1 border p-3"},[t._v("\n        Вы оплачиваете донат (счет № "+t._s(t.order.id)+") на сумму "),n("strong",{staticClass:"text-danger"},[t._v(t._s(t.order.summ)+" "),n("i",{staticClass:"fa fa-rub",attrs:{"aria-hidden":"true"}})]),t._v(" "),t.order.comment?n("span",[t._v(", комментарий: «"+t._s(t.order.comment)+"»")]):t._e()]):n("div",{staticClass:"row justify-content-between"},[n("div",{staticClass:"col-5 col-sm-4 col-lg-3"},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"row g-2 align-items-center"},[n("div",{staticClass:"col"},[n("input",{staticClass:"form-control",attrs:{placeholder:"Сумма",disabled:t.order,type:"number",autocomplete:"off",required:"",name:"summ"},domProps:{value:t.donation.price}})]),t._v(" "),t._m(0)])])]),t._v(" "),n("div",{staticClass:"col pl-0"},[n("div",{staticClass:"form-group"},[n("input",{staticClass:"form-control",attrs:{placeholder:"E-mail",required:"required",type:"email",name:"email"},domProps:{value:t.global.payEmail}})])])]),t._v(" "),t.order?t._e():n("div",{staticClass:"my-2"},[n("div",[n("i",{staticClass:"fa fa-question-circle",attrs:{"data-title":"даже если трансляция завершена пользователь все равно получит ваше сообщение"}}),t._v("\n            Сообщение пользователю и чату\n            "),t.donation.price_min_comment?n("small",[t._v(" (минимальная сумма "),n("rub",{attrs:{money:t.donation.price_min_comment}}),t._v(", иначе автор не увидит вашего комментария)")],1):t._e()]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"comment"}}),t._v(" "),t.donation.donate_voice?n("div",{staticClass:"text-center"},[n("div",{staticClass:"font-italic"},[n("i",{staticClass:"text-primary animate__animated animate__flash fa fa-volume-up",attrs:{"aria-hidden":"true"}}),t._v(" "),n("em",[t._v("у пользователя включена функция ситнеза речи, ваш комментарий озвучит актер из Голливуда")]),t._v(" "),t.donation.price_min_voice>0?n("small",[t._v("(минимальная сумма: "),n("rub",{attrs:{money:t.donation.price_min_voice}}),t._v(")")],1):t._e()]),t._v(" "),t._m(1)]):t._e()])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-auto pl-2"},[e("i",{staticClass:"fa fa-rub",attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:" mt-1 mb-3"},[t._v("\n                Выбрать актера:\n                "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"voice_sex",value:"male"}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Муж.")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"voice_sex",value:"female"}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Жен.")])])])}],!1,null,null,null).exports,pd={name:"qiwi",props:{donation:{type:Object}},data:function(){return{form:hd,payUrl:!1}},created:function(){},mounted:function(){var t=this;this.forma=this.$refs.forma,this.forma.$on("success",(function(e){e.payUrl&&(t.payUrl=e.payUrl,t.$emit("pay",e.payUrl))}))},methods:{}};const md=(0,Fl.Z)(pd,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("forma",{ref:"forma",attrs:{action:"/api/donateForm"}},[t.payUrl?[n("div",{staticClass:"alert alert-secondary text-center"},[n("strong",[t._v("\n                Почти все готово, вам осталось перейти на сайт оплаты и сделать пожертвование\n                "),n("i",{staticClass:"animate__animated animate__shakeY animate__infinite animate__slow fa fa-level-down",attrs:{"aria-hidden":"true"}})])])]:[n(t.form,{tag:"component",attrs:{donation:t.donation}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"owner_id"},domProps:{value:t.donation.owner.id}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"type"},domProps:{value:t.donation.alias}})]],2)}),[],!1,null,null,null).exports;const vd={name:"donationsalerts",props:{offer:{type:String}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const gd=(0,Fl.Z)(vd,(function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"alert alert-secondary text-center"},[n("strong",[t._v("Все готово. Можете переходить на сайт оплаты и делать пожертвование")])])])}],!1,null,null,null).exports;const _d={name:"pay",props:{donation:{type:Object},offer:{type:Object,required:!0},order:{type:Object},scope:{type:String,default:""}},components:{"donate-form":hd},data:function(){return{pay:null,order$:null,formUser:null,methodsCustom:null,html:null,step:"first"}},destroyed:function(){this.$root.$off("wsmess",this.wsmess)},created:function(){this.$root.$on("wsmess",this.wsmess)},mounted:function(){var t=this;this.forma=this.$refs.forma,this.forma.$on("success",(function(e){e.order&&(t.step="two",t.order$=e.order,t.pay=e.pay,t.formUser=e.pay.form,t.html=e.pay.html,t.methodsCustom=e.pay.methods,"self"===t.pay.alias&&t.$emit("complete",""),t.formUser&&t.$nextTick((function(){t.$emit("form",t.$refs.formUser)})),e.order.payed&&t.$emit("payed",""),t.$emit("pay",e.pay.url))}))},methods:{wsmess:function(t,e,n){"order"===t&&this.order$&&this.order$.id===e.id&&(this.order$.payed=!0,this.$emit("orderPayed",e))}}};const yd=(0,Fl.Z)(_d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[t.order$&&t.pay&&t.pay.url?t._e():n("forma",{ref:"forma",attrs:{action:"/api/order"}},[t.order$?t._e():[t.donation?[n("donate-form",{attrs:{donation:t.donation,order:t.order}})]:[n("div",{staticClass:"row justify-content-between"},[n("div",{staticClass:"col-lg-6 col-md-6"},[n("div",{staticClass:"form-group"},[n("h4",{},[t._v("Сумма: "),n("strong",{staticClass:"text-danger"},[t._v(t._s(t.order?t.order.summ:t.offer.price))]),t._v(" "),n("small",[n("i",{staticClass:"fa fa-rub",attrs:{"aria-hidden":"true"}})])])])]),t._v(" "),n("div",{staticClass:"col-lg-6 col-md-6"},[t.order?n("div",[t._v("\n                            оплата счета № "+t._s(t.order.id)+", "+t._s(t.order.email)+"\n                        ")]):n("div",{staticClass:"form-group"},[n("input",{staticClass:"form-control",attrs:{placeholder:"E-mail",required:"required",type:"email",name:"email"},domProps:{value:t.global.payEmail}})])])]),t._v(" "),t.offer.owner?n("div",{staticClass:"my-2"},[n("div",{staticClass:"row g-2 align-items-center"},[n("div",{staticClass:"col-auto"},[t._v("\n                            Продавец:\n                        ")]),t._v(" "),n("div",{staticClass:"col-auto",staticStyle:{"line-height":"0"}},[n("user",{attrs:{user:t.offer.owner}})],1)])]):t._e(),t._v(" "),t.offer.text?n("div",[n("small",[n("em",[t._v(t._s(t.offer.text))])])]):t._e()],t._v(" "),n("pay-methods",{staticClass:"my-2",attrs:{donation:t.donation,offer:t.offer}})],t._v(" "),n("captcha"),t._v(" "),n("input",{attrs:{type:"hidden",name:"offer_id"},domProps:{value:t.offer.id}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"scope"},domProps:{value:t.scope}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"step"},domProps:{value:t.step}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"order_id"},domProps:{value:t.order$?t.order$.id:t.order&&t.order.id}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"go_pay"},domProps:{value:t.pay&&"self"===t.pay.alias?"1":""}})],2),t._v(" "),t.order$?n("div",[n("div",{staticClass:"alert alert-primary text-center"},[n("span",{staticClass:"badge bg-primary"},[t._v(t._s(t.order$.summ)+" "),n("rub")],1),t._v(" "),n("span",{staticClass:"badge bg-primary"},[t._v("Счет №"+t._s(t.order$.id))]),t._v(" "),n("span",{staticClass:"badge bg-primary"},[t._v(t._s(t.order$.email))]),t._v(" "),n("span",{staticClass:"badge bg-primary"},[t._v(t._s(t.pay.name))])]),t._v(" "),t.order$.payed?[t._m(0)]:["self"===t.pay.alias?n("div",{staticClass:"text-center alert alert-secondary progress-bar-striped"},[n("i",{staticClass:"em em-sun_with_face",attrs:{"aria-role":"presentation","aria-label":"SUN WITH FACE"}}),t._v(" "),n("strong",[t._v("Вы оплачиваете ливачами")]),t._v(" "),n("i",{staticClass:"em em-sun_with_face",attrs:{"aria-role":"presentation","aria-label":"SUN WITH FACE"}})]):t._e(),t._v(" "),t.formUser?n("form",{ref:"formUser",attrs:{target:"_blank",action:t.formUser.action,method:t.formUser.type}},[t.methodsCustom?n("div",{staticClass:"app-pay-methods app-radio-container"},t._l(t.methodsCustom.items,(function(e){return n("div",{staticClass:"custom app-radio d-inline-block"},[n("label",{staticClass:"form-check form-check-inline",class:{image:e.icon}},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:t.methodsCustom.name},domProps:{checked:e.checked,value:e.code}}),t._v(" "),n("span",{staticClass:"form-check-label"},[e.icon?n("img",{staticStyle:{width:"36px"},attrs:{src:e.icon}}):t._e(),t._v(" "+t._s(e.name)+"\n                          ")])])])})),0):t._e(),t._v(" "),t._l(t.formUser.post,(function(t,e){return n("input",{attrs:{type:"hidden",name:e},domProps:{value:t}})}))],2):t._e(),t._v(" "),t.html?n("div",{domProps:{innerHTML:t._s(t.html)}}):t._e()]],2):t._e()],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center alert alert-success progress-bar-striped"},[n("strong",[t._v("Спасибо!")]),t._v(" "),n("i",{staticClass:"em em-clap",attrs:{"aria-role":"presentation","aria-label":"CLAPPING HANDS SIGN"}}),t._v(" "),n("strong",[t._v("Пожертвование получено.")])])}],!1,null,null,null).exports,bd={name:"donate_modal",props:{donate:{},offer:{},order:{},offerId:{type:Number},scope:{type:String,default:"room"},owner:{type:Object}},data:function(){return{agree:!0,currentDonation:null,currentDonationAlias:"",currentOffer:null,order$:this.order,payLink:"",formSubmit:!1,complete:!1,payed:!0,donatAlias:""}},components:{qiwi:md,donationsalerts:gd,self:yd},computed:{state:function(){return this.payLink||this.formSubmit||this.complete},buttonName:function(){return this.donationMode&&this.currentDonation.buttonName||"Оплатить"},donationMode:function(){return!(this.offerId||this.offer||this.currentOffer)},currentComp:function(){var t=this;this.payLink="",this.formSubmit=!1,this.complete=!1,this.payed=!1;var e=null;return this.donationMode?this.currentDonation&&(this.payLink=this.currentDonation.donateLink,e=this.currentDonation.alias):this.currentOffer&&(e=yd),e&&this.$nextTick((function(){t.$refs.payComp.$on("pay",(function(e){t.payLink=e})),t.$refs.payComp.$on("form",(function(e){t.formSubmit=e})),t.$refs.payComp.$on("complete",(function(e){t.complete=!0})),t.$refs.payComp.$on("payed",(function(){t.payed=!0}))})),e}},created:function(){},watch:{currentDonation:function(){this.modal.footerShow=!!this.currentDonation,this.currentDonation&&(this.currentDonationOld=this.currentDonation)},currentOffer:function(){this.modal.footerShow=!!this.currentOffer,this.currentOffer&&(this.currentOfferOld=this.currentOffer)}},mounted:function(){var t=this;this.modal=this.$refs.modal,this.modal.footerShow=!1,this.donationMode?this.donate instanceof Array?(error(this.donate),this.currentDonation=this.donate[0],this.donatAlias=this.currentDonation.alias):this.currentDonation=this.donate:!this.offer&&this.offerId?(this.modal.loading(),pl.V.make("getOffer",{offer_id:this.offerId}).then((function(e){t.currentOffer=e.offer})).catch((function(e){t.$root.popupFixErr(e)})).always((function(){t.modal.loading(!1)}))):this.offer&&(this.currentOffer=this.offer)},methods:{reset:function(){var t=this;this.donationMode?(this.donatAlias="",this.donate instanceof Array?(this.currentDonation=null,this.$nextTick((function(){t.currentDonation=t.donate[0],t.donatAlias=t.donate[0].alias}))):(this.currentDonation=null,this.$nextTick((function(){t.currentDonation=t.currentDonationOld})))):(this.currentOffer=null,this.$nextTick((function(){t.currentOffer=t.currentOfferOld})))}}};const Cd=(0,Fl.Z)(bd,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{ref:"modal",staticClass:"app-pay",attrs:{size:"lg",centered:"true"}},[n("template",{slot:"header"},[n("h3",{staticClass:"row align-items-center m-0 g-0 flex-nowrap"},[n("div",{staticClass:"col-auto me-2"},[t.currentOffer?n("a",{attrs:{href:t.currentOffer.link,target:"_blank"}},[t._v(t._s(t.currentOffer.name))]):t._e()]),t._v(" "),t.donationMode?n("div",{staticClass:"col-auto text-primary"},[n("i",{staticClass:"fa fa-gift"}),t._v("\n                ПОДАРОК\n            ")]):t._e()])]),t._v(" "),t.donationMode?n("h3",{staticClass:"mb-2"},[n("user",{attrs:{user:t.owner}})],1):t._e(),t._v(" "),t.donate instanceof Array?n("div",t._l(t.donate,(function(e){return n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.donatAlias,expression:"donatAlias"}],staticClass:"form-check-input",attrs:{type:"radio",name:"donationType"},domProps:{value:e.alias,checked:t._q(t.donatAlias,e.alias)},on:{change:[function(n){t.donatAlias=e.alias},function(n){t.currentDonation=e}]}}),t._v(" "),n("span",{staticClass:"form-check-label"},[n("img",{staticStyle:{height:"26px"},attrs:{src:e.logo}}),t._v(" "+t._s(e.name))])])})),0):t._e(),t._v(" "),t.currentDonation&&t.currentDonation.text?n("div",{staticClass:"alert alert-secondary my-2 text-center"},[t.currentDonation.icon?n("img",{attrs:{src:t.currentDonation.icon}}):t._e(),t._v(" "),n("h4",{staticClass:"m-0 d-inline-block text-danger"},[t._v(t._s(t.currentDonation.text))])]):t._e(),t._v(" "),t.currentComp?n(t.currentComp,{ref:"payComp",tag:"component",attrs:{offer:this.donationMode?t.currentDonation.offer:t.currentOffer,donation:t.currentDonation,scope:t.scope,order:t.order$},on:{orderPayed:function(e){return t.$emit("orderPayed",e)}}}):t._e(),t._v(" "),n("template",{slot:"footer"},[t.currentDonation||t.currentOffer?n("div",{staticClass:"row g-1 justify-content-end align-items-center"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.state,expression:"!state"}],staticClass:"col-auto mb-2"},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.agree,expression:"agree"}],staticClass:"form-check-input",attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(t.agree)?t._i(t.agree,null)>-1:t.agree},on:{change:function(e){var n=t.agree,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&(t.agree=n.concat([null])):i>-1&&(t.agree=n.slice(0,i).concat(n.slice(i+1)))}else t.agree=r}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Я согласен с "),n("a",{attrs:{target:"_blank",href:"/page/rules"}},[t._v("условиями")])])])]),t._v(" "),n("div",{staticClass:"col-auto"},[t.state?[(t.donate,n("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.reset()}}},[n("i",{staticClass:"fa fa-arrow-left",attrs:{"aria-hidden":"true"}}),t._v(" Взад")])),t._v(" "),t.payLink?n("a",{staticClass:" btn btn-primary progress-bar-striped",attrs:{href:t.payLink,target:"_blank"}},[n("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.buttonName)+"\n                    ")]):t.formSubmit?n("button",{staticClass:" btn btn-primary progress-bar-striped ",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.formSubmit.submit()}}},[n("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.buttonName)+"\n                    ")]):t.complete?n("button",{staticClass:" btn btn-primary progress-bar-striped ",class:{"animated flipInX":t.payed},attrs:{disabled:t.payed}},[t.payed?[n("i",{staticClass:"em em-sun_with_face",attrs:{"aria-role":"presentation","aria-label":"SUN WITH FACE"}}),t._v(" Спасибо\n                        ")]:[n("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.buttonName)+"\n                        ")]],2):t._e()]:[n("button",{staticClass:"btn btn-success",attrs:{disabled:!t.agree}},[t.payed?[n("i",{staticClass:"em em-sun_with_face",attrs:{"aria-role":"presentation","aria-label":"SUN WITH FACE"}}),t._v(" Спасибо\n                        ")]:[n("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.buttonName)+"\n                        ")]],2)]],2)]):t._e()])],2)}),[],!1,null,null,null).exports;const wd={name:"order",props:{order:{type:Object}},data:function(){return{order$:this.order}},beforeRouteEnter:function(t,e,n){n((function(t){t.order$=t.extractData("order")}))},components:{pay:yd}};(0,Fl.Z)(wd,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t.order$?[t._v("\n        Счет № "+t._s(t.order$.id)+"\n\n\n\n    ")]:t._e()],2)}),[],!1,null,null,null).exports;const kd={name:"vote_global",props:{votes:{type:Array,default:null},front:{type:Boolean,default:!1}},data:function(){return{votes$:this.votes,loading:!1}},created:function(){var t=this;null===this.votes$&&this.load(),this.setWsHandler((function(e,n){"voteUpdate"===e&&(null===t.votes$&&(t.votes$=[]),!t.votes$.find((function(t){if(t.id===n.vote_id)return!0}))&&n.vote&&t.votes$.push(Object.assign(n.vote,{canVote:!0})))}))},mounted:function(){},methods:{load:function(){var t=this;this.$api((function(e){t.votes$=e.votes}),"getVotesGlobal",{front:this.front})}}};const xd=(0,Fl.Z)(kd,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[t.front?t._e():n("div",{staticClass:"mb-3 py-3"},[t._v("\n        На данной странице публикуются все опросы, которые были размещены на сайте администрацмей сайта\n        или пользователями, которые опубликовали свои опросы\n    ")]),t._v(" "),n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{inline:""}}),t._v(" "),t._t("top"),t._v(" "),n("div",{staticClass:"row"},t._l(t.votes$,(function(e){return n("div",{key:e.id,staticClass:"col-12 col-sm-6 col-lg-4 mb-3"},[n("div",{staticClass:"border px-3 py-1 h-100",class:{"border-success":!e.ended&&!t.front}},[n("vote",{attrs:{vote:e}})],1)])})),0),t._v(" "),t._t("default")],2)}),[],!1,null,null,null).exports;const Sd={name:"social_auth_ulogin",props:{prop:{type:String}},data:function(){return{id:"ulogin_"+Cl.Z.makeid(5)}},created:function(){var t=this;this.redirectUrl=this.$root.uri+"/social_auth",this.modal=this.getParent("modal"),this.modal?this.modal.$on("mount",(function(){t.$nextTick((function(){t.load()}))})):this.load()},mounted:function(){},methods:{load:function(){window.uLogin?this.init():this.$root.script("//ulogin.ru/js/ulogin.js",this.init)},init:function(){var t={display:"panel",theme:"classic",fields:"first_name,last_name,email,sex,photo,photo_big,city,country",providers:"vkontakte,mailru,google,youtube,yandex,facebook,odnoklassniki",hidden:"other",redirect_uri:this.redirectUrl};error(t),Object.keys(t).map((function(t,e){})),uLogin.customInit(this.id,t)}}};const Ed={name:"oauth_get_tokenl",components:{Social_auth:(0,Fl.Z)(Sd,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{attrs:{id:t.id}})}),[],!1,null,null,null).exports},props:{},data:function(){return{result:null,extraLinkParams:""}},destroyed:function(){},created:function(){},mounted:function(){},methods:{success:function(t){this.result=t}}};const Td=(0,Fl.Z)(Ed,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("div",{staticClass:"my-3"},[t._v("\n            Дополнительные параметры (scopes=oauth-donation-index&foo=bar):\n            "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.extraLinkParams,expression:"extraLinkParams"}],staticClass:"form-control",attrs:{placeholder:"scopes для сервиса"},domProps:{value:t.extraLinkParams},on:{input:function(e){e.target.composing||(t.extraLinkParams=e.target.value)}}})]),t._v(" "),n("social-auth",{staticClass:"justify-content-center",attrs:{"extra-link-params":t.extraLinkParams,service:"dump"},on:{success:t.success}}),t._v(" "),t.result?n("div",{staticClass:"input-group my-3"},[n("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.result.token.access_token}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("copy",{attrs:{text:t.result.token.access_token}})],1)]):t._e(),t._v(" "),t.result?n("pre",[t._v("Access token\n"),n("code",[t._v(t._s(t.result.token))]),t._v("\n\nUser data\n"+t._s(t.result.data)+"\n")]):t._e()],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center my-3"},[t._v("\n            Здесь вы можете получить access token для разных публичных сервисов."),n("br"),t._v("\n            Полученный токен вы можете использовать для доступа к API."),n("br"),t._v("\n            Полученный токен нигде не сохраняется и не будет использоваться в дальнейшем.\n        ")])}],!1,null,null,null).exports;var Ad;Ad=Cl.Z.getComponents(n(71033),"");const Rd={name:"konkurs_ny2022_home",props:{name:{type:String}},components:Ad,data:function(){return{base:"",sub:null,config:null,loading:!1,showUploaded:!1,membersLoadParams:{show_deactivated:!1}}},beforeRouteUpdate:function(t,e,n){this.init(t),n()},created:function(){this.init(this.$route)},mounted:function(){},computed:{uploadedVideos:function(){return this.config?this.config.members.filter((function(t){return t.hasVideo})).length:0},styleLastTrans:function(){for(var t="box-shadow: var(--app-border-color) 0px 0px 2px 2px inset,",e=0,n=0;n<30;n++)t+="var(--app-base-bg) @px -@px 0px -2px, var(--app-border-color) @px -@px 2px 0px".replace(/@/g,e+=1)+",";return t=t.substr(0,t.length-1)},dates:function(){return{start:moment(this.config.dates.start.date).format("LLL"),reg:moment(this.config.dates.reg.date).format("LLL"),voted_preview:moment(this.config.dates.voted_preview.date).format("LLL"),voted_preview_like:moment(this.config.dates.voted_preview_like.date).format("LLL"),enabled:moment(this.config.dates.end.date).format("LLL")}},frames:function(){return this.config.members.filter((function(t){return t.frame}))}},watch:{membersLoadParams:{deep:!0,handler:function(){this.load()}}},methods:{load:function(){var t=this;return this.$api((function(e){t.config=e,t.$emit("load",e)}),"KonkursConfig",Object.assign({name:this.name},this.membersLoadParams))},init:function(t){info("init konkurs",t),this.base=t.params.sub?t.path.replace(/\/[a-z0-9\_]*$/i,""):t.path,this.base=this.base.replace(/\/+$/g,""),this.sub=t.params.sub,this.$root.title("Конкурс Нового Года 2022"),this.sub?(this.$root.nav("Конкурс",this.base),"join"===this.sub&&this.$root.header("Записаться"),-1!==["join","member","tasks","rules","results"].indexOf(this.sub)&&(this.$root.centeredLayout=!0)):this.$root.header("Конкурс Нового Года 2022"),this.config&&-1!==["join","rules","tasks"].indexOf(this.sub)||this.load()},link:function(t){return t?this.base+"/"+t:this.base}}};var Od=n(93379),$d=n.n(Od),Pd=n(32501),Ld={insert:"head",singleton:!1};$d()(Pd.Z,Ld);Pd.Z.locals;const Dd=(0,Fl.Z)(Rd,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),t.config&&!t.loading?n("div",{key:t.config.tm},[t.sub?n(t.sub,{tag:"component",attrs:{config:t.config}}):n("div",[n("div",{staticClass:"text-end mb-3 text-nowrap overflow-x"},[t.config.isVotedPreviewEnabled?t._e():n("router-link",{staticClass:"btn btn-secondary",attrs:{to:t.link("results")}},[n("i",{staticClass:"em em-gift",attrs:{"aria-role":"presentation","aria-label":"WRAPPED PRESENT"}}),t._v("\n                    Результаты\n                ")]),t._v(" "),t.config.isMember?n("router-link",{staticClass:"btn btn-success",attrs:{to:t.link("member")}},[n("i",{staticClass:"fa fa-user"}),t._v("\n                    Кабинет участника\n                ")]):n("router-link",{staticClass:"btn btn-secondary",attrs:{to:t.link("join")}},[n("i",{staticClass:"em em-man-gesturing-ok"}),t._v("\n                    Участвовать\n                ")]),t._v(" "),n("router-link",{staticClass:"btn btn-primary",attrs:{to:t.link("sponsors")}},[n("i",{staticClass:"em em-male-detective"}),t._v("\n                    Спонсоры и жюри\n                ")]),t._v(" "),n("router-link",{staticClass:"btn btn-secondary",attrs:{to:t.link("rules")}},[n("i",{staticClass:"fa fa-file-o"}),t._v("\n                    Правила\n                ")]),t._v(" "),n("router-link",{staticClass:"btn btn-secondary",attrs:{to:t.link("tasks")}},[n("i",{staticClass:"fa fa-list"}),t._v("\n                    Задания\n                ")])],1),t._v(" "),n("div",{staticClass:"text-center"},[n("h3",{},[n("i",{staticClass:"fa fa-fire text-danger"}),t._v("\n                    Начало конкурса: "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.start))]),n("br")]),t._v(" "),t.config.isRegPreviewEnabled?t._e():n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Завершено"}}),t._v(" Окончание регистрации участников: "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.reg))]),n("br"),t._v(" "),t.config.isVotedLikePreviewEnabled?t._e():n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Завершено"}}),t._v(" Окончание голосования (лайки): "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.voted_preview_like))]),n("br"),t._v(" "),t.config.isVotedPreviewEnabled?t._e():n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Завершено"}}),t._v(" Окончание голосования (полное): "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.voted_preview))]),n("br"),t._v(" "),t.config.isEnabled?t._e():n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Завершено"}}),t._v(" Окончание конкурса: "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.enabled))]),t._v(" "),n("br"),t._v(" "),n("small",{staticClass:"text-danger animate__animated animate__flash"},[t._v("(время МОСКОВСКОЕ GMT+3)")])]),t._v(" "),t.config.vote?n("vote",{staticClass:"my-3",attrs:{vote:t.config.vote}}):t._e(),t._v(" "),t.config.amount_fond>0?n("div",{staticClass:"jumbotron justify-content-center my-3 py-3",staticStyle:{border:"10px dashed #007bff"}},[t._m(0),t._v(" "),n("div",{staticClass:"text-center"},[n("div",{staticClass:"font-weight-bold",staticStyle:{"font-size":"2rem"}},[n("strong",[t._v("1 место — "),n("rub",{attrs:{money:t.config.prizes[1]}})],1)]),t._v(" "),n("div",{staticStyle:{"font-size":"1.5rem"}},[t._v("2 место — "),n("rub",{attrs:{money:t.config.prizes[2]}})],1),t._v(" "),n("div",{staticStyle:{"font-size":"1.3rem"}},[t._v("3 место — "),n("rub",{attrs:{money:t.config.prizes[3]}})],1),t._v(" "),t.config.prizes.x?n("div",{staticClass:"font-italic"},[n("small",[t._v("остальные места — "),n("rub",{attrs:{money:t.config.prizes.x}})],1)]):t._e()]),t._v(" "),n("h5",{staticClass:"text-center mt-3 mb-3"},[t._v("\n                    Текущий призовой фонд"),n("br"),t._v(" "),n("rub",{staticClass:"text-danger",staticStyle:{"font-size":"60px"},attrs:{money:t.config.prizes_summ}})],1),t._v(" "),n("div",{staticClass:"text-center"},[n("router-link",{attrs:{to:t.link("sponsors")}},[t._v("жюри конкурса")])],1),t._v(" "),t.config.lastTrans?n("div",{staticClass:"text-center row justify-content-center mt-5"},[n("div",{staticClass:"shadow_lastTrans col-12 col-md-6 col-lg-4 px-3 py-1",style:t.styleLastTrans},[t._m(1),t._v(" "),n("div",[n("user",{attrs:{nickname:"Аноним",user:t.config.lastTrans.user}})],1),t._v(" "),n("div",[n("strong",[n("rub",{staticStyle:{"font-size":"30px"},attrs:{money:t.config.lastTrans.summ}})],1)]),t._v(" "),n("div",[t.config.lastTrans.comment?n("span",[n("em",[t._v("«"+t._s(t.config.lastTrans.comment)+"»")])]):t._e()]),t._v(" "),n("div",{staticClass:"text-end"},[n("router-link",{staticClass:"app-link",attrs:{to:t.link("sponsors")}},[t._v("\n                                добавить\n                            ")])],1)])]):t._e()]):t._e(),t._v(" "),n("pagex",{attrs:{alias:t.config.newsAlias,page:t.config.newsPage}}),t._v(" "),n("div",{staticClass:"mb-1"},[t._v("Участники конкурса ("+t._s(t.config.members.length)+"):")]),t._v(" "),t.config.isVotedPreviewEnabled?n("div",[n("strong",[t._v("ПРЕДВАРИТЕЛЬНОЕ ГОЛОСОВАНИЕ - нужно выбрать 10 участников!")])]):t._e(),t._v(" "),t.global.admin?n("div",[n("label",{staticClass:"form-check form-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.membersLoadParams.show_deactivated,expression:"membersLoadParams.show_deactivated"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.membersLoadParams.show_deactivated)?t._i(t.membersLoadParams.show_deactivated,null)>-1:t.membersLoadParams.show_deactivated},on:{change:function(e){var n=t.membersLoadParams.show_deactivated,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&t.$set(t.membersLoadParams,"show_deactivated",n.concat([null])):i>-1&&t.$set(t.membersLoadParams,"show_deactivated",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.membersLoadParams,"show_deactivated",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Показать выбывших")])])]):t._e(),t._v(" "),t.frames.length>0?n("div",{staticClass:"my-3"},[n("strong",[t._v("загруженные видео (предосмотр)")]),t._v(" "),n("scroller",{staticClass:"row g-0 flex-nowrap"},t._l(t.frames,(function(e){return n("div",{key:e.id,staticClass:"col-auto",staticStyle:{width:"150px"}},[n("div",{staticClass:"mb-1"},[n("a",{attrs:{"data-fancybox":"",href:e.frame.url}},[n("img",{staticClass:"w-100 mw-100",attrs:{src:e.frame.medium||e.frame.url}})])]),t._v(" "),n("div",[n("user",{attrs:{user:e.user}})],1)])})),0)],1):t._e(),t._v(" "),t.config.members.length>0?n("div",[t._v("\n                Участников: "),n("strong",[t._v(t._s(t.config.members.length))]),t._v(", "),n("span",{staticClass:"app-link",class:{"bg-secondary px-2 ":t.showUploaded},on:{click:function(e){t.showUploaded=!t.showUploaded}}},[t._v("загрузили видео")]),t._v(": "),n("strong",[t._v(t._s(t.uploadedVideos))]),t._v(" "),n("members",{attrs:{config:t.config,"show-uploaded":t.showUploaded}})],1):n("div",{staticClass:"alert alert-secondary text-center"},[n("strong",[t._v("Учаcтников пока нет, будь первым!")])]),t._v(" "),t.config.membersLeaved&&t.config.membersLeaved.length>0?n("div",{staticClass:"mt-3"},[n("span",{staticClass:"app-link",attrs:{"data-bs-toggle":"collapse",href:"#collapseMembers"}},[t._v("Выбыли из конкурса ("+t._s(t.config.membersLeaved.length)+")")]),t._v(" "),n("div",{staticClass:"table-responsive collapse mt-2",attrs:{id:"collapseMembers"}},[n("table",{staticClass:"table"},[t._m(2),t._v(" "),n("tbody",t._l(t.config.membersLeaved,(function(e){return n("tr",{key:e.id},[n("td",[n("user",{attrs:{user:e.user}})],1),t._v(" "),n("td",[n("div",{staticClass:"text-nowrap mb-1"},[n("strong",[t._v(t._s(e.task.name))])]),t._v(" "),e.text?n("div",[n("em",[t._v("«"+t._s(e.text)+"»")])]):t._e(),t._v(" "),e.comment?n("strong",{staticClass:"text-danger"},[t._v("\n                                        Комментарий администратора:"),n("br"),t._v("\n                                        "+t._s(e.comment)+"\n                                    ")]):t._e()]),t._v(" "),n("td",[e.dateLeave?n("div",[n("small",{staticClass:"text-muted",attrs:{"data-title":"Дата регистрации участника"}},[t._v(t._s(e.dateLeave))])]):t._e()])])})),0)])])]):t._e(),t._v(" "),t.config.rulesPage?n("div",{staticClass:"row no-gutters justify-content-center my-3"},[n("div",{staticClass:"col-12 col-md-9 col-lg-8 col-xl-7"},[n("comments",{attrs:{"auto-expand":!0,obj:t.config.rulesPage._c,count:t.config.rulesPage.commentsCount,"obj-id":t.config.rulesPage.id}})],1)]):t._e()],1)],1):t._e()],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{staticClass:"text-center text-primary"},[n("i",{staticClass:"fa fa-gift"}),t._v("\n                    Подарки участникам:\n                ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("small",{staticClass:"text-muted"},[t._v("последний донат")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th"),t._v(" "),n("th"),t._v(" "),n("th",[t._v("дата выхода")])])])}],!1,null,null,null).exports;var Id;Id=Cl.Z.getComponents(n(41711),"");const Md={name:"konkurs_ny2022_home",props:{name:{type:String}},components:Id,data:function(){return{base:"",sub:null,config:null,loading:!1,showUploaded:!1,membersLoadParams:{show_deactivated:!1}}},beforeRouteUpdate:function(t,e,n){this.init(t),n()},created:function(){this.init(this.$route)},mounted:function(){},computed:{uploadedVideos:function(){return this.config?this.config.members.filter((function(t){return t.hasVideo})).length:0},styleLastTrans:function(){for(var t="box-shadow: var(--app-border-color) 0px 0px 2px 2px inset,",e=0,n=0;n<30;n++)t+="var(--app-base-bg) @px -@px 0px -2px, var(--app-border-color) @px -@px 2px 0px".replace(/@/g,e+=1)+",";return t=t.substr(0,t.length-1)},dates:function(){return{start:moment(this.config.dates.start.date).format("LLL"),reg:moment(this.config.dates.reg.date).format("LLL"),voted_preview:moment(this.config.dates.voted_preview.date).format("LLL"),voted_preview_like:moment(this.config.dates.voted_preview_like.date).format("LLL"),enabled:moment(this.config.dates.end.date).format("LLL")}},frames:function(){return this.config.members.filter((function(t){return t.frame}))}},watch:{membersLoadParams:{deep:!0,handler:function(){this.load()}}},methods:{load:function(){var t=this;return this.$api((function(e){t.config=e,t.$emit("load",e)}),"KonkursConfig",Object.assign({name:this.name},this.membersLoadParams))},init:function(t){info("init konkurs",t),this.base=t.params.sub?t.path.replace(/\/[a-z0-9\_]*$/i,""):t.path,this.base=this.base.replace(/\/+$/g,""),this.sub=t.params.sub,this.$root.title("Конкурс Нового Года 2023"),this.sub?(this.$root.nav("Конкурс",this.base),"join"===this.sub&&this.$root.header("Записаться"),-1!==["join","member","tasks","rules","results"].indexOf(this.sub)&&(this.$root.centeredLayout=!0)):this.$root.header("Конкурс Нового Года 2023"),this.config&&-1!==["join","rules","tasks"].indexOf(this.sub)||this.load()},link:function(t){return t?this.base+"/"+t:this.base}}};var Nd=n(42542),jd={insert:"head",singleton:!1};$d()(Nd.Z,jd);Nd.Z.locals;const Fd=(0,Fl.Z)(Md,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),t.config&&!t.loading?n("div",{key:t.config.tm},[t.sub?n(t.sub,{tag:"component",attrs:{config:t.config}}):n("div",[n("div",{staticClass:"text-end mb-3 text-nowrap overflow-x"},[t.config.isVotedPreviewEnabled?t._e():n("router-link",{staticClass:"btn btn-secondary",attrs:{to:t.link("results")}},[n("i",{staticClass:"em em-gift",attrs:{"aria-role":"presentation","aria-label":"WRAPPED PRESENT"}}),t._v("\n                    Результаты\n                ")]),t._v(" "),t.config.isMember?n("router-link",{staticClass:"btn btn-success",attrs:{to:t.link("member")}},[n("i",{staticClass:"fa fa-user"}),t._v("\n                    Кабинет участника\n                ")]):n("router-link",{staticClass:"btn btn-secondary",attrs:{to:t.link("join")}},[n("i",{staticClass:"em em-man-gesturing-ok"}),t._v("\n                    Участвовать\n                ")]),t._v(" "),n("router-link",{staticClass:"btn btn-primary",attrs:{to:t.link("sponsors")}},[n("i",{staticClass:"em em-male-detective"}),t._v("\n                    Спонсоры и жюри\n                ")]),t._v(" "),n("router-link",{staticClass:"btn btn-secondary",attrs:{to:t.link("rules")}},[n("i",{staticClass:"fa fa-file-o"}),t._v("\n                    Правила\n                ")]),t._v(" "),n("router-link",{staticClass:"btn btn-secondary",attrs:{to:t.link("tasks")}},[n("i",{staticClass:"fa fa-list"}),t._v("\n                    Задания\n                ")])],1),t._v(" "),n("div",{staticClass:"text-center"},[n("h3",{},[n("i",{staticClass:"fa fa-fire text-danger"}),t._v("\n                    Начало конкурса: "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.start))]),n("br")]),t._v(" "),t.config.isRegPreviewEnabled?t._e():n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Завершено"}}),t._v(" Окончание регистрации участников: "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.reg))]),n("br"),t._v(" "),t.config.isVotedLikePreviewEnabled?t._e():n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Завершено"}}),t._v(" Окончание голосования (лайки): "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.voted_preview_like))]),n("br"),t._v(" "),t.config.isVotedPreviewEnabled?t._e():n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Завершено"}}),t._v(" Окончание голосования (полное): "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.voted_preview))]),n("br"),t._v(" "),t.config.isEnabled?t._e():n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Завершено"}}),t._v(" Окончание конкурса: "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.enabled))]),t._v(" "),n("br"),t._v(" "),n("small",{staticClass:"text-danger animate__animated animate__flash"},[t._v("(время МОСКОВСКОЕ GMT+3)")])]),t._v(" "),t.config.vote?n("vote",{staticClass:"my-3",attrs:{vote:t.config.vote}}):t._e(),t._v(" "),t.config.amount_fond>0?n("div",{staticClass:"jumbotron justify-content-center my-3 py-3",staticStyle:{border:"10px dashed #007bff"}},[t._m(0),t._v(" "),n("div",{staticClass:"text-center"},[n("div",{staticClass:"font-weight-bold",staticStyle:{"font-size":"2rem"}},[n("strong",[t._v("1 место — "),n("rub",{attrs:{money:t.config.prizes[1]}})],1)]),t._v(" "),n("div",{staticStyle:{"font-size":"1.5rem"}},[t._v("2 место — "),n("rub",{attrs:{money:t.config.prizes[2]}})],1),t._v(" "),n("div",{staticStyle:{"font-size":"1.3rem"}},[t._v("3 место — "),n("rub",{attrs:{money:t.config.prizes[3]}})],1),t._v(" "),t.config.prizes.x?n("div",{staticClass:"font-italic"},[n("small",[t._v("остальные места — "),n("rub",{attrs:{money:t.config.prizes.x}})],1)]):t._e()]),t._v(" "),n("h5",{staticClass:"text-center mt-3 mb-3"},[t._v("\n                    Текущий призовой фонд"),n("br"),t._v(" "),n("rub",{staticClass:"text-danger",staticStyle:{"font-size":"60px"},attrs:{money:t.config.prizes_summ}})],1),t._v(" "),n("div",{staticClass:"text-center"},[n("router-link",{attrs:{to:t.link("sponsors")}},[t._v("жюри конкурса")])],1),t._v(" "),t.config.lastTrans?n("div",{staticClass:"text-center row justify-content-center mt-5"},[n("div",{staticClass:"shadow_lastTrans col-12 col-md-6 col-lg-4 px-3 py-1",style:t.styleLastTrans},[t._m(1),t._v(" "),n("div",[n("user",{attrs:{nickname:"Аноним",user:t.config.lastTrans.user}})],1),t._v(" "),n("div",[n("strong",[n("rub",{staticStyle:{"font-size":"30px"},attrs:{money:t.config.lastTrans.summ}})],1)]),t._v(" "),n("div",[t.config.lastTrans.comment?n("span",[n("em",[t._v("«"+t._s(t.config.lastTrans.comment)+"»")])]):t._e()]),t._v(" "),n("div",{staticClass:"text-end"},[n("router-link",{staticClass:"app-link",attrs:{to:t.link("sponsors")}},[t._v("\n                                добавить\n                            ")])],1)])]):t._e()]):t._e(),t._v(" "),n("pagex",{attrs:{alias:t.config.newsAlias,page:t.config.newsPage}}),t._v(" "),n("div",{staticClass:"mb-1"},[t._v("Участники конкурса ("+t._s(t.config.members.length)+"):")]),t._v(" "),t.config.isVotedPreviewEnabled?n("div",[n("strong",[t._v("ПРЕДВАРИТЕЛЬНОЕ ГОЛОСОВАНИЕ - нужно выбрать 10 участников!")])]):t._e(),t._v(" "),t.global.admin?n("div",[n("label",{staticClass:"form-check form-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.membersLoadParams.show_deactivated,expression:"membersLoadParams.show_deactivated"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.membersLoadParams.show_deactivated)?t._i(t.membersLoadParams.show_deactivated,null)>-1:t.membersLoadParams.show_deactivated},on:{change:function(e){var n=t.membersLoadParams.show_deactivated,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&t.$set(t.membersLoadParams,"show_deactivated",n.concat([null])):i>-1&&t.$set(t.membersLoadParams,"show_deactivated",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.membersLoadParams,"show_deactivated",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Показать выбывших")])])]):t._e(),t._v(" "),t.frames.length>0?n("div",{staticClass:"my-3"},[n("strong",[t._v("загруженные видео (предосмотр)")]),t._v(" "),n("scroller",{staticClass:"row g-0 flex-nowrap"},t._l(t.frames,(function(e){return n("div",{key:e.id,staticClass:"col-auto",staticStyle:{width:"150px"}},[n("div",{staticClass:"mb-1"},[n("a",{attrs:{"data-fancybox":"",href:e.frame.url}},[n("img",{staticClass:"w-100 mw-100",attrs:{src:e.frame.medium||e.frame.url}})])]),t._v(" "),n("div",[n("user",{attrs:{user:e.user}})],1)])})),0)],1):t._e(),t._v(" "),t.config.members.length>0?n("div",[t._v("\n                Участников: "),n("strong",[t._v(t._s(t.config.members.length))]),t._v(", "),n("span",{staticClass:"app-link",class:{"bg-secondary px-2 ":t.showUploaded},on:{click:function(e){t.showUploaded=!t.showUploaded}}},[t._v("загрузили видео")]),t._v(": "),n("strong",[t._v(t._s(t.uploadedVideos))]),t._v(" "),n("members",{attrs:{config:t.config,"show-uploaded":t.showUploaded}})],1):n("div",{staticClass:"alert alert-secondary text-center"},[n("strong",[t._v("Учаcтников пока нет, будь первым!")])]),t._v(" "),t.config.membersLeaved&&t.config.membersLeaved.length>0?n("div",{staticClass:"mt-3"},[n("span",{staticClass:"app-link",attrs:{"data-bs-toggle":"collapse",href:"#collapseMembers"}},[t._v("Выбыли из конкурса ("+t._s(t.config.membersLeaved.length)+")")]),t._v(" "),n("div",{staticClass:"table-responsive collapse mt-2",attrs:{id:"collapseMembers"}},[n("table",{staticClass:"table"},[t._m(2),t._v(" "),n("tbody",t._l(t.config.membersLeaved,(function(e){return n("tr",{key:e.id},[n("td",[n("user",{attrs:{user:e.user}})],1),t._v(" "),n("td",[n("div",{staticClass:"text-nowrap mb-1"},[n("strong",[t._v(t._s(e.task.name))])]),t._v(" "),e.text?n("div",[n("em",[t._v("«"+t._s(e.text)+"»")])]):t._e(),t._v(" "),e.comment?n("strong",{staticClass:"text-danger"},[t._v("\n                                        Комментарий администратора:"),n("br"),t._v("\n                                        "+t._s(e.comment)+"\n                                    ")]):t._e()]),t._v(" "),n("td",[e.dateLeave?n("div",[n("small",{staticClass:"text-muted",attrs:{"data-title":"Дата регистрации участника"}},[t._v(t._s(e.dateLeave))])]):t._e()])])})),0)])])]):t._e(),t._v(" "),t.config.rulesPage?n("div",{staticClass:"row no-gutters justify-content-center my-3"},[n("div",{staticClass:"col-12 col-md-9 col-lg-8 col-xl-7"},[n("comments",{attrs:{"auto-expand":!0,obj:t.config.rulesPage._c,count:t.config.rulesPage.commentsCount,"obj-id":t.config.rulesPage.id}})],1)]):t._e()],1)],1):t._e()],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{staticClass:"text-center text-primary"},[n("i",{staticClass:"fa fa-gift"}),t._v("\n                    Подарки участникам:\n                ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("small",{staticClass:"text-muted"},[t._v("последний донат")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th"),t._v(" "),n("th"),t._v(" "),n("th",[t._v("дата выхода")])])])}],!1,null,null,null).exports;var Bd;Bd=Cl.Z.getComponents(n(7482),"");const Ud={name:"konkurs_ny2024_home",props:{name:{type:String}},components:Bd,data:function(){return{base:"",sub:null,config:null,loading:!1,showUploaded:!1,membersLoadParams:{show_deactivated:!1}}},beforeRouteUpdate:function(t,e,n){this.init(t),n()},created:function(){this.init(this.$route)},mounted:function(){},computed:{uploadedVideos:function(){return this.config?this.config.members.filter((function(t){return t.hasVideo})).length:0},styleLastTrans:function(){for(var t="box-shadow: var(--app-border-color) 0px 0px 2px 2px inset,",e=0,n=0;n<30;n++)t+="var(--app-base-bg) @px -@px 0px -2px, var(--app-border-color) @px -@px 2px 0px".replace(/@/g,e+=1)+",";return t=t.substr(0,t.length-1)},dates:function(){return{start:moment(this.config.dates.start.date).format("LLL"),reg:moment(this.config.dates.reg.date).format("LLL"),voted_preview:moment(this.config.dates.voted_preview.date).format("LLL"),voted_preview_like:moment(this.config.dates.voted_preview_like.date).format("LLL"),enabled:moment(this.config.dates.end.date).format("LLL")}},frames:function(){return this.config.members.filter((function(t){return t.frame}))}},watch:{membersLoadParams:{deep:!0,handler:function(){this.load()}}},methods:{load:function(){var t=this;return this.$api((function(e){t.config=e,t.$emit("load",e)}),"KonkursConfig",Object.assign({name:this.name},this.membersLoadParams))},init:function(t){info("init konkurs",t),this.base=t.params.sub?t.path.replace(/\/[a-z0-9\_]*$/i,""):t.path,this.base=this.base.replace(/\/+$/g,""),this.sub=t.params.sub,this.$root.title("Конкурс Нового Года 2024"),this.sub?(this.$root.nav("Конкурс",this.base),"join"===this.sub&&this.$root.header("Записаться"),-1!==["join","member","tasks","rules","results"].indexOf(this.sub)&&(this.$root.centeredLayout=!0)):this.$root.header("Конкурс Нового Года 2024"),this.config&&-1!==["join","rules","tasks"].indexOf(this.sub)||this.load()},link:function(t){return t?this.base+"/"+t:this.base}}};var Vd=n(970),Hd={insert:"head",singleton:!1};$d()(Vd.Z,Hd);Vd.Z.locals;const Zd=(0,Fl.Z)(Ud,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),t.config&&!t.loading?n("div",{key:t.config.tm},[t.sub?n(t.sub,{tag:"component",attrs:{config:t.config}}):n("div",[n("div",{staticClass:"text-end mb-3 text-nowrap overflow-x"},[t.config.isVotedPreviewEnabled?t._e():n("router-link",{staticClass:"btn btn-secondary",attrs:{to:t.link("results")}},[n("i",{staticClass:"em em-gift",attrs:{"aria-role":"presentation","aria-label":"WRAPPED PRESENT"}}),t._v("\n                    Результаты\n                ")]),t._v(" "),t.config.isMember?n("router-link",{staticClass:"btn btn-success",attrs:{to:t.link("member")}},[n("i",{staticClass:"fa fa-user"}),t._v("\n                    Кабинет участника\n                ")]):n("router-link",{staticClass:"btn btn-secondary",attrs:{to:t.link("join")}},[n("i",{staticClass:"em em-man-gesturing-ok"}),t._v("\n                    Участвовать\n                ")]),t._v(" "),n("router-link",{staticClass:"btn btn-primary",attrs:{to:t.link("sponsors")}},[n("i",{staticClass:"em em-male-detective"}),t._v("\n                    Жюри\n                ")]),t._v(" "),n("router-link",{staticClass:"btn btn-secondary",attrs:{to:t.link("rules")}},[n("i",{staticClass:"fa fa-file-o"}),t._v("\n                    Правила\n                ")]),t._v(" "),n("router-link",{staticClass:"btn btn-secondary",attrs:{to:t.link("tasks")}},[n("i",{staticClass:"fa fa-list"}),t._v("\n                    Задания\n                ")])],1),t._v(" "),n("div",{staticClass:"text-center"},[n("h3",{},[n("i",{staticClass:"fa fa-fire text-danger"}),t._v("\n                    Начало конкурса: "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.start))]),n("br")]),t._v(" "),t.config.isRegPreviewEnabled?t._e():n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Завершено"}}),t._v(" Окончание регистрации участников: "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.reg))]),n("br"),t._v(" "),t.config.isVotedLikePreviewEnabled?t._e():n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Завершено"}}),t._v(" Окончание голосования (лайки): "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.voted_preview_like))]),n("br"),t._v(" "),t.config.isVotedPreviewEnabled?t._e():n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Завершено"}}),t._v(" Окончание голосования (полное): "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.voted_preview))]),n("br"),t._v(" "),t.config.isEnabled?t._e():n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Завершено"}}),t._v(" Окончание конкурса: "),n("strong",{staticClass:"d-inline-block text-nowrap"},[t._v(t._s(t.dates.enabled))]),t._v(" "),n("br"),t._v(" "),n("small",{staticClass:"text-danger animate__animated animate__flash"},[t._v("(время МОСКОВСКОЕ GMT+3)")])]),t._v(" "),t.config.vote?n("vote",{staticClass:"my-3",attrs:{vote:t.config.vote}}):t._e(),t._v(" "),t.config.amount_fond>0?n("div",{staticClass:"jumbotron justify-content-center my-3 py-3",staticStyle:{border:"10px dashed #007bff"}},[t._m(0),t._v(" "),n("div",{staticClass:"text-center"},[n("div",{staticClass:"font-weight-bold",staticStyle:{"font-size":"2rem"}},[n("strong",[t._v("1 место — "),n("rub",{attrs:{money:t.config.prizes[1]}})],1)]),t._v(" "),n("div",{staticStyle:{"font-size":"1.5rem"}},[t._v("2 место — "),n("rub",{attrs:{money:t.config.prizes[2]}})],1),t._v(" "),n("div",{staticStyle:{"font-size":"1.3rem"}},[t._v("3 место — "),n("rub",{attrs:{money:t.config.prizes[3]}})],1),t._v(" "),t.config.prizes.x?n("div",{staticClass:"font-italic"},[n("small",[t._v("остальные места — "),n("rub",{attrs:{money:t.config.prizes.x}})],1)]):t._e()]),t._v(" "),n("h5",{staticClass:"text-center mt-3 mb-3"},[t._v("\n                    Текущий призовой фонд"),n("br"),t._v(" "),n("rub",{staticClass:"text-danger",staticStyle:{"font-size":"60px"},attrs:{money:t.config.prizes_summ}})],1),t._v(" "),n("div",{staticClass:"text-center"},[n("router-link",{attrs:{to:t.link("sponsors")}},[t._v("жюри конкурса")])],1),t._v(" "),t.config.lastTrans?n("div",{staticClass:"text-center row justify-content-center mt-5"},[n("div",{staticClass:"shadow_lastTrans col-12 col-md-6 col-lg-4 px-3 py-1",style:t.styleLastTrans},[t._m(1),t._v(" "),n("div",[n("user",{attrs:{nickname:"Аноним",user:t.config.lastTrans.user}})],1),t._v(" "),n("div",[n("strong",[n("rub",{staticStyle:{"font-size":"30px"},attrs:{money:t.config.lastTrans.summ}})],1)]),t._v(" "),n("div",[t.config.lastTrans.comment?n("span",[n("em",[t._v("«"+t._s(t.config.lastTrans.comment)+"»")])]):t._e()]),t._v(" "),n("div",{staticClass:"text-end"},[n("router-link",{staticClass:"app-link",attrs:{to:t.link("sponsors")}},[t._v("\n                                добавить\n                            ")])],1)])]):t._e()]):t._e(),t._v(" "),n("pagex",{attrs:{alias:t.config.newsAlias,page:t.config.newsPage}}),t._v(" "),n("div",{staticClass:"mb-1"},[t._v("Участники конкурса ("+t._s(t.config.members.length)+"):")]),t._v(" "),t.config.isVotedPreviewEnabled?n("div",[n("strong",[t._v("ПРЕДВАРИТЕЛЬНОЕ ГОЛОСОВАНИЕ - нужно выбрать 10 участников!")])]):t._e(),t._v(" "),t.global.admin?n("div",[n("label",{staticClass:"form-check form-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.membersLoadParams.show_deactivated,expression:"membersLoadParams.show_deactivated"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.membersLoadParams.show_deactivated)?t._i(t.membersLoadParams.show_deactivated,null)>-1:t.membersLoadParams.show_deactivated},on:{change:function(e){var n=t.membersLoadParams.show_deactivated,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&t.$set(t.membersLoadParams,"show_deactivated",n.concat([null])):i>-1&&t.$set(t.membersLoadParams,"show_deactivated",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.membersLoadParams,"show_deactivated",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Показать выбывших")])])]):t._e(),t._v(" "),t.frames.length>0?n("div",{staticClass:"my-3"},[n("strong",[t._v("загруженные видео (предосмотр)")]),t._v(" "),n("scroller",{staticClass:"row g-0 flex-nowrap"},t._l(t.frames,(function(e){return n("div",{key:e.id,staticClass:"col-auto",staticStyle:{width:"150px"}},[n("div",{staticClass:"mb-1"},[n("a",{attrs:{"data-fancybox":"",href:e.frame.url}},[n("img",{staticClass:"w-100 mw-100",attrs:{src:e.frame.medium||e.frame.url}})])]),t._v(" "),n("div",[n("user",{attrs:{user:e.user}})],1)])})),0)],1):t._e(),t._v(" "),t.config.members.length>0?n("div",[t._v("\n                Участников: "),n("strong",[t._v(t._s(t.config.members.length))]),t._v(", "),n("span",{staticClass:"app-link",class:{"bg-secondary px-2 ":t.showUploaded},on:{click:function(e){t.showUploaded=!t.showUploaded}}},[t._v("загрузили видео")]),t._v(": "),n("strong",[t._v(t._s(t.uploadedVideos))]),t._v(" "),n("members",{attrs:{config:t.config,"show-uploaded":t.showUploaded}})],1):n("div",{staticClass:"alert alert-secondary text-center"},[n("strong",[t._v("Учаcтников пока нет, будь первым!")])]),t._v(" "),t.config.membersLeaved&&t.config.membersLeaved.length>0?n("div",{staticClass:"mt-3"},[n("span",{staticClass:"app-link",attrs:{"data-bs-toggle":"collapse",href:"#collapseMembers"}},[t._v("Выбыли из конкурса ("+t._s(t.config.membersLeaved.length)+")")]),t._v(" "),n("div",{staticClass:"table-responsive collapse mt-2",attrs:{id:"collapseMembers"}},[n("table",{staticClass:"table"},[t._m(2),t._v(" "),n("tbody",t._l(t.config.membersLeaved,(function(e){return n("tr",{key:e.id},[n("td",[n("user",{attrs:{user:e.user}})],1),t._v(" "),n("td",[n("div",{staticClass:"text-nowrap mb-1"},[n("strong",[t._v(t._s(e.task.name))])]),t._v(" "),e.text?n("div",[n("em",[t._v("«"+t._s(e.text)+"»")])]):t._e(),t._v(" "),e.comment?n("strong",{staticClass:"text-danger"},[t._v("\n                                        Комментарий администратора:"),n("br"),t._v("\n                                        "+t._s(e.comment)+"\n                                    ")]):t._e()]),t._v(" "),n("td",[e.dateLeave?n("div",[n("small",{staticClass:"text-muted",attrs:{"data-title":"Дата регистрации участника"}},[t._v(t._s(e.dateLeave))])]):t._e()])])})),0)])])]):t._e(),t._v(" "),t.config.rulesPage?n("div",{staticClass:"row no-gutters justify-content-center my-3"},[n("div",{staticClass:"col-12 col-md-9 col-lg-8 col-xl-7"},[n("comments",{attrs:{"auto-expand":!0,obj:t.config.rulesPage._c,count:t.config.rulesPage.commentsCount,"obj-id":t.config.rulesPage.id}})],1)]):t._e()],1)],1):t._e()],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{staticClass:"text-center text-primary"},[n("i",{staticClass:"fa fa-gift"}),t._v("\n                    Подарки участникам:\n                ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("small",{staticClass:"text-muted"},[t._v("последний донат")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th"),t._v(" "),n("th"),t._v(" "),n("th",[t._v("дата выхода")])])])}],!1,null,null,null).exports;const Gd={name:"",props:{page:{type:Object}},data:function(){return{amount:""}},created:function(){},mounted:function(){},methods:{}};const zd=(0,Fl.Z)(Gd,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row g-0 justify-content-center text-center"},[n("div",{staticClass:"col-12 col-lg-10 mb-3"},[n("form",{staticClass:"p-3 mb-3",staticStyle:{border:"3px red solid"},attrs:{method:"post",action:"https://www.paypal.com/cgi-bin/webscr",target:"_blank"}},["manual"!==t.amount?n("select",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{name:"amount",required:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.amount=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[t._v("Выбрать сумму")]),t._v(" "),n("option",[t._v("10")]),t._v(" "),n("option",[t._v("20")]),t._v(" "),n("option",[t._v("30")]),t._v(" "),n("option",[t._v("40")]),t._v(" "),n("option",[t._v("50")]),t._v(" "),n("option",[t._v("100")]),t._v(" "),n("option",[t._v("200")]),t._v(" "),n("option",[t._v("300")]),t._v(" "),n("option",[t._v("500")]),t._v(" "),n("option",{attrs:{value:"manual"}},[t._v("Другая")])]):n("input",{staticStyle:{width:"70px"},attrs:{autofocus:"",autocomplete:"off",type:"number",name:"amount",value:"",required:""}}),t._v(" "),t._m(0),t._v(" "),n("input",{attrs:{type:"hidden",name:"cmd",value:"_donations",autocomplete:"off",readonly:"readonly"}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"business",value:"sergehollywood@gmail.com",autocomplete:"off",readonly:"readonly"}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"item_name",value:"Помощь сайту Livacha.com",autocomplete:"off",readonly:"readonly"}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"quantity",value:"1",autocomplete:"off",readonly:"readonly"}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"charset",value:"utf-8",autocomplete:"off",readonly:"readonly"}}),t._v(" "),n("button",[t._v("Оплатить")]),t._v(" "),n("hr"),t._v(" "),n("img",{staticStyle:{"max-width":"200px"},attrs:{src:"/i/visa-mastercard-paypal.png"}})])])]),t._v(" "),n("pagex",{attrs:{alias:t.page.alias,page:t.page}})],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{attrs:{name:"currency_code"}},[n("option",{attrs:{value:"EUR"}},[t._v("Euro")]),t._v(" "),n("option",{attrs:{value:"USD"}},[t._v("USD")])])}],!1,null,null,null).exports;const qd={name:"test",data:function(){return{items:[0,1,2,3,4,5,6,7,8,9]}},mounted:function(){}};const Kd=(0,Fl.Z)(qd,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),t._v(" "),n("button",{directives:[{name:"title",rawName:"v-title",value:t.items.length,expression:"items.length"}],on:{click:function(e){t.items=[]}}},[t._v("Remove")]),t._v(" "),t._l(t.items,(function(e){return n("complaint",{key:e,attrs:{subject:"user","subject-id":{},room:{}}},[n("i",{staticClass:"fa fa-flag "}),t._v("\n        Отправить жалобу\n    ")])}))],2)}),[],!1,null,"4d7074a5",null).exports,Wd={routes:[{path:"/",name:"home",meta:{title:"Ливача"},props:{posts:function(){var t=__app_data.posts_front||null;return{front:!0,posts:t}},news:function(t){var e=__app_data.news_front||null;return{pages:e,front:!0,category:"news",cid:e&&e.length>0?e[0].cid:0}},votes:function(){return{votes:Fg.data.votes,front:!0}}},components:{default:gu,news:$u,posts:Xu,votes:xd}},{meta:{header:"Создать трансляцию",centeredLayout:!0},name:"start",path:"/start",component:mu},{path:"/chat/:alias",name:"room",components:{default:hu,streams:gu}},{path:"/posts/:userAlias?",component:Xu,name:"blog",meta:{header:"Заметки",centeredLayout:!0},props:!0},{path:"/post/:postId",component:Qu,meta:{header:"Заметки",centeredLayout:!0},props:!0},{meta:{header:"Создать заметку",centeredLayout:!0},name:"post_new",path:"/post_new",component:ad,props:!0},{meta:{},name:"post_edit",path:"/post_edit/:postId",component:ad,props:!0},{path:"/messages/:uid?",name:"messaging",component:uu,props:function(t){var e=Fg.data.messaging;return{uid:t.params.uid,messaging:e&&e.list,groups:e&&e.groups}}},{path:"/user/:uid",component:bu,name:"userProfile",props:function(t){return{type:"div",user:__app_data.user||{},uid:t.params.uid}}},{path:"/history/:owner_id",component:xu,props:function(t){return Object.assign(t.query||{},{ownerId:t.params.owner_id,compParent:"div"})}},{path:"/market/:tab?",component:Tu,props:function(t){return Object.assign(t.query||{},{tab:t.params.tab,tag:"div"})},name:"market"},{path:"/page/:alias",name:"page",component:Ru,props:!0},{path:"/(news|help|news_mmm)",name:"catalog",component:$u,meta:{header:"Новости"},props:function(t){__app_data.page;return{pages:__app_data.pages,catalog:__app_data.catalog,category:t.params.pathMatch||""}}},{path:"/users/:city?",name:"users",meta:{header:"Розыск"},component:Lu,props:function(t){var e=Object.assign({},__app_data.users||{});return __app_data.users=null,e}},{path:"/(register|login|password/reset)",name:"enter",meta:{header:"Авторизация",centeredLayout:!0},component:Vu,props:function(t){var e=t.params.pathMatch||"login";return"password/reset"===t.params.pathMatch&&(e="reset"),{comp:"div",tab:e}}},{path:"/password/reset/:token",component:Zu,props:!0},{path:"/profile/:tab?",name:"profile",meta:{header:"Профиль"},component:qu,props:function(t){return{comp:"div",tab:t.params.tab}}},{path:"/feedback",name:"feedback",meta:{header:"Обратная связь",centeredLayout:!0},component:Wu,props:{root_comp:"div"}},{path:"/services",component:id},{path:"/support",meta:{header:"Поддержка",centeredLayout:!0},component:wu,props:{root_comp:"div"}},{path:"/comments/:type/:id",meta:{header:"Комментарии",centeredLayout:!0},component:od,props:function(t){return{commentId:t.query.comment_id}}},{path:"/android",component:ld},{path:"/oauth/:type",meta:{header:"Вход через соц. сети",centeredLayout:!0},component:dd},{path:"/list",component:gu},{path:"/order/pay/:secret",component:Cd,beforeEnter:function(t,e,n){Fg.data.order&&n()},props:function(t){return{order:Fg.extractData("order"),offer:Fg.extractData("offer"),owner:Fg.extractData("owner"),donate:Fg.extractData("donate")}}},{path:"/votes",name:"votes",meta:{header:"Опросы"},props:function(){return{}},component:xd},{path:"/oauthGetToken",component:Td},{path:"/ny2022/:sub?",name:"konkurs",meta:{},props:{name:"ny2022"},component:Dd},{name:"ny2023",path:"/ny2023/:sub?",props:{name:"ny2023"},component:Fd},{name:"ny2024",path:"/ny2024/:sub?",props:{name:"ny2024"},component:Zd},{name:"test",path:"/testv2",component:Kd},{path:"/sos",name:"sos",meta:{centeredLayout:!0},props:function(t){return{page:Fg.extractData("page")}},component:zd},{path:"*",name:"static"}]};function Yd(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Xd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xd(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function Xd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Jd(t){return(Jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qd(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function tf(t,e){return(tf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ef(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=af(t);if(e){var r=af(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return nf(this,n)}}function nf(t,e){return!e||"object"!==Jd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function af(t){return(af=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const rf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tf(t,e)}(i,t);var e,n,a,r=ef(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).locked=!1,e.smilesKey="smiles",e.smilesRecentKey="smiles_recent",e.smilesVerKey="smiles_ver",e.siteVer=t.ver,e.options=t,e.maxRecent=8,e.smiles=null,e.codes={},e.smilesVer=Cl.Z.storage("smiles_ver"),e.recent=[];var n=Cl.Z.storage(e.smilesRecentKey);return n&&"object"===Jd(n)&&n.all instanceof Array?(n.all.length>e.maxRecent&&n.all.splice(e.maxRecent),e.recent=n.all):e.recent=[],e.ready(),e}return e=i,(n=[{key:"addRecent",value:function(t){if(t){var e=this.recent.indexOf(t);-1!==e&&this.recent.splice(e,1),this.recent.unshift(t),this.recent.length>this.maxRecent&&this.recent.splice(this.recent.length-1,1),Cl.Z.storage(this.smilesRecentKey,{all:this.recent})}}},{key:"replaceCodes",value:function(t,e,n){var a=0;return this.replace((function(t,r){return a++,n&&a>n?"&#9760;":r?'<img class="app-smile-replaced" data-code="'+r.code+'" src="'+r.theme[e]+'">':"smile#"+t}),t)}},{key:"replace",value:function(t,e){var n=this.options.smilesPattern;if(!n)return error("pattern not defined");for(var a,r,i,s=new RegExp(n);(a=e.match(s))&&!1!==(i=t(r=a[1],this.codes[r]));)e=e.replace(a[0],i);return e}},{key:"parse",value:function(t){var e=t;if(this.smiles)return log("from buffer"),this.smiles;t.groups={};var n,a=Yd(t.items);try{for(a.s();!(n=a.n()).done;){var r=n.value;this.codes[r.code]=r,t.groups[r.group]||(t.groups[r.group]=[]),t.groups[r.group].push(r)}}catch(t){a.e(t)}finally{a.f()}return this.smiles=e,e}},{key:"ready",value:function(){var t=this;return new Promise((function(e,n){if(t.smiles)return e(t.smiles);if(t.lock)return error("locked"),void t.once("smiles-ready",(function(t){e(t)}));t.lock=new Date;var a=Cl.Z.storage(t.smilesKey);"object"!==Jd(a)||t.smilesVer!==t.siteVer?pl.V.make("getSmiles",{}).then((function(n){Cl.Z.storage(t.smilesKey,n),Cl.Z.storage(t.smilesVerKey,t.siteVer),t._ready(e,t.parse(n))})).catch((function(t){n(t)})):t._ready(e,t.parse(a))}))}},{key:"_ready",value:function(t,e){t(e),this.emit("smiles-ready",e)}}])&&Qd(e.prototype,n),a&&Qd(e,a),i}(n(17187));function sf(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const of=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minterface=window.LvMobileAppInterface}var e,n,a;return e=t,(n=[{key:"call",value:function(t,e){var n=e instanceof Object?JSON.stringify(e):e;this.minterface&&"receiver"in this.minterface?this.minterface.receiver(t,n):error("minterface bad")}}])&&sf(e.prototype,n),a&&sf(e,a),t}();const cf={name:"toast",props:{element:{type:HTMLElement},title:{type:String},type:{type:String},text:{type:String},delay:{type:Number,default:0}},data:function(){return{sticked:!1}},created:function(){},mounted:function(){var t=this.$refs.toast,e={};this.delay?opt.delay=this.delay:e.autohide=!1;var n=new bootstrap.Toast(t,e);if(this.element){var a=$(this.element),r=a.position();$(this.$el).css({position:"fixed",left:r.left+"px",top:r.top+a.outerHeight()+"px"}),this.sticked=!0}$("body").append(this.$el),n.show()},methods:{}};const lf=(0,Fl.Z)(cf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"toast",staticClass:"toast app-toast animated flash",class:{sticked:this.sticked},attrs:{role:"alert","aria-live":"assertive","aria-atomic":"true"}},[n("div",{staticClass:"toast-header"},[n("div",{staticClass:"me-auto"},["error"==t.type?n("i",{staticClass:"text-danger fa fa-exclamation-triangle me-1"}):t._e(),t._v(" "),n("strong",{staticClass:"me-auto"},[t._v(t._s(t.text))])]),t._v(" "),n("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"toast","aria-label":"Close"}})])])}),[],!1,null,null,null).exports;const uf={name:"popupFix",props:{icon:{type:String},text:{type:String,default:"Сообщение"},type:{type:String,default:"success"}},data:function(){return{}},mounted:function(){var t=this;if($(".app-popup-fixed:last").length>0)$(this.$el);setTimeout((function(){t.close()}),3e3)},methods:{close:function(){$(this.$el).remove()}}};const df=(0,Fl.Z)(uf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-popup app-popup-fixed animated slideInDown",class:"alert alert-"+t.type},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-auto"},[t._v(t._s(t.icon))]),t._v(" "),n("div",{staticClass:"col-auto"},[n("strong",[t._v(t._s(t.text))])]),t._v(" "),n("div",{staticClass:"col-auto",on:{click:function(e){return t.close()}}},[n("button",{staticClass:"btn-close",attrs:{type:"button","aria-label":"Close"}})])])])}),[],!1,null,null,null).exports;const ff={name:"theme",props:{prop:{type:String}},data:function(){return{theme:this.$root.theme}},created:function(){},mounted:function(){}};const hf=(0,Fl.Z)(ff,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Сменить тему"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.theme.theme,expression:"theme.theme"}],attrs:{name:"theme"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.theme,"theme",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"auto"}},[t._v("Авто")]),t._v(" "),n("option",{attrs:{value:"dark"}},[t._v("Темная")]),t._v(" "),n("option",{attrs:{value:"light"}},[t._v("Светлая")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.theme.soundOff,expression:"theme.soundOff"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.theme.soundOff)?t._i(t.theme.soundOff,null)>-1:t.theme.soundOff},on:{change:function(e){var n=t.theme.soundOff,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&t.$set(t.theme,"soundOff",n.concat([null])):i>-1&&t.$set(t.theme,"soundOff",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.theme,"soundOff",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[n("i",{staticClass:"bi bi-volume-mute"}),t._v(" Отключить все звуки\n      ")])])])}),[],!1,null,null,null).exports;var pf=Cl.Z.getComponents(n(17014),"tab");const mf={name:"room_settings",props:{ownerId:{type:Number,required:!0},chat:{type:Object},tab:{type:String,default:"main"}},data:function(){return{currentTabId:this.tab,featuresComp:{},compKey:"sdafdsf"}},created:function(){this.tabs=[{name:"Основное",code:"main",icon:"fa fa-address-card-o"},{name:"Защита",code:"protect",icon:"fa fa-shield"},{name:"Доступ",code:"access",icon:"fa fa-user-secret"},{name:"Оформление",code:"theme",icon:"fa fa-file-image-o"},{name:"Ссылки",code:"links",icon:"fa fa-link"},{name:"Донаты",code:"donation",icon:"fa fa-rub"},{name:"Опросы",code:"vote",icon:"fa fa-question-circle-o"},{name:"Купоны",code:"coupons",icon:"fa fa-certificate"},{name:"Баня",code:"bans",icon:"fa fa-ban"},{name:"Модераторы",code:"moders",icon:"fa fa-ban"},{name:"Программы",code:"programms",icon:"fa fa-external-link"},{name:"Завершить",code:"remove",cls:"text-danger",icon:"fa fa-power-off text-danger"}]},computed:{currentTabComp:function(){var t=this.currentTabId+"_tab";return pf[t]}},mounted:function(){this.dataLoader=this.$refs.dataLoader,this.modal=this.$refs.modal,this.modal.$on("save",(function(){}))},methods:{compMounted:function(){var t=this,e=this.$refs.currentTab.getFirstChild("forma");this.modal.footerShow=-1!==["main","access","protect","theme","links"].indexOf(this.currentTabId),e&&e.$on("success",(function(){"remove"!==t.currentTabId&&"links"!==t.currentTabId&&t.close()}))},getTabId:function(t){return"room-settings-tab-"+t},reload:function(t){t||(t={}),this.featuresComp=t,this.dataLoader.update(),this.compKey="comp_"+(new Date).getTime()},close:function(){this.modal.close()}}};const vf=(0,Fl.Z)(mf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{ref:"modal",attrs:{title:"Настройки трансляции",size:"lg"}},[n("div",{staticClass:"row g-0 align-items-start flex-column flex-md-row"},[n("div",{staticClass:"col-auto nav bg-light flex-row flex-md-column flex-nowrap mw-100 overflow-auto nav-pills me-md-3 mb-2 mb-md-0",attrs:{id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"}},t._l(t.tabs,(function(e,a){return n("a",{staticClass:"nav-link  text-nowrap",class:{active:e.code===t.currentTabId},attrs:{href:"#"},on:{click:function(n){n.preventDefault(),t.currentTabId=e.code}}},[e.icon?n("i",{staticClass:"me-2",class:e.icon}):t._e(),t._v("\n                "+t._s(e.name)+"\n\n            ")])})),0),t._v(" "),n("div",{staticClass:"tab-content w-100 col"},[n("data-loader",{ref:"dataLoader",attrs:{list:!1,"load-func":"getRoomSettings","load-params":{owner_id:t.ownerId}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return[n(t.currentTabComp,{key:t.compKey,ref:"currentTab",tag:"component",attrs:{tab:t.currentTabId,data:a,chat:t.chat,features:t.featuresComp},on:{"hook:mounted":function(e){return t.compMounted()}}})]}}])})],1)]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("button",{staticClass:"btn btn-success"},[n("i",{staticClass:"fa fa-save"}),t._v("\n            Сохранить\n        ")])])])}),[],!1,null,null,null).exports;const gf={name:"user_messages_modal",props:{uid:{},support:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},mounted:function(){this.messaging=this.$refs.messaging,this.modal=this.$refs.modal},methods:{show:function(t){if(this.modal.front(),!Cl.Z.isEmpty(t)){if(this.messaging.currentUid===t.uid||this.messaging.currentGroup===t.group){var e=this.messaging.getFirstChild("user_messages");return void(e&&e.scroll())}this.messaging.open(t)}},closed:function(){return this.modal.closed()}}};const _f=(0,Fl.Z)(gf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{ref:"modal",staticClass:"messages-modal",attrs:{autodestroy:!1,size:"xl","fixed-y":"true","fixed-x":"true",footer:!1}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("h5",{staticClass:"modal-title",class:{"text-primary":t.support}},[t.support?n("i",{staticClass:"fa fa-headphones"}):t._e(),t._v("\n            "+t._s(t.support?"Поддержка":"Переписка")+"\n        ")])]),t._v(" "),n("user-messages",t._b({ref:"messaging"},"user-messages",t.$options.propsData,!1))],1)}),[],!1,null,null,null).exports;const yf={name:"alert_full",props:{alert:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const bf=(0,Fl.Z)(yf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-alerts-full"},["SellerTransaction"===t.alert.type?[n("i",{staticClass:"fa fa-rub"}),t._v("\n        "+t._s(t.alert.text)+"\n    ")]:"FriendRequest"===t.alert.type?[n("user",{attrs:{user:t.alert.data._user}}),t._v(" просит добавить вас в друзья\n        "),n("friend-button",{staticClass:"btn-primary",attrs:{uid:t.alert.data._user.id}})]:"FriendAdded"===t.alert.type?[n("user",{attrs:{user:t.alert.data._user}}),t._v(" "),n("i",{staticClass:"fa fa-check"}),t._v(" добавил вас в друзья\n    ")]:"CommentPage"===t.alert.type||"Comment"===t.alert.type?[n("user",{attrs:{user:t.alert.data._user}}),t._v(" "),t.alert.data.link?n("div",{staticClass:"mt-2"},[n("a",{staticClass:"btn btn-secondary btn-sm",attrs:{target:"_blank",href:t.alert.data.link}},[n("i",{staticClass:"fa fa-reply",attrs:{"aria-hidden":"true"}}),t._v(" ответить\n            ")])]):t._e()]:"anonsPublish"===t.alert.type?[n("user",{attrs:{user:t.alert.data._user}}),t._v("\n        анонсировал трансляцию\n        "),n("hr"),t._v(" "),t.alert.data.date?n("p",[t._v("Начало: "),n("strong",{staticClass:"text-danger"},[t._v(t._s(t.alert.data.date))])]):t._e(),t._v(" "),t.alert.data.text?n("p",{},[t._v(t._s(t.alert.data.text))]):t._e()]:"GroupAdded"===t.alert.type?[t._v("\n        Вас добавили в группу "),n("strong",[t._v(t._s(t.alert.data.group_name))]),t._v(" "),n("button",{directives:[{name:"mess",rawName:"v-mess",value:{group:t.alert.data.group_id},expression:"{group: alert.data.group_id}"}],staticClass:"btn btn-secondary"},[t._v("Открыть")])]:"ServiceRemoved"===t.alert.type?[t._v("\n        срок действия услуги\n        "),n("strong",[t._v(t._s(t.alert.data.service_name))]),t._v("\n        истек\n    ")]:"moneyOutRequest"===t.alert.type?[t._v("\n        Запрос на вывод\n        "),n("user",{attrs:{user:t.alert.data._user}})]:"moneyOutAccept"===t.alert.type?[n("i",{staticClass:"fa fa-check"}),t._v("\n        Вам доступен вывод ливачей от донатов.\n    ")]:"moneyOutDeny"===t.alert.type?[t._v("\n        Вам временно отключен вывод донатов. Обратитесь к администрации\n    ")]:"bugreport"===t.alert.type?void 0:"konkurs_alert"===t.alert.type?[t._v("\n        Администратор конкурса отправил вам сообщение"),n("br"),t._v(" "),t.alert.data.text?n("strong",{staticClass:"text-danger"},[t._v(t._s(t.alert.data.text))]):t._e()]:"post_moderate"===t.alert.type?["allow"===t.alert.data.action?[n("i",{staticClass:"fa fa-check"}),t._v(" "),n("a",{attrs:{href:"/post/"+t.alert.data.post_id,target:"_blank"}},[t._v("Ваша заметка опубликована")])]:"deny"===t.alert.data.action?[n("strong",{staticClass:"text-danger"},[n("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" "),n("a",{attrs:{href:"/post/"+t.alert.data.post_id,target:"_blank"}},[t._v("Исправьте вашу заметку")])]),t._v(" "),t.alert.data.deny_text?n("div",{staticClass:" mt-2 alert alert-warning"},[t._v("Причина: "),n("strong",[t._v(t._s(t.alert.data.deny_text))])]):t._e()]:t._e()]:[t._v("\n        "+t._s(t.alert.text)+"\n    ")]],2)}),[],!1,null,null,null).exports,Cf={name:"alerts_popup",props:{prop:{type:String}},data:function(){return{alerts:null,closed:!0,loading:!1,endOfData:!1,limit:0,offset:0,full:!1}},created:function(){},computed:{alertsSorted:function(){if(this.alerts)return this.alerts.map((function(t){var e="",n=[],a="";return-1!==["SellerRequest","BuyerAccept"].indexOf(t.type)&&(e="fa fa-cart-arrow-down"),-1!==["SellerTransaction"].indexOf(t.type)&&(e="fa fa-usd",n.push("progress-bar-striped progress-bar-animated list-group-item-primary")),-1!==["FriendRequest","FriendAdded"].indexOf(t.type)&&(e="fa fa-handshake-o"),-1!==["anonsPublish"].indexOf(t.type)&&(e="em em-clock2"),-1!==["moneyOutAccept","moneyOutDeny"].indexOf(t.type)&&(e="fa fa-rub"),-1!==["post_moderate"].indexOf(t.type)&&(e="fa fa-pencil","deny"===t.data.action&&(a="danger")),-1!==["Comment","CommentPage"].indexOf(t.type)&&(e="fa fa-comment-o"),-1!==["ServiceAdded","ServiceRemoved"].indexOf(t.type)&&(e="fa fa-gift","ServiceRemoved"===t.type&&(a="danger")),-1!==["konkurs_alert"].indexOf(t.type)&&(e="em em-man-gesturing-ok",a="danger"),-1!==["GroupAdded"].indexOf(t.type)&&(e="fa fa-group"),t.icon&&(e=t.icon),"custom"===t.type&&(e+=" fa"),t.cls&&(a=t.cls),a&&n.push("list-group-item-"+a),t.icon=e,t.classes=n,t}))}},components:{"alert-full":bf},mounted:function(){this.load()},methods:{toggle:function(t){this.closed=void 0===t?!this.closed:!t,this.closed&&!this.full&&this.removeReaded()},removeReaded:function(){if(this.alerts instanceof Array)for(var t=this.alerts.length;t--;)this.alerts[t].opened&&this.alerts.splice(t,1)},load:function(t){var e=this;this.loading=!0,t||(t={}),pl.V.make("getAlerts",t).then((function(n){n.alerts.updateItems({opened:!1}),t.offset?e.alerts.pushItems(n.alerts):e.alerts=n.alerts,e.limit=n.limit,e.endOfData=0===n.alerts.length})).catch((function(t){e.$root.popupFixErr(t)})).always((function(){e.loading=!1}))},loadMore:function(){this.endOfData||(this.offset++,this.load({full:1,offset:this.offset}))},openAlert:function(t,e){"custom"!==e.type&&(pl.V.make("GetAlert",{id:e.id}),e.opened=!0,t.preventDefault())},markReadAll:function(){var t=this;pl.V.make("getAlerts",{clear:!0}).then((function(e){t.alerts=[]})).catch((function(e){t.$root.popupFixErr(e)}))},close:function(){this.toggle(!1)}}};const wf=(0,Fl.Z)(Cf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.closed,expression:"!closed"}],staticClass:"app-alerts-popup bg-light"},[n("div",{staticClass:"row g-0 flex-column flex-nowrap"},[n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-danger w-100",on:{click:function(e){return t.close()}}},[n("i",{staticClass:"fa fa-close"}),t._v("\n                Закрыть\n            ")])]),t._v(" "),n("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"col mh-100 h-100 list-scroll position-relative bg-light"},[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{inline:""}}),t._v(" "),t.alertsSorted&&t.alertsSorted.length>0?n("div",{staticClass:"list-group"},[t._l(t.alertsSorted,(function(e){return[n("a",{directives:[{name:"show",rawName:"v-show",value:!e.opened,expression:"!alert.opened"}],staticClass:"list-group-item list-group-item-action",class:e.classes,attrs:{href:e.link||"#","data-type":e.type},on:{click:function(n){return t.openAlert(n,e)}}},[n("i",{class:e.icon}),t._v(" "),n("strong",[t._v(t._s(e.text))])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.opened,expression:"alert.opened"}],staticClass:"list-group-item bg-light border animate__animated animate__flipInX"},[e.opened?n("alert-full",{attrs:{alert:e}}):t._e()],1)]})),t._v(" "),n("load-more",{directives:[{name:"show",rawName:"v-show",value:!t.endOfData&&t.limit&&t.alertsSorted.length>=t.limit,expression:"!endOfData &&  limit && alertsSorted.length >= limit"}],staticClass:"mt-2 mb-5",attrs:{loading:t.loading},on:{click:function(e){return t.loadMore()}}})],2):t.loading?t._e():n("div",{staticClass:"text-center p-3"},[t._m(0)])],1),t._v(" "),n("div",{staticClass:"col-auto "},[n("div",{staticClass:"row g-0 flex-row flex-nowrap"},[n("div",{staticClass:"col"},[n("a",{staticClass:"d-block btn btn-secondary",attrs:{target:"_blank",href:"/alerts"},on:{click:function(e){e.preventDefault(),t.full=!t.full,t.load({full:t.full})}}},[n("i",{staticClass:"fa",class:{"fa-list":!t.full,"fa-undo":t.full},attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.full?"Активные уведомления":"Все уведомдения")+"\n                    ")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.alertsSorted&&t.alertsSorted.length>0,expression:"alertsSorted && alertsSorted.length > 0"}],staticClass:"col-auto"},[n("button",{staticClass:"btn btn-secondary",attrs:{"data-title":"Отметить все как прочитанные"},on:{click:function(e){return t.markReadAll()}}},[n("i",{staticClass:"fa fa-check"})])])])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("strong",[n("i",{staticClass:"fa fa-smile-o",attrs:{"aria-hidden":"true"}}),t._v(" Тут пока пусто")])}],!1,null,null,null).exports;var kf=n(2799);const xf={name:"notify_request",props:{prop:{type:String}},data:function(){return{}},created:function(){},mounted:function(){},methods:{disable:function(){Cl.Z.storage("notifyDeny",(new Date).getTime())},enable:function(){Cl.Z.storageRemove("notifyDeny"),this.$root.requestNotify()}}};const Sf=(0,Fl.Z)(xf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Включите уведомления в браузере"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-auto"},[n("i",{staticClass:"fa fa-bell-o text-success animate__animated animate__shakeX",staticStyle:{"font-size":"80px"}})]),t._v(" "),n("div",{staticClass:"col"},[n("p",[n("strong",[t._v("Подпишитесь на уведомления сайта!")])]),t._v(" "),n("p",[t._v("Вам будут приходить уведомления о новых сообщениях и трансляциях(на которые вы подписаны) "),n("i",{staticClass:"fa fa-smile-o",attrs:{"aria-hidden":"true"}})]),t._v(" "),n("p",[t._v("После нажатия на кнопку Подписаться всплывет запрос от вашего браузера. "),n("strong",[t._v("Нажмите Разрешить")])])])]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("button",{staticClass:"btn btn-secondary close-trigger",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:function(e){return t.disable()}}},[t._v("не нужно")]),t._v(" "),n("button",{staticClass:"btn btn-success",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:function(e){return t.enable()}}},[t._v("Подписаться")])])])}),[],!1,null,null,null).exports;const Ef={name:"order",props:{secret:{type:String},id:{}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const Tf=(0,Fl.Z)(Ef,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Информация о счете № "+t.id}},[n("data-loader",{attrs:{"load-func":"getOrder","load-params":{secret:t.secret,id:t.id}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return[n("table",{staticClass:"table"},[n("tbody",[n("tr",[n("td",[t._v("Номер счета:")]),t._v(" "),n("td",[t._v(t._s(a.order.id))])]),t._v(" "),n("tr",[n("td",[t._v("Сумма:")]),t._v(" "),n("td",[t._v("\n                        "+t._s(a.order.summ)+"\n                        "),n("rub")],1)]),t._v(" "),n("tr",[n("td",[t._v("Дата создания:")]),t._v(" "),n("td",[t._v(t._s(a.order.date))])]),t._v(" "),a.order.date_pay?n("tr",[n("td",[t._v("Дата оплаты:")]),t._v(" "),n("td",[t._v(t._s(a.order.date_pay))])]):t._e(),t._v(" "),n("tr",[n("td",[t._v("Статус:")]),t._v(" "),n("td",[a.order.payed?n("strong",{staticClass:"text-success"},[n("i",{staticClass:"fa fa-check"}),t._v(" оплачен\n                        ")]):n("strong",{staticClass:"text-danger"},[t._v("\n                            не оплачен\n                        ")])])])])]),t._v(" "),a.order.cart&&a.order.cart.length>0?n("div",{staticClass:"overflow-x"},[n("strong",[t._v("Покупки ("+t._s(a.order.cart.length)+"):")]),t._v(" "),n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("Наименование")]),t._v(" "),n("th"),t._v(" "),n("th",[t._v("Стоимость")]),t._v(" "),n("th",[t._v("Продавец")]),t._v(" "),n("th",[t._v("Дата")])])]),t._v(" "),n("tbody",t._l(a.order.cart,(function(e){return n("tr",{staticClass:"text-nowrap"},[n("td",[t._v(t._s(e.offer_data?e.offer_data.name:"-"))]),t._v(" "),n("td",{attrs:{"data-title":"Кол-во"}},[t._v(t._s(e.count))]),t._v(" "),n("td",[t._v(t._s(e.summ)+" "),n("rub")],1),t._v(" "),n("td",[n("user",{attrs:{user:e.user}})],1),t._v(" "),n("td",[t._v(t._s(e.date))])])})),0)])]):t._e(),t._v(" "),a.order.offer?n("div",["donate"===a.order.offer.type?[t._v("\n                Пожертвование пользователю"),n("br"),t._v(" "),n("user",{attrs:{user:a.order.offer.owner}})]:[t._v("\n                покупка "),n("strong",[t._v(t._s(a.order.offer.name))])]],2):t._e()]}}])})],1)}),[],!1,null,null,null).exports;var Af=!1;const Rf={name:"stream_chart",props:{uid:{type:Number}},data:function(){return{loading:!1,date:null,data:null,dateDate:null}},created:function(){},mounted:function(){this.chartEl=this.$refs.chart,this.controlEl=this.$refs.control,this.dashboardEl=this.$refs.dashboard,this.init()},methods:{init:function(){var t=this;Af?this.load():this.$root.script("https://www.gstatic.com/charts/loader.js",(function(){google.charts.load("current",{packages:["corechart","controls"],language:"ru"}),google.charts.setOnLoadCallback((function(){Af=!0,t.load()}))}))},drawDate:function(){var t=new google.visualization.DataTable(this.dataDate),e=new google.visualization.Dashboard(this.dashboardEl),n=new google.visualization.ChartWrapper({chartType:"LineChart",containerId:this.chartEl,options:{height:400,chartArea:{width:"90%",height:"88%"},hAxis:{textStyle:{fontSize:10},slantedText:!1},legend:{position:"none"},tooltip:{}}}),a=new google.visualization.ControlWrapper({controlType:"ChartRangeFilter",containerId:this.controlEl,options:{filterColumnIndex:0,ui:{chartType:"LineChart",chartOptions:{enableInteractivity:!1,pointSize:0,pointsVisible:!1,height:50,hAxis:{baselineColor:"none"}},chartView:{}}},state:{range:{}}});e.bind(a,n),e.draw(t)},drawMain:function(){var t=this,e=new google.visualization.LineChart(this.chartEl),n=new google.visualization.DataTable(this.data);e.draw(n,{height:400,orientation:"horizontal",chart:{title:"Статистика"},hAxis:{title:"дата"},legend:{position:"none"},tooltip:{trigger:"selection",isHtml:!0}}),e.setAction({id:"lick",text:"Показать график",action:function(){var a=e.getSelection(),r=n.getValue(a[0].row,0);return t.loadDate(r),!1}})},load:function(){var t=this;pl.V.make(this.uid?"UserStatBar":"StreamsStatBar",{uid:this.uid}).then((function(e){t.data=e.chart,t.drawMain()})).catch((function(e){t.$root.popupFixErr(e)})).always((function(){}))},loadDate:function(t){var e=this;this.date=t,pl.V.make("UserStatLinear",{uid:this.uid,date:t instanceof Object?t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate():t}).then((function(t){e.dataDate=t.chart,e.drawDate()})).catch((function(t){e.$root.popupFixErr(t)})).always((function(){}))}}};const Of=(0,Fl.Z)(Rf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Статистика",size:"xl",footer:!1}},[n("button",{directives:[{name:"show",rawName:"v-show",value:t.date,expression:"date"}],staticClass:"btn btn-secondary btn-back",on:{click:function(e){t.date=null,t.drawMain()}}},[n("i",{staticClass:"fa fa-arrow-left"}),t._v(" Взад")]),t._v(" "),n("div",{ref:"dashboard"},[n("div",{ref:"chart"}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.date,expression:"date"}],ref:"control"})])])}),[],!1,null,null,null).exports;const $f={name:"bug_report",props:{prop:{type:String}},data:function(){return{sended:!1}},created:function(){},mounted:function(){},methods:{}};const Pf=(0,Fl.Z)($f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Отправить баг",save:t.sended?"":"Отправить",icon:"fa fa-bug text-danger"}},[n("p",[t._v("\n        Нашли ошибку в работе сайта? Отправьте отчет разработчику.\n        Если понадобится дополнительная информация с вами свяжутся\n    ")]),t._v(" "),n("forma",{attrs:{action:"/api/sendBugReport",once:!0},on:{success:function(e){t.sended=!0}}},[n("strong",[t._v("Описание неисправности:")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"text",required:""}}),t._v(" "),n("div",{staticClass:"my-2 text-muted"},[t._v("Вы можете прикрепить снимок или видеозапись экрана или загрузить произвольное изображение")]),t._v(" "),n("div",{staticClass:"row g-0 justify-content-between"},[n("div",{staticClass:"col-auto"},[n("uploader",{attrs:{obj:"astral",maxFiles:1,label:"Картинка"}})],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("screenshot",{attrs:{obj:"astral"}})],1)])])],1)}),[],!1,null,null,null).exports;const Lf={name:"record_player",props:{record:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const Df=(0,Fl.Z)(Lf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Запись"}},[n("video",{attrs:{controls:"",poster:t.record.poster&&t.record.poster.big?t.record.poster.big:"",src:t.record.url,width:"100%"}})])}),[],!1,null,null,null).exports;const If={name:"ad_chat",props:{prop:{type:String}},data:function(){return{serv:null,type:"public"}},created:function(){},mounted:function(){},methods:{}};const Mf=(0,Fl.Z)(If,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Объявление в чат",save:"Отправить"}},[n("forma",{attrs:{action:"/api/sendall",once:!0}},["public"===t.type?n("service",{key:"sendall",attrs:{alias:"sendall"}}):"anon"===t.type?n("service",{key:"sendall_anon",attrs:{alias:"sendall_anon"}}):t._e(),t._v(" "),n("div",{staticClass:"bg-secondary p-3"},[n("i",{staticClass:"fa fa-info-circle"}),t._v("\n            Вы можете добавить объявление во все чаты либо анонимно (вашего ника не будет видно) либо публично\n        ")]),t._v(" "),n("div",{staticClass:"my-3 text-center"},[n("label",{staticClass:"form-radio form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"type",value:"public"},domProps:{checked:t._q(t.type,"public")},on:{change:function(e){t.type="public"}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Публично")])]),t._v(" "),n("label",{staticClass:"form-radio form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"type",value:"anon"},domProps:{checked:t._q(t.type,"anon")},on:{change:function(e){t.type="anon"}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Анонимно")])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("smiles",{attrs:{textarea:t.idStatic("smiles")}}),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{id:t.idStatic("smiles"),name:"text",placeholder:"введите ваше сообщение"}}),t._v(" "),n("uploader",{attrs:{obj:"chat_room",alias:"chat_image","max-files":1}})],1),t._v(" "),n("strong",[t._v("Примерно так будет выглядить объявление:")]),n("br"),t._v(" "),n("a",{staticClass:"d-block p-2 text-center",attrs:{href:"/i/ad_example.png","data-fancybox":""}},[n("img",{staticClass:"mw-100 border",staticStyle:{height:"200px"},attrs:{src:"/i/ad_example.png"}})])],1)],1)}),[],!1,null,null,null).exports;var Nf=n(18516);const jf={name:"garland",props:{prop:{type:String}},data:function(){return{effect:"bounce"}},watch:{$route:function(){this.effectRnd()}},created:function(){this.tm=null},destroyed:function(){},mounted:function(){var t=this;this.$el.querySelectorAll(".b-ball_bounce").forEach((function(e){e.addEventListener("mouseenter",(function(n){e.animate(t.effect)})),e.addEventListener("click",(function(t){e.remove()}))}))},methods:{effectRnd:function(){var t=["bounce","shakeX"],e=Math.round(Cl.Z.rand(0,t.length-1));this.effect=t[e]}}};const Ff=(0,Fl.Z)(jf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-head-decor"},t._l([1,2,3,4,5,6,7,8],(function(e){return n("div",{class:"b-head-decor__inner b-head-decor__inner_n"+e},[t._m(0,!0),t._v(" "),t._m(1,!0),t._v(" "),t._m(2,!0),t._v(" "),t._m(3,!0),t._v(" "),t._m(4,!0),t._v(" "),t._m(5,!0),t._v(" "),t._m(6,!0),t._v(" "),t._m(7,!0),t._v(" "),t._m(8,!0),t._v(" "),t._m(9,!0),t._v(" "),t._m(10,!0),t._v(" "),t._m(11,!0),t._v(" "),t._m(12,!0),t._v(" "),t._m(13,!0),t._v(" "),t._m(14,!0)])})),0)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_n1 b-ball_bounce"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_n2 b-ball_bounce"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_n3 b-ball_bounce"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_n4 b-ball_bounce"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_n5 b-ball_bounce"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_n6 b-ball_bounce"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_n7 b-ball_bounce"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_n8 b-ball_bounce"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_n9 b-ball_bounce"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_i1"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_i2"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_i3"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_i4"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_i5"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-ball b-ball_i6"},[n("div",{staticClass:"b-ball__right"}),t._v(" "),n("div",{staticClass:"b-ball__i"})])}],!1,null,null,null).exports;const Bf={name:"donate_popup",props:{comment:{type:String},summ:{},voice:{type:String},from:{type:Object},balans:{},transaction:{},donationSettings:{}},data:function(){return{voiceCur:this.voice,showProgress:this.balans&&this.donationSettings&&this.donationSettings._showProgress}},components:{},created:function(){this.animated=["animate__bounce","animate__flash","animate__pulse","animate__rubberBand","animate__shakeX","animate__shakeY","animate__swing","animate__tada","animate__wobble","animate__jello","animate__heartBeat","animate__bounceIn","animate__bounceInLeft","animate__bounceInUp","animate__fadeInLeft","animate__flip","animate__flipInX","animate__flipInY","animate__lightSpeedInLeft","animate__zoomIn","animate__zoomInDown"],this.voiceCur||(this.voiceCur="money")},mounted:function(){},methods:{getAnimation:function(){return this.showProgress?"":this.animated.shuffle()[0]}}};const Uf=(0,Fl.Z)(Bf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{staticClass:"animate__animated",class:t.getAnimation(),attrs:{centered:"true",footer:!1,title:"Получен донат"}},[t.from?n("div",{staticClass:"text-center"},[t.from.user?[n("user",{attrs:{user:t.from.user}})]:[n("span",[t._v(t._s(t.from.html))])]],2):t._e(),t._v(" "),n("div",{staticClass:"my-1 text-center text-danger text-nowrap",staticStyle:{"font-size":"5rem"}},[n("strong",[t._v(t._s(parseInt(t.summ).toLocaleString()))]),t._v(" "),n("rub")],1),t._v(" "),t.comment?n("div",{staticClass:"my-1 text-center"},[n("em",[t._v(t._s(t.comment))])]):t._e(),t._v(" "),t.showProgress?n("donate-progress",{staticClass:"my-3",attrs:{"summ-need":t.donationSettings.summ_need,"summ-total":t.balans,summ:t.summ}}):t._e(),t._v(" "),t.voiceCur?n("div",{staticClass:"my-3 text-center"},[n("play-audio",{attrs:{src:t.voiceCur}})],1):t._e()],1)}),[],!1,null,null,null).exports;const Vf={name:"pass_prompt",props:{couponId:{type:Number}},data:function(){return{pass:"",loading:!1}},mounted:function(){},methods:{close:function(){this.$refs.modal.close()},enter:function(){var t=this;if(!this.pass)return this.$root.popupFixErr("Введите пароль");this.$emit("pass",this.pass),this.$root.$emit("stream-pass-enter",this.pass),this.loading=!0,this.pass="",setTimeout((function(){t.loading=!1}),3e3)}}};const Hf=(0,Fl.Z)(Vf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{ref:"modal",attrs:{title:t.couponId?"Введите код купона":"Введите код",centered:"true",backdrop:!1}},[n("div",{attrs:{slot:"footer"},slot:"footer"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v("закрыть")]),t._v(" "),n("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.loading},on:{click:function(e){return t.enter()}}},[n("i",{staticClass:"fa fa-key"}),t._v(" ввести")])]),t._v(" "),n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{inline:""}}),t._v(" "),n("form",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],ref:"form",attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.enter(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],ref:"pass",staticClass:"form-control",attrs:{autocomplete:"off",placeholder:"пароль",required:"",autofocus:""},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}}),t._v(" "),n("small",{staticClass:"text-muted"},[t.couponId?[t._v("\n                доступ в чат по купонам. Введите код.\n                "),n("p",{staticClass:"text-center mt-2"},[n("pay-button",{attrs:{"offer-id":t.couponId}},[t._v("Купить купон")])],1)]:[t._v("\n                для доступа в этот чат нужен пароль\n            ")]],2)])],1)}),[],!1,null,null,null).exports;const Zf={props:{user:{type:Object}}};const Gf=(0,Fl.Z)(Zf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flyball",{staticClass:"subscribe"},[n("i",{staticClass:"em em-heart icon"}),t._v(" "),n("div",[n("span",{staticClass:"nickname bg-light p-1"},[t.user?n("user",{attrs:{user:t.user}}):t._e()],1)])])}),[],!1,null,null,null).exports;const zf={props:{user:{type:Object},positive:{}}};const qf=(0,Fl.Z)(zf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flyball",{staticClass:"like"},[n("i",{staticClass:"em icon",class:{"em-face_with_symbols_on_mouth":!t.positive,"em-kiss":t.positive}}),t._v(" "),n("div",[n("span",{staticClass:"nickname bg-light p1-1"},[t.user?n("user",{attrs:{user:t.user}}):t._e()],1)])])}),[],!1,null,null,null).exports;var Kf=n(58120),Wf=n(62386),Yf=n(73296);function Xf(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Jf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jf(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function Jf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const Qf={name:"room",props:{config:{type:Object},roomId:{type:Number}},components:{links:Wf.Z},data:function(){return{layout:"horizontal",room:this.config,playerMode:void 0!==this.$route.query.player||!1,chat:null,donationsEngines:this.config.donationsNotifycable,donationsEnginesStatuses:{},loading:!1,roomDestroyed:!1,showInfo:!0,ownerFlag:"",chatOnly:!1}},computed:{isOwner:function(){return this.global.uid&&this.room.ownerId===this.global.uid},vertical:function(){return"vertical"===this.layout},hasBackground:function(){return!head.mobile&&this.room.background}},destroyed:function(){this.backgroundRemove(),this.offWsMess(),window.removeEventListener("resize",this.recalcLayouts)},created:function(){var t=this;this.chatOnly=void 0!==this.$route.query.__chat,this.$watch("room",(function(){t.background()}),{deep:!0}),this.promptPasswordModal=null,this.recalcLayouts(),window.addEventListener("resize",this.recalcLayouts),this.ws=this.$root.ws,this.ws.on("message",this.messageListener),this.$root.$on("fullscreen",(function(){})),this.background()},mounted:function(){var t=this;this.chatContainer=this.$refs.chatContainer,this.chat=this.$refs.chat,this.recalcLayouts(),this.$root.isFloatingSupported()&&this.chatContainerResizable(),this.chat.$on("ownerUpdate",(function(e){t.ownerFlag=e.info.country_flag})),document.title=this.room.owner?this.room.owner.name:this.room.name},methods:{offWsMess:function(){this.ws&&this.ws.off("message",this.messageListener)},settingsOpen:function(t){t||(t={}),this.$root.roomSettingsOpen(Object.assign(t,{ownerId:this.room.ownerId,chat:this.chat}))},donateProgressHelperOpen:function(){var t=this;this.render(Kf.default,{ownerId:this.room.ownerId,donationSettings:this.room.donationSettings}).$on("change",(function(e){t.room.donationSettings=e}))},background:function(t){this.hasBackground?this.$root.bodyBackground(this.room.background):this.$root.bodyBackground(!1)},backgroundRemove:function(){this.$root.bodyBackground(!1)},chatContainerResizable:function(){$(this.chatContainer).resizable({handles:"w",minWidth:350,resize:function(t,e){},create:function(t,e){}})},messageListener:function(t,e,n){var a=this;switch(t){case"donate":this.$root.render(Uf,Object.assign({},e,{donationSettings:this.room.donationSettings})),e.balans&&(this.room.balans=e.balans),e.transaction&&(this.room.transactions instanceof Array?this.room.transactions.unshift(e.transaction):this.room.transactions=[e.transaction]);break;case"donationsnotify":"connected"!==e.type&&"error"!==e.type||this.$root.modal({text:e.message,title:e.header||"Сервисное сообщение",icon:"error"===e.type?"fa fa-exclamation-triangle text-danger":"fa fa-check text-success"}),this.$set(this.donationsEnginesStatuses,e.engine,{status:e.type,statusText:e.tooltip});break;case"updateRoom":e.room&&Object.assign(this.room,e.room.publicData);break;case"joined":this.promptPasswordModal&&this.promptPasswordModal.close();break;case"roomDestroyed":this.offWsMess(),this.$el.animate("zoomOut").then((function(){a.$root.play("stop"),a.roomDestroyed=!0}));break;case"subscribe":this.$root.render(Gf,e);break;case"likeMe":this.$root.render(qf,e);break;case"error":var r=[];e.errors&&e.errors instanceof Array&&(r=e.errors),"string"==typeof e&&r.push(e);var i,s=Xf(r);try{for(s.s();!(i=s.n()).done;){var o=i.value;"passwordPrompt"===e.code?this.promptPassword():this.$root.popupFixErr(o)}}catch(o){s.e(o)}finally{s.f()}break;case"voteUpdate":(this.room.id===e.room_id&&!this.room.vote||e.vote_id!==this.room.vote.id)&&(this.room.vote=Object.assign(e.vote||{},{canVote:!0}));break;case"bandwidthAlert":this.$root.alert(e.text,{raw:!0})}},isHorizontal:function(){return"horizontal"===this.layout},init:function(){},recalcLayouts:function(){window.innerWidth>960?this.layout="horizontal":this.layout="vertical"},promptPassword:function(t){var e=this;this.promptPasswordModal&&(this.promptPasswordModal.$destroy(),this.promptPasswordModal=null),this.promptPasswordModal=this.$root.render(Hf,{couponId:this.room.couponId}).$on("pass",(function(t){e.chat.join({password:t})})),this.promptPasswordModal.$on("destroyed",(function(){e.promptPasswordModal=null,e.chat&&e.chat.joinDialog()}))}}};const th=(0,Fl.Z)(Qf,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row app-room g-0 flex-nowrap",attrs:{"data-layout":t.layout,"data-chat-only":t.chatOnly,"data-embed":t.$root.embed,"data-fullscreen":t.$root.fullscreenMode,"data-bg":!!t.hasBackground}},[t.loading?n("loading"):t._e(),t._v(" "),t.roomDestroyed?[t._m(0)]:[t.chatOnly?t._e():n("div",{staticClass:"left-container"},[t.isOwner||t.global.moder?[n("div",{staticClass:"my-2 row flex-nowrap g-0 gap-1 overflow-auto"},[t.isOwner&&t.utils.isTouch()?n("a",{staticClass:"col-auto btn btn-primary",attrs:{href:"/android"}},[n("i",{staticClass:"fa fa-android",attrs:{"aria-hidden":"true"}}),t._v(" Android")]):t._e(),t._v(" "),t.isOwner?n("button",{directives:[{name:"show",rawName:"v-show",value:t.playerMode,expression:"playerMode"}],staticClass:"col-auto btn btn-primary",on:{click:function(e){t.playerMode=!1}}},[n("i",{staticClass:"fa fa-rss",attrs:{"aria-hidden":"true"}}),t._v(" Начать")]):t._e(),t._v(" "),t.isOwner?n("button",{directives:[{name:"show",rawName:"v-show",value:!t.playerMode,expression:"!playerMode"}],staticClass:"col-auto btn btn-secondary",on:{click:function(e){t.playerMode=!0}}},[n("i",{staticClass:"fa fa-play",attrs:{"aria-hidden":"true"}}),t._v(" Плеер")]):t._e(),t._v(" "),t.isOwner||t.global.moder?n("button",{staticClass:"col-auto btn btn-secondary",on:{click:function(e){return t.settingsOpen()}}},[n("i",{staticClass:"fa fa-wrench",attrs:{"aria-hidden":"true"}}),t._v(" Управление\n                    ")]):t._e(),t._v(" "),t._l(t.donationsEngines,(function(e){return t.isOwner?n("span",{staticClass:"donation-notify col-auto",class:{active:t.donationsEnginesStatuses[e.alias]&&-1!==["connected","resume"].indexOf(t.donationsEnginesStatuses[e.alias].status)},attrs:{"data-status":t.donationsEnginesStatuses[e.alias]?t.donationsEnginesStatuses[e.alias].status:"","data-title":e.name}},[n("a",{attrs:{href:e.donateLink,target:"_blank"}},[n("img",{attrs:{src:e.logo}})])]):t._e()}))],2)]:t._e(),t._v(" "),void 0,t._v(" "),n("div",{staticClass:"playable-container"},[!t.isOwner||t.playerMode?[n("player",{attrs:{"room-id":t.room.id}})]:[t.room.ban?n("div",{staticClass:"alert alert-danger "},[n("i",{staticClass:"fa fa-ban"}),t._v("\n                        Вам временно запрещено создавать трансляции\n                        "),n("div",{staticClass:"mt-2"},[t._v("\n                            Причина:"),n("br"),t._v(" "),n("strong",{domProps:{innerHTML:t._s(t.room.ban.ruleHtml)}})]),t._v(" "),n("div",{staticClass:"mt-2"},[t._v("\n                            Модератор:"),n("br"),t._v(" "),n("user",{attrs:{user:t.room.ban.moder}})],1),t._v(" "),n("div",{staticClass:"mt-2 text-end"},[n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.$root.openSupport()}}},[n("i",{staticClass:"fa fa-flag"}),t._v("\n                                не согласен с баном\n                            ")])])]):n("streamer",{attrs:{"stream-id":t.room.stream?t.room.stream.id:0}})]],2),t._v(" "),n("adv",{staticClass:"border",attrs:{type:"yandex",scope:"room",hiddable:!0}}),t._v(" "),n("div",{staticClass:"room-info position-relative border-start border-bottom border-end"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showInfo,expression:"showInfo"}],staticClass:"row gx-0  bg-bg p-0 justify-content-between"},[n("div",{staticClass:"row col g-0 flex-nowrap nick2name align-items-center text-truncate"},[n("div",{staticClass:"col-auto me-1"},[n("a",{directives:[{name:"user",rawName:"v-user",value:t.room.owner.id,expression:"room.owner.id"}],attrs:{href:t.room.owner.link,target:"_blank"}},[n("img",{attrs:{height:"50px",src:t.room.owner.avatar}})])]),t._v(" "),n("div",{staticClass:"col text-truncate"},[n("div",{staticClass:"nickname text-truncate"},[n("strong",[n("a",{directives:[{name:"user",rawName:"v-user",value:t.room.owner.id,expression:"room.owner.id"}],attrs:{href:t.room.owner.link,target:"_blank"}},[t._v(t._s(t.room.owner.name))])])]),t._v(" "),n("div",{staticClass:"room-name text-truncate"},[t._v(t._s(t.room.name))])])]),t._v(" "),n("div",{staticClass:"col-auto col-donation"},[t.room.donate?n("pay-button",{staticClass:"h-100",attrs:{"owner-id":t.room.ownerId,owner:t.room.owner,scope:"room",donate:t.room.donate}}):t._e()],1)]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showInfo,expression:"showInfo"}],staticClass:"p-2 bg-bg room-text border-top"},[t.room.text?n("div",{staticClass:"mb-2",staticStyle:{"white-space":"pre-wrap"}},[n("strong",[t._v(t._s(t.room.text))])]):t._e(),t._v(" "),t.room.links&&t.room.links.length>0?n("links",{staticClass:"mb-2",attrs:{links:t.room.links}}):t._e(),t._v(" "),n("div",{staticClass:"row g-0"},[n("div",{staticClass:"col-12 col-sm order-last order-sm-first"},[t.room.ownerInfo?n("about",{attrs:{uid:t.room.owner.id,info:t.room.ownerInfo,inline:!0}}):t._e()],1),t._v(" "),n("div",{staticClass:"col-auto text-nowrap overflow-x-mobile"},[n("subscribe",{class:{"btn-secondary":t.room.isSubscribed,"btn-success":!t.room.isSubscribed},attrs:{"room-id":t.room.id,count:t.room.subscribersCount},model:{value:t.room.isSubscribed,callback:function(e){t.$set(t.room,"isSubscribed",e)},expression:"room.isSubscribed"}}),t._v(" "),n("likeMe",{attrs:{obj:"chat_room",negative:t.room.negative,positive:t.room.positive,"obj-id":t.room.id}}),t._v(" "),n("share-button",{staticClass:"d-inline-block btn btn-secondary",attrs:{image:t.room.cover,limit:100}}),t._v(" "),n("complaint",{attrs:{subject:"stream","subject-id":t.room.id}})],1)])],1)]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showInfo,expression:"showInfo"}],staticClass:"bg-bg room-info-part position-relative"},[n("div",{staticClass:"position-absolute top-0 end-0"},[t.isOwner?n("button",{staticClass:"btn btn-secondary btn-sm",on:{click:t.donateProgressHelperOpen}},[n("i",{staticClass:"fa fa-line-chart"})]):t._e(),t._v(" "),t.isOwner?n("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){return t.settingsOpen({tab:"donation"})}}},[n("i",{staticClass:"fa fa-wrench"}),t._v("\n                        Настроить донаты\n                    ")]):t._e()]),t._v(" "),t.room.donate?n("donaters-list",{attrs:{"show-only":"transactions","owner-id":t.room.ownerId,balans:t.room.balans,"donation-settings":t.room.donationSettings,transactions:t.room.transactions,donaters:t.room.donaters}}):t._e()],1),t._v(" "),t.room.vote?n("div",{staticClass:"position-relative bg-bg room-info-part border"},[n("vote",{directives:[{name:"show",rawName:"v-show",value:t.showInfo,expression:"showInfo"}],key:t.room.vote.id,attrs:{"room-id":t.room.id,vote:t.room.vote}})],1):t._e(),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),t.vertical?n("div",{staticClass:"border py-1 bg-bg text-center collapse-info",on:{click:function(e){t.showInfo=!t.showInfo}}},[n("i",{staticClass:"fa",class:{"fa-arrow-up":t.showInfo,"fa-arrow-down":!t.showInfo}}),t._v("\n                "+t._s(t.showInfo?"Свернуть":"Показать")+"\n            ")]):t._e()],2),t._v(" "),n("div",{ref:"chatContainer",staticClass:"chat-container"},[n("chat",{ref:"chat",attrs:{"room-id":t.room.id,layout:t.layout,"room-alias":t.room.alias}},[t.$root.embed?n("template",{slot:"header"},[n("div",{staticClass:"col-auto"},[t.isOwner||t.global.moder?n("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(e){return t.settingsOpen()}}},[n("i",{staticClass:"fa fa-wrench",attrs:{"aria-hidden":"true"}}),t._v(" Управление\n                        ")]):t._e()])]):t._e()],2)],1)]],2)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row g-0 justify-content-center my-3"},[n("div",{staticClass:"row flex-column g-0 col-auto"},[n("div",{staticClass:"col-auto"},[n("img",{attrs:{src:"/i/blank.png"}})]),t._v(" "),n("div",{staticClass:"col-auto"},[n("div",{staticClass:"alert alert-danger text-center"},[n("strong",[n("i",{staticClass:"fa fa-trash"}),t._v("\n                            Трансляция была удалена\n                        ")])])])])])}],!1,null,null,null).exports;const eh={name:"app_header",props:{},data:function(){return{header:Fg.data.header||this.$route.meta.header||"",nav:Fg.data.nav||[]}},watch:{header:function(){},$route:function(t){}},created:function(){var t=this;this.$root.title(this.getTitleFromRoute(this.$route,this.header)),this.$router.beforeEach((function(e,n,a){t.setHeader(e),a()}))},mounted:function(){},methods:{getTitleFromRoute:function(t,e){return(t.meta&&t.meta.title?t.meta.title:e)||this.global.appName},setHeader:function(t){if(this.$root.$refs.contentStatic&&(this.$root.$refs.contentStatic.style.display="static"!==t.name?"none":"block"),"static"!==t.name){var e=t.meta&&t.meta.header?t.meta.header:null;this.header=e,this.$root.title(this.getTitleFromRoute(t,e))}else this.header=Fg.data.header;this.nav=null}}};const nh=(0,Fl.Z)(eh,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-xl"},[t.nav&&t.nav.length>0?n("nav",{staticClass:"text-center my-2 breadcrumb"},[n("ol",{staticClass:"breadcrumb mx-auto flex-nowrap text-nowrap flex-column2 flex-md-row2 overflow-x-mobile"},[n("router-link",{staticClass:"breadcrumb-item text-muted",attrs:{to:"/"}},[t._v("Главная")]),t._v(" "),t._l(t.nav,(function(e){return e.link?n("router-link",{key:e.text,staticClass:"breadcrumb-item text-muted",attrs:{to:e.link}},[t._v(t._s(e.text))]):n("span",{staticClass:"breadcrumb-item"},[t._v("\n                "+t._s(e.text)+"\n            ")])}))],2)]):t._e(),t._v(" "),"home"===t.$route.name||t.header?n("h1",{attrs:{id:"header"}},[t.global.isNy?n("img",{attrs:{src:"/i/ded.gif"}}):t._e(),t._v(" "),t.header?[t._v("\n            "+t._s(t.header)+"\n        ")]:[t._v("\n            Ливача "),n("div",{staticClass:"slogan"},[t._v("прямые трансляции")])]],2):t._e()])}),[],!1,null,null,null).exports;var ah=n(19642),rh=n(67631),ih=n.n(rh);function sh(t){return(sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oh(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function ch(t,e,n){return(ch="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fh(t)););return t}(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function lh(t,e){return(lh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=fh(t);if(e){var r=fh(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return dh(this,n)}}function dh(t,e){return!e||"object"!==sh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fh(t){return(fh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const hh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lh(t,e)}(i,t);var e,n,a,r=uh(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t,e)).hls=null,n}return e=i,a=[{key:"isSupported",value:function(){return ih().isSupported()}}],(n=[{key:"load",value:function(){var t=this,e=new(ih())({liveSyncDurationCount:0});e.attachMedia(this.video),e.on(ih().Events.MEDIA_ATTACHED,(function(){e.loadSource(t.conn.uri),e.on(ih().Events.MANIFEST_PARSED,(function(e,n){t.emit(ah.Z.LOADED)})),e.on(ih().Events.ERROR,(function(e,n){error("hls error",e,n);var a="unknown HLS error: "+n.type;switch(n.type){case ih().ErrorTypes.NETWORK_ERROR:a="Не могу загрузить файл";break;case ih().ErrorTypes.MEDIA_ERROR:"bufferStalledError"!==n.details&&(a="Не поддерживаемый формат видео")}n.fatal&&t.error(a)}))})),this.hls=e}},{key:"stop",value:function(){this.hls&&this.hls.stopLoad()}},{key:"destroy",value:function(){ch(fh(i.prototype),"destroy",this).call(this),this.hls&&this.hls.destroy()}}])&&oh(e.prototype,n),a&&oh(e,a),i}(ah.Z);const ph=function(){function t(t){return t.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},t.streamFromParts=function(t,e){return t+"&"+e},t.streamToParts=function(t){var e={connection:"",stream:""};if(!t)return e;var n=t.search(/&(?!\w+=)/),a=void 0;return-1!==n?a=n+1:0===(n=a=t.lastIndexOf("/")+1)&&(n=a=t.length),e.connection=t.substring(0,n),e.stream=t.substring(a,t.length),e},t.isStreamingType=function(e){return e in t.streamingFormats},t.RTMP_RE=/^rtmp[set]?:\/\//i,t.isStreamingSrc=function(e){return t.RTMP_RE.test(e)},t.rtmpSourceHandler={},t.rtmpSourceHandler.canPlayType=function(e){return t.isStreamingType(e)?"maybe":""},t.rtmpSourceHandler.canHandleSource=function(e,n){var a=t.rtmpSourceHandler.canPlayType(e.type);return a||(t.isStreamingSrc(e.src)?"maybe":"")},t.rtmpSourceHandler.handleSource=function(e,n,a){var r=t.streamToParts(e.src);n.setRtmpConnection(r.connection),n.setRtmpStream(r.stream)},t}var e="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},a="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},r=a&&a.navigator||{},i=function(){function t(t,e){this.options_=t}return t.prototype.createEl=function(){var e=this.options_,n="flashGlobal";window.flashGlobal=this;var a=Object.assign({readyFunction:"flashGlobal.Flash.onReady",eventProxyFunction:"flashGlobal.Flash.onEvent",errorEventProxyFunction:"flashGlobal.Flash.onError",autoplay:e.autoplay,preload:e.preload,loop:e.loop,muted:e.muted},e.flashVars),r=Object.assign({wmode:"opaque",bgcolor:"#000000"},e.params),i=Object.assign({id:n,name:n,class:"vjs-tech"},e.attributes);return this.el_=t.embed(e.swf,a,r,i),this.el_},t.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},t.prototype.pause=function(){this.el_.vjs_pause()},t.prototype.src=function(t){return void 0===t?this.currentSrc():this.setSrc(t)},t.prototype.setSrc=function(t){var e=this;this.el_.vjs_src(t),this.autoplay()&&this.setTimeout((function(){return e.play()}),0)},t.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},t.prototype.setCurrentTime=function(t){var e=this.seekable();e.length&&(t=(t=t>e.start(0)?t:e.start(0))<e.end(e.length-1)?t:e.end(e.length-1),this.lastSeekTarget_=t,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",t),_Tech.prototype.setCurrentTime.call(this))},t.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},t.prototype.duration=function(){return 1/0},t.prototype.load=function(){this.el_.vjs_load()},t.prototype.poster=function(){this.el_.vjs_getProperty("poster")},t.prototype.setPoster=function(){},t.prototype.seekable=function(){var t=this.duration();return 0===t?createTimeRange():createTimeRange(0,t)},t.prototype.buffered=function(){var t=this.el_.vjs_getProperty("buffered");return 0===t.length?createTimeRange():createTimeRange(t[0][0],t[0][1])},t.prototype.supportsFullScreen=function(){return!1},t.prototype.enterFullScreen=function(){return!1},t.prototype.getVideoPlaybackQuality=function(){var t=this.el_.vjs_getProperty("getVideoPlaybackQuality");return a.performance&&"function"==typeof a.performance.now?t.creationTime=a.performance.now():a.performance&&a.performance.timing&&"number"==typeof a.performance.timing.navigationStart&&(t.creationTime=a.Date.now()-a.performance.timing.navigationStart),t},t}(),s=["rtmpConnection","rtmpStream","preload","defaultPlaybackRate","playbackRate","autoplay","loop","controls","volume","muted","defaultMuted"],o=["networkState","readyState","initialTime","startOffsetTime","paused","ended","videoWidth","videoHeight"],c=i.prototype;function l(t){var e=t.charAt(0).toUpperCase()+t.slice(1);c["set"+e]=function(e){return console.log("setter",t,e),this.el_.vjs_setProperty(t,e)}}function u(t){c[t]=function(){return this.el_.vjs_getProperty(t)}}for(var d=0;d<s.length;d++)u(s[d]),l(s[d]);for(var f=0;f<o.length;f++)u(o[f]);return i.isSupported=function(){return!!(videojs.browser.IS_CHROME&&!videojs.browser.IS_ANDROID||videojs.browser.IS_SAFARI&&!videojs.browser.IS_IOS)||i.version()[0]>=10},i.nativeSourceHandler={},i.nativeSourceHandler.canPlayType=function(t){return t in i.formats?"maybe":""},i.nativeSourceHandler.canHandleSource=function(t,e){var n=void 0;function a(t){var e=Url.getFileExtension(t);return e?"video/"+e:""}return n=t.type?t.type.replace(/;.*/,"").toLowerCase():a(t.src),i.nativeSourceHandler.canPlayType(n)},i.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)},i.nativeSourceHandler.dispose=function(){},i.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},i.onReady=function(t){var e=Dom.$("#"+t),n=e&&e.tech;n&&n.el()&&i.checkReady(n)},i.checkReady=function(t){t.el()&&(t.el().vjs_getProperty?t.triggerReady():this.setTimeout((function(){i.checkReady(t)}),50))},i.onEvent=function(t,e){var n=Dom.$("#"+t).tech,a=Array.prototype.slice.call(arguments,2);n.setTimeout((function(){n.trigger(e,a),n.trigger("flashEvent",e,a)}),1)},i.onError=function(t,e){var n=Dom.$("#"+t).tech;if("srcnotfound"===e)return n.error(4);"string"==typeof e||(e.origin="flash"),n.error(e)},i.version=function(){var t="0,0,0";try{t=new a.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{r.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(t=(r.plugins["Shockwave Flash 2.0"]||r.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(t){}}return t.split(",")},i.embed=function(t,e,n,a){return i.getEmbedCode(t,e,n,a)},i.getEmbedCode=function(t,e,n,a){var r,i="";return(r=document.createElement("object")).setAttribute("type","application/x-shockwave-flash"),e&&Object.getOwnPropertyNames(e).forEach((function(t){i+=t+"="+e[t]+"&amp;"})),n=Object.assign({movie:t,flashvars:i,allowScriptAccess:"always",allowNetworking:"all"},n),Object.getOwnPropertyNames(n).forEach((function(t){var e=document.createElement("param");e.setAttribute("name",t),e.setAttribute("value",n[t]),r.appendChild(e)})),a=Object.assign({data:t,width:"100%",height:"100%"},a),Object.getOwnPropertyNames(a).forEach((function(t){r.setAttribute(t,a[t])})),r},t(i),i}();function mh(t){return(mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vh(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function gh(t,e){return(gh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=bh(t);if(e){var r=bh(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return yh(this,n)}}function yh(t,e){return!e||"object"!==mh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bh(t){return(bh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ch=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gh(t,e)}(i,t);var e,n,a,r=_h(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).flash=new ph({swf:"/i/flash/VideoJS.swf"}),e.conn=t,e}return e=i,(n=[{key:"createEl",value:function(){return this.flash.createEl()}},{key:"load",value:function(t){}}])&&vh(e.prototype,n),a&&vh(e,a),i}(ah.Z);var wh=n(13383),kh=n.n(wh);function xh(t){return(xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sh(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Eh(t,e,n){return(Eh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Oh(t)););return t}(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Th(t,e){return(Th=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ah(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Oh(t);if(e){var r=Oh(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Rh(this,n)}}function Rh(t,e){return!e||"object"!==xh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oh(t){return(Oh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const $h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Th(t,e)}(i,t);var e,n,a,r=Ah(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t,e)).flvPlayer=null,n._mediaInfo=null,n}return e=i,a=[{key:"isSupported",value:function(){return kh().isSupported()}}],(n=[{key:"destroy",value:function(){Eh(Oh(i.prototype),"destroy",this).call(this),this.flvPlayer&&(this.flvPlayer.unload(),this.flvPlayer.destroy(),this.flvPlayer=null)}},{key:"load",value:function(){var t=this;this.flvPlayer=kh().createPlayer({type:"flv",isLive:!0,url:this.conn.uri},{enableStashBuffer:!1,lazyLoad:!1,fixAudioTimestampGap:!1,autoCleanupSourceBuffer:!0,autoCleanupMinBackwardDuration:30,autoCleanupMaxBackwardDuration:60}),this.flvPlayer.on(kh().Events.LOADING_COMPLETE,(function(t,e){})),this.flvPlayer.on(kh().Events.RECOVERED_EARLY_EOF,(function(t,e){})),this.flvPlayer.on(kh().Events.MEDIA_INFO,(function(e){t._mediaInfo=e})),this.flvPlayer.on(kh().Events.METADATA_ARRIVED,(function(t,e){})),this.flvPlayer.on(kh().Events.SCRIPTDATA_ARRIVED,(function(t,e){})),this.flvPlayer.on(kh().Events.STATISTICS_INFO,(function(e){t.stat.fill(),t.stat.bitrate=8*e.speed*1024,t._mediaInfo&&(t.stat.audio.codec=t._mediaInfo.audioCodec+"@"+(t._mediaInfo.audioChannelCount||"-"),t.stat.video.codec=t._mediaInfo.videoCodec+" "+(t._mediaInfo.profile||"")+" "+(t._mediaInfo.level||"")),t.emit("stat",t.stat)})),this.flvPlayer.on("error",(function(e,n){var a="",r=0;switch(n){case kh().ErrorDetails.NETWORK_EXCEPTION:a="Не могу загрузить файл",r|=ah.Z.FLAG_RETRY;break;case kh().ErrorDetails.NETWORK_STATUS_CODE_INVALID:a="Ошибка запроса",r|=ah.Z.FLAG_RETRY;break;case kh().ErrorDetails.NETWORK_TIMEOUT:a="Ошибка сети: превышено время ожидания от сервера",r|=ah.Z.FLAG_RETRY;break;case kh().ErrorDetails.NETWORK_UNRECOVERABLE_EARLY_EOF:a="Стрим внезапно был прерван",r|=ah.Z.FLAG_RETRY;break;case kh().ErrorDetails.MEDIA_MSE_ERROR:a="Ошибка MediaSource";break;case kh().ErrorDetails.MEDIA_FORMAT_ERROR:a="Ошибка формата";break;case kh().ErrorDetails.MEDIA_FORMAT_UNSUPPORTED:a="Формат не поддерживается";break;case kh().ErrorDetails.MEDIA_CODEC_UNSUPPORTED:a="Кодек не поддерживаеся"}a&&t.error(a,r)})),this.flvPlayer.attachMediaElement(this.video),this.flvPlayer.unload(),this.flvPlayer.load()}}])&&Sh(e.prototype,n),a&&Sh(e,a),i}(ah.Z);var Ph=n(65875);function Lh(t){return(Lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dh(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Ih(t,e){return(Ih=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=jh(t);if(e){var r=jh(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Nh(this,n)}}function Nh(t,e){return!e||"object"!==Lh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jh(t){return(jh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Fh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ih(t,e)}(i,t);var e,n,a,r=Mh(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r.call(this,t,e)}return e=i,a=[{key:"isSupported",value:function(){}}],(n=[{key:"_sendCandidate",value:function(){}},{key:"load",value:function(){var t=this,e=this._createPC();this._createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then((function(n){pl.V.raw(t.conn.uri,{sdp:n.sdp,streamurl:t.conn.streamurl,tid:t.conn.name}).then((function(n){if(n.code)return t.error(n.code),void error(n.code);e.setRemoteDescription({type:"answer",sdp:n.sdp}).then((function(){log("setRemoteDescription ok")})).catch((function(e){error(e),t.error(e)}))})).catch((function(e){t.error(e)}))})).catch((function(e){t.error(e)}))}}])&&Dh(e.prototype,n),a&&Dh(e,a),i}(Ph.Z);function Bh(t){return(Bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uh(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Vh(t,e,n){return(Vh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zh(t)););return t}(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Hh(t,e){return(Hh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=zh(t);if(e){var r=zh(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Gh(this,n)}}function Gh(t,e){return!e||"object"!==Bh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zh(t){return(zh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const qh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hh(t,e)}(i,t);var e,n,a,r=Zh(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r.call(this,t,e)}return e=i,a=[{key:"isSupported",value:function(){}}],(n=[{key:"destroy",value:function(){Vh(zh(i.prototype),"destroy",this).call(this)}},{key:"_sendCandidate",value:function(){}},{key:"load",value:function(){this._createPC(),alert("x")}}])&&Uh(e.prototype,n),a&&Uh(e,a),i}(Ph.Z);function Kh(t){return(Kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wh(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Yh(t,e){return(Yh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Qh(t);if(e){var r=Qh(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Jh(this,n)}}function Jh(t,e){return!e||"object"!==Kh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qh(t){return(Qh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const tp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yh(t,e)}(i,t);var e,n,a,r=Xh(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r.call(this,t,e)}return e=i,a=[{key:"isSupported",value:function(){return document.createElement("video").canPlayType("application/vnd.apple.mpegurl")}}],(n=[{key:"load",value:function(){this.video.src=this.conn.uri}},{key:"stop",value:function(){this.video.src=null}},{key:"destroy",value:function(){this.video.src=null}}])&&Wh(e.prototype,n),a&&Wh(e,a),i}(ah.Z);n(17187);var ep=n(34796),np=n.n(ep),ap=n(47535),rp={insert:"head",singleton:!1};$d()(ap.Z,rp);ap.Z.locals;const ip={name:"json_dump",props:{data:{type:Object},deep:{type:Number,default:1},root_comp:{type:String,default:"div"}},data:function(){return{}},components:{VueJsonPretty:np()},created:function(){},mounted:function(){},methods:{}};var sp=n(89297),op={insert:"head",singleton:!1};$d()(sp.Z,op);sp.Z.locals;const cp=(0,Fl.Z)(ip,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t._modal_or_div,t._b({tag:"component"},"component","modal"===t.root_comp?{title:"Инфо"}:{},!1),[n("vue-json-pretty",{attrs:{deep:t.deep,"selectable-type":"single","select-on-click-node":!0,data:t.data}})],1)}),[],!1,null,null,null).exports,lp={name:"player_options",props:{conn:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const up=(0,Fl.Z)(lp,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",[n("div",{staticClass:"mb-3"},[t._v("\n        Тип плеера:\n        "),t.conn?n("select",{directives:[{name:"model",rawName:"v-model",value:t.conn.type,expression:"conn.type"}],staticClass:"border",attrs:{name:"type"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.conn,"type",e.target.multiple?n:n[0])},function(e){return t.$emit("type",e.target.value)}]}},[n("option",{attrs:{value:"auto"}},[t._v("Авто")]),t._v(" "),t._l(t.conn.typesAvail,(function(e){return"rtmp"!==e.id?n("option",{domProps:{value:e.id}},[t._v("\n                "+t._s(e.name)+"\n            ")]):t._e()}))],2):t._e()]),t._v(" "),n("div",{staticClass:"mb-3"},[t._v("\n        Выбрать сервер:"),n("br"),t._v(" "),t.conn?n("select",{directives:[{name:"model",rawName:"v-model",value:t.conn.server_id,expression:"conn.server_id"}],staticClass:"border",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.conn,"server_id",e.target.multiple?n:n[0])},function(e){return t.$emit("server",e.target.value)}]}},[n("option",{attrs:{value:"0"}},[t._v("Авто")]),t._v(" "),t._l(t.conn.servers,(function(e){return n("option",{domProps:{value:e.id}},[t._v("\n                "+t._s(e.name)+"\n            ")])}))],2):t._e()]),t._v(" "),t.conn.rtmp?n("div",[t._v("\n        Прямая ссылка RTMP потока:\n        "),n("div",{staticClass:"input-group"},[n("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.conn.rtmp}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("copy",{attrs:{text:t.conn.rtmp}})],1)]),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("\n            плееры:\n            "),n("a",{staticClass:"text-reset",attrs:{href:"https://potplayer.ru",target:"_blank"}},[t._v("PotPlayer")]),t._v(" "),n("a",{staticClass:"text-reset",attrs:{href:"https://www.videolan.org/vlc/index.ru.html",target:"_blank"}},[t._v("VLC")]),t._v(" "),n("a",{staticClass:"text-reset",attrs:{href:"https://sourceforge.net/projects/guliverkli/",target:"_blank"}},[t._v("MPC-HC")])])]):t._e(),t._v(" "),t.global.admin?n("stream-info",{staticClass:"mt-3",attrs:{conn:t.conn}}):t._e()],1)}),[],!1,null,null,null).exports;var dp=n(56410),fp=n(15991);function hp(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return pp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function pp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function mp(t){return(mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}const vp={name:"player",props:{roomId:{type:Number},connection:{type:Object},filledH:{type:Boolean,default:!1},mute:Boolean},data:function(){var t=Cl.Z.storage("playerVolume"),e=Cl.Z.storage("playerMuted"),n=Cl.Z.storage("playerType");return{conn:null,serverId:0,played:!1,password:"",errorStr:"",customVideoElement:"",volume:null!==t?100*t:100,muted:null!==e&&"1"===e||this.mute,statusStr:"",status:0,pause:!1,stat:new fp.Z,bufferOptions:{auto:!0,size:0},statShow:!1,settingsShow:!1,progressTime:"",progressBarHover:!1,fps:0,type:n||"auto",fullscreenMode:!1,forceHideUI:!1,videoClicked:!1,videoBuffering:!1,tracksMuted:{audio:!1,video:!1},statsImpl:null,videoFreeze:!0,filledH$:this.filledH}},destroyed:function(){this.ws&&this.ws.off("message",this.messageListener),this.progressBar&&(this.progressBar.removeEventListener("mousemove",this.onProgressBarMove),this.progressBar.removeEventListener("mouseout",this.onProgressBarOut),this.progressBar.removeEventListener("mouseover",this.onProgressBarOver),this.progressBar.removeEventListener("click",this.onProgressBarClick)),this.destroyImpl(),this.$el.removeEventListener("mousemove",this.onActivateUI),this.$el.removeEventListener("mouseout",this.onMouseOut),this.hammer&&this.hammer.destroy()},created:function(){var t=this;this.statuses={offline:"Трансляция приостановлена",pause:"На паузе"},this.playerImpl=null,this.prevVideoFrames=0,this.videoListeners=[],this.inspector=null,this.waitCount=0,this.watchRun=!0,this.watchTm=null,this.reloader=new bl({0:3e3,5:5e3,10:1e4}),this.activateUITM=null,this.ws=this.$root.ws,this.ws.on("message",this.messageListener);var e=Cl.Z.storage("playerBufferOptions");e&&(this.bufferOptions=e),this.$root.$on("fullscreenchange",(function(e){e&&e!==t.$el||(t.fullscreenMode=!!e,t.fullscreenMode,t.forceHideUI=!0)})),this.$watch("bufferOptions",(function(){Cl.Z.storage("playerBufferOptions",t.bufferOptions),t.inspector&&t.inspector.setOptions(t.bufferOptions)}),{deep:!0}),this.$root.$on("stream-pass-enter",(function(e){t.password=e,t.loadConnection()}))},computed:{currentPlayerTypeName:function(){var t=this;return this.conn?this.conn.typesAvail.find((function(e,n,a){return t.conn.type===e.id})):null}},mounted:function(){var t=this;this.video=this.$refs.video,this.timeCurrent=this.$refs.timeCurrent,this.progressBar=this.$refs.progressBar,this.streamProgress=this.$refs.streamProgress,this.connection?this.updateConnection(this.connection):this.loadConnection(),this.videoEvents(),this.volumer=this.$refs.volumer,this.volumer.$on("change",(function(e){var n=t.setVolume(e);Cl.Z.storage("playerVolume",n)})),this.setVolume(this.volume),this.progressBar&&(this.progressBar.addEventListener("mousemove",this.onProgressBarMove),this.progressBar.addEventListener("mouseleave",this.onProgressBarOut),this.progressBar.addEventListener("mouseover",this.onProgressBarOver),this.progressBar.addEventListener("click",this.onProgressBarClick)),this.$el.addEventListener("mousemove",this.onActivateUI),this.$el.addEventListener("mouseout",this.onMouseOut),Cl.Z.isTouch()&&(this.hammer=new Hammer(this.$el),this.hammer.get("pan").set({direction:Hammer.DIRECTION_VERTICAL,threshold:50}),this.hammer.get("tap").set({taps:2}),this.hammer.on("pandown panup tap",(function(e){error(e.type,e.tapCount,e),"pandown"===e.type?t.fullscreenMode?t.fullscreen():t.filledH$=!0:"panup"===e.type?t.fullscreenMode?t.fullscreen():t.filledH$=!1:"tap"===e.type&&t.fullscreen()}))),this.watch()},methods:{onActivateUI:function(){var t=this;this.forceHideUI=!1,this.fullscreenMode&&(this.activateUITM&&(clearTimeout(this.activateUITM),this.activateUITM=null),Cl.Z.isTouch()||(this.activateUITM=setTimeout((function(){t.forceHideUI=!0}),1e3)))},onMouseOut:function(){},getBuffer:function(){var t=this.video;if(t&&t.buffered.length){var e=t.buffered.start(0),n=t.buffered.end(0);return{start:e,end:n,size:n-e}}},updateStat:function(){var t=this.getBuffer(),e=this.video,n=e.getVideoPlaybackQuality?e.getVideoPlaybackQuality():{},a=n.droppedVideoFrames>0&&n.totalVideoFrames>0?100*n.droppedVideoFrames/n.totalVideoFrames:0,r=this.prevVideoFrames>0&&n.totalVideoFrames>0?n.totalVideoFrames-this.prevVideoFrames:0;head.browser.ff&&!this.videoBuffering&&0===r&&(r=void 0),this.prevVideoFrames=n.totalVideoFrames;var i=this.statsImpl;if(this.stat.fill(),Object.assign(this.stat.video,{width:e.videoWidth,height:e.videoHeight,dropped:n.droppedVideoFrames,fps:r}),t&&(Object.assign(this.stat.video,{frames:n.totalVideoFrames,droppedPerc:a.toFixed(2)}),Object.assign(this.stat,{buffLen:t.size.toFixed(2),waitCount:this.waitCount,buffDelta:(t.end-e.currentTime).toFixed(2)})),i)for(var s in i)if(i.hasOwnProperty(s))if("object"===mp(i[s]))for(var o in i[s])void 0===this.stat[s][o]&&(this.stat[s][o]=i[s][o]);else void 0===this.stat[s]&&(this.stat[s]=i[s]);this.stat.bitrate&&(this.stat.bitrate=this.formatBitrate(this.stat.bitrate)),this.stat.video.bitrate&&(this.stat.video.bitrate=this.formatBitrate(this.stat.video.bitrate)),this.stat.audio.bitrate&&(this.stat.audio.bitrate=this.formatBitrate(this.stat.audio.bitrate)),this.fps=this.stat.video.fps},formatBitrate:function(t){return Math.round(parseInt(t)/1024)},watchReset:function(){this.waitCount=0,this.prevVideoFrames=0,this.fps=0,this.fpsStuck=0,this.stat.fill()},watch:function(t){var e=this;this._isDestroyed||(this.watchTm=setTimeout((function(){e.updateStat(),e.fps?e.fpsStuck=0:e.fpsStuck++,e.videoFreeze=e.fpsStuck>3,e.streamProgress,e.watchRun&&e.watch()}),1e3))},getProgressX:function(t){var e=this.progressBar.getBoundingClientRect(),n=t.clientX-e.left;t.clientY,e.top;return n},getTimeByX:function(t){var e=this.video,n=this.progressBar;if(e.buffered.length&&!(t<0)){var a=e.buffered.start(0);return a+(e.buffered.end(0)-a)*t/n.clientWidth}},onProgressBarMove:function(t){var e=this.video;if(e.buffered.length){e.buffered.start(0),e.buffered.end(0);var n=this.getProgressX(t);if(a){var a=this.getTimeByX(n);this.timeCurrent.style.width=n+"px";var r=(a-e.currentTime).toFixed(2);this.progressTime=r>0?"+"+r:"-"+Math.abs(r)}}},onProgressBarClick:function(t){var e=this.video,n=this.getProgressX(t),a=this.getTimeByX(n);a&&(log("seek to",a),e.currentTime=a,this.setProgressTime(a))},onProgressBarOver:function(){this.progressBarHover=!0},onProgressBarOut:function(){this.progressTime="",this.progressBarHover=!1,this.setProgressTime(this.video.currentTime)},updateTimeline:function(){this.progressBarHover||this.setProgressTime(this.video.currentTime)},setProgressTime:function(t){var e=this.video;if(e.buffered.length){var n=e.buffered.start(0),a=e.buffered.end(0);if(!(t>a||t<n)){var r=100*(t-n)/(a-n);this.timeCurrent.style.width=r+"%"}}},sync:function(){var t=this.getBuffer();t&&(this.video.currentTime=t.end-1)},setVolume:function(t){return this.video.volume=t/100},messageListener:function(t,e,n){switch(t){case"streamsUpdate":e.room&&e.room.id===this.roomId&&("publish"===e.type&&(this.pause?this.setStatus("pause"):this.play()),"stop"===e.type&&(this.reloader.cancel(),this.setStatus("offline"),this.destroyImpl()))}},muteToggle:function(){this.video.muted=!this.video.muted,Cl.Z.storage("playerMuted",this.video.muted?"1":"0")},playToggle:function(t){this.pause=!this.pause||t,this.pause?(this.setStatus("pause"),this.playerImpl&&"function"==typeof this.playerImpl.pause?this.playerImpl.pause():this.destroyImpl()):this.playerImpl&&"function"==typeof this.playerImpl.resume?this.playerImpl.resume():this.play()},error:function(t){this.errorStr=Cl.Z.objToStr(t)},setStatus:function(t){this.errorStr="",t?(this.status=t,this.statusStr=this.statuses[t]||""):(this.status=0,this.statusStr="")},videoEvents:function(){var t=this;this.removeVideoListeners(),dp.Z.getAllVideoEvents().forEach((function(e){t.addVideoListener(e,(function(){-1===["progress","timeupdate"].indexOf(e)&&info(e,t.video.readyState)}))})),this.addVideoListener("loadedmetadata",(function(){log("loadedmetadata"),t.setStatus("loadedmetadata"),t.tryPlayNative()})),this.addVideoListener("playing",(function(){t.setStatus("play")})),this.addVideoListener("volumechange",(function(){t.volumer.value(100*t.video.volume),t.muted=t.video.muted})),this.addVideoListener("durationchange",(function(e){t.updateTimeline()})),this.addVideoListener("progress",(function(e){t.updateTimeline()})),this.addVideoListener("waiting",(function(e){t.waitCount++})),this.addVideoListener("error",(function(e){error("Video error",t.video.error)}))},play:function(){var t=this;if(this.error(!1),this.setStatus("loading"),this.watchReset(),this.tracksMuted={audio:!1,video:!1},this.videoBuffering=!0,this.reloader.pause(),this.destroyImpl(),!this.conn)return error("no conn, cancel play");var e=this.conn.type;if(log("load",e,this.conn.connection),"hls"===e)if(hh.isSupported())this.playerImpl=new hh(this.conn.connection,this.video);else{if(!tp.isSupported())return this.error("HLS не поддерживается на вашем устройстве");this.playerImpl=new tp(this.conn.connection,this.video)}else if("rtmp2"===e)this.playerImpl=new Ch(this.conn.connection,this.video);else if("flv2js"===e){if(!$h.isSupported())return this.error("MediaSource не поддерживается на вашем устройстве");this.playerImpl=new $h(this.conn.connection,this.video)}else if("webrtcs"===e)this.playerImpl=new Fh(this.conn.connection,this.video),this.videoBuffering=!1;else{if("webrtc"!==e)return this.error("Не поддерживаемый тип: "+e);this.playerImpl=new qh(this.conn.connection,this.video),this.videoBuffering=!1}this.playerImpl.load(),this.playerImpl.on("error",(function(e,n){t.playerImpl&&(error("error impl",e),t.error(e),t.destroyImpl(),n&ah.Z.FLAG_RETRY?t.reload():t.reload(!1))})),this.playerImpl.on("trackmute",(function(e){t.tracksMuted[e.kind]=!0})),this.playerImpl.on("trackunmute",(function(e){t.tracksMuted[e.kind]=!1})),this.playerImpl.on("stat",(function(e){t.statsImpl=e})),this.inspector&&(this.inspector.destroy(),this.inspector.removeAllListeners())},destroyImpl:function(){this.playerImpl&&(this.playerImpl.destroy(),this.playerImpl=null),this.statsImpl=null},tryPlayNative:function(){var t=this;this.video.play().then((function(){log("play! -)")})).catch((function(){info("failed to play :-(. Try again with muted :-)"),t.video.muted=!0,t.tryPlayNative()}))},removeVideoListeners:function(){var t,e=hp(this.videoListeners);try{for(e.s();!(t=e.n()).done;){var n=t.value;log("remove event from video",n.type,n.listener),this.video.removeEventListener(n.type,n.listener)}}catch(t){e.e(t)}finally{e.f()}this.videoListeners=[]},addVideoListener:function(t,e){this.videoListeners.push({type:t,listener:e}),this.video.addEventListener(t,e)},reload:function(t){var e=this;void 0===t||t?this.reloader.start((function(){e.play()})):this.reloader.cancel()},updateConnection:function(t){this.conn=t,t.live?this.play():this.setStatus("offline")},loadConnection:function(t){var e=this,n=new pl.V;t&&(Cl.Z.storage("playerType",t),this.type=t),this.error(!1),this.offline=!1,this.setStatus("loading"),this.reloader.pause();var a={type:t||this.type,room_id:this.roomId,server_id:this.serverId||0,browser:head.browser.name,browser_detail:head.browser,flash:0,mobile:head.mobile?1:0,mse:$h.isSupported()?1:0,password:this.password};n.request("playerConnection",a).then((function(t,n){log("load conn",t),e.updateConnection(t)})).catch((function(t){e.error(t)}))},fullscreen:function(){this.settingsShow=!1,this.fullscreenMode?this.$root.exitFullscreen():this.$root.requestFullscreen(this.$el)},clickVideoWrapper:function(){this.videoClicked=!this.videoClicked},openStreamOptions:function(){var t=this,e=this.$root.render(up,{conn:this.conn});e.$on("type",(function(e){t.loadConnection(e)})),e.$on("server",(function(e){t.serverId=e,t.loadConnection()}))}}};const gp=(0,Fl.Z)(vp,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-playable app-player border",attrs:{"data-fill-h":t.filledH$,"data-video-clicked":t.videoClicked,"data-fullscreen":t.fullscreenMode,"data-ui-hidden":t.forceHideUI}},[n("header",{staticClass:"px-3 py-1 bg-light"},[n("div",{staticClass:"row justify-content-end gx-3"},[n("div",{staticClass:"col-auto"},[n("div",{staticClass:"cursor-pointer",on:{click:t.openStreamOptions}},[n("i",{staticClass:"fa fa-cog"}),t._v(" "),n("span",{staticClass:"app-link"},[t._v(t._s(t.currentPlayerTypeName?t.currentPlayerTypeName.name:"None"))])])]),t._v(" "),n("div",{staticClass:"col-auto",on:{click:function(e){return t.loadConnection()}}},[n("i",{staticClass:"icon-action fa fa-refresh"})]),t._v(" "),t.$root.floatingSupported?n("div",{staticClass:"col-auto"},[n("floating-toggler",{staticClass:"p-0 icon-action"})],1):t._e()])]),t._v(" "),n("main",{staticClass:"playable-abs",on:{click:t.clickVideoWrapper}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.status,expression:"status"}],staticClass:"loader text-center",staticStyle:{"z-index":"1"}},[t.errorStr?n("div",{staticClass:"alert alert-danger m-0 py-0 px-1"},[n("strong",[n("i",{staticClass:"fa fa-meh-o"}),t._v("\n                    "+t._s(t.errorStr)+"\n                ")])]):t.statusStr?n("div",{staticClass:"alert alert-secondary m-0 py-0 px-1"},[n("strong",["pause"===t.status?n("i",{staticClass:"fa fa-pause text-danger"}):t._e(),t._v(" "),"offline"===t.status?n("i",{staticClass:"fa fa-stop"}):t._e(),t._v("\n                    "+t._s(t.statusStr)+"\n                ")])]):"loading"===t.status?n("div",{staticClass:"image"},[n("img",{attrs:{src:"/i/gosha.gif"}})]):t._e()]),t._v(" "),t.customVideoElement?n("div",{staticClass:"videoElement",domProps:{innerHTML:t._s(t.customVideoElement)}}):n("video",{ref:"video",staticClass:"videoElement",attrs:{poster:t.conn?t.conn.poster:"",playsinline:""},domProps:{muted:t.muted}}),t._v(" "),t.stat?n("div",{directives:[{name:"show",rawName:"v-show",value:t.statShow,expression:"statShow"}],staticClass:"debug-player-box"},[n("div",[n("i",[t._v("\n                    Host:\n                    "),n("span",[t._v(t._s(t.conn&&t.conn.connection.host))])]),t._v(" "),n("i",[t._v("\n                    PlayerType:\n                    "),n("span",[t._v(t._s(this.conn&&this.conn.type))])]),t._v(" "),n("i",[t._v("\n                    Resolution:\n                    "),n("span",[t._v(t._s(t.stat.video.width||"-")+"x"+t._s(t.stat.video.height||"-"))])]),t._v(" "),n("i",[t._v("FPS: "),n("span",[t._v(t._s(t.stat.video.fps))])]),t._v(" "),void 0!==t.stat.bitrate?n("i",[t._v("\n                    Speed:\n                    "),n("span",[t._v("\n                        "+t._s(t.stat.bitrate||"-")+" kbps\n                    ")])]):t._e(),t._v(" "),t.stat.audio.codec||void 0!==t.stat.audio.bitrate?n("i",[t._v("\n                    Audio:\n                    "),n("span",[t._v("\n                        "+t._s(t.stat.audio.codec||"-")+"\n\n                        "),void 0!==t.stat.audio.bitrate?[t._v("\n                            "+t._s(t.stat.audio.bitrate)+"kbps\n                        ")]:t._e()],2)]):t._e(),t._v(" "),void 0!==t.stat.video.bitrate||t.stat.video.codec?n("i",[t._v("\n                    Video:\n                    "),n("span",[t._v("\n                        "+t._s(t.stat.video.codec||"-")+" ("+t._s(void 0!==t.stat.video.codecImpl?t.stat.video.codecImpl:"???")+")\n\n                        "),void 0!==t.stat.video.bitrate?[t._v("\n                            "+t._s(t.stat.video.bitrate)+"kbps\n                        ")]:t._e()],2)]):t._e(),t._v(" "),t.videoBuffering?[t._e(),t._v(" "),n("i",[t._v("Dropped: "),n("span",[t._v(t._s(t.stat.video.droppedPerc)+"%("+t._s(t.stat.video.dropped)+")")])]),t._v(" "),n("i",[t._v("Wait: "),n("span",[t._v(t._s(t.stat.waitCount))])]),t._v(" "),n("i",[t._v("Buffer: "),n("span",[t._v(t._s(t.stat.buffLen)+" / "+t._s(t.stat.buffDelta))])])]:t._e()],2)]):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.settingsShow,expression:"settingsShow"}],staticClass:"settings-popup bg-light border p-3"},[t.videoBuffering?n("div",{staticClass:"mb-2"},[n("label",{staticClass:"form-check form-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.bufferOptions.auto,expression:"bufferOptions.auto"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.bufferOptions.auto)?t._i(t.bufferOptions.auto,null)>-1:t.bufferOptions.auto},on:{change:function(e){var n=t.bufferOptions.auto,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&t.$set(t.bufferOptions,"auto",n.concat([null])):i>-1&&t.$set(t.bufferOptions,"auto",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.bufferOptions,"auto",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Авто-буфер")])]),t._v(" "),n("select",{directives:[{name:"show",rawName:"v-show",value:!t.bufferOptions.auto,expression:"!bufferOptions.auto"},{name:"model",rawName:"v-model",value:t.bufferOptions.size,expression:"bufferOptions.size"}],staticClass:"w-100",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.bufferOptions,"size",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"0.5"}},[t._v("0.5s.")]),t._v(" "),n("option",{attrs:{value:"1"}},[t._v("1s.")]),t._v(" "),n("option",{attrs:{value:"2"}},[t._v("2s.")]),t._v(" "),n("option",{attrs:{value:"3"}},[t._v("3s.")]),t._v(" "),n("option",{attrs:{value:"4"}},[t._v("4s.")]),t._v(" "),n("option",{attrs:{value:"5"}},[t._v("5s.")]),t._v(" "),n("option",{attrs:{value:"10"}},[t._v("10s.")])])]):t._e(),t._v(" "),n("label",{staticClass:"form-check form-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.statShow,expression:"statShow"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.statShow)?t._i(t.statShow,null)>-1:t.statShow},on:{change:function(e){var n=t.statShow,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&(t.statShow=n.concat([null])):i>-1&&(t.statShow=n.slice(0,i).concat(n.slice(i+1)))}else t.statShow=r}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Статистика")])]),t._v(" "),n("div",{staticClass:"text-end"},[n("button",{staticClass:"btn btn-sm btn-light",attrs:{"data-title":"Полный экран"},on:{click:function(e){return t.fullscreen()}}},[n("i",{staticClass:"fa fa-arrows-alt",attrs:{"aria-hidden":"true"}}),t._v(" полный экран")])])])]),t._v(" "),n("footer",{staticClass:"bg-light"},[n("div",{staticClass:"row g-0 align-items-center flex-nowrap"},[n("div",{staticClass:"controls col-auto"},[n("i",{staticClass:"fa icon-action",class:{"fa-play":"play"!==t.status,"fa-pause":"play"===t.status},on:{click:function(e){return t.playToggle()}}})]),t._v(" "),n("div",{staticClass:"controls col-auto"},[n("i",{staticClass:"fa icon-action",class:{"fa-volume-up":!t.muted,"fa-volume-off text-danger":t.muted},on:{click:function(e){return t.muteToggle()}}})]),t._v(" "),n("div",{staticClass:"col-auto mx-2",staticStyle:{width:"80px"}},[n("slider",{ref:"volumer",attrs:{type:"horizontal"}})],1),t._v(" "),n("div",{staticClass:"col ps-2"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.videoBuffering,expression:"videoBuffering"}],ref:"progressBar",staticClass:"time-bar d-none",class:{"d-sm-block":t.videoBuffering}},[n("div",{staticClass:"popup"},[t._v("\n                        "+t._s(t.progressTime)+"\n                    ")]),t._v(" "),n("div",{ref:"timeCurrent",staticClass:"current"})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isFloating&&!t.fullscreenMode,expression:"!isFloating && !fullscreenMode"}],staticClass:"col-auto"},[n("button",{directives:[{name:"title",rawName:"v-title",value:"Расширить по высоте",expression:"'Расширить по высоте'"}],staticClass:"btn btn-light",on:{click:function(e){t.filledH$=!t.filledH$}}},[n("i",{staticClass:"fa fa-arrows-v",attrs:{"aria-hidden":"true"}})])]),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{directives:[{name:"title",rawName:"v-title",value:"Полный экран",expression:"'Полный экран'"}],staticClass:"btn btn-light",on:{click:function(e){return t.fullscreen()}}},[n("i",{staticClass:"fa fa-arrows-alt",attrs:{"aria-hidden":"true"}})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"play"===t.status,expression:"status === 'play'"}],staticClass:"col-auto px-2"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.videoFreeze&&t.videoBuffering,expression:"!videoFreeze && videoBuffering"}],ref:"streamProgress",staticClass:"spinner-border icon-action stream-progress",staticStyle:{"animation-duration":"3s"},attrs:{role:"status"},on:{click:t.sync}},[n("div",{staticClass:"app-centerred-abs fps"},[t._v(t._s(t.fps))])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.videoFreeze,expression:"videoFreeze"}],staticClass:"spinner-grow cursor-pointer text-danger",attrs:{role:"status"},on:{click:t.sync}})]),t._v(" "),n("div",{staticClass:"col-auto controls"},[n("i",{ref:"settingsPopupBtn",staticClass:"fa fa-bars icon-action",attrs:{"aria-hidden":"true"},on:{click:function(e){t.settingsShow=!t.settingsShow}}})])])]),t._v(" "),(t.tracksMuted.audio||t.tracksMuted.video,n("div",{staticClass:"position-absolute bottom-0 start-0"},t._l(t.tracksMuted,(function(e,a){return e?n("div",{staticClass:"px-3 py-0 bg-dark"},[n("strong",{staticClass:"text-danger"},[n("i",{staticClass:"fa",class:{"fa-video-camera":"video"===a,"fa-volume-up":"audio"===a}}),t._v("\n                "+t._s("audio"===a?"звук отключен":"видео отключено")+"\n            ")])]):t._e()})),0))])}),[],!1,null,null,null).exports;const _p={name:"video_player",props:{src:{type:String},controls:{},preload:{}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const yp=(0,Fl.Z)(_p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-inline-block"},[n("video",{staticClass:"mw-100",attrs:{src:t.src,controls:t.controls,preload:t.preload}})])}),[],!1,null,null,null).exports;function bp(t){return(bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cp(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return wp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function wp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function kp(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var xp=function(){function t(e,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.deviceId=n,this.label=a}var e,n,a;return e=t,a=[{key:"fromDev",value:function(e){return new t("dev",e.deviceId,e.label)}},{key:"fromDisplay",value:function(){return new t("display","display","Экран")}}],(n=null)&&kp(e.prototype,n),a&&kp(e,a),t}();const Sp={name:"video_capture",components:{Json_dump:cp},props:{audioOnly:{type:Boolean,default:!1},videoSource:{type:String},options:{type:Object},saveDevs:{type:Boolean,default:!0}},data:function(){var t={width:"optimal",fps:"optimal",aspectRatio:"auto",autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,spectrum:"auto",audioTransform:"auto",time:0},e={};try{e=navigator.mediaDevices.getSupportedConstraints()}catch(t){error("supportedConstraints error: ",t)}return{settingsDefault:Object.assign({},t),settingsUser:Object.assign({},t),settings:Object.assign({},t),supportedConstraints:e,streamProps:["aspectRatio","width","fps","noiseSuppression","autoGainControl","echoCancellation"],cameras:[],mics:[],constraints:null,videoEnabled:!1,audioEnabled:!1,getDevicesCount:0,cameraSelected:this.videoSource||null,micVolumeOpen:!1,micVolume:100,spectrumEnabled:!0,micSelected:null,settionsOpen:!1,maxResolution:{width:0,height:0},resolutions:[{label:"Авто",width:"auto",height:0},{label:"Оптимально",width:"optimal",height:0},{label:"320 (QVGA)",width:320,height:0},{label:"480",width:480,height:0},{label:"640 (VGA)",width:640,height:0},{label:"1024",width:1024,height:0},{label:"1280 (HD 720p)",width:1280,height:0},{label:"1366",width:1366,height:0},{label:"1920 (Full HD)",width:1920,height:0}],pendingStream:!1,audioOnly$:this.audioOnly,spectrumHidden:!0,tracksEnabled:{video:!0,audio:!0},captureDisplaySupport:"function"==typeof navigator.mediaDevices.getDisplayMedia}},destroyed:function(){this.destroyStream(),this.$root.$off("resize_delay",this.resizeDelayHandler)},created:function(){var t=this;this.settingsKey="video_capture",this.$watch("settingsUser",(function(){var e=t.settingsUser;t.settings=Object.assign(t.settings,e),"optimal"===e.width&&(t.settings.width=head.browser.chrome||head.browser.ff?640:"auto"),"optimal"===e.fps&&(t.settings.fps=head.browser.chrome?15:"auto"),"auto"===e.spectrum&&(t.settings.spectrum=!head.mobile),"auto"===e.audioTransform&&(t.settings.audioTransform=!Cl.Z.isTouch()&&(head.browser.chrome||head.browser.ff)),Cl.Z.storage(t.settingsKey,t.settingsUser)}),{deep:!0}),this.$watch("settings.spectrum",(function(e,n){e?t.enableSpectrum():t.disableSpectrum()})),this.$watch("settings.audioTransform",(function(e,n){e||t.destroyAudioTransform(),t.stream&&t.getStream()}));var e,n=function(e,n){log("streamProps changes: ",e,n),t.stream&&t.applyConstraints()},a=Cp(this.streamProps);try{for(a.s();!(e=a.n()).done;){var r=e.value;this.$watch("settings."+r,n)}}catch(t){a.e(t)}finally{a.f()}Object.assign(this.settingsUser,{time:(new Date).getTime()},Cl.Z.storage(this.settingsKey)||{}),this.micSelected=Cl.Z.storage("mic")||void 0,this.cameraSelected||(this.cameraSelected=Cl.Z.storage("cam")||void 0),"none"===this.micSelected&&(this.micSelected=void 0),"none"===this.cameraSelected&&(this.cameraSelected=void 0),"display"!==this.cameraSelected||this.captureDisplaySupport||(this.cameraSelected=void 0,this.$emit("error","Ваше устройство не поддерживает захват экрана")),this.stream=null,this.video=null,this.$watch("micVolume",(function(){log("mic volume change",t.micVolume),t.gain?t.gain.gain.value=t.micVolume/100:error("no gain")}),{}),this.$root.$on("resize_delay",this.resizeDelayHandler),this.devicesOk=!1},mounted:function(){var t=this;if(this.video=this.$refs.videoEl,this.micVolumeEl=this.$refs.micVolume,this.spectrum=this.$refs.spectrum,$.fn.slider&&this.micVolumeEl){var e=$(this.micVolumeEl).slider({orientation:"vertical",range:"min",min:0,max:100,value:this.micVolume,slide:function(e,n){t.micVolume=n.value}});this.volumeAnimEl=e.find(".ui-slider-range"),this.volumeHeight=e.height()}else error("jquery slider disabled");setTimeout((function(){t.$emit("ready")}),1)},computed:{constraintsPrintable:function(){return JSON.parse(JSON.stringify(this.constraints,null,"  "))}},methods:{resizeDelayHandler:function(){this.spectrumPosition()},init:function(){var t=this;return this.getDevices().finally((function(){return t.getStream()}))},streamOff:function(){this.destroyStream()},resetSettings:function(){var t=this;this.settingsUser=Object.assign({},this.settingsDefault),this.$nextTick((function(){Cl.Z.storageRemove(t.settingsKey)}))},setMaxResolution:function(t,e){this.maxResolution={width:t,height:e}},getDevices:function(){var t=this;return this.mics=[],this.cameras=[],this.audioEnabled=!1,this.videoEnabled=!1,this.getDevicesCount++,navigator.mediaDevices&&"getDisplayMedia"in navigator.mediaDevices&&this.cameras.push(xp.fromDisplay()),navigator.mediaDevices.enumerateDevices().then((function(e){var n="";e.forEach((function(e){"audioinput"===e.kind?(e.deviceId&&(t.mics.push(xp.fromDev(e)),n+=e.label),t.audioEnabled=!0):"videoinput"===e.kind&&(e.deviceId&&(t.cameras.push(xp.fromDev(e)),n+=e.label),t.videoEnabled=!0)})),t.devicesOk=n.length>3,t.audioEnabled||1!==t.getDevicesCount||t.$emit("error","Не удалось определить активные микрофоны. Подсоедините микрофон и активируйте его. Перезагрузите потом эту страницу"),t.videoEnabled||1!==t.getDevicesCount||t.$emit("error","Не удалось определить активные камеры. Подсоедините камеру и перезагрузите потом эту страницу")})).catch((function(e){1===t.getDevicesCount&&t.$emit("error","Ошибка определения устройств. Код: "+e.message),error(e)}))},deviceExists:function(t,e){var n,a=Cp("video"===t?this.cameras:this.mics);try{for(a.s();!(n=a.n()).done;){if(n.value.deviceId===e)return!0}}catch(t){a.e(t)}finally{a.f()}return error("dev is not exists",t,e),!1},updateConstraints:function(){var t,e=this,n=this.settings,a={video:{},audio:{}};"display"!==this.cameraSelected?(this.micSelected&&(a.audio.deviceId={exact:this.micSelected}),this.cameraSelected&&(a.video.deviceId={exact:this.cameraSelected}),n.aspectRatio&&"auto"!==n.aspectRatio&&(a.video.aspectRatio="wide"===n.aspectRatio?16/9:4/3),n.fps&&"auto"!==n.fps&&(a.video.frameRate={max:n.fps}),"auto"!==n.autoGainControl&&(a.audio.autoGainControl=n.autoGainControl),"auto"!==n.noiseSuppression&&(a.audio.noiseSuppression=n.noiseSuppression),"auto"!==n.echoCancellation?(n.echoCancellation&&this.$emit("alert","Вы включили эхоподавление. Могут возникнуть проблемы со звуком, если используете стереомикшер"),a.audio.echoCancellation=n.echoCancellation):a.audio.echoCancellation=!1,this.audioEnabled||delete a.audio):a.video.cursor="always",n.width&&"auto"!==n.width&&(a.video.width={ideal:n.width},head.browser.ff);var r=function(n){var r=a[n];for(t in r)e.supportedConstraints[t]||(error("constraints not supported: ",n,t),delete a[n][t])};r("video"),r("audio"),this.constraints=a},applyConstraints:function(t){var e=this;(t||this.updateConstraints(),t=t||JSON.parse(JSON.stringify(this.constraints)),log("updating local stream constraints...",t),this.stream&&MediaStreamTrack&&"function"==typeof MediaStreamTrack&&"function"==typeof MediaStreamTrack.prototype.applyConstraints)?this.stream.getTracks().forEach((function(n){if("display"!==e.cameraSelected||"audio"!==n.kind){"audio"===n.kind&&e.audioTrackOrig&&(n=e.audioTrackOrig);var a=t[n.kind];a&&(head.browser.ff,"deviceId"in a&&delete a.deviceId,n.applyConstraints(a).then((function(){log("applyed constraints",n.kind,a)})).catch((function(t){error("error track apply constraints",n.kind,a,n),e.parseErrConstraints(t)})),"display"===e.cameraSelected&&e.init())}})):(error("applyConstraints not supported"),this.getStream())},resetSavedDevices:function(){Cl.Z.storageRemove("mic"),Cl.Z.storageRemove("cam"),this.micSelected=void 0,this.cameraSelected=void 0},parseErrConstraints:function(t){error("error from getUserMedia",t);var e="Ошибка инициализации камеры или микрофона";if("object"===bp(t))if("OverconstrainedError"===t.name){var n=this.constraints?this.constraints.audio[t.constraint]||this.constraints.video[t.constraint]||"unknown":"";"object"===bp(n)&&(n=JSON.stringify(n)),e="width"===t.constraint||"height"===t.constraint?"Ваша камера не поддерживает это разрешение ("+n+"), выберите другое":"frameRate"===t.constraint?"Ваша камера не поддерживает выбранное FPS ("+n+")":"deviceId"===t.constraint?"Устройство (камера или микрофон) не найдено (отсоединено, выключено?). Переподключите устройство и перезагрузите страницу":"Вашe устройство не поддерживает параметр: "+t.constraint+"("+n+")","deviceId"===t.constraint&&this.resetSavedDevices()}else if("NotAllowedError"===t.name)e="Вы запретили доступ к вашему оборудованию. Дальнейшая работа невозможна";else if("NotFoundError"===t.name)e="Запрошеное устройство не найдено",this.resetSavedDevices();else if("NotReadableError"===t.name)e="Ваше устройство занято другой программой или сбой в оборудовании. Попробуйте закрыть другие программы, которые могут использовать выбранную камеру или микрофон. Также попробуйте выдернуть USB устройство и снова вставить";else if("InvalidAccessError"===t.name&&"string"==typeof t.message&&t.message.match(/user gesture/i))return;var a=e+". \nКод ошибки: "+t.name+"#"+(t.message||"*")+"#"+(t.constraint||"*");this.$emit("error",a)},getStream:function(){var t=this;if(log("try getStream"),this.pendingStream)return error("stream already pending");this.destroyStream(),this.updateConstraints(),log("get device with mediaConstraints",this.constraints);var e="display"===this.cameraSelected?"getDisplayMedia":"getUserMedia";return this.audioOnly$&&(this.constraints.video=!1),navigator.mediaDevices[e](this.constraints).then((function(e){if(log("got stream: ",e),t.stream=e,t.video.srcObject=e,t.video.muted=!0,t.video.play(),e.getTracks().forEach((function(e){e.addEventListener("ended",(function(n){t.$emit("alert","video"===e.kind?"Сбой в камере: отключена":"Сбой микрофона: отключен"),error("sender track is ENDED",e.kind,e)})),e.addEventListener("mute",(function(n){t.$emit("alert","video"===e.kind?"Камера была отключена":"Микрофон был отключен"),error("sender track is MUTED",e.kind,e)}))})),t.settings.audioTransform){try{t.enableAudioTransform()}catch(t){error("enableAudioTransform error: ",t)}try{t.settings.spectrum&&t.enableSpectrum()}catch(t){error("enableSpectrum error: ",t)}}t.$emit("stream",e)})).catch((function(e){error("error get stream: ",e),t.parseErrConstraints(e),t.destroyStream()})).finally((function(){log("got stream finally"),t.pendingStream=!1,t.devicesOk||t.$nextTick((function(){t.getDevices()}))}))},destroyStream:function(){this.stream&&this.stream.getTracks().forEach((function(t){log("stopping track",t.kind),t.stop()})),this.audioTrackOrig&&(log("stopping audioTrackOrig"),this.audioTrackOrig.stop(),this.audioTrackOrig=null),this.pendingStream=null,this.stream=null,this.destroyAudioTransform()},destroyAudioTransform:function(){var t=this;if(log("destroyAudioTransform..."),this.disableSpectrum(),this.gain)try{this.gain.disconnect(),log("gain disconnected")}catch(t){error("gain disconnect error",t)}if(this.audioContext&&"running"===this.audioContext.state)try{this.audioContext.close(),log("audioContext closed")}catch(t){error("audioContext close error",t)}else this.audioContext&&log("audioContext NOT rinning state: ",this.audioContext.state);this.audioTrackOrig&&this.stream&&(this.stream.getAudioTracks().forEach((function(e){t.stream.removeTrack(e)})),this.stream.addTrack(this.audioTrackOrig)),this.audioTrackOrig=null,this.audioContext=null,this.gain=null},disableSpectrum:function(){if(log("disabling spectrum..."),this.spectrumHidden=!0,this.spectrum&&this.scanvasCtx&&this.scanvasCtx.canvas&&this.scanvasCtx.canvas.parentNode)try{this.spectrum.removeChild(this.scanvasCtx.canvas)}catch(t){error("canvas remove errror: ",t)}this.scanvasCtx=null},enableSpectrum:function(){var t,e=this;this.disableSpectrum(),log("enabling spectrum..."),t=document.createElement("canvas"),this.spectrum.innerHTML="",this.spectrum.appendChild(t),this.scanvasCtx=t.getContext("2d"),this.spectrumHidden=!1,this.$nextTick((function(){e.spectrumPosition()}))},enableAudioTransform:function(){var t=this;if(!window.AudioContext)return error("AudioContext not supported");if(this.destroyAudioTransform(),this.stream){if(0===this.stream.getAudioTracks().length)return error("no audio track, audio transform disabled");var e,n,a,r,i,s;try{(e=this.audioContext=new AudioContext).onstatechange=function(){if(log("audioContext state change to: ",e.state),"closed"===e.state)try{r&&r.disconnect(),n&&n.disconnect()}catch(t){error(t)}},n=e.createMediaStreamSource(this.stream),a=e.createMediaStreamDestination(),r=this.gain=e.createGain(),n.connect(r),r.connect(a),(i=this.analyser=this.audioContext.createAnalyser()).fftSize=2048,i.smoothingTimeConstant=.8,r.connect(i)}catch(t){return error(t),void this.destroyAudioTransform()}r.gain.value=this.micVolume/100,a&&(this.audioTrackOrig=this.stream.getAudioTracks()[0],this.audioTrackOrig&&(this.stream.removeTrack(this.audioTrackOrig),a.stream.getAudioTracks().forEach((function(e){try{t.stream.addTrack(e)}catch(e){error("error replace audio stream from audioTransform: ",e),t.destroyAudioTransform()}}))));var o;!function e(){try{"running"===(o=t.audioContext&&t.audioContext.state)?(s=new Uint8Array(i.frequencyBinCount),i.getByteFrequencyData(s),t.spectrumHidden||t.drawSpectrum(s),t.drawVolume(s),requestAnimationFrame(e.bind(t))):("suspended"===o&&setTimeout(e.bind(t),100),info("skip spectrum drawing... audioContext.state = ",t.audioContext?o:"null"))}catch(e){error(e),t.disableSpectrum()}}(),log("audioContext created",e,r)}else error("no stream, cancel audioTransform")},spectrumPosition:function(t){if(!this.spectrum)return error("no spectrum");if(!t){if(!this.scanvasCtx)return error("no scanvasCtx");if(!(t=this.scanvasCtx.canvas))return error("no spectrum canvas")}t.width=this.spectrum.clientWidth,t.height=this.spectrum.clientHeight},drawSpectrum:function(t){if(this.scanvasCtx){var e=this.scanvasCtx,n=e.canvas;e.clearRect(0,0,n.width,n.height),e.lineWidth=1;for(var a=t.length,r=n.width/a,i=0;i<a;i++){var s=t[i]/256,o=n.height*s,c=n.height-o-1,l=i/a*360;e.fillStyle="hsl("+l+", 100%, 70%)",e.fillRect(i*r,c,r,o)}}},drawVolume:function(t){if(this.volumeAnimEl){var e=t[10]/t.length;this.volumeAnimEl.css({height:this.volumeHeight*e+"px",backgroundColor:"#28a745"})}},setCamera:function(t){this.cameraSelected=t,t?!this.videoSource&&this.saveDevs&&Cl.Z.storage("cam",t||""):Cl.Z.storageRemove("cam"),this.getStream(),this.$emit("deviceChange","cam",t)},setMic:function(t){this.$emit("deviceChange","mic",t),this.micSelected=t,t?this.saveDevs&&Cl.Z.storage("mic",t):Cl.Z.storageRemove("mic"),this.getStream()},trackToggle:function(t){if(!this.stream)return error("no straem");var e="video"===t?this.stream.getVideoTracks()[0]:this.audioTrackOrig||this.stream.getAudioTracks()[0];if(!e)return error("no track");e.enabled=!e.enabled,this.tracksEnabled[t]=e.enabled,log("track.ebanled",e.kind,e.enabled)}}};const Ep=(0,Fl.Z)(Sp,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-video-capture"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.spectrumHidden,expression:"!spectrumHidden"}],ref:"spectrum",staticClass:"spectrum"}),t._v(" "),n("video",{ref:"videoEl",staticClass:"output-video"}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.stream,expression:"!stream"}],staticClass:"position-absolute start-0 top-0 bg-dark w-100 h-100"},[n("div",{staticClass:"app-centerred-abs"},[n("button",{staticClass:"btn btn-success",on:{click:function(e){return t.init()}}},[n("i",{staticClass:"fa fa-camera"}),t._v("\n                Включить камеру\n            ")])])]),t._v(" "),t.audioOnly$?n("div",{staticClass:"position-absolute top-50 start-50 translate-middle"},[n("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){t.audioOnly$=!1,t.init()}}},[n("i",{staticClass:"fa fa-video-camera",attrs:{"aria-hidden":"true"}}),t._v(" Включить видео\n        ")]),t._v(" "),t._m(0)]):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.settionsOpen,expression:"settionsOpen"}],staticClass:"extended-settings p-3 col-12 col-md-auto"},[n("div",{staticClass:"close-btn",staticStyle:{"z-index":"3"}},[n("button",{staticClass:"btn btn-danger",on:{click:function(e){t.settionsOpen=!1}}},[t._v("x")])]),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"mb-2"},[n("button",{staticClass:"btn btn-secondary",on:{click:t.resetSettings}},[n("i",{staticClass:"fa fa-refresh"}),t._v("\n                    Сбросить"),n("span",{staticClass:"d-none d-lg-inline"},[t._v(" по умолчанию")])])]),t._v(" "),n("div",{staticClass:"i"},[t._v("\n                FPS\n                "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.settingsUser.fps,expression:"settingsUser.fps"}],attrs:{disabled:!t.supportedConstraints.frameRate},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settingsUser,"fps",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"auto"}},[t._v("Авто")]),t._v(" "),n("option",{attrs:{value:"optimal"}},[t._v("Оптимально")]),t._v(" "),n("option",[t._v("5")]),t._v(" "),n("option",[t._v("10")]),t._v(" "),n("option",[t._v("15")]),t._v(" "),n("option",[t._v("20")]),t._v(" "),n("option",[t._v("30")])])]),t._v(" "),n("div",{staticClass:"i"},[t._v("\n                Камера\n                "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.settingsUser.width,expression:"settingsUser.width"}],attrs:{disabled:!t.supportedConstraints.width},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settingsUser,"width",e.target.multiple?n:n[0])}}},t._l(t.resolutions,(function(e){return n("option",{directives:[{name:"show",rawName:"v-show",value:!t.maxResolution.width||!parseInt(e.width)||e.width<=t.maxResolution.width,expression:"!maxResolution.width || !parseInt(res.width) || res.width <= maxResolution.width"}],domProps:{value:e.width}},[t._v(t._s(e.label))])})),0)]),t._v(" "),n("div",{staticClass:"i"},[t._v("\n                Пропорции:\n                "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.settingsUser.aspectRatio,expression:"settingsUser.aspectRatio"}],attrs:{disabled:!t.supportedConstraints.aspectRatio},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settingsUser,"aspectRatio",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"auto"}},[t._v("Авто")]),t._v(" "),n("option",{attrs:{value:"wide"}},[t._v("Широкий")]),t._v(" "),n("option",{attrs:{value:"narrow"}},[t._v("Высокий")])])]),t._v(" "),n("div",{staticClass:"i"},[t._v("\n                Автоусиление:\n                "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.settingsUser.autoGainControl,expression:"settingsUser.autoGainControl"}],attrs:{disabled:!t.supportedConstraints.autoGainControl},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settingsUser,"autoGainControl",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"auto"}},[t._v("Авто")]),t._v(" "),n("option",{domProps:{value:!0}},[t._v("Включено")]),t._v(" "),n("option",{domProps:{value:!1}},[t._v("Отключено")])])]),t._v(" "),n("div",{staticClass:"i"},[t._v("\n                Эхоподавление:\n                "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.settingsUser.echoCancellation,expression:"settingsUser.echoCancellation"}],attrs:{disabled:!t.supportedConstraints.echoCancellation},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settingsUser,"echoCancellation",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"auto"}},[t._v("Авто")]),t._v(" "),n("option",{domProps:{value:!0}},[t._v("Включено")]),t._v(" "),n("option",{domProps:{value:!1}},[t._v("Отключено")])])]),t._v(" "),n("div",{staticClass:"i"},[t._v("\n                Шумоподавление:\n                "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.settingsUser.noiseSuppression,expression:"settingsUser.noiseSuppression"}],attrs:{disabled:!t.supportedConstraints.noiseSuppression},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settingsUser,"noiseSuppression",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"auto"}},[t._v("Авто")]),t._v(" "),n("option",{domProps:{value:!0}},[t._v("Включено")]),t._v(" "),n("option",{domProps:{value:!1}},[t._v("Отключено")])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.spectrumEnabled&&t.settings.audioTransform,expression:"spectrumEnabled && settings.audioTransform"}],staticClass:"i"},[t._v("\n                Эквалайзер:\n                "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.settingsUser.spectrum,expression:"settingsUser.spectrum"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settingsUser,"spectrum",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"auto"}},[t._v("Авто")]),t._v(" "),n("option",{domProps:{value:!0}},[t._v("Показывать")]),t._v(" "),n("option",{domProps:{value:!1}},[t._v("Скрыть")])])]),t._v(" "),n("div",{staticClass:"i"},[t._v("\n                Аудио расширение:\n                "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.settingsUser.audioTransform,expression:"settingsUser.audioTransform"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settingsUser,"audioTransform",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"auto"}},[t._v("Авто")]),t._v(" "),n("option",{domProps:{value:!0}},[t._v("Включено")]),t._v(" "),n("option",{domProps:{value:!1}},[t._v("Отключено")])])]),t._v(" "),n("div",[n("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){t.stream?t.streamOff():t.getStream()}}},[n("i",{staticClass:"fa fa-power-off",class:{"text-danger":t.stream,"text-success":!t.stream}}),t._v("\n                    "+t._s(t.stream?"Отключить":"Включить")+"\n                ")]),t._v(" "),t.global.debug?n("button",{staticClass:"btn btn-sm btn-secondary",attrs:{"data-bs-toggle":"collapse",href:"#asdfdsfdsfdasg"}},[n("i",{staticClass:"fa fa-code"})]):t._e()]),t._v(" "),t.global.debug?n("json",{staticClass:"collapse",attrs:{data:t.constraintsPrintable,deep:10,id:"asdfdsfdsfdasg"}}):t._e()],1)]),t._v(" "),n("div",{staticClass:"hover"},[n("div",{staticClass:"row flex-nowrap justify-content-between g-0"},[n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{disabled:t.pendingStream},on:{click:function(e){t.settionsOpen=!t.settionsOpen}}},[n("i",{staticClass:"fa fa-wrench",attrs:{"aria-hidden":"true"}})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.audioOnly$,expression:"!audioOnly$"}],staticClass:"col-auto dropdown app-dropdown dropdown-menu-right truncate"},[n("button",{staticClass:"btn btn-secondary btn-sm",class:t.tracksEnabled.video?"btn-secondary":"btn-danger",on:{click:function(e){return t.trackToggle("video")}}},[n("i",{staticClass:"fa fa-power-off"})]),t._v(" "),n("button",{staticClass:"btn btn-secondary btn-sm dropdown-toggle",attrs:{disabled:t.pendingStream,type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[n("i",{staticClass:"fa fa-video-camera d-inline d-md-none",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Камера")])]),t._v(" "),n("div",{staticClass:"dropdown-menu",attrs:{"x-placement":"bottom"}},[n("div",{staticClass:"dropdown-item",class:{active:!t.cameraSelected},attrs:{"data-index":""},on:{click:function(e){return t.setCamera()}}},[t._v("По умолчанию")]),t._v(" "),t._l(t.cameras,(function(e,a){return n("div",{staticClass:"dropdown-item",class:{active:t.cameraSelected&&t.cameraSelected===e.deviceId},on:{click:function(n){return t.setCamera(e.deviceId)}}},[t._v("\n                        "+t._s(e.label||"Камера#"+a)+"\n                    ")])}))],2)]),t._v(" "),n("div",{staticClass:"col-auto dropdown app-dropdown cams-dd "},[n("div",{staticClass:"row g-1"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.micVolumeOpen&&t.settings.audioTransform,expression:"micVolumeOpen && settings.audioTransform"}],staticClass:"col-auto me-0 position-relative"},[n("div",{ref:"micVolume",staticClass:"mic-volume"}),t._v(" "),n("button",{staticClass:"btn btn-sm",class:t.tracksEnabled.audio?"btn-secondary":"btn-danger",on:{click:function(e){return t.trackToggle("audio")}}},[n("i",{staticClass:"fa fa-power-off"})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.settings.audioTransform,expression:"settings.audioTransform"}],staticClass:"col-auto"},[n("button",{staticClass:"btn btn-sm",class:{"btn-danger":!t.micVolume,"btn-secondary":t.micVolume},on:{click:function(e){t.micVolumeOpen=!t.micVolumeOpen}}},[n("i",{staticClass:"fa",class:{"fa-microphone-slash":!t.micVolume,"fa-volume-up":t.micVolume>0},attrs:{"aria-hidden":"true"}})])]),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-secondary btn-sm dropdown-toggle",attrs:{disabled:t.pendingStream,type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[n("i",{staticClass:"fa fa-microphone d-inline d-md-none",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Микрофон")])]),t._v(" "),n("div",{staticClass:"dropdown-menu dropdown-menu-right truncate",staticStyle:{"max-width":"300px"}},[n("div",{staticClass:"dropdown-item",class:{active:!t.micSelected},attrs:{"data-index":""},on:{click:function(e){return t.setMic()}}},[t._v("По умолчанию")]),t._v(" "),t._l(t.mics,(function(e,a){return n("div",{staticClass:"dropdown-item",class:{active:t.micSelected&&t.micSelected===e.deviceId},on:{click:function(n){return t.setMic(e.deviceId)}}},[t._v("\n                                "+t._s(e.label||"Микрофон#"+a)+"\n                            ")])}))],2)])])])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("small",{staticClass:"text-muted"},[n("i",{staticClass:"fa fa-music",attrs:{"aria-hidden":"true"}}),t._v(" сейчас только звук")])])}],!1,null,null,null).exports;const Tp={name:"bans_modal",props:{roomId:{type:Number},chat:{type:Object}},created:function(){}};const Ap=(0,Fl.Z)(Tp,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Баны",size:"lg"}},[n("bans",{attrs:{"room-id":t.roomId,chat:t.chat}})],1)}),[],!1,null,null,null).exports;const Rp={name:"moders_modal",props:{roomId:{type:Number},chat:{type:Object}},mounted:function(){this.loader=this.$refs.loader},methods:{removeModer:function(t,e){var n=this;this.chat&&this.chat.ws.echo("toggleModer",{mid:e.id},(function(){n.loader.update()}))}}};const Op=(0,Fl.Z)(Rp,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Модераторы",size:"lg"}},[n("moders",{attrs:{"room-id":t.roomId,chat:t.chat}})],1)}),[],!1,null,null,null).exports;const $p={name:"chat-settings",props:{chat:{type:Object}},data:function(){for(var t=[],e=110;e<=200;e+=10)t.push(e);return{fontSizes:t}},created:function(){}};const Pp=(0,Fl.Z)($p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Настройки чата",size:"sm"}},[n("div",{staticClass:"mb-2"},[t.global.user?n("status",{attrs:{chat:t.chat}}):t._e(),t._v(" "),n("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.$root.render("nick-theme")}}},[n("i",{staticClass:"em em-art"}),t._v(" "),n("span",{},[t._v("Настройка ника")])])],1),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.whiteMess,expression:"settings.whiteMess"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"whiteMess"},domProps:{checked:Array.isArray(t.settings.whiteMess)?t._i(t.settings.whiteMess,null)>-1:t.settings.whiteMess},on:{change:function(e){var n=t.settings.whiteMess,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&t.$set(t.settings,"whiteMess",n.concat([null])):i>-1&&t.$set(t.settings,"whiteMess",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.settings,"whiteMess",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Окно чата белое")])]),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.privateOff,expression:"settings.privateOff"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"privateOff",value:"1"},domProps:{checked:Array.isArray(t.settings.privateOff)?t._i(t.settings.privateOff,"1")>-1:t.settings.privateOff},on:{change:function(e){var n=t.settings.privateOff,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.settings,"privateOff",n.concat(["1"])):i>-1&&t.$set(t.settings,"privateOff",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.settings,"privateOff",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Запретить приваты")])]),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.imagesOff,expression:"settings.imagesOff"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"imagesOff",value:"1"},domProps:{checked:Array.isArray(t.settings.imagesOff)?t._i(t.settings.imagesOff,"1")>-1:t.settings.imagesOff},on:{change:function(e){var n=t.settings.imagesOff,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.settings,"imagesOff",n.concat(["1"])):i>-1&&t.$set(t.settings,"imagesOff",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.settings,"imagesOff",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Отключить картинки")])]),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.soundOff,expression:"settings.soundOff"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"soundOff",value:"1"},domProps:{checked:Array.isArray(t.settings.soundOff)?t._i(t.settings.soundOff,"1")>-1:t.settings.soundOff},on:{change:function(e){var n=t.settings.soundOff,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.settings,"soundOff",n.concat(["1"])):i>-1&&t.$set(t.settings,"soundOff",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.settings,"soundOff",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Отключить звуки")])]),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.stopListHide,expression:"settings.stopListHide"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"stopListHide"},domProps:{checked:Array.isArray(t.settings.stopListHide)?t._i(t.settings.stopListHide,null)>-1:t.settings.stopListHide},on:{change:function(e){var n=t.settings.stopListHide,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&t.$set(t.settings,"stopListHide",n.concat([null])):i>-1&&t.$set(t.settings,"stopListHide",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.settings,"stopListHide",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[n("help",[t._v("Сообщения, которые попадают с список стоп-листа не показывать даже автору (вам)")]),t._v("\n            Скрывать стоплист\n        ")],1)]),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.autoScrollSmartDisabled,expression:"settings.autoScrollSmartDisabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"autoScrollSmartDisabled"},domProps:{checked:Array.isArray(t.settings.autoScrollSmartDisabled)?t._i(t.settings.autoScrollSmartDisabled,null)>-1:t.settings.autoScrollSmartDisabled},on:{change:function(e){var n=t.settings.autoScrollSmartDisabled,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&t.$set(t.settings,"autoScrollSmartDisabled",n.concat([null])):i>-1&&t.$set(t.settings,"autoScrollSmartDisabled",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.settings,"autoScrollSmartDisabled",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Отключить «умную» прокрутку")])]),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.toTopAfterMess,expression:"settings.toTopAfterMess"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"toTopAfterMess",value:"1"},domProps:{checked:Array.isArray(t.settings.toTopAfterMess)?t._i(t.settings.toTopAfterMess,"1")>-1:t.settings.toTopAfterMess},on:{change:function(e){var n=t.settings.toTopAfterMess,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.settings,"toTopAfterMess",n.concat(["1"])):i>-1&&t.$set(t.settings,"toTopAfterMess",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.settings,"toTopAfterMess",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("\n            Прокручивать вверх после отправки (мобильный)\n        ")])]),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.closeVirtualKeyboard,expression:"settings.closeVirtualKeyboard"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"closeVirtualKeyboard",value:"1"},domProps:{checked:Array.isArray(t.settings.closeVirtualKeyboard)?t._i(t.settings.closeVirtualKeyboard,"1")>-1:t.settings.closeVirtualKeyboard},on:{change:function(e){var n=t.settings.closeVirtualKeyboard,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.settings,"closeVirtualKeyboard",n.concat(["1"])):i>-1&&t.$set(t.settings,"closeVirtualKeyboard",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.settings,"closeVirtualKeyboard",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("\n            Закрывать виртуальную клавиатуру после отправки (мобильный)\n        ")])]),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.closeFooterAfterSend,expression:"settings.closeFooterAfterSend"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"closeVirtualKeyboard",value:"1"},domProps:{checked:Array.isArray(t.settings.closeFooterAfterSend)?t._i(t.settings.closeFooterAfterSend,"1")>-1:t.settings.closeFooterAfterSend},on:{change:function(e){var n=t.settings.closeFooterAfterSend,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.settings,"closeFooterAfterSend",n.concat(["1"])):i>-1&&t.$set(t.settings,"closeFooterAfterSend",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.settings,"closeFooterAfterSend",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("\n            Закрывать поле ввода после отправки (мобильный)\n        ")])]),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.enterSend,expression:"settings.enterSend"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"enterSend",value:"1"},domProps:{checked:Array.isArray(t.settings.enterSend)?t._i(t.settings.enterSend,"1")>-1:t.settings.enterSend},on:{change:function(e){var n=t.settings.enterSend,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.settings,"enterSend",n.concat(["1"])):i>-1&&t.$set(t.settings,"enterSend",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.settings,"enterSend",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("\n            Enter - отправить в чат\n        ")])]),t._v(" "),n("div",{staticClass:"my-2"},[t._v("\n        Размер шрифта:\n        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.settings.font_size,expression:"settings.font_size"}],attrs:{name:"font_size"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settings,"font_size",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("Обычный")]),t._v(" "),t._l(t.fontSizes,(function(e){return n("option",{style:"font-size: "+e+"%",domProps:{value:e}},[t._v(t._s(e)+"%")])}))],2)]),t._v(" "),n("div",{staticClass:"my-2"},[t._v("\n        Сортировка списка:\n        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.settings.sorting,expression:"settings.sorting"}],attrs:{name:"font_size"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.settings,"sorting",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("По умолчанию")]),t._v(" "),n("option",{attrs:{value:"new_bottom"}},[t._v("Новые внизу")]),t._v(" "),n("option",{attrs:{value:"new_top"}},[t._v("Новые вверху")])])])])}),[],!1,null,null,null).exports;const Lp={name:"chat_login",data:function(){return{sex:"",loading_:!1,shown:!1}},methods:{go:function(){var t={};if(!this.global.uid){if(!this.sex)return void this.$root.popupFixErr("Выберите пол");t={sex:this.sex}}this.$emit("login",t)},loading:function(t){this.loading_=t},show:function(t){this.shown=t,t&&(this.loading_=!1)}}};const Dp=(0,Fl.Z)(Lp,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.shown,expression:"shown"}],staticClass:"app-chat-login"},[n("div",{staticClass:"border bg-light"},[t._m(0),t._v(" "),t.global.uid?n("div"):n("div",{staticClass:"form-group text-center my-2"},t._l([["m","Муж."],["f","Жен."],["t","Транс"]],(function(e){return n("span",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sex,expression:"sex"}],staticClass:"form-check-input",attrs:{id:"sex"+e[0],type:"radio",required:"required"},domProps:{value:e[0],checked:t._q(t.sex,e[0])},on:{change:function(n){t.sex=e[0]}}}),t._v(" "),n("label",{staticClass:"form-check-label",attrs:{for:"sex"+e[0]}},[t._v(t._s(e[1]))])])})),0),t._v(" "),n("div",{staticClass:"text-end"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit",disabled:t.loading_},on:{click:function(e){return t.go()}}},[n("img",{attrs:{src:"/i/chat_enter.gif"}}),t._v("  Войти!")])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h5",[n("img",{staticStyle:{width:"30px"},attrs:{src:"/i/logo.png"}}),t._v("\n             Добро пожаловать в чат!\n        ")])}],!1,null,null,null).exports;var Ip=n(3972);function Mp(t){return(Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Np=Cl.Z.getComponents(n(90964),"");const jp={"user-popup":{bind:function(t,e,n){e.value;e.value.__updater=function(t){Object.assign(e.value,t)};t.addEventListener("click",(function(){log(e.value.ignored,e.value),n.context.$root.modal({cls:"user-chat-info",component:[Xl,{chat:n.context,user:e.value,clientId:e.value.id}]})}))},update:function(t,e,n){},unbind:function(t,e,n){}},"parsed-html":{bind:function(t,e,n){var a=["speech","record"],r=["onlyaudio"],i=t,s=e.value.chat||n.context,o=e.value.text,c=e.value.text,l=e.value.theme||s.$root.themeColor;try{o=s.$root.smiles.replaceCodes(o,l,5);var u=new RegExp("(\\[("+a.join("|")+")([a-z0-9\\-\\=\\s]*)\\])([0-9a-zA-Z\\-\\_\\.\\/]*)\\[\\/("+a.join("|")+")\\]");"object"===Mp(window.__smiles)&&window.__smiles.replaceCodes&&(o=window.__smiles.replaceCodes(o,5));for(var d=0;;){d++;var f=o.replace(u,'<div data-tag="$2" class="__comp__" $3>$4</div>');if(f===o||d>4)break;o=f}t.innerHTML=o,eu(t,s.onImagesLoads.bind(null,s.tabCurrent()));for(var h=i.querySelectorAll(".__comp__"),p=0;p<h.length;p++){var m=h[p],v=m.innerText,g=m.attributes,_=m.dataset.tag,y={},b=void 0;for(d=g.length-1;d>=0;d--){var C=g[d].name,w=g[d].value;-1!==r.indexOf(C)&&(y[C]=w),m.removeAttribute(C)}Np[_]&&(b=s.make(Np[_],{propsData:Object.assign(y,{data:v})})),b&&b.$mount(m)}}catch(e){error("parse chat mess error",e),t.innerHTML=c}}}},Fp={name:"chat_mess",directives:jp,props:{mess:Object},data:function(){var t=this.$parent;return{chat:t,userSettings:t.userSettings,self:t.self}}};const Bp=(0,Fl.Z)(Fp,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mess-row",class:{ad:t.mess.flags&&t.mess.flags.ad},attrs:{"data-id":t.mess.mid||""}},[n("div",{staticClass:"row g-0"},[n("div",{staticClass:"col"},[t.mess.owner?[t.mess.__removed?[n("em",{staticClass:"text-muted user-select-none",staticStyle:{cursor:"help"},on:{dblclick:function(e){return t.chat.messRemoveToggle(t.mess)}}},[n("i",{staticClass:"fa fa-trash"}),t._v(" сообщение удалено")])]:[n("span",{directives:[{name:"user-popup",rawName:"v-user-popup",value:t.mess.owner,expression:"mess.owner"}],staticClass:"avatar"},[n("img",{staticStyle:{height:"30px"},attrs:{src:t.mess.owner.info.avatar}})]),t._v(" "),t.mess.owner.owner?n("i",{staticClass:"crown em em-crown",attrs:{title:"Автор трансляции"}}):t._e(),t._v(" "),t.mess.stopword?n("i",{staticClass:"animate__animated animate__bounce fa fa-exclamation-triangle text-danger",attrs:{"data-title":"Фраза из стоп-листа"}}):t._e(),t._v(" "),n("strong",{directives:[{name:"nick-style",rawName:"v-nick-style",value:{font:t.mess.owner.info.font,theme:t.userSettings.whiteMess?"light":""},expression:"{font: mess.owner.info.font, theme: userSettings.whiteMess ? 'light' : ''}"}],staticClass:"nick nick-to",on:{click:function(e){return t.chat.toNick(t.mess.owner)}}},[t._v(t._s(t.mess.owner.nickname))]),t._v(" "),n("span",{directives:[{name:"parsed-html",rawName:"v-parsed-html",value:{chat:t.chat,text:t.mess.text,theme:t.userSettings.whiteMess?"light":""},expression:"{chat: chat, text: mess.text, theme: userSettings.whiteMess ? 'light' : ''}"}],staticClass:"text"}),t._v(" "),t.mess.attached&&t.mess.attached.length>0?n("div",{staticClass:"attach-images row g-0 justify-content-center text-center"},t._l(t.mess.attached,(function(e){return n("div",{staticClass:"col image"},[n("a",{directives:[{name:"on-image",rawName:"v-on-image",value:t.chat.onImagesLoads.bind(null,t.chat.tabCurrent()),expression:"chat.onImagesLoads.bind(null, chat.tabCurrent())"}],staticClass:"d-block",attrs:{href:e.big,"data-fancybox":""}},[n("img",{attrs:{width:e.width,height:e.height,src:e.url}})])])})),0):t._e(),t._v(" "),t.self&&t.self.moder?n("div",{staticClass:"position-absolute end-0 top-0 me-1  mess-actions"},[null===t.mess.__removed?n("button",{staticClass:"btn btn-secondary btn-sm px-1 py-0 remove-mess-btn",attrs:{"data-title":"Удалить сообщение"},on:{click:function(e){return t.chat.messRemoveToggle(t.mess)}}},[n("i",{staticClass:"fa fa-remove"})]):t._e()]):t._e()]]:[t.mess.friend?[n("span",{directives:[{name:"user-popup",rawName:"v-user-popup",value:t.mess.friend,expression:"mess.friend"}],staticClass:"avatar"},[n("img",{staticStyle:{height:"30px"},attrs:{src:t.mess.friend.info.avatar}})]),t._v(" "),n("span",{directives:[{name:"nick-style",rawName:"v-nick-style",value:{font:t.mess.friend.info.font,theme:t.userSettings.whiteMess?"light":""},expression:"{font: mess.friend.info.font, theme: userSettings.whiteMess ? 'light' : ''}"}],staticClass:"nick nick-to",on:{click:function(e){return t.chat.toNick(t.mess.friend)}}},[t._v(t._s(t.mess.friend.nickname))]),t._v(" "),n("strong",{staticClass:"app-text-anim",attrs:{"data-text-anim-timeout":"15000"}},[t._v("О, я пришел!")]),t._v(" "),n("i",{staticClass:"fa fa-handshake-o"})]:[t.mess.icon?n("i",{class:t.mess.icon}):t._e(),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.mess.text)}})]]],2)])])}),[],!1,null,null,null).exports;function Up(t){return(Up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vp(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Hp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function Hp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}Cl.Z.getComponents(n(90964),"");const Zp={name:"chat",props:{roomId:{type:Number,required:!0},roomAlias:{type:String,required:!0},layout:{type:String,default:"horizontal"}},components:{"chat-login":Dp,"chat-mess":Bp},messageHandlers:{speech:function(t){var e,n=this;if(e=t.text.match(/!сказать(.+)/))return pl.V.make("speech",{text:e[1],room_id:this.roomAlias}).then((function(n){n.url&&(t.text=t.text.replace(e[0],"[speech]"+n.url+"[/speech]"))})).catch((function(t){n.$root.popupFixErr(t)}))},image:function(t){var e=this,n=this.uploader.getAttached();if(n.length>0)return pl.V.action("attachImages","chat_room","",{files:n}).then((function(n){t.images=n.files,e.uploader.reset()})).catch((function(t){e.$root.popupFixErr(t)}))},videoLink:function(t){var e=this,n=this.global.videolinkrg,a=this.global.videolinkrgm,r=this.room&&this.room.room,i=this.tabCurrent();if(i&&i.clientId)return"";if(this.self&&this.self.moder&&(!r||"owner"!==r.video_access||this.self&&this.self.owner)){if(!n)return"";var s=new RegExp(n,a||""),o=t.text.match(s);if(o){var c=o[0];return pl.V.make("action/videoPlay",{obj:"chat_room",action:"videoPlay",opt:{url:c,room_id:this.roomAlias}}).then((function(e){e.title&&(t.text+="\n"+e.title)})).catch((function(t){e.$root.popupFixErr(t)}))}}},picsDownload:function(t){var e=this,n=t.text.match(/https?\:\/\/.+\.(jpg|gif|jpeg|png)/i);if(n){var a=n[0];return pl.V.make("action/picsDownload",{obj:"chat_room",action:"picsDownload",opt:{link:a,room_id:this.roomAlias}}).then((function(e){e.files&&(t.images=e.files,t.text=t.text.replace(a,""))})).catch((function(t){e.$root.popupFixErr(t)}))}}},data:function(){return{count:null,clients:[],ignors:[],filterQuickOpened:!1,self:null,menuOpened:!1,userSettings:{whiteMess:!0,font_size:"",maxMess:100,sorting:"",closeVirtualKeyboard:!0,closeFooterAfterSend:!0,autoScrollSmartDisabled:!1,imagesOff:!1,privateOff:!1,stopListHide:!1,enterSend:!Cl.Z.isTouch()},ready:!1,tabs:[],tabActive:"main",filter:{query:"",sex:""},clock:0,sending:!1,footerShow:!head.mobile}},computed:{classes:function(){return{"white-mess":this.userSettings.whiteMess,"images-off":this.userSettings.imagesOff}},vertical:function(){return"vertical"===this.layout},imbaned:function(){return this.self&&this.self.banedInRoom},clientsSotred:function(){var t=this;return this.clients.slice(0).sort((function(e,n){var a=t.getSortingClient(e),r=t.getSortingClient(n);return t.userSettings.sorting,r-a}))}},directives:jp,destroyed:function(){this.ws&&(this.ws.off("message",this.messageListener),this.ws.off("close",this.onClose),this.ws.off("authorized",this.onAuth)),window.removeEventListener("resize",this.recalcLayouts)},created:function(){var t=this;this.ws=Ol.make(this.global.daemon.uri),this.room=this.getRoom(),Object.assign(this.userSettings,Cl.Z.storage("chat_settings")||{}),this.$watch("userSettings",(function(e){Cl.Z.storage("chat_settings",t.userSettings)}),{deep:!0}),this.ws.on("authorized",this.onAuth),this.ws.on("message",this.messageListener),this.ws.on("close",this.onClose),this.addTab({name:"Общак",id:"main"}),this.$watch("filterQuickOpened",(function(){for(var e in t.filter)t.filter.hasOwnProperty(e)&&(t.filter[e]="")})),this.$watch("filter",(function(){var e,n=Vp(t.clients);try{for(n.s();!(e=n.n()).done;){var a=e.value,r=!0,i=t.filter.query,s=t.filter.sex,o=(a.info.city,a.info.extended||{});i&&!Cl.Z.findIn(i,[a.nickname,a.info.city,o.text])&&(r=!1),s&&o.sex&&o.sex!==s&&(r=!1),a.filtered=r}}catch(t){n.e(t)}finally{n.f()}}),{deep:!0})},mounted:function(){var t=this;this.textarea=this.$refs.textarea,this.uploader=this.$refs.uploader,this.smiles=this.$refs.smiles,this.chatMessageEls=this.$refs.chatMessageEls,this.mainEl=this.$refs.mainEl,this.loginComp=this.$refs.login,this.smiles.$on("click",(function(e){t.textareaAppand(":"+e.code+": ")})),this.loginComp.$on("login",(function(e){t.loginComp.loading(!0),t.join(e);var n=t.getExtendedInfo();n.sex=e.sex,Cl.Z.storage("chat_info",n)})),this.enter()},methods:{getSortingClient:function(t){var e=t.joinAt/1e6/1e3;"new_bottom"===this.userSettings.sorting&&(e=-e);var n=999999;return t.owner&&(e+=n),t.moder&&(e+=n),e},leave:function(){this.send("leave")},addTab:function(t){t=Object.assign({active:!0,killed:void 0,requested:void 0,accepted:void 0,messages:[],autoScroll:!0},t);var e=this.tabs.push(t),n=this.tabs[e-1];return t.active&&this.activeTab(n),n},addTabFromClient:function(t,e){return this.addTab(Object.assign({name:t.nickname,id:t.id,clientId:t.id},e))},closeTab:function(t){var e=this,n=this.getTabIndex(t);-1!==n&&this.tabs.splice(n,1),this.$nextTick((function(){e.activeTab("main")})),this.ws.relay("privateClose",t)},getTabIndex:function(t){for(var e=0;e<this.tabs.length;e++)if(this.tabs[e].id===t)return e;return-1},getTab:function(t){var e=this.getTabIndex(t);if(-1!==e)return this.tabs[e]},activeTab:function(t){if("object"!==Up(t)&&(t=this.getTab(t)),!t)return error("tab not found",t);for(var e=0;e<this.tabs.length;e++)this.tabs[e].active=!1;t.requested&&!t.accepted&&(t.accepted=!0,this.ws.replay("private",t.id)),t.active=!0,t.notify=!1,t.bounce=!1,this.tabActive=t.id},tabCurrent:function(){return this.getTab(this.tabActive)},getCurrentMessageEl:function(t){var e,n=Vp(this.chatMessageEls);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a.dataset.id===t)return a}}catch(t){n.e(t)}finally{n.f()}},private:function(t){var e=this.getTab(t.id);e?this.activeTab(e):this.addTabFromClient(t),this.textareaAppand(""),this.privateSendRequest(t)},privateSendRequest:function(t){this.ws.relay("private",t.id,(function(t){}),{})},onClose:function(){this.ready=!1},onAuth:function(t){this.ready=!0,this.updateSelfClient(t.client);var e=this.getExtendedInfo();this.global.uid||e.sex?(this.joinDialog(!1),this.join()):this.joinDialog(!0)},messageListener:function(t,e,n){switch(t){case"updateRoom":e.room&&e.room.alias===this.roomAlias&&(this.count=e.count),e.client&&(this.count=e.count,"add"===e.type?(this.addClient(e.client),this.$root.isFriend(e.client.info.uid)&&this.addMessage({friend:e.client})):"remove"===e.type?this.removeClient(e.client.id):"update"===e.type&&this.updateClient(e.client.id,e.client),("add"===e.type||"update"===e.type&&e.client.owner)&&this.$emit("ownerUpdate",e.client),e.client.self&&this.updateSelfClient(e.client)),e.client;break;case"selfUpdate":this.updateSelfClient(e.client);break;case"joined":this.joinDialog(!1);var a=this.getTab("main");!a||a.messages&&0!==a.messages.length||this.addMessage(e.lastMessages,"main"),this.updateSelfClient(e.self),this.clock=e.clock;break;case"users":this.setClients(e.list);break;case"message":var r="main";if(e.from){var i=this.getTab(e.from.id);i?this.tabActive!==i.id&&(i.notify=!0):i=this.addTabFromClient(e.from,{active:!1,requested:!0}),this.$root.documentVisible||(this.beep(),this.$root.titleAnimate("Приват")),r=i.id}if(e.my&&!e.from&&this.beep(),e.stopword&&this.userSettings.stopListHide)return log("stop word, cancel mess draw");this.addMessage(e,r);break;case"baned":this.addMessage({text:e.text,icon:"em em-hankey"});break;case"unban":this.$root.popupFix("Вы разбанены");break;case"private":if(this.userSettings.privateOff)return log("i'm disabled private )");this.$root.documentVisible||this.$root.titleAnimate("Приват");var s=e.__from,o=s.id,c=this.getTab(o);c?c.killed=!1:this.addTabFromClient(s,{active:!1,requested:!0});break;case"privateAccept":var l=e.__from,u=l.id,d=this.getTab(u);d?(d.accepted=!0,d.bounce=!0,d.killed=!1,this.addMessage({text:l.nickname+" вошел"},d.id)):error("tab not found",u);break;case"privateClose":var f=e.__from,h=f.id,p=this.getTab(h);p&&(p.killed=!0,this.addMessage({text:f.nickname+" вышел"},p.id));break;case"ignored":if(e.client&&this.updateClient(e.clientId,e.client),"added"===e.type&&this.ignors.push(e.clientId),"remove"===e.type){var m=this.ignors.indexOf(e.clientId);-1!==m&&this.ignors.splice(m,1)}break;case"leave_force":case"leave":this.joinDialog();break;case"moderated":this.$root.popupFix("Вы назначены модератором в этом чате");break;case"moderatedremove":this.$root.popupFixErr("Вас удалили из модераторов");break;case"money":this.clock=e.clock;break;case"selfExists":case"manyIp":this.joinDialog(!0);break;case"messRemoved":this.getTab("main").messages.forEach((function(t){t.mid==e.mid&&(t.__removed=!0)}));break;case"messRemovedFiltered":this.getTab("main").messages.forEach((function(t){(e.clientId&&t.owner&&t.owner.id==e.clientId||e.sid&&t.owner&&t.owner.sid==e.sid||e.uid&&t.owner&&t.owner.info&&t.owner.info.uid==e.uid)&&(t.__removed=!0)}))}},setClients:function(t){var e=this;this.clients=t.map((function(t){return t.owner&&e.$emit("ownerUpdate",t),e.wrapClient(t)}))},beep:function(){if(this.userSettings.soundOff)return log("sound off by settings chat");this.$root.beep("mess")},wrapClient:function(t){return t},updateClient:function(t,e){var n,a=this.getClientKey(t);null!==a?((n=this.clients[a])&&(e.popover=n.popover,e.__updater=n.__updater,e.__updater&&e.__updater(e)),this.$set(this.clients,a,this.wrapClient(e))):error("client not found")},addClient:function(t){this.clients.push(this.wrapClient(t))},removeClient:function(t){var e=this.getClientKey(t);null!==e&&this.clients.splice(e,1);var n=this.getTab(t);n&&(n.killed=!0)},sendEv:function(t){var e,n=this;if(t instanceof KeyboardEvent){var a="Enter"===t.key||13===t.which||13===t.keyCode,r=t.ctrlKey&&"Enter"===t.code;if(!(a&&!t.shiftKey&&this.userSettings.enterSend||r))return;e=t.target.value,t.preventDefault()}else t instanceof MouseEvent&&(e=this.textarea.value);this.sendMessage(e).finally((function(){head.mobile&&n.userSettings.closeVirtualKeyboard?n.closeVirtualKeyboard():n.textareaAppand(""),n.userSettings.closeFooterAfterSend&&head.mobile&&(n.footerShow=!1)})),this.userSettings.toTopAfterMess&&setTimeout((function(){window.scrollTo(0,0)}),100)},sendMessage:function(t){var e,n=this,a=Object.assign({text:"",flags:{}},"object"===Up(t)?t:{text:t}),r=[],i=this.tabCurrent();i.clientId&&(a.clientId=i.clientId);var s=this.$options.messageHandlers;for(var o in s)s.hasOwnProperty(o)&&(e=s[o].call(this,a))&&r.push(e);return this.sending=!0,Promise.all(r).then((function(){(a.text||a.images)&&(n.send("chat",a),window.mobileAppInterfaceReceiver&&window.mobileAppInterfaceReceiver.avail()&&window.mobileAppInterfaceReceiver.call("chatMessSended",{}))})).catch((function(t){n.$root.popupFixErr(t)})).finally((function(){n.resetInput(),n.sending=!1}))},send:function(t,e){this.ws.send(t,e)},resetInput:function(){this.textarea.value=""},enter:function(){var t=this.ws.isAuth();t&&this.onAuth(t)},join:function(t){t||(t={});var e=this.getExtendedInfo();t.sex&&(e.sex=t.sex),this.send("join",Object.assign(t,{room:this.roomAlias,extended:e}))},addMessage:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main",a=this.getTab(n);t instanceof Array||(t=[t]),t.forEach((function(t){t.__removed=null,t.mid||(t.mid="auto_"+Cl.Z.makeid(10)),e.vertical?a.messages.unshift(t):a.messages.push(t)}));var r=this.userSettings.maxMess;this.autoCleanMessagesTM&&(clearTimeout(this.autoCleanMessagesTM),this.autoCleanMessagesTM=null),a.messages.length>3*r?this.autoCleanMessages(n):a.autoScroll&&(this.autoCleanMessagesTM=setTimeout(this.autoCleanMessages.bind(this,n),300)),this.$nextTick((function(){e.scroll()}))},autoCleanMessages:function(t){var e=this.getTab(t),n=this.userSettings.maxMess;e.messages.length>n&&(this.vertical?e.messages.splice(n,e.messages.length):e.messages.splice(0,e.messages.length-n))},getRoom:function(){return this.$parent&&"room"===this.$parent.$options.name?this.$parent:null},moder:function(t){"bans"===t?this.$root.render(Ap,{roomId:this.roomId,chat:this}):"moder"===t&&this.$root.render(Op,{roomId:this.roomId,chat:this})},settionsOpen:function(){this.$root.make(Pp,{propsData:{chat:this},data:{settings:this.userSettings}}).$mount()},scroll:function(t){if(t||(t=this.tabCurrent()),t.autoScroll){var e=this.getCurrentMessageEl(this.tabActive);e&&("horizontal"===this.layout?e.scrollTo(0,e.scrollHeight):e.scrollTo(0,0))}},toNick:function(t){this.textareaAppand("#"+t.info.nickname+": ")},textareaAppand:function(t){this.textarea.focus(),this.textarea.insertAtCaret(t)},menuToggle:function(t){this.menuOpened=!this.menuOpened||t},getClient:function(t){var e=this.getClientKey(t);if(null!==e)return this.clients[e]},getClientKey:function(t){for(var e in this.clients)if(this.clients[e].id===t)return e;return null},moderToggle:function(t){(t.moder||confirm("Вы уверены, что хотите добавить его в смотрящие? Добавляйте только если ДОВЕРЯЕТЕ пользователю на 100%!"))&&this.send("toggleModer",{clientId:t.id})},updateSelfClient:function(t){this.self&&this.self.banedInRoom&&!t.banedInRoom&&this.$root.popupFix("Вас разбанили"),this.self=t},counterClk:function(){this.count++},scrollManual:function(){this.tabCurrent().autoScroll=!0,this.scroll()},onScroll:function(t){if(!this.userSettings.autoScrollSmartDisabled){var e=this.tabCurrent(),n=t.target,a=n.scrollHeight-n.clientHeight,r=this.vertical?0===n.scrollTop:n.scrollTop===a,i=this.scrollTopOld?this.scrollTopOld-n.scrollTop:null;this.scrollTopOld=n.scrollTop,(!this.vertical&&i>0||this.vertical&&i<0)&&(e.autoScroll=!1),!e.autoScroll&&r&&(e.autoScroll=!0)}},closeVirtualKeyboard:function(){this.textarea&&Cl.Z.closeVirtualKeyboard(this.textarea)},clean:function(){var t=this.getTab("main").messages;t.splice(0,t.length)},getExtendedInfo:function(){return Cl.Z.storage("chat_info")||{}},messRemoveToggle:function(t){if(t.__removed){if(!this.self||!this.self.moder)return;t.__removed=!1}else this.send({mess:"messRemove",data:{mid:t.mid,room:this.roomAlias}})},onImagesLoads:function(t,e){this.scroll(t)},clickHandler:function(t){var e=t.target;if(e.classList.contains("nick-to")){var n=e.dataset.clientId,a=this.getClient(n);a?this.toNick(a):error("client not found",n)}},record:function(t){var e=this;this.render(Ip.Z,{type:t,obj:"chat_room",alias:"record_stream",asStatis:!1}).$on("success",(function(t){t.image?e.sendMessage({images:[{big:t.sizes.big,url:t._orig}]}):e.sendMessage("[record "+(t.audio_only?"onlyaudio=1":"")+"]"+t._orig+"[/record]")}))},footerToggle:function(){var t=this;this.footerShow=!0,this.$nextTick((function(){t.textareaAppand("")}))},joinDialog:function(t){void 0===t&&(t=!0),this.loginComp.show(t)}}};const Gp=(0,Fl.Z)(Zp,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-chat row g-0 flex-column border",class:t.classes,attrs:{"data-layout":t.layout,"data-font-size":t.userSettings.font_size}},[n("loader",{directives:[{name:"show",rawName:"v-show",value:!t.ready,expression:"!ready"}]}),t._v(" "),n("chat-login",{ref:"login"}),t._v(" "),n("header",{staticClass:"col-auto bg-light"},[n("div",{staticClass:"row justify-content-between g-0 flex-nowrap"},[n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-sm btn-light",on:{click:function(e){return t.counterClk()}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:null!==t.count,expression:"count !== null"}],staticClass:"badge bg-success"},[t._v(t._s(t.count))])])]),t._v(" "),t._t("header"),t._v(" "),n("div",{staticClass:"col-auto row g-0 flex-nowrap align-items-center"},[t.self&&t.self.owner?n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-sm btn-light",attrs:{"data-title":"Опрос"},on:{click:function(e){return t.$root.openVoteAdmin({roomId:t.roomId})}}},[n("i",{staticClass:"em em-bar_chart",attrs:{"aria-role":"presentation","aria-label":"BAR CHART"}})])]):t._e(),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-sm btn-light",attrs:{"data-title":"Игноры"},on:{click:function(e){return t.$root.render("ignors",{})}}},[n("i",{staticClass:"em em-hankey",attrs:{"aria-role":"presentation","aria-label":"PILE OF POO"}})])]),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-sm btn-light",attrs:{"data-title":"Настройки"},on:{click:function(e){return t.settionsOpen()}}},[n("i",{staticClass:"em em-hammer_and_wrench",attrs:{"aria-role":"presentation","aria-label":""}})])]),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-sm btn-light",attrs:{"data-title":"О себе"},on:{click:function(e){return t.$root.render("aboutModal",{client:t.self})}}},[n("i",{staticClass:"em em-pencil2",attrs:{"aria-role":"presentation","aria-label":"PENCIL"}})])]),t._v(" "),t.self&&t.self.moder?n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-sm btn-light",attrs:{"data-title":"Баны"},on:{click:function(e){return t.moder("bans")}}},[n("i",{staticClass:"em em-no_entry_sign",attrs:{"aria-role":"presentation","aria-label":"NO ENTRY SIGN"}})])]):t._e(),t._v(" "),t.self&&t.self.owner?n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-sm btn-light",attrs:{"data-title":"Смотрящие"},on:{click:function(e){return t.moder("moder")}}},[n("i",{staticClass:"em em-male-police-officer",attrs:{"aria-role":"presentation","aria-label":""}})])]):t._e(),t._v(" "),n("div",{staticClass:"col-auto"},[t.$root.embed?t._e():n("button",{staticClass:"btn btn-sm btn-light",attrs:{"data-title":"Полный экран"},on:{click:function(e){return t.$root.$emit("fullscreenRequest")}}},[n("i",{staticClass:"fa fa-arrows-alt",attrs:{"aria-hidden":"true"}})]),t._v(" "),t.$root.floatingSupported?n("floating-toggler",{staticClass:"btn-sm btn-light"}):t._e()],1)])],2)]),t._v(" "),n("nav",{staticClass:"tabs col-auto"},t._l(t.tabs,(function(e){return n("span",{directives:[{name:"show",rawName:"v-show",value:"main"!==e.id||t.tabs.length>1,expression:"tab.id !== 'main' || tabs.length > 1"}],key:e.id,staticClass:"text-truncate btn btn-light border m-1 tab",class:{"can-closed":"main"!==e.id,active:e.active,"animate__animated animate__flash animate__infinite":e.requested&&!e.accepted||e.notify,killed:e.killed,"animate__animated animate__bounce":e.bounce},attrs:{"data-id":e.id},on:{click:function(n){return n.target!==n.currentTarget?null:t.activeTab(e)}}},["main"!==e.id?n("i",{staticClass:"fa fa-remove close",on:{click:function(n){return t.closeTab(e.id)}}}):t._e(),t._v("\n            "+t._s(e.name)+"\n\n\n        ")])})),0),t._v(" "),n("main",{ref:"mainEl",staticClass:"col",on:{click:function(e){return t.clickHandler(e)}}},[t._l(t.tabs,(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.tabActive===e.id,expression:"tabActive === tab.id"}],key:e.id,ref:"chatMessageEls",refInFor:!0,staticClass:"chat-messages",attrs:{"data-id":e.id},on:{scroll:function(e){return t.onScroll(e)}}},[n("button",{directives:[{name:"show",rawName:"v-show",value:!e.autoScroll,expression:"!tab.autoScroll"}],staticClass:"scroller-botom btn btn-danger btn-sm",on:{click:function(e){return t.scrollManual()}}},[n("i",{staticClass:"bi",class:{"fa fa-arrow-down":!t.vertical,"fa fa-arrow-up":t.vertical}}),t._v("\n                "+t._s(t.vertical?"Вверх":"Вниз")+"\n            ")]),t._v(" "),t._l(e.messages,(function(e){return n("div",{key:e.mid,staticClass:"mess-row",class:{ad:e.flags&&e.flags.ad},attrs:{"data-id":e.mid||""}},[n("div",{staticClass:"row g-0"},[n("div",{staticClass:"col"},[e.owner?[e.__removed?[n("em",{staticClass:"text-muted user-select-none",staticStyle:{cursor:"help"},on:{dblclick:function(n){return t.messRemoveToggle(e)}}},[n("i",{staticClass:"fa fa-trash"}),t._v(" сообщение удалено")])]:[n("span",{directives:[{name:"user-popup",rawName:"v-user-popup",value:e.owner,expression:"mess.owner"}],staticClass:"avatar"},[n("img",{staticStyle:{height:"30px"},attrs:{src:e.owner.info.avatar}})]),t._v(" "),e.owner.owner?n("i",{staticClass:"crown em em-crown",attrs:{title:"Автор трансляции"}}):t._e(),t._v(" "),e.stopword?n("i",{staticClass:"animate__animated animate__bounce fa fa-exclamation-triangle text-danger",attrs:{"data-title":"Фраза из стоп-листа"}}):t._e(),t._v(" "),n("strong",{directives:[{name:"nick-style",rawName:"v-nick-style",value:{font:e.owner.info.font,theme:t.userSettings.whiteMess?"light":""},expression:"{font: mess.owner.info.font, theme: userSettings.whiteMess ? 'light' : ''}"}],staticClass:"nick nick-to",on:{click:function(n){return t.toNick(e.owner)}}},[t._v(t._s(e.owner.nickname))]),t._v(" "),n("span",{directives:[{name:"parsed-html",rawName:"v-parsed-html",value:{text:e.text,theme:t.userSettings.whiteMess?"light":""},expression:"{text: mess.text, theme: userSettings.whiteMess ? 'light' : ''}"}],staticClass:"text"}),t._v(" "),e.attached&&e.attached.length>0?n("div",{staticClass:"attach-images row g-0 justify-content-center text-center"},t._l(e.attached,(function(e){return n("div",{staticClass:"col image"},[n("a",{directives:[{name:"on-image",rawName:"v-on-image",value:t.onImagesLoads.bind(null,t.tabCurrent()),expression:"onImagesLoads.bind(null, tabCurrent())"}],staticClass:"d-block",attrs:{href:e.big,"data-fancybox":""}},[n("img",{attrs:{width:e.width,height:e.height,src:e.url}})])])})),0):t._e(),t._v(" "),t.self&&t.self.moder?n("div",{staticClass:"position-absolute end-0 top-0 me-1  mess-actions"},[null===e.__removed?n("button",{staticClass:"btn btn-secondary btn-sm px-1 py-0 remove-mess-btn",attrs:{"data-title":"Удалить сообщение"},on:{click:function(n){return t.messRemoveToggle(e)}}},[n("i",{staticClass:"fa fa-remove"})]):t._e()]):t._e()]]:[e.friend?[n("span",{directives:[{name:"user-popup",rawName:"v-user-popup",value:e.friend,expression:"mess.friend"}],staticClass:"avatar"},[n("img",{staticStyle:{height:"30px"},attrs:{src:e.friend.info.avatar}})]),t._v(" "),n("span",{directives:[{name:"nick-style",rawName:"v-nick-style",value:{font:e.friend.info.font,theme:t.userSettings.whiteMess?"light":""},expression:"{font: mess.friend.info.font, theme: userSettings.whiteMess ? 'light' : ''}"}],staticClass:"nick nick-to",on:{click:function(n){return t.toNick(e.friend)}}},[t._v(t._s(e.friend.nickname))]),t._v(" "),n("strong",{staticClass:"app-text-anim",attrs:{"data-text-anim-timeout":"15000"}},[t._v("О, я пришел!")]),t._v(" "),n("i",{staticClass:"fa fa-handshake-o"})]:[e.icon?n("i",{class:e.icon}):t._e(),t._v(" "),n("span",{domProps:{innerHTML:t._s(e.text)}})]]],2)])])}))],2)})),t._v(" "),n("div",{staticClass:"menu bg-light row g-0 "},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.menuOpened,expression:"menuOpened"}],staticClass:"col-auto border",staticStyle:{"max-height":"100%"}},[n("div",{staticClass:"row g-0 h-100",staticStyle:{"flex-direction":"column"}},[n("div",{staticClass:"col clients"},t._l(t.clientsSotred,(function(e){return n("div",{directives:[{name:"user-popup",rawName:"v-user-popup",value:e,expression:"client"},{name:"show",rawName:"v-show",value:e.filtered,expression:"client.filtered"}],key:e.id,staticClass:"client row g-0 align-items-start flex-nowrap",on:{dblclick:function(n){t.private(e),t.menuToggle(!1)}}},[n("div",{staticClass:"col-auto me-2 avatar"},[n("img",{staticClass:"app-avatar",attrs:{src:e.info.avatar}})]),t._v(" "),n("div",{staticClass:"col-auto nick-wrapper"},[n("span",{staticClass:"nickname text-truncate d-inline-block",class:{"text-decoration-line-through":e.ignored}},[t._v(t._s(e.info.nickname))]),t._v(" "),n("div",{staticClass:"statuses"},[!e.info.uid&&e.info.country_flag?n("span",{domProps:{innerHTML:t._s(e.info.country_flag)}}):t._e(),t._v(" "),e.self?n("strong",{staticClass:"role text-danger"},[t._v("Я")]):t._e(),t._v(" "),e.owner?n("strong",{staticClass:"role",staticStyle:{color:"green"}},[t._v("автор")]):t._e(),t._v(" "),e.moder&&!e.moderator?n("strong",{staticClass:"role text-danger"},[t._v("смотрящий")]):t._e(),t._v(" "),e.moderator?n("strong",{staticClass:"role"},[t._v("модератор")]):t._e(),t._v(" "),n("strong",{directives:[{name:"show",rawName:"v-show",value:e.info.statusText,expression:"client.info.statusText"}],staticClass:"status"},[t._v(t._s(e.info.statusText))])])])])})),0),t._v(" "),n("div",{staticClass:"col-auto filter-quick",class:{opened:t.filterQuickOpened}},[n("div",{staticClass:"text-center lh-1"},[n("i",{staticClass:"border icon fa",class:{"fa-angle-double-up":!t.filterQuickOpened,"fa-angle-double-down":t.filterQuickOpened},attrs:{"aria-hidden":"true"},on:{click:function(e){t.filterQuickOpened=!t.filterQuickOpened}}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.filterQuickOpened,expression:"filterQuickOpened"}],staticClass:"row g-0"},[n("div",{staticClass:"col"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.query,expression:"filter.query"}],staticClass:"form-control form-control-sm",attrs:{type:"text",autocomplete:"off",placeholder:"поиск...",required:"required"},domProps:{value:t.filter.query},on:{input:function(e){e.target.composing||t.$set(t.filter,"query",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"col-auto"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.sex,expression:"filter.sex"}],staticClass:"form-control form-control-sm",attrs:{name:"sex"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filter,"sex",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("пол")]),t._v(" "),n("option",{attrs:{value:"m"}},[t._v("м")]),t._v(" "),n("option",{attrs:{value:"f"}},[t._v("ж")])])])])])])]),t._v(" "),n("div",{staticClass:"col-auto spacer bg-light",on:{click:function(e){return t.menuToggle()}}},[n("div",{staticClass:"row g-0 align-items-center h-100"},[n("div",{staticClass:"col"},[n("i",{staticClass:"fa",class:{"fa-chevron-left":!t.menuOpened,"fa-chevron-right":t.menuOpened},attrs:{"aria-hidden":"true"}})])])])])],2),t._v(" "),n("footer",{staticClass:"col-auto border-top"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.footerShow,expression:"!footerShow"}],staticClass:"m-2",on:{click:function(e){return t.footerToggle()}}},[t._m(0)]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.imbaned&&t.footerShow,expression:"!imbaned && footerShow"}]},[t.global.user&&t.global.user.settings.experemental?[n("super-smiles",{pre:!0,attrs:{btn:"&#128571;","popup-width":"600",":textarea":"'#'+idStatic('textarea_chat')"}})]:t._e(),t._v(" "),n("smiles",{directives:[{name:"show",rawName:"v-show",value:!t.global.user||!t.global.user.settings.experemental,expression:"!global.user || !global.user.settings.experemental"}],ref:"smiles",staticClass:"m-1",attrs:{"btn-cls":"btn-light",placement:"vertical"===t.layout?"bottom":"top"}}),t._v(" "),n("div",{staticClass:"position-relative"},[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.sending,expression:"sending"}]}),t._v(" "),n("textarea",{directives:[{name:"upload",rawName:"v-upload"}],ref:"textarea",staticClass:"w-100 form-control mb-1",attrs:{disabled:t.sending,id:t.idStatic("textarea_chat")},on:{keypress:function(e){return t.sendEv(e)}}})],1),t._v(" "),n("div",{staticClass:"row p-1 g-0"},[n("div",{staticClass:"col"},[n("uploader",{ref:"uploader",attrs:{"btn-cls":"btn-light",obj:"chat_room","obj-id":t.roomId,alias:"chat_image","preview-size":"icon"}})],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("dropdown",{attrs:{label:"Ещё","data-icon-align":"center"}},[n("span",{staticClass:" dropdown-item",on:{click:function(e){return t.record("video")}}},[n("i",{staticClass:"em em-camera",attrs:{"aria-role":"presentation","aria-label":"CAMERA"}}),t._v(" записать видео")]),t._v(" "),n("span",{staticClass:" dropdown-item",on:{click:function(e){return t.record("audio")}}},[n("i",{staticClass:"em em-speaking_head_in_silhouette",attrs:{"aria-role":"presentation","aria-label":""}}),t._v(" записать голос")]),t._v(" "),n("span",{staticClass:" dropdown-item",on:{click:function(e){return t.$root.openAdChat()}}},[n("i",{staticClass:"em em-loudspeaker"}),t._v(" Объявление")]),t._v(" "),n("span",{staticClass:" dropdown-item",on:{click:function(e){return t.clean()}}},[n("i",{staticClass:"fa fa-file-o",attrs:{"aria-hidden":"true"}}),t._v(" очистить чат")]),t._v(" "),n("span",{staticClass:" dropdown-item",on:{click:function(e){return t.leave()}}},[n("i",{staticClass:"fa fa-sign-out",attrs:{"aria-hidden":"true"}}),t._v(" выйти")])]),t._v(" "),n("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.sendEv(e)}}},[n("i",{staticClass:"fa fa-paper-plane",attrs:{"aria-hidden":"true"}}),t._v(" Послать")])],1)])],2),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.imbaned,expression:"imbaned"}]},[t._m(1)])])],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-secondary btn-sm"},[n("i",{staticClass:"fa fa-pencil"}),t._v(" Написать в чат")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert alert-danger m-0 text-center"},[n("strong",[t._v("\n                    Вы заблокированы в этом чате\n                    "),n("i",{staticClass:"fa fa-meh-o"})])])}],!1,null,null,null).exports;var zp=n(90640),qp=n.n(zp);const Kp={name:"croper",props:{config:{type:Object},cropperOptions:{type:Object},file:{type:File}},data:function(){return{}},created:function(){this.cropper=null,this.coords={},this._cropperOptions=Object.assign({modal:!0,aspectRatio:1,viewMode:1,zoomable:!1,scalable:!1,movable:!1},this.cropperOptions)},mounted:function(){var t=this;this.$refs.modal.$on("save",(function(){t.$emit("cropped",t.coords),t.$refs.modal.close()}))},methods:{open:function(){var t=this,e=this.file,n=this.$refs.img;if(e instanceof File){var a=new FileReader;a.onload=function(e){n.src=a.result,t.init(n)},a.readAsDataURL(e)}else e instanceof Image&&this.init(e)},init:function(t){var e=this,n=this.config;log(t);t.width,t.naturalWidth;var a=Object.assign({autoCrop:!1,ready:function(t){var e=r.getImageData(),a=e.width/e.naturalWidth;log(a),n.minW&&(r.options.minCropBoxWidth=n.minW*a),n.minH&&(r.options.minCropBoxHeight=n.minH*a),r.crop()},crop:function(t){e.coords=t.detail}},this._cropperOptions),r=new(qp())(t,a)}}};const Wp=(0,Fl.Z)(Kp,(function(){var t=this.$createElement,e=this._self._c||t;return e("modal",{ref:"modal",staticClass:"app-cropper",attrs:{title:"Обрезка фото",save:"Установить"}},[e("img",{ref:"img"})])}),[],!1,null,null,null).exports;function Yp(t){return(Yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}const Xp={name:"uploader",props:{btnCls:{type:String,default:"btn-secondary"},image:{type:String},maxFiles:{type:Number,default:1},maxFileSize:{type:Number,default:__app_settings.uploadMaxSize},maxWidth:{type:String,default:"200"},maxSec:{type:Number},inputname:{type:String,default:"file"},bindname:{type:String,default:"files[]"},url:{type:String,default:"/api/uploadFile"},previewSize:{type:String,default:"medium"},alias:{type:String},label:{type:String},obj:{type:String},objId:{type:Number},removeBtn:{type:Boolean,default:!0},cropper:{type:Object},boundary:{type:String,default:"bound987943875943y"},onlyprogress:{type:Boolean,default:!1},data:{type:Object},mime:{type:Array}},data:function(){return{mime$:"",attached:[],progress:null,curImage:this.image}},computed:{},created:function(){var t=this;this.curFileIndex=void 0,this.filestoProcess=[],this.handlers=[],this.pasteListener=null,void 0===this.curImage||this.curImage||(this.curImage=this.global.imageBlank),this.mime&&this.mime instanceof Array?this.mime$=this.mime.join(","):this.mime$=this.global.imagesMime,this.cropper&&this.addHandler((function(e){var n=$.Deferred(),a=t.$root.make(Wp,{propsData:{config:t.cropper,file:e}});return a.$on("cropped",(function(t){n.resolve({crop:t})})),a.$mount(),a.open(),n}))},mounted:function(){var t=this;this.file=this.$refs.file,this.file.addEventListener("change",(function(){t.attachFile(t.file.files)})),this.paste&&document.getElementById(this.paste)},methods:{mess:function(t,e){this.$root.popupFix(t,e)},messError:function(t){this.mess(t,"error")},addHandler:function(t){this.handlers.push(t)},runHandlers:function(t){var e=[],n=$.Deferred(),a=this.handlers;return a.length>0?(a.forEach((function(n){e.push(n(t))})),$.when.apply(null,e).then((function(){for(var t={},e=0;e<arguments.length;e++)t=Object.assign(t,arguments[e]);n.resolve(t)}))):n.resolve(),n},process:function(){var t=this,e=this.filestoProcess[this.curFileIndex];e?this.runHandlers(e).then((function(n){if(t.maxFileSize&&e.size>t.maxFileSize)return t.messError("Слишком большой размер файла("+Cl.Z.bytes(e.size)+"), максимальный размер: "+Cl.Z.bytes(t.maxFileSize)),t.resetInput(),!1;t.uploadFile(e,n).then((function(e){log("uploaded",e),t.attached.push(e),t.$emit("upload",e),t.curImage&&e.asImage&&(t.curImage=t.previewSize&&e.sizes[t.previewSize]||e._orig),t.curFileIndex++,t.progress=null,t.process()})).progress((function(e){t.progress=e})).fail((function(e){t.messError(e),t.$emit("error",e),t.progress=null}))})).catch((function(e){t.$emit("error",e)})):this.$emit("complete")},resetUI:function(){},reset:function(){this.curFileIndex=0,this.filestoProcess=[],this.progress=null,this.attached=[],this.resetInput()},open:function(){this.resetInput(),this.file.click()},getAttached:function(){return this.attached.map((function(t){return t.id}))},resetInput:function(){this.file.value=""},attachFile:function(t){return t instanceof FileList||t instanceof Array||(t=[t]),this.curImage&&(this.attached=[]),this.maxFiles&&this.attached.length>=this.maxFiles?(this.resetInput(),this.messError("Максимум "+this.maxFiles+" файл(ов). Удалите и повторите попытку"),!1):"function"!=typeof window.FileReader?(this.reset(),this.messError("Ваш браузер не поддерживает работу с картинками. Установите нормальный браузер."),!1):(log("attach files",t),this.curFileIndex=0,this.filestoProcess=t,void this.process())},attachFromClipboard:function(t){if(t&&t.clipboardData)for(var e=t.clipboardData.items,n=0;n<e.length;n++){var a=e[n];Cl.Z.isImage(a.type)&&this.attachFile(a.getAsFile())}},removeImage:function(){var t=this;pl.V.make("/api/action/deleteFile",{opt:{alias:this.alias},obj:this.obj,obj_id:this.objId,action:"deleteFile"}).then((function(e){t.curImage=t.global.imageBlank})).catch((function(e){t.messError(e)}))},addRawPart:function(t,e){var n="";return n+="--"+this.boundary+"\r\n",n+="Content-Disposition: form-data; name='"+t+"'\r\n\r\n",n+=e+"\r\n"},uploadFile:function(t,e){log("upload",t,this.url);var n={};e||(e={}),this.obj&&(n.obj=this.obj),this.objId&&(n.obj_id=this.objId),this.alias&&(n.alias=this.alias);var a,r=new XMLHttpRequest,i=$.Deferred(),s=("name"in t&&t.name,0),o=Object.assign({},this.data||{},n,e);"type"in t&&t.type;return pl.V.applySuperParams(o),log("upload post",o),this.xhr=r,r.upload.onprogress=function(t){s=t.loaded/t.total*100,i.notify(s,t)},r.onload=function(){if(200===r.status){var t=new pl.f("json");t.xhr(r),t.error?(error("upload error",t.error),i.reject(t.error)):i.resolve(t.result)}else i.reject("Ошибка загрузки файла: "+r.status)},r.onerror=function(){error(r),i.reject("Ошибка соединения с сервером")},r.onabort=function(){i.reject("Загрузка прервана")},r.open("POST",this.url),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),(a=new FormData).append(this.inputname,t),$.each(o,(function(t,e){"object"!==Yp(e)?a.append(t,e):$.each(e,(function(e,n){a.append(t+"["+e+"]",n)}))})),r.send(a),i.promise()},abort:function(){this.xhr&&this.xhr.abort()}}};const Jp=(0,Fl.Z)(Xp,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-uploader",class:{"app-uploader-pick":t.curImage}},[null===t.progress||t.curImage?n("div",[t.curImage?n("div",{staticClass:"d-inline-block position-relative"},[n("img",{staticClass:"pickimage",style:"max-width:"+t.maxWidth+"px",attrs:{src:t.curImage},on:{click:function(e){return t.open()}}}),t._v(" "),t.label?n("span",{staticClass:"label"},[t._v(t._s(t.label))]):t._e(),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:t.removeBtn,expression:"removeBtn"}],staticClass:"btn btn-danger btn-sm remove-image",attrs:{"data-title":"Удалить",type:"button"},on:{click:function(e){return t.removeImage()}}},[n("i",{staticClass:"fa fa-trash"})])]):n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.onlyprogress,expression:"!onlyprogress"}],staticClass:"row g-0"},[n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-sm app-uploader-fileholder",class:t.btnCls,attrs:{type:"button","data-title":!t.label&&"Прикрепить изображения"},on:{click:function(e){return t.open()}}},[n("i",{staticClass:"fa fa-paperclip",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.label)+"\n                    ")])]),t._v(" "),n("div",{staticClass:"col"},t._l(t.attached,(function(e,a){return t.attached.length>0&&e.asImage?n("span",{staticClass:"attached-img mx-1",on:{click:function(e){return t.attached.splice(a,1)}}},[n("img",{staticStyle:{height:"31px"},attrs:{src:e.sizes[t.previewSize]||e._orig}})]):t._e()})),0)])])]):t._e(),t._v(" "),null!==t.progress?n("div",{staticClass:"row g-0 progress-wrapper"},[n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.abort}},[n("i",{staticClass:"fa fa-ban"})])]),t._v(" "),n("div",{staticClass:"col"},[n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar progress-bar-striped",style:"width:"+t.progress+"%",attrs:{role:"progressbar","aria-valuenow":t.progress,"aria-valuemin":"0","aria-valuemax":"100"}})])])]):t._e(),t._v(" "),n("input",{ref:"file",staticClass:"file",attrs:{type:"file",accept:t.mime$}}),t._v(" "),t._l(t.attached,(function(t,e){return n("input",{attrs:{type:"hidden",name:"files[]"},domProps:{value:t.id}})})),t._v(" "),t._t("default")],2)}),[],!1,null,null,null).exports;const Qp={name:"navbar",props:{prop:{type:String}},data:function(){return{moderAlert:!1,messCount:0,lastMessUid:0,lastMessGroup:0,alerts:0}},created:function(){if(this.alerts=this.global.user?this.global.user.hasAlerts:0,this.messCount=this.global.user?this.global.user.hasNewMess:0,this.global.moderating)for(var t in this.global.moderating){var e=this.global.moderating[t];e instanceof Array&&e.length>0&&(this.moderAlert=!0)}},mounted:function(){var t=this;this.sitemenu=this.$root.getComponent("sitemenu"),this.$refs.sitemenuToggler.addEventListener("click",(function(){t.sitemenu&&t.sitemenu.toggle()}))},methods:{}};const tm=(0,Fl.Z)(Qp,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar navbar-light flex-nowrap sticky-top g-0",attrs:{id:"main-nav"}},[n("div",{staticClass:"container-fluid g-0 flex-nowrap"},[n("div",{staticClass:"row  mainmenu flex-nowrap"},[n("div",{staticClass:"col-auto"},[n("button",{ref:"sitemenuToggler",staticClass:"navbar-toggler app-navbar-toggler d-block",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[n("span",{staticClass:"navbar-toggler-icon"})])]),t._v(" "),n("div",{staticClass:"col-auto px-0"},[n("router-link",{staticClass:"logo col-auto d-md-inline-block ml-1",attrs:{to:"/"}},[n("img",{attrs:{src:"/i/logo.png",alt:"Livacha.com"}})])],1),t._v(" "),t._e(),t._v(" "),t.$root.width>500?n("div",{staticClass:"col-auto"},[n("router-link",{staticClass:"btn btn-success",attrs:{to:"/start"}},[n("i",{staticClass:"fa fa-rss"}),t._v(" "),n("strong",{staticClass:"d-none d-md-inline"},[t._v("Начать")])])],1):t._e()]),t._v(" "),n("div",{staticClass:"row user-wrapper g-0 flex-nowrap"},[t.global.moder?n("a",{staticClass:"col-auto avatar icon-col",class:{"animate__animated animate__flash animate__infinite animate__slow animate__delay-2s":t.moderAlert},attrs:{href:"/moderator"},on:{click:function(e){e.preventDefault(),t.moderAlert=!1,t.$root.openModerDashBoard()}}},[n("i",{staticClass:"em em-male-police-officer",attrs:{"aria-role":"presentation","aria-label":""}})]):t._e(),t._v(" "),t.global.uid?n("a",{staticClass:"col-auto avatar icon-col",class:{"text-danger animate__animated animate__flash animate__infinite animate__slow animate__delay-2s":t.alerts>0},attrs:{href:"/alerts"},on:{click:function(e){e.preventDefault(),t.$root.openAlerts(),t.alerts=0}}},[n("i",{staticClass:"fa fa-bell-o",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),t.global.uid?n("a",{staticClass:"col-auto avatar icon-col",class:{"animate__animated animate__flash animate__infinite animate__slow":t.messCount>0},attrs:{href:"/messages"},on:{click:function(e){e.preventDefault(),t.$root.openMessages(t.lastMessUid?t.lastMessUid:{group:t.lastMessGroup}),t.messCount=0,t.lastMessUid=0,t.lastMessGroup=0}}},[n("i",{staticClass:"fa fa-envelope-o",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.messCount>0,expression:"messCount > 0"}],staticClass:"ms-1 badge bg-success rounded-pill"},[t._v(t._s(t.messCount))])]):t._e(),t._v(" "),t.global.uid?n("div",{staticClass:"col-auto avatar"},[n("uploader",{attrs:{"remove-btn":!1,cropper:{params:{obj:"user",obj_id:t.global.uid},minW:t.global.cropper.minW,minH:t.global.cropper.minH},"max-files":1,alias:"avatar","preview-size":"crop",label:"",obj:"user","obj-id":t.global.uid,image:t.global.user.avatar}})],1):t._e(),t._v(" "),n("div",{staticClass:"dropdown col-auto ",attrs:{id:"user-menu"}},[n("a",{ref:"dropDownToogler",staticClass:"dropdown-toggle",attrs:{href:t.global.uid?"#":t.global.lastLogin?"/login":"/register",role:"button",id:"dropdownMenuLink","data-bs-toggle":!!t.global.uid&&"dropdown","aria-expanded":"false"},on:{click:function(e){return e.preventDefault(),t.$root.login(e,{tab:t.global.lastLogin?"login":"register"})}}},[n("div",{staticClass:"d-inline-block app-text-overflow text-white",staticStyle:{"max-width":"80px"}},[t.global.uid?t._e():n("i",{staticClass:"fa fa-lock"}),t._v(" "),n("strong",[t._v(t._s(t.global.user?t.global.user.name:t.global.lastLogin?"ВОЙТИ":"ВХОД"))])])]),t._v(" "),n("div",{staticClass:"dropdown-menu dropdown-menu-end"},[t.global.uid?[n("router-link",{staticClass:" dropdown-item",attrs:{to:"/start"}},[n("i",{staticClass:"fa fa-circle text-danger",attrs:{"aria-hidden":"true"}}),n("strong",[t._v("Моя трансляция")])]),t._v(" "),n("a",{directives:[{name:"mess",rawName:"v-mess"}],staticClass:"dropdown-item",attrs:{href:"/messages"}},[n("i",{staticClass:"fa fa-envelope",attrs:{"aria-hidden":"true"}}),t._v(" Сообщения")]),t._v(" "),n("a",{staticClass:"dropdown-item",attrs:{target:"_blank",href:"/profile"},on:{click:function(e){return e.preventDefault(),t.$root.openMyProfile()}}},[n("i",{staticClass:"fa fa-wrench",attrs:{"aria-hidden":"true"}}),t._v("ПРОФИЛЬ")]),t._v(" "),n("a",{directives:[{name:"user",rawName:"v-user",value:t.global.user.id,expression:"global.user.id"}],staticClass:"dropdown-item",attrs:{target:"_blank",href:t.global.user.link}},[n("i",{staticClass:"fa fa-home",attrs:{"aria-hidden":"true"}}),t._v(" Моя страница")]),t._v(" "),n("router-link",{staticClass:"dropdown-item",attrs:{to:"/post_new"}},[n("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v("Создать заметку")]),t._v(" "),n("a",{staticClass:"dropdown-item",attrs:{target:"_blank",href:"/market"},on:{click:function(e){return e.preventDefault(),t.$root.openSeller()}}},[n("i",{staticClass:"fa fa-rub",staticStyle:{"margin-left":"-3px"},attrs:{"aria-hidden":"true"}}),t._v(" "),n("strong",[t._v("Ливачи")]),t._v(" "),n("small",{staticClass:"badge",class:{"bg-primary":t.global.user.money>0,"bg-secondary":!t.global.user.money},attrs:{"data-title":"Доступно для вывода"}},[n("rub",{attrs:{money:t.global.user.money}})],1),t._v(" "),t.global.user.money_draft?n("small",{staticClass:"badge bg-secondary",attrs:{"data-title":"Заморожено"}},[n("rub",{attrs:{money:t.global.user.money_draft}})],1):t._e()]),t._v(" "),t._e(),t._v(" "),n("a",{staticClass:"dropdown-item text-danger border-top",attrs:{href:"/logout"},on:{click:function(e){return t.$root.logout(e)}}},[n("i",{staticClass:"fa fa-sign-out",attrs:{"aria-hidden":"true"}}),t._v(" Выход")])]:[t.global.userPending||t.global.lastLogin?t.global.userPending?n("span",{staticClass:"dropdown-item text-primary border-top",on:{click:function(e){return t.$root.login(e,{tab:"complete"})}}},[n("i",{staticClass:"fa fa-envelope-o",attrs:{"aria-hidden":"true"}}),t._v(" Подтвердить регистрацию")]):t._e():n("div",{staticClass:"p-3",staticStyle:{width:"300px"}},[t._m(3),t._v(" "),n("p",[t._v("Путешествуя по бескрайним просторам интернет-паутины ты посетил наш уютный уголок")]),t._v(" "),n("p",[t._v("Что ж, садись, отдохни с дороги")])]),t._v(" "),n("a",{staticClass:"dropdown-item text-success border-top",attrs:{href:"/login"},on:{click:function(e){return e.preventDefault(),t.$root.login(e,{tab:t.global.userPending?"login":"register"})}}},[t._m(4)])]],2)])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"dropdown-item border-top",attrs:{href:""}},[n("i",{staticClass:"text-danger fa fa-trash",attrs:{"aria-hidden":"true"}}),t._v(" Баны")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"dropdown-item",attrs:{href:""}},[n("i",{staticClass:"text-danger fa fa-exclamation-triangle",attrs:{"aria-hidden":"true"}}),t._v(" Жалобы")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"dropdown-item",attrs:{href:""}},[n("i",{staticClass:"fa fa-rss",attrs:{"aria-hidden":"true"}}),t._v(" Лента")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("strong",[t._v("Здравствуй, странник!")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("strong",[n("i",{staticClass:"fa fa-sign-out",attrs:{"aria-hidden":"true"}}),t._v(" Вход")])}],!1,null,null,null).exports;const em={name:"status",props:{chat:{type:Object,default:null}},data:function(){return{}},created:function(){},mounted:function(){},methods:{update:function(t){var e=this,n=this.$refs.custom.value;pl.V.make("status",{status:t,statusText:n}).then((function(){e.global.user.status.current=t,e.global.user.status.custom=n})).catch((function(t){e.$root.popupFixErr(t)})),this.chat&&this.chat.ws.echo("updateStatus",{status:t,statusText:n},(function(t){}))}}};const nm=(0,Fl.Z)(em,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dropdown app-dropdown status app-dropdown-status d-inline-block"},[n("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n        Статус\n    ")]),t._v(" "),n("div",{staticClass:"dropdown-menu"},[t._l(t.global.statuses,(function(e,a){return n("div",{staticClass:"dropdown-item",class:{active:t.global.user.status.current===a},on:{click:function(e){return t.update(a)}}},[t._v(t._s(e))])})),t._v(" "),n("div",{staticClass:"dropdown-item custom p-1",class:{active:"custom"===t.global.user.status.current}},[n("div",{staticClass:"row g-0"},[n("input",{ref:"custom",staticClass:"col form-control",attrs:{type:"text",maxlength:"255",placeholder:"свой..."},domProps:{value:t.global.user?t.global.user.status.custom:""}}),t._v(" "),n("button",{staticClass:"col-auto btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.update("custom")}}},[t._v("ok")])])])],2)])}),[],!1,null,null,null).exports;const am={name:"sitemenu",props:{prop:{type:String}},data:function(){return{friendsEmpty:!0}},created:function(){},mounted:function(){},methods:{toggle:function(t){$(this.$root.$el).toggleClass("sitemenu-open",t)},click:function(t){var e=t.target;("A"===e.nodeName||e.closest("a"))&&this.toggle(!1)}}};const rm=(0,Fl.Z)(am,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-sitemenu border-end",on:{click:t.click}},[n("div",{staticClass:"menu"},[n("div",{staticClass:"items"},[t._e(),t._v(" "),n("router-link",{staticClass:"start-button",attrs:{to:"/start"}},[n("i",{staticClass:"text-danger fa fa-video-camera",attrs:{"aria-hidden":"true"}}),t._v(" "),n("strong",[t._v("Начать")])]),t._v(" "),n("router-link",{attrs:{to:"/"}},[n("i",{staticClass:"fa fa-rss",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",[t._v("Трансляции")])]),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),t.$root.appSettingsGlobal.showSos?n("a",{attrs:{href:"/sos"}},[n("i",{staticClass:"em em-sos",attrs:{"aria-role":"presentation","aria-label":"SQUARED SOS"}}),t._v(" "),n("strong",{staticClass:"text-danger"},[t._v("Ваша помощь")])]):t._e(),t._v(" "),n("a",{attrs:{href:"/support"},on:{click:function(e){return e.preventDefault(),t.$root.openSupport()}}},[n("i",{staticClass:"em em-grey_question",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",[t._v("Поддержка")])]),t._v(" "),n("router-link",{attrs:{to:"/users"}},[n("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",[t._v("Поиск")])]),t._v(" "),[t._e(),t._v(" "),n("router-link",{attrs:{to:"/posts"}},[n("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",[t._v("Заметки")])]),t._v(" "),t._e()],t._v(" "),[n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$root.changeTheme()}}},[n("i",{staticClass:"text-primary fa fa-paint-brush",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",[t._v("Сменить тему")])]),t._v(" "),n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$root.render("nick-theme")}}},[n("i",{staticClass:"em em-art"}),t._v(" "),n("span",{},[t._v("Настройка ника")])]),t._v(" "),t._e()],t._v(" "),n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$root.openAdChat()}}},[n("i",{staticClass:"em em-loudspeaker"}),t._v(" Объявление")]),t._v(" "),t._m(2),t._v(" "),n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$root.openBugReport()}}},[n("i",{staticClass:"fa fa-bug text-danger",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",[t._v("Нашел баг?")])]),t._v(" "),t._m(3),t._v(" "),t._m(4)],2)]),t._v(" "),t.global.uid?[n("hr",{staticClass:"mb-0"}),t._v(" "),n("div",{staticClass:"text-center lh-1 pt-2"},[n("small",[n("em",[t._v(t._s(t.global.friends_slogan))])])]),t._v(" "),n("friends",{staticClass:"my-2"}),t._v(" "),n("hr",{staticClass:"mt-0"}),t._v(" "),n("div",{staticClass:"text-center"},[n("status")],1)]:t._e(),t._v(" "),t._m(5),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"row g-0"},[n("div",{staticClass:"col-auto"},[n("connect-status")],1)])],2)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{attrs:{href:""}},[n("i",{staticClass:"em em-hear_no_evil",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",[t._v("Конкурс")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{attrs:{href:""}},[n("i",{staticClass:"em em-man-man-girl",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",[t._v("Видеочат")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{attrs:{href:"/services"}},[n("i",{staticClass:"fa fa-rub",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",[t._v("Платные услуги")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{attrs:{href:"https://t.me/livacha",target:"_blank",title:"Чат Ливача в Telegramm"}},[n("img",{staticStyle:{height:"24px","margin-left":"-5px","margin-right":"15px"},attrs:{src:"/i/socials/telega.png"}}),t._v(" "),n("span",[t._v("Telegram Чат")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{attrs:{href:"/v2_toggle/off"}},[n("i",{staticClass:"em em-arrow_left",attrs:{"aria-role":"presentation","aria-label":"LEFTWARDS BLACK ARROW"}}),t._v(" "),n("span",[t._v("Старая версия")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu"},[n("div",{staticClass:"items"},[n("hr"),t._v(" "),n("a",{attrs:{href:"/news"}},[n("i",{staticClass:"fa fa-fire",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",[t._v("Новости")])]),t._v(" "),n("a",{attrs:{href:"/page/talk"}},[n("i",{staticClass:"fa fa-commenting",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",[t._v("Обсуждение")])]),t._v(" "),n("a",{attrs:{href:"/help"}},[n("i",{staticClass:"fa fa-question-circle",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",[n("strong",[t._v("Справка")])])])])])}],!1,null,null,null).exports;const im={name:"",props:{},data:function(){return{connected:!1,count:null,all:null}},created:function(){var t=this;this.ws=this.$root.ws,this.ws.isAuth()&&(this.connected=!0),this.ws.on("authorized",(function(){t.connected=!0})),this.ws.on("close",(function(){t.connected=!1})),this.ws.on("message",(function(e,n,a){switch(e){case"update":t.count=n.count,t.all=n.all||null}}))},mounted:function(){},methods:{}};const sm=(0,Fl.Z)(im,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-online-status"},[n("div",{staticClass:"px-3"},[n("span",[n("i",{staticClass:"fa fa-plug",class:{"text-success":t.connected,"text-danger animated flash infinite":!t.connected},attrs:{"data-title":"Статус подключения","aria-hidden":"true","data-original-title":"",title:""}})]),t._v(" "),t.connected?n("a",[n("strong",[t._v("Online")])]):n("span",{staticClass:"text-danger"},[t._v("Offline")]),t._v(" "),null!==t.count?n("strong",[t._v(t._s(t.count))]):t._e(),null!==t.all?n("span",[t._v("("+t._s(t.all)+")")]):t._e()])])}),[],!1,null,null,null).exports;var om=[];const cm={name:"friends",props:{selecter:{type:Function}},data:function(){return{onliners:om,recentListShow:!1,filter:"",loading:!1,loaded_all:!1,offset:0}},destroyed:function(){this.$root.ws.off("message",this.messageWsListener)},created:function(){this.$root.ws.on("message",this.messageWsListener)},computed:{friends:function(){var t=this;return this.global.friends instanceof Array?this.global.friends.filter((function(e){return!(t.filter&&!Cl.Z.findIn(t.filter,[e.user.name,e.user.alias]))})):[]}},watch:{onliners:function(){om=this.onliners.slice()}},mounted:function(){},methods:{messageWsListener:function(t,e,n){switch(t){case"authorized":this.onliners=e.friends;break;case"friend":e.online?(this.onliners.unshift(e),this.$root.beep("online")):this.onliners.unset((function(t){return t.uid==e.uid}))}},click:function(t,e,n){"function"!=typeof this.selecter?t.target.classList.contains("app-avatar")?this.$root.openUser(e):this.$root.openMessages(e):this.selecter.call(this,e,{name:n.nickname||n.name,avatar:n.avatar})},search:function(t){var e=t.target.value;log(e)},load:function(){var t=this;this.loading=!0,this.offset++,pl.V.make("getAllFriends",{offset:this.offset}).then((function(e){for(var n=0;n<e.friends.length;n++)t.global.friends.push(e.friends[n]);t.loaded_all=0===e.friends.length})).catch((function(e){t.$root.popupFixErr(e)})).always((function(){t.loading=!1}))}}};const lm=(0,Fl.Z)(cm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-friends"},[t.onliners.length>0?n("div",{staticClass:"my-2 friends-list onliners"},t._l(t.onliners,(function(e){return n("div",{key:e.uid,staticClass:"py-1 px-2 item",on:{click:function(n){return n.preventDefault(),t.click(n,e.uid,e.client.info)}}},[n("img",{staticClass:"app-avatar",staticStyle:{height:"32px"},attrs:{src:e.client.info.avatar}}),t._v("\n            "+t._s(e.client.info.nickname)+"\n        ")])})),0):n("div",{staticClass:"text-center my-2"},[t._m(0),t._v(" 😔\n    ")]),t._v(" "),t.global.friends&&t.global.friends.length>0?[n("div",{staticClass:"px-2"},[n("small",{staticClass:"recent-toggler dotted",on:{click:function(e){t.recentListShow=!t.recentListShow}}},[t._v("любимые друзья ("+t._s(t.global.friends_all)+")")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.recentListShow,expression:"recentListShow"}],staticClass:"recent friends-list"},[n("div",{staticClass:"px-2 my-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"form-control w-100",attrs:{placeholder:"поиск..."},domProps:{value:t.filter},on:{input:function(e){e.target.composing||(t.filter=e.target.value)}}})]),t._v(" "),t._l(t.friends,(function(e){return n("div",{staticClass:"py-1 px-2 item",class:{"text-muted":e.user.deactivate||e.user.trashed},attrs:{"data-trashed":e.user.trashed,"data-deactivated":e.user.deactivate},on:{click:function(n){return n.preventDefault(),t.click(n,e.user.id,e.user)}}},[n("img",{staticClass:"app-avatar",staticStyle:{height:"32px"},attrs:{src:e.user.avatar}}),t._v("\n                "+t._s(e.user.name)+"\n            ")])})),t._v(" "),t.global.friends_all>t.global.friends.length&&!t.loaded_all?n("div",{staticClass:"text-center"},[n("small",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"dotted",on:{click:function(e){return t.load()}}},[n("em",[t._v("показать ещё")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"spinner-border",attrs:{role:"status"}})]):t._e()],2)]:t._e()],2)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("small",{staticClass:"text-muted"},[n("em",[t._v("нет друзей")])])}],!1,null,null,null).exports;const um={name:"footer-puper",props:{},data:function(){return{date:new Date(1e3*this.$root.appSettingsGlobal.time)}},created:function(){},mounted:function(){this.counter()},methods:{counter:function(){return escape(document.referrer)+("undefined"==typeof screen?"":";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+";h"+escape(document.title.substring(0,150))+";"+Math.random()}}};const dm=(0,Fl.Z)(um,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"app-footer px-2 py-3"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row flex-nowrap justify-content-between overflow-x-mobile"},[n("div",{staticClass:"col-auto"},[n("strong",{},[t._v("© ЛИВАЧА 2016-"+t._s(t.date.getFullYear())+" ")]),n("br"),t._v(" "),n("router-link",{attrs:{to:"/start"}},[t._v("Создать трансляцию")]),n("br"),t._v(" "),n("router-link",{attrs:{to:"/"}},[t._v("Трансляции")]),n("br"),t._v(" "),n("router-link",{attrs:{to:"/support"}},[t._v("Поддержка")]),n("br"),t._v(" "),n("router-link",{attrs:{to:"/page/about"}},[t._v("О сайте")])],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("strong",[n("router-link",{attrs:{to:"/feedback"}},[t._v("Обратная связь / Feedback")]),n("br")],1),t._v(" "),n("router-link",{attrs:{to:"/page/rules"}},[t._v("Правила использования")]),n("br"),t._v(" "),n("router-link",{attrs:{to:"/page/security"}},[t._v("Политика безопасности")]),n("br"),t._v(" "),n("router-link",{attrs:{to:"/page/cookie"}},[t._v("Cookies")]),n("br"),t._v(" "),t._e(),n("br"),t._v(" "),t._e(),n("br")],1),t._v(" "),n("div",{staticClass:"col-auto"},[t._m(0),n("br"),t._v(" "),n("strong",{staticClass:"text-primary d-inline-block"},[n("i",{staticClass:"fa fa-windows"}),t._v(" "),n("router-link",{staticClass:"text-primary",attrs:{to:"/page/windows"}},[t._v("Windows приложение")])],1),n("br"),t._v(" "),t._m(1),n("br"),t._v(" "),t._m(2),n("br"),t._v(" "),t._m(3),n("br")]),t._v(" "),n("div",{staticClass:"col-auto"},[n("span",{domProps:{innerHTML:t._s(t.global.country?t.global.country.flag:"")}}),t._v("\n\n                ver: "+t._s(t.global.ver)+"\n\n                "),n("div",{staticClass:"counter mt-2"},[n("img",{attrs:{src:"//counter.yadro.ru/hit?t25.5;r"+t.counter()}})])])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("strong",{staticClass:"text-success d-inline-block"},[n("i",{staticClass:"fa fa-android"}),t._v(" "),n("a",{staticClass:"text-success",attrs:{href:"/android"}},[t._v("Android приложение")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{attrs:{href:"https://t.me/livacha",target:"_blank"}},[n("i",{staticClass:"fa fa-telegram",attrs:{"aria-hidden":"true"}}),t._v(" Telegramm")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{attrs:{href:"https://vk.com/livacha",target:"_blank"}},[n("i",{staticClass:"fa fa-vk",attrs:{"aria-hidden":"true"}}),t._v(" VKontakte")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{attrs:{href:"https://ok.ru/group/62823146389559",target:"_blank"}},[n("i",{staticClass:"fa fa-odnoklassniki",attrs:{"aria-hidden":"true"}}),t._v(" Одноклассники")])}],!1,null,null,null).exports;function fm(t){return(fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}const hm={name:"user",props:{user:{},nickname:{type:String},current:{},ava:{}},data:function(){return{user$:null,avaOnly:void 0!==this.ava&&!1!==this.ava}},created:function(){var t=null;this.user&&"object"===fm(this.user)?t=this.user:void 0!==this.current&&this.global.uid&&(t=this.global.user),this.user$=Object.assign({name:this.nickname||("string"==typeof this.user?this.user:"")||"удален",avatar:this.global.imageBlank,link:"#",id:null,trashed:!1,deactivate:!1},t||{})},mounted:function(){},computed:{nickOnly:function(){return!1===this.ava},avaHeight:function(){var t="30px";return this.ava&&Cl.Z.isNumber(this.ava)&&(t=this.ava+"px"),t}},methods:{click:function(t){this.$listeners.click?this.$emit("click",this.$user):this.$root.openUser(this.user$?this.user$.id:null)}}};const pm=(0,Fl.Z)(hm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"app-user-item text-truncate d-inline-block align-middle",staticStyle:{"max-width":"100%"},on:{click:t.click}},[t.nickOnly?t._e():n("span",{staticClass:"ava"},[n("img",{attrs:{height:t.avaHeight,alt:t.user$.name,title:t.user$.name,src:t.user$.avatar}})]),t._v(" "),t.avaOnly?t._e():n("span",[n("a",{class:{"text-decoration-line-through":t.user$.trashed||t.user$.deactivate},attrs:{title:t.user$.name,href:t.user$.link||!1},on:{click:function(t){t.preventDefault()}}},[t._v(t._s(t.user$.name))])])])}),[],!1,null,null,null).exports;const mm={name:"loader",props:{position:{type:String},img:{type:String,default:"/i/gosha.gif"},text:{type:String},inline:{}},data:function(){return{position$:this.position||(void 0!==this.inline?"inline":"")||"absolute"}},created:function(){},mounted:function(){},methods:{}};const vm=(0,Fl.Z)(mm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-loader",attrs:{"data-position":t.position$}},[n("div",[t._t("default",[n("img",{attrs:{src:t.img}}),t._v(" "),t.text?n("div",{staticClass:"text"},[t._v(t._s(t.text))]):t._e()])],2)])}),[],!1,null,null,null).exports;const gm={name:"dataLoader",props:{loadParams:{type:Object},loadFunc:{type:String},removeFunc:{type:String},list:{type:Boolean,default:!0},autoload:{type:Boolean,default:!0},scroller:{},value:{}},data:function(){return{items:[],data:null,firstLoad:!1,loading$:!1,loadingShow:!1,error:"",loaderPosition:"inline",endOfData:!1,offset:0}},created:function(){},mounted:function(){this.modal=this.$parent&&"modal"===this.$parent.$options.name?this.$parent:"",this.loader=this.$refs.loader,this.autoload&&this.update()},methods:{update:function(t){var e=this;if(!this.loadFunc)return error("loadFunc not defined");t||(t={}),t.offset&&this.scroller||this.loading(),this.error="",this.loading$=!0,pl.V.make(this.loadFunc,Object.assign(this.loadParams||{},t)).then((function(n){if(e.$emit("load",n),e.firstLoad||(e.loaderPosition="absolute"),e.firstLoad=!0,e.data=n,n.items&&n.items instanceof Array){var a=n.items;e.scroller&&t.offset?e.items.pushItems(a):e.items=a,e.endOfData=0===a.length||n.limit&&a.length<n.limit,e.$emit("input",e.items)}else e.$emit("input",e.data)})).catch((function(t){e.error=t})).done((function(){e.loading(!1),e.loading$=!1}))},loadMore:function(){this.endOfData||(this.offset++,this.update({offset:this.offset}))},onScroll:function(){this.scroller&&this.loadMore()},remove:function(t){var e=this;if(!this.removeFunc)return error("removeFunc not defined");pl.V.make(this.removeFunc,t).then((function(t){e.update()})).catch((function(t){e.$root.popupFixErr(t)}))},loading:function(t){var e=void 0===t||t;this.modal?this.modal.loading(e):this.loadingShow=e}}};const _m=(0,Fl.Z)(gm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onScroll,expression:"onScroll"}],staticClass:"app-data-loader position-relative",class:{loaded:t.firstLoad,"h-100 overflow-y":t.scroller}},[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loadingShow,expression:"loadingShow"}],ref:"loader",attrs:{position:t.loaderPosition}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticClass:"alert alert-danger text-center"},[n("strong",[t._v(t._s(t.error))])]),t._v(" "),t.firstLoad||t.loadingShow?t._e():t._t("preload",null,{update:t.update}),t._v(" "),t.items.length>0||t.data?t._t("default",null,{items:t.items,data:t.data,remove:t.remove,update:t.update}):t.firstLoad&&t.list?t._t("empty",[t._m(0)]):t._e(),t._v(" "),t.scroller&&t.items.length>0&&!t.endOfData?n("load-more",{directives:[{name:"show",rawName:"v-show",value:!t.endOfData,expression:"!endOfData"}],staticClass:"my-3",attrs:{loading:t.loading$},on:{click:t.loadMore}}):t._e()],2)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center alert alert-success m-0"},[n("i",{staticClass:"fa fa-check"}),t._v("  Шеф, все чисто")])}],!1,null,null,null).exports;const ym={props:{groups:{type:Object}}};const bm=(0,Fl.Z)(ym,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("div",{staticClass:"scroll"},t._l(t.groups,(function(e,a){return n("div",{staticClass:"group"},t._l(e,(function(e){return n("span",{staticClass:"smile",attrs:{"data-code":e.code},on:{click:function(n){return t.$parent.click(e)}}},[n("span",{staticClass:"inner"},[n("img",{attrs:{src:e.theme[t.$root.themeColor]}})])])})),0)})),0)])}),[],!1,null,null,null).exports,Cm={name:"smiles",props:{btnCls:{type:String,default:"btn-secondary"},textarea:{},recentHeight:{type:Number,default:20},placement:{default:"top"}},data:function(){return{smiles:[],recent:[]}},created:function(){},mounted:function(){var t=this;this.toggler=this.$refs.toggler,this.smilesBase=this.$root.smiles,this.smilesBase.ready().then((function(e){t.smiles=e,t.recent=t.$root.smiles.recent,t.popover=t.popover(bm,t.toggler,{propsData:{groups:t.smiles.groups}},{placement:t.placement,autoclose:!1,cls:"app-smiles-popup"})})).catch((function(e){t.$root.popupFixErr(e)}))},methods:{click:function(t){var e;if("string"==typeof t){if(!(e=this.smilesBase.codes[t]))return error("smile not found",t)}else e=t;if(this.smilesBase.addRecent(e.code),this.popover.close(),this.textarea){var n=document.getElementById(this.textarea);if(n&&(n.focus(),n.insertAtCaret(":"+e.code+": "),"function"==typeof n.dispatchEvent&&"function"==typeof Event)){var a=new Event("input",{bubbles:!0,cancelable:!0});n.dispatchEvent(a)}}this.$emit("click",e)},getSmileUrl:function(t){var e=this.smilesBase.codes[t];if(e)return e.theme[this.$root.themeColor];error("smile not found",t),log(this.smilesBase.codes)}}};const wm=(0,Fl.Z)(Cm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-smiles"},[n("div",{staticClass:"row wrap-btn-toggle g-0 align-items-center flex-nowrap overflow-hidden"},[n("div",{staticClass:"col-auto"},[n("button",{ref:"toggler",staticClass:"btn border btn-toggle btn-sm",class:t.btnCls,attrs:{type:"button"}},[n("i",{staticClass:"fa fa-list",attrs:{"aria-hidden":"true"}})])]),t._v(" "),n("div",{staticClass:"col"},[n("div",{staticClass:"recent"},t._l(t.recent,(function(e){return n("span",{staticClass:"smile border",attrs:{"data-code":e},on:{click:function(n){return t.click(e)}}},[n("span",{staticClass:"inner"},[n("img",{style:!!t.recentHeight&&"height: "+t.recentHeight+"px",attrs:{src:t.getSmileUrl(e)}})])])})),0)])])])}),[],!1,null,null,null).exports;const km={name:"ignors",props:{prop:{type:String}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const xm=(0,Fl.Z)(km,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Игноры"}},[n("data-loader",{attrs:{"load-func":"ignors","remove-func":"action/removeIgnore","load-params":{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table align-middle"},[n("thead",{staticClass:"table-light"},[n("tr",[n("th"),t._v(" "),n("th",[t._v("Пользователь")]),t._v(" "),n("th",[t._v("Когда")])])]),t._v(" "),n("tbody",t._l(e.items,(function(a){return n("tr",[n("td",[n("button",{staticClass:"btn btn-danger",attrs:{"data-title":"Удалить"},on:{click:function(t){return e.remove({iid:a.id,action:"removeIgnore",obj:"user"})}}},[n("i",{staticClass:"fa fa-remove"})])]),t._v(" "),n("td",[n("user",{attrs:{user:a.user}})],1),t._v(" "),n("td",{staticClass:"text-nowrap"},[n("small",{staticClass:"text-muted"},[t._v(t._s(a.date))])])])})),0)])])]}}])})],1)}),[],!1,null,null,null).exports;const Sm={name:"ban_extended",props:{scope:{type:String,default:"chat"},asModer:{type:Boolean,default:!1},room:{}},data:function(){return{options:{scope:this.scope,deep_check:!1,ip_check:!1,ban_comment:"",rule:"",all_chat:!1,clean_messages:!1}}},created:function(){},mounted:function(){},methods:{ban:function(t){var e=Object.assign({},this.options);"warning"===t&&(e.warning=1),this.$emit("go",e)},close:function(){this.$refs.modal&&this.$refs.modal.close()},loading:function(t){this.$refs.modal&&this.$refs.modal.loading(t)}}};const Em=(0,Fl.Z)(Sm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{ref:"modal",attrs:{title:"Заблокировать или предупредить"}},[t.asModer?n("div",{staticClass:"row align-items-center g-1 justify-content-between"},[n("div",{staticClass:"col-auto"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.options.scope,expression:"options.scope"}],staticClass:"form-control",attrs:{name:"scope"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.options,"scope",e.target.multiple?n:n[0])}}},t._l(t.global.ban_scopes,(function(e,a){return n("option",{domProps:{value:a}},[t._v(t._s(e))])})),0)]),t._v(" "),"chat"===t.options.scope&&t.room?n("div",{staticClass:"col-auto"},[n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.options.all_chat,expression:"options.all_chat"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(t.options.all_chat)?t._i(t.options.all_chat,"")>-1:t.options.all_chat},on:{change:function(e){var n=t.options.all_chat,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"");a.checked?i<0&&t.$set(t.options,"all_chat",n.concat([""])):i>-1&&t.$set(t.options,"all_chat",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.options,"all_chat",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("\n                    Во всех чатах\n                ")])])]):t._e(),t._v(" "),n("div",{staticClass:"col-auto"},[n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.options.deep_check,expression:"options.deep_check"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(t.options.deep_check)?t._i(t.options.deep_check,"")>-1:t.options.deep_check},on:{change:function(e){var n=t.options.deep_check,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"");a.checked?i<0&&t.$set(t.options,"deep_check",n.concat([""])):i>-1&&t.$set(t.options,"deep_check",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.options,"deep_check",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("\n                    По железу\n                ")])])]),t._v(" "),t.global.admin?n("div",{staticClass:"col-auto"},[n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.options.ip_check,expression:"options.ip_check"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(t.options.ip_check)?t._i(t.options.ip_check,"")>-1:t.options.ip_check},on:{change:function(e){var n=t.options.ip_check,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"");a.checked?i<0&&t.$set(t.options,"ip_check",n.concat([""])):i>-1&&t.$set(t.options,"ip_check",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.options,"ip_check",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("\n                    IP\n                ")])])]):t._e()]):t._e(),t._v(" "),n("div",{staticClass:"form-group my-2"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.options.ban_comment,expression:"options.ban_comment"}],staticClass:"form-control",attrs:{placeholder:"Сообщение для пользователя (увидит только он)"},domProps:{value:t.options.ban_comment},on:{input:function(e){e.target.composing||t.$set(t.options,"ban_comment",e.target.value)}}})]),t._v(" "),t.asModer?n("div",{},t._l(t.global.ban_rules,(function(e){return n("div",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.options.rule,expression:"options.rule"}],staticClass:"form-check-input",attrs:{type:"radio",name:"rule",id:"rule"+e.num},domProps:{value:e.num,checked:t._q(t.options.rule,e.num)},on:{change:function(n){return t.$set(t.options,"rule",e.num)}}}),t._v(" "),n("label",{staticClass:"form-check-label",attrs:{for:"rule"+e.num}},[t._v("\n                "+t._s(e.text)+"\n            ")])])})),0):t._e(),t._v(" "),"chat"===t.options.scope?n("label",{staticClass:"form-check mt-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.options.clean_messages,expression:"options.clean_messages"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.options.clean_messages)?t._i(t.options.clean_messages,null)>-1:t.options.clean_messages},on:{change:function(e){var n=t.options.clean_messages,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&t.$set(t.options,"clean_messages",n.concat([null])):i>-1&&t.$set(t.options,"clean_messages",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.options,"clean_messages",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("\n                    Удалить все сообщения\n                ")])]):t._e(),t._v(" "),n("template",{slot:"save"},[n("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.ban("warning")}}},[n("i",{staticClass:"fa fa-hand-paper-o"}),t._v(" Предупредить")]),t._v(" "),n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.ban("ban")}}},[n("i",{staticClass:"fa fa-ban"}),t._v(" Бан")])])],2)}),[],!1,null,null,null).exports,Tm={name:"ban_button",props:{uid:{type:Number},user:{type:Object},room:{type:String},scope:{type:String,default:"chat"},nickname:{type:String},clientId:{type:String},sid:{type:String},ip:{type:String},moderNickname:{type:String},quick:{type:Boolean,default:!0},client:{type:Object},asModer:!1},data:function(){return{}},created:function(){var t={};this.extendedModal=null,t.scope=this.scope,this.client?(t.uid=this.client.info.uid||0,this.asModer||(t.room=this.client.roomAlias||""),t.nickname=this.client.nickname||"",t.client_id=this.client.id||"",t.sid=this.client.sid||"",t.ip=this.client.ip||""):this.user&&(t.nickname=this.user.name,t.uid=this.user.id),this.options=t},mounted:function(){},methods:{ban:function(t){var e=this;this.$emit("click"),this.quick&&void 0===t&&!this.asModer?this.go(this.options):this.extendedModal=this.$root.render(Em,{scope:this.scope,asModer:this.asModer,room:this.room}).$on("go",(function(t){e.go(Object.assign({},e.options,t))}))},go:function(t){var e=this;this.extendedModal&&this.extendedModal.loading(),pl.V.make("ban",t).then((function(){e.extendedModal&&(e.$root.popupFix(t.warning?"Предупрежден":"Забанен"),e.extendedModal.close())})).catch((function(t){e.$root.popupFixErr(t)})).always((function(){e.extendedModal&&e.extendedModal.loading(!1)}))}}};const Am=(0,Fl.Z)(Tm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-ban d-inline-block"},[n("div",{staticClass:"btn-group",attrs:{role:"group"}},[n("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.ban()}}},[n("i",{staticClass:"fa fa-ban",attrs:{"aria-hidden":"true"}}),t._v(" Бан")]),t._v(" "),t.asModer?t._e():n("button",{staticClass:"btn btn-danger border-start",on:{click:function(e){return t.ban(!1)}}},[n("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})])])])}),[],!1,null,null,null).exports;const Rm={name:"bans",props:{roomId:{type:Number},chat:{type:Object}},created:function(){},methods:{remove:function(t,e){this.chat?this.chat.ws.echo("banRemove",{bid:t.id},(function(){e.update()})):e.remove({bid:t.id})}}};const Om=(0,Fl.Z)(Rm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("data-loader",{attrs:{"load-func":"bans","remove-func":"unBan","load-params":{room_id:t.roomId}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table align-middle"},[n("thead",{staticClass:"table-light"},[n("tr",[n("th"),t._v(" "),n("th",[t._v("Кого")]),t._v(" "),n("th",[t._v("Кто")]),t._v(" "),n("th",[t._v("Когда")])])]),t._v(" "),n("tbody",t._l(e.items,(function(a){return n("tr",[n("td",[n("action",{staticClass:"btn btn-danger",attrs:{action:"unBan",data:{bid:a.id},"data-title":"Удалить"},on:{success:function(t){return e.items.unset(a.id)}}},[n("i",{staticClass:"fa fa-remove"})])],1),t._v(" "),n("td",[n("user",{attrs:{user:a.user,nickname:a.nickname}})],1),t._v(" "),n("td",[n("user",{attrs:{user:a.moder}})],1),t._v(" "),n("td",{staticClass:"text-nowrap"},[n("small",{staticClass:"text-muted"},[t._v(t._s(a.date))])])])})),0)])])]}}])})}),[],!1,null,null,null).exports;const $m={name:"moders",props:{roomId:{type:Number},chat:{type:Object}},mounted:function(){this.loader=this.$refs.loader},methods:{removeModer:function(t,e){var n=this;this.chat&&this.chat.ws.echo("toggleModer",{mid:e.id},(function(){n.loader.update()}))}}};const Pm=(0,Fl.Z)($m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("data-loader",{ref:"loader",attrs:{"load-func":"getModers","load-params":{room_id:t.roomId}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table align-middle"},[n("thead",{staticClass:"table-light"},[n("tr",[n("th"),t._v(" "),n("th",[t._v("Ник")]),t._v(" "),n("th",[t._v("Дата")])])]),t._v(" "),n("tbody",t._l(e.items,(function(e){return n("tr",[n("td",[n("button",{staticClass:"btn btn-danger",attrs:{"data-title":"Удалить"},on:{click:function(n){return t.removeModer(n,e)}}},[n("i",{staticClass:"fa fa-remove"})])]),t._v(" "),n("td",[n("user",{attrs:{user:e.user,nickname:e.nickname}})],1),t._v(" "),n("td",{staticClass:"text-nowrap"},[n("small",{staticClass:"text-muted"},[t._v(t._s(e.date))])])])})),0)])])]}}])})}),[],!1,null,null,null).exports;const Lm={name:"nick_theme",props:{prop:{type:String}},data:function(){return{themeSettings:null,options:{}}},created:function(){},mounted:function(){var t=this;pl.V.make("userTheme",{}).then((function(e){t.themeSettings=e.theme||{},t.options=e.options,t.$nextTick((function(){t.init()}))})).catch((function(e){t.$root.popupFixErr(e)}))},methods:{init:function(){var t=this,e=this;this.userEl=this.$refs.user.$el.querySelector("a"),this.userEl_dark=this.$refs.user_dark.$el.querySelector("a"),this.preview(),this.$watch("themeSettings",(function(){t.preview()}),{deep:!0}),$(this.$el).find(".app-colorpicker").on("move.spectrum change.spectrum",(function(t,n){var a=t.target.name,r=n.toHexString().replace(/^#/,"");"color"!==a&&"color_dark"!==a||(e.themeSettings[a]=r),"textShadow_color"!==a&&"textShadow_color_dark"!==a||(e.themeSettings.textShadow||(e.themeSettings.textShadow={}),e.themeSettings.textShadow["textShadow_color"===a?"color":"color_dark"]=r)}));for(var n=0,a=["textShadow_x","textShadow_y","textShadow_radius"];n<a.length;n++){var r=a[n],i=this.$refs[r];i&&function(){var t=i.dataset,n=r.split("_")[1];$(i);$(i).slider({value:parseInt(t.value),range:"min",min:parseInt(t.min),max:parseInt(t.max),create:function(){},slide:function(t,a){e.themeSettings.textShadow[n]=a.value}})}()}},preview:function(){for(var t=0,e=["light","dark"];t<e.length;t++){var n="dark"===e[t],a=n?this.userEl_dark:this.userEl,r=($(a),n?this.themeSettings.color_dark:this.themeSettings.color),i=this.themeSettings.textDecoration,s=n?this.themeSettings.textShadow.color_dark:this.themeSettings.textShadow.color;a.style.fontFamily=this.themeSettings.font,a.style.color="#"+r,a.style.textDecoration="lineThrough"===i?"line-through":"underline"===i?"underline":"none",a.style.fontStyle=this.themeSettings.italic?"italic":"",a.style.fontSize=this.themeSettings.bigger?"150%":"",this.themeSettings.textShadowEnable?a.style.textShadow=(this.themeSettings.textShadow.x||0)+"px "+(this.themeSettings.textShadow.y||0)+"px "+(this.themeSettings.textShadow.radius||0)+"px #"+(s||"000000"):a.style.textShadow=""}}}};var Dm=n(49328),Im={insert:"head",singleton:!1};$d()(Dm.Z,Im);Dm.Z.locals;const Mm=(0,Fl.Z)(Lm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Настройка ника",save:"Сохранить"}},[n("service",{attrs:{alias:"nickname"}}),t._v(" "),t.themeSettings?n("div",{staticClass:"app-nick-theme"},[n("forma",{attrs:{action:"/api/nicknameThemeSave"}},[n("div",{staticClass:"mb-3"},[n("label",[t._v("Шрифт")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.themeSettings.font,expression:"themeSettings.font"}],staticClass:"form-control",staticStyle:{"font-size":"1.5rem"},attrs:{name:"font"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.themeSettings,"font",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v(t._s(t.global.user.name)+" — по умолчанию")]),t._v(" "),t._l(t.global.chat_fonts,(function(e,a){return n("option",{style:{"font-family":e},domProps:{value:a}},[t._v(t._s(t.global.user.name)+" — "+t._s(e))])}))],2)]),t._v(" "),n("div",{staticClass:"mb-3"},[n("label",[t._v("Цвет на светлом фоне")]),t._v(" "),n("input",{ref:"colorPicker",staticClass:"app-colorpicker",attrs:{"data-show-input":"true","data-allow-empty":"true",name:"color"},domProps:{value:t.themeSettings.color||""}}),t._v(" "),n("label",[t._v("Цвет на темном фоне")]),t._v(" "),n("input",{ref:"colorPicker_dark",staticClass:"app-colorpicker",attrs:{"data-show-input":"true","data-allow-empty":"true",name:"color_dark"},domProps:{value:t.themeSettings.color_dark||""}})]),t._v(" "),n("div",{staticClass:"form-group mb-2"},[n("div",[n("label",[t._v("Варианты шрифта")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.themeSettings.textDecoration,expression:"themeSettings.textDecoration"}],staticClass:"form-check-input",attrs:{type:"radio",name:"textDecoration",value:""},domProps:{checked:t._q(t.themeSettings.textDecoration,"")},on:{change:function(e){return t.$set(t.themeSettings,"textDecoration","")}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Нет")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.themeSettings.textDecoration,expression:"themeSettings.textDecoration"}],staticClass:"form-check-input",attrs:{type:"radio",name:"textDecoration",value:"underline"},domProps:{checked:t._q(t.themeSettings.textDecoration,"underline")},on:{change:function(e){return t.$set(t.themeSettings,"textDecoration","underline")}}}),t._v(" "),n("span",{staticClass:"form-check-label",staticStyle:{"text-decoration":"underline"}},[t._v("Подчеркнутый")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.themeSettings.textDecoration,expression:"themeSettings.textDecoration"}],staticClass:"form-check-input",attrs:{type:"radio",name:"textDecoration",value:"lineThrough"},domProps:{checked:t._q(t.themeSettings.textDecoration,"lineThrough")},on:{change:function(e){return t.$set(t.themeSettings,"textDecoration","lineThrough")}}}),t._v(" "),n("span",{staticClass:"form-check-label",staticStyle:{"text-decoration":"line-through"}},[t._v("Зачеркнутый")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.themeSettings.italic,expression:"themeSettings.italic"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"italic"},domProps:{checked:Array.isArray(t.themeSettings.italic)?t._i(t.themeSettings.italic,null)>-1:t.themeSettings.italic},on:{change:function(e){var n=t.themeSettings.italic,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&t.$set(t.themeSettings,"italic",n.concat([null])):i>-1&&t.$set(t.themeSettings,"italic",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.themeSettings,"italic",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label",staticStyle:{"font-style":"italic"}},[t._v("Курсив")])])]),t._v(" "),n("div",{staticClass:"mb-3"},[n("div",[n("label",[t._v("Эффекты")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.themeSettings.textAnim,expression:"themeSettings.textAnim"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"textAnim",value:"1"},domProps:{checked:Array.isArray(t.themeSettings.textAnim)?t._i(t.themeSettings.textAnim,"1")>-1:t.themeSettings.textAnim},on:{change:function(e){var n=t.themeSettings.textAnim,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.themeSettings,"textAnim",n.concat(["1"])):i>-1&&t.$set(t.themeSettings,"textAnim",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.themeSettings,"textAnim",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label app-text-anim"},[t._v("Анимировать")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.themeSettings.bigger,expression:"themeSettings.bigger"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"bigger",value:"1"},domProps:{checked:Array.isArray(t.themeSettings.bigger)?t._i(t.themeSettings.bigger,"1")>-1:t.themeSettings.bigger},on:{change:function(e){var n=t.themeSettings.bigger,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.themeSettings,"bigger",n.concat(["1"])):i>-1&&t.$set(t.themeSettings,"bigger",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.themeSettings,"bigger",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Увеличить чуть")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.themeSettings.textShadowEnable,expression:"themeSettings.textShadowEnable"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"textShadowEnable",value:"1","data-toggle":"collapse",href:"#textShadowCollapse"},domProps:{checked:Array.isArray(t.themeSettings.textShadowEnable)?t._i(t.themeSettings.textShadowEnable,"1")>-1:t.themeSettings.textShadowEnable},on:{change:function(e){var n=t.themeSettings.textShadowEnable,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.themeSettings,"textShadowEnable",n.concat(["1"])):i>-1&&t.$set(t.themeSettings,"textShadowEnable",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.themeSettings,"textShadowEnable",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label",staticStyle:{"text-shadow":"3px 3px 1px #000"}},[t._v("Тень")])])]),t._v(" "),n("div",{staticClass:"mb-2"},[n("div",{staticClass:"collapse",class:{show:t.themeSettings.textShadowEnable},attrs:{id:"textShadowCollapse"}},[n("div",{staticClass:"mb-2"},[n("label",[t._v("Цвет на светлом фоне")]),t._v(" "),n("input",{staticClass:"app-colorpicker",attrs:{"data-show-input":"true","data-allow-empty":"true",name:"textShadow_color"},domProps:{value:t.themeSettings.textShadow?t.themeSettings.textShadow.color:""}}),t._v(" "),n("label",[t._v("Цвет на темном фоне")]),t._v(" "),n("input",{staticClass:"app-colorpicker",attrs:{"data-show-input":"true","data-allow-empty":"true",name:"textShadow_color_dark"},domProps:{value:t.themeSettings.textShadow?t.themeSettings.textShadow.color_dark:""}})]),t._v(" "),n("div",{staticClass:"mb-2"},[t._v("\n                            Сдвиг по горизонтально:\n                            "),n("div",{ref:"textShadow_x",staticClass:"slider-text-shadow mt-2",attrs:{"data-value":t.themeSettings.textShadow.x,"data-min":t.options.shadow_limits.x[0],"data-max":t.options.shadow_limits.x[1]}},[n("div",{staticClass:"ui-slider-handle"},[t._v(t._s(t.themeSettings.textShadow.x))])])]),t._v(" "),n("div",{staticClass:"mb-2"},[t._v("\n                            Сдвиг по вертикально:\n                            "),n("div",{ref:"textShadow_y",staticClass:"slider-text-shadow mt-2",attrs:{"data-value":t.themeSettings.textShadow.y,"data-min":t.options.shadow_limits.y[0],"data-max":t.options.shadow_limits.y[1]}},[n("div",{staticClass:"ui-slider-handle"},[t._v(t._s(t.themeSettings.textShadow.y))])])]),t._v(" "),n("div",{staticClass:"mb-3"},[t._v("\n                            Радиус размытия:\n                            "),n("div",{ref:"textShadow_radius",staticClass:"slider-text-shadow mt-2",attrs:{"data-value":t.themeSettings.textShadow&&t.themeSettings.textShadow.radius,"data-min":t.options.shadow_limits.radius[0],"data-max":t.options.shadow_limits.radius[1]}},[n("div",{staticClass:"ui-slider-handle"},[t._v(t._s(t.themeSettings.textShadow.radius))])])])]),t._v(" "),n("input",{attrs:{name:"textShadow_x",type:"hidden"},domProps:{value:t.themeSettings.textShadow.x}}),t._v(" "),n("input",{attrs:{name:"textShadow_y",type:"hidden"},domProps:{value:t.themeSettings.textShadow.y}}),t._v(" "),n("input",{attrs:{name:"textShadow_radius",type:"hidden"},domProps:{value:t.themeSettings.textShadow.radius}})])]),t._v(" "),n("div",{staticClass:"form-group preview-nickname",staticStyle:{"font-size":"120%"}},[n("div",{staticClass:"row g-0"},[n("div",{staticClass:"col-md-6 p-3 border preview-col bg-white light row g-0 no-gutters align-items-center flex-nowrap",staticStyle:{"line-height":"1rem"}},[n("user",{ref:"user",attrs:{current:""}})],1),t._v(" "),n("div",{staticClass:"col-md-6 p-3 bg-dark preview-col dark row no-gutters g-0 align-items-center flex-nowrap",staticStyle:{"line-height":"1rem"}},[n("user",{ref:"user_dark",attrs:{current:""}})],1)])])],1):t._e()],1)}),[],!1,null,null,null).exports;function Nm(t){return(Nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}const jm={name:"forma",props:{action:{type:String},before:{type:Function},reset:{},params:{type:Object,default:function(){return{}}},value:{type:Object},once:{type:Boolean,default:!1},confirm:{type:String},showErrors:{type:Boolean,default:!0}},data:function(){return{load:!1,loadBefore:!1,promises:[],success:"",error:"",paramsOnce:{},state:{}}},created:function(){var t=this;this.before&&this.addPromise(this.before),this.$watch("state",(function(){t.$emit("input",t.state)}),{deep:!0})},destroyed:function(){this.modal&&this.modal.$off("save",this.onModalSave)},computed:{submitParams:function(){return Object.assign(this.paramsOnce||{},this.params||{},pl.V.superParams)}},mounted:function(){this.form=this.$el,this.$form=$(this.$el),this.modal=this.getParent("modal"),this.modal&&this.modal.$on("save",this.onModalSave),this.initForm()},methods:{onModalSave:function(){this.submit()},addPromise:function(t){this.promises.push(t)},submit:function(t){if(t&&"object"===Nm(t)&&(this.paramsOnce=t),"function"==typeof this.form.reportValidity&&!this.form.reportValidity())return!1;this.$form.trigger("submit")},initForm:function(){var t=this;this.ajaxFormOptions={type:"post",dataType:"json",beforeSubmit:function(){return!(t.confirm&&!confirm(t.confirm))&&(t.success="",t.error="",t.loading(),t.state={loading:!0},t.$emit("before"),"#"===t.action?(t.response(!1),!1):void 0)},success:function(e,n,a){t.response(e,a)},error:function(e,n){t.response(n,e)}},this.$form.on("submit.form-plugin",(function(e){$(this);if(t.doSubmit(),t.promises.length>0){var n=[];for(var a in t.promises)n.push(t.promises[a]());t.loadingBefore(!0),Promise.all(n).then((function(){t.ajaxSubmit()})).catch((function(){t.loading(!1)})).finally((function(){t.loadingBefore(!1)}))}else t.ajaxSubmit();return!1})).on("click.form-plugin",t.ajaxFormOptions,t.captureSubmittingElement)},doSubmit:function(){this.modal&&this.modal.buttonsDisable()},ajaxSubmit:function(){this.ajaxFormOptions.data=this.submitParams,this.$form.ajaxSubmit(this.ajaxFormOptions)},response:function(t,e){var n;!1!==t&&e&&((n=new pl.f("json")).xhr(e),n.error?(this.error=n.error,this.state.error=n.error,this.$emit("error",n.error,n)):(n.success&&"string"==typeof n.success&&(this.success=n.success),this.$emit("success",n.result,n),this.state.result=n.result,this.state.success=!0,void 0!==this.reset&&this.form.reset())),this.paramsOnce={},this.loading(!1),this.$emit("complete"),this.state.loading=!1,this.modal&&this.modal.buttonsDisable(!1)},captureSubmittingElement:function(t){var e=t.target,n=$(e);if(!n.is("[type=submit],[type=image]")){var a=n.closest("[type=submit]");if(0===a.length)return;e=a[0]}var r=e.form;if(r.clk=e,"image"===e.type)if(void 0!==t.offsetX)r.clk_x=t.offsetX,r.clk_y=t.offsetY;else if("function"==typeof $.fn.offset){var i=n.offset();r.clk_x=t.pageX-i.left,r.clk_y=t.pageY-i.top}else r.clk_x=t.pageX-e.offsetLeft,r.clk_y=t.pageY-e.offsetTop;setTimeout((function(){r.clk=r.clk_x=r.clk_y=null}),100)},loading:function(t){this.load=void 0===t||t,this.modal},loadingBefore:function(t){this.loadBefore=void 0===t||t}}};const Fm=(0,Fl.Z)(jm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{ref:"form",staticClass:"app-form",attrs:{action:t.action},on:{submit:function(e){return t.$emit("submit")}}},[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.load,expression:"load"}]}),t._v(" "),n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loadBefore,expression:"loadBefore"}],attrs:{img:"/i/lubka.gif"}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.error&&t.showErrors,expression:"error && showErrors"}],staticClass:"alert alert-danger text-center"},[n("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" "),n("strong",[t._v(t._s(t.error))])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.success,expression:"success"}],staticClass:"alert alert-success text-center"},[n("i",{staticClass:"fa fa-check"}),t._v(" "),n("strong",[t._v(t._s(t.success))])]),t._v(" "),n("input",{staticStyle:{position:"absolute",left:"-9999px",width:"1px",height:"1px"},attrs:{type:"submit",tabindex:"-1"}}),t._v(" "),t.$slots.default?[t._t("default")]:t._e()],2)}),[],!1,null,null,null).exports;const Bm={name:"service",props:{alias:{type:String}},data:function(){return{}},destroyed:function(){this.$root.$off("wsmess",this.wsmess)},created:function(){this.$root.$on("wsmess",this.wsmess)},mounted:function(){},methods:{wsmess:function(t,e,n){"notify"===t&&"ServiceAdded"===e.type&&e.service_alias===this.alias&&this.$refs.dataloader.update()}}};const Um=(0,Fl.Z)(Bm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("data-loader",{ref:"dataloader",attrs:{"load-params":{alias:t.alias},"load-func":"getService"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return[a.service?n("div",[n("div",{staticClass:"alert alert-secondary text-center"},[n("i",{staticClass:"fa fa-check"}),t._v(" У вас подключена услуга "),n("strong",[t._v(t._s(a.service.name))])])]):n("div",{staticClass:"alert alert-success border"},[t._l(a.offers,(function(e){return n("div",{staticClass:"mb-2"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button",href:e.link},on:{click:function(n){return t.$root.openPay({offerId:e.id})}}},[n("i",{staticClass:"fa fa-cart-arrow-down",attrs:{"aria-hidden":"true"}}),t._v("\n                    купить\n                ")]),t._v(" "+t._s(e.name)+" — "+t._s(e.price)+" "),n("rub")],1)})),t._v(" "),a.service&&a.service.expire_sec?n("span",[t._v("действует "),n("strong",{staticClass:"text-danger"},[t._v(t._s(a.service.expiredHtml))])]):t._e()],2)]}}])})],1)}),[],!1,null,null,null).exports;const Vm={name:"pay_button",props:{offerId:{type:Number},offer:{},donate:{},owner:{type:Object}},data:function(){return{buttonText:"",icon:""}},computed:{},created:function(){this.compPay=null,this.donate&&(this.$watch("donate",(function(){this.donateSettingsUpdate()})),this.donateSettingsUpdate())},mounted:function(){this.donate},methods:{donateSettingsUpdate:function(){this.donate instanceof Array?this.donationSettings=this.donate[0]:this.donationSettings=this.donate,this.donationSettings.buttonName&&(this.buttonText=this.donationSettings.buttonName),this.donationSettings.icon&&(this.icon=this.donationSettings.icon)},click:function(){this.compPay,this.compPay=this.$root.openPay(Object.assign({},this.$props)),this.compPay.$on("orderPayed",this.orderPayed)},orderPayed:function(t){this.$emit("orderPayed",t)}}};const Hm=(0,Fl.Z)(Vm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-primary app-donation-button progress-bar-striped",class:{"with-icon":t.icon},attrs:{type:"button"},on:{click:t.click}},[t._t("default",[t.icon?n("img",{staticClass:"icon",attrs:{src:t.icon}}):t._e(),t._v(" "),n("strong",{staticClass:"text"},[t.buttonText?[t._v("\n                "+t._s(t.buttonText)+"\n            ")]:[n("i",{staticClass:"fa fa-dollar",attrs:{"aria-hidden":"true"}}),t._v("\n                Подарок\n            ")]],2)])],2)}),[],!1,null,null,null).exports;const Zm={name:"pay_methods",props:{donation:{type:Object},offer:{type:Object,required:!0}},data:function(){return{curPay:0,lvmoney:0,gateways:[]}},created:function(){this.gateways=this.offer.gateways,this.lvmoney=this.global.user&&this.global.user.money?this.global.user.money:0,this.customCols=this.lvmoney?2:3,this.pays=[{name:"Карта (СНГ)",img:"card.png",code:"card_rub",checked:!this.lvmoney},{name:"QIWI",img:"qiwi.png",code:"qiwi"},{name:"YooMoney",img:"yandex.png",code:"yoomoney"}],this.donation||this.pays.push({name:"WebMoney",img:"wm.png",code:"webmoney"}),this.pays.pushItems([{name:"Perfect Money",img:"pm.svg",code:"perfect_money"},{name:"Bitcoin",img:"bitcoin.svg",code:"bitcoin"},{name:"Ethereum",img:"ethereum.svg",code:"ethereum"}]),this.groupSize=Math.ceil(this.pays.length/this.customCols)},mounted:function(){},methods:{}};const Gm=(0,Fl.Z)(Zm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("div",{staticClass:"row g-0 app-pay-methods app-radio-container justify-content-between",class:{"justify-content-between":t.lvmoney&&!t.donation}},[t._l(t.gateways,(function(e){return"self"===e.alias&&t.lvmoney?n("div",{staticClass:"col-12 col-md-auto border app-radio"},[n("div",{staticClass:"row flex-column"},[n("div",{staticClass:"col-auto"},[n("img",{staticClass:"gw-logo card-img-top",attrs:{src:e.image}})]),t._v(" "),n("div",{staticClass:"text"},[n("div",{staticClass:"name"},[n("input",{attrs:{name:"gateway",type:"radio",required:"required"},domProps:{value:e.alias}}),t._v("\n                            "+t._s(e.name)+"\n                        ")]),t._v(" "),n("div",{staticClass:"desc"},["self"!==e.alias?n("span",[t._v("\n                                "+t._s(e.desc)+"\n                            ")]):n("span",[n("strong",{staticClass:"text-success"},[n("rub",{attrs:{money:t.lvmoney}})],1)])])])])]):t._e()})),t._v(" "),t._l(t.customCols,(function(e,a){return t.offer.type,n("div",{staticClass:"col-auto custom"},t._l(t.pays.slice(a*t.groupSize,(a+1)*t.groupSize),(function(e){return n("div",{staticClass:"app-radio px-2 py-2 "},[n("label",{staticClass:"form-check d-block image"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"gateway"},domProps:{checked:e.checked,value:e.code}}),t._v(" "),n("span",{staticClass:"form-check-label"},[e.img?n("img",{staticStyle:{width:"36px"},attrs:{src:"/i/pays/"+e.img}}):t._e(),t._v("\n                        "+t._s(e.name)+"\n                    ")])])])})),0)}))],2)])}),[],!1,null,null,null).exports;const zm={name:"captcha",props:{ver:{type:Number,default:3}},data:function(){return{token:""}},created:function(){this.key=this.global.captcha[this.ver],this.static.captchas||(this.static.captchas=[])},mounted:function(){var t=this;if(void 0===window.__captchaCallback){window.__captchaCallback=function(){t.static.captchaReady=!0;for(var e=0;e<t.static.captchas.length;e++)t.static.captchas[e].render()};var e=document.createElement("script");3===this.ver?e.src="https://www.google.com/recaptcha/api.js?render="+this.key+"&onload=__captchaCallback":e.src="https://www.google.com/recaptcha/api.js?render=explicit&onload=__captchaCallback",e.type="text/javascript",e.async=!1;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}this.static.captchaReady?this.render():this.static.captchas.push(this)},methods:{render:function(){var t=this,e=this.$parent&&"forma"===this.$parent.$options.name?this.$parent:null;e&&3===this.ver?e.addPromise(this.execute):this.execute(),e&&e.$on("complete",(function(){2===t.ver&&grecaptcha.reset()}))},execute:function(){var t=this;return new Promise((function(e,n){2===t.ver?grecaptcha.render(t.$refs.cap,{sitekey:t.key,callback:function(n){e(n),t.token=n}}):3===t.ver&&grecaptcha.execute(t.key,{action:"homepage"}).then((function(n){e(n),t.token=n})).catch((function(t){n(t)}))}))}}};const qm=(0,Fl.Z)(zm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-captcha"},[n("div",{ref:"cap"}),t._v(" "),n("input",{attrs:{type:"hidden",name:"g-recaptcha-response"},domProps:{value:t.token}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"g-recaptcha-ver"},domProps:{value:t.ver}})])}),[],!1,null,null,null).exports;const Km={name:"slider",props:{type:{type:String,default:"vertical"},config:{type:Object}},data:function(){return{}},created:function(){this.slider=null},destroyed:function(){this.remove()},mounted:function(){var t=this;if($.fn.slider){var e=Object.assign({orientation:this.type,range:"min",min:0,max:100,value:this.micVolume,slide:function(e,n){t.$emit("change",n.value)}},this.config||{});this.slider=$(this.$el),this.slider.slider(e)}else error("jquery slider disabled")},methods:{remove:function(){},value:function(t){this.slider.slider("value",t)}}};const Wm=(0,Fl.Z)(Km,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null).exports;const Ym={name:"action",props:{action:{type:String,required:!0},data:{type:Object},tag:{type:String,default:"button"},confirm:{type:String},disabledForce:{type:Boolean,default:!1},once:{type:Boolean,default:!1},beforeRender:{type:Object},value:{}},data:function(){return{loading:!1,disabled:!1,requested:!1,value$:this.value,beforeRenderPending:!1}},created:function(){},mounted:function(){var t=this;"input"!==this.tag?this.$el.addEventListener("click",(function(e){t.go(e)})):"checkbox"===this.$el.type&&(this.$el.checked=this.value$,this.$el.addEventListener("click",(function(e){return e.preventDefault(),e.stopPropagation(),setTimeout((function(){t.go(e)}),1),!1})))},methods:{go:function(t,e){var n=this;return this.beforeRender&&!0!==this.beforeRenderPending?(this.beforeRenderPending&&!this.beforeRenderPending._isDestroyed||(this.beforeRenderPending=this.$root.render(this.beforeRender.comp,this.beforeRender.props),this.beforeRenderPending.$on("success",(function(e){n.beforeRenderPending.$destroy(),n.beforeRenderPending=!0,n.go(t,e)}))),!1):(this.beforeRenderPending=!1,this.once&&this.requested?(t.preventDefault(),!1):void(this.confirm&&!window.confirm(this.confirm)||(this.loading=!0,this.$emit("loading"),pl.V.make(this.action,Object.assign(e||{},this.data)).then((function(t,e){n.$emit("success",t,e),n.requested=!0,n.once&&(n.disabled=!0),e.success&&"string"==typeof e.success&&n.$root.popupFix(e.success),n.value$=t,n.$emit("input",n.value$),"input"===n.tag&&"checkbox"===n.$el.type&&(n.$el.checked=t)})).catch((function(t){n.$emit("error",t),n.$root.popupFixErr(t)})).always((function(){n.loading=!1})))))}}};const Xm=(0,Fl.Z)(Ym,(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.tag,{tag:"component",class:{"progress-bar-striped progress-bar-animated":t.loading,"text-muted":t.disabled&&"button"!==t.tag},attrs:{type:"button"===t.tag&&"button",disabled:t.loading||t.disabledForce||t.disabled}},[t._t("default")],2)}),[],!1,null,null,null).exports;const Jm={name:"social_auth",props:{type:{type:String},label:{type:String},service:{type:String,default:"login"},extraLinkParams:{type:String,default:""}},data:function(){return{loading:!1}},destroyed:function(){window.removeEventListener("message",this.onTelegaMessage)},created:function(){var t=this;window.addEventListener("message",this.onTelegaMessage),this.$root.$on("oauth",(function(e,n){t.$emit("success",n)}))},mounted:function(){},methods:{onTelegaMessage:function(t){var e=this;if("https://oauth.telegram.org"===t.origin){var n=JSON.parse(t.data);if(n.origin===this.$root.uri){new pl.V;pl.V.make("/oauth/telega",n.result,"get").then((function(t){e.$root.postMessage("oauth",t)})).catch((function(t){e.$root.popupFixErr("Ошибка авторизации через телегу: "+t)}))}}},open:function(t){var e=this;if("donationsalerts"!==t||confirm("Прежде чем войти с помощью DonationAlerts, вы уже должны быть авторизованны в DonationAlerts\n\nВы уже сделали вход в свой акаунт DonationAlerts?")){if(this.loading)return;this.loading=!0,pl.V.make("oauthLink",{type:t,service:this.service,extra_params:this.extraLinkParams}).then((function(t){e.$root.winCenter(t.url,"auth",{width:500,height:500})})).catch((function(t){e.$root.popupFixErr(t)})).always((function(){e.loading=!1}))}}}};const Qm=(0,Fl.Z)(Jm,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row app-socials position-relative "},t._l(t.global.socials,(function(e){return t.type&&t.type!==e?t._e():n("div",{staticClass:"col-auto cursor-pointer",on:{click:function(n){return t.open(e)}}},[n("img",{attrs:{src:"/i/socials/"+e+".png"}}),t._v(" "),n("span",{staticClass:"label",attrs:{vif:"label"}},[t._v(t._s(t.label))])])})),0)}),[],!1,null,null,null).exports;const tv={name:"dropdown",props:{label:{type:String}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const ev=(0,Fl.Z)(tv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dropdown app-dropdown status app-dropdown-status d-inline-block"},[n("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n        "+t._s(t.label)+"\n    ")]),t._v(" "),n("div",{staticClass:"dropdown-menu"},[t._t("default")],2)])}),[],!1,null,null,null).exports;const nv={name:"baned",props:{ban:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const av=(0,Fl.Z)(nv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",[n("div",{attrs:{slot:"header"},slot:"header"},[n("i",{staticClass:"fa fa-exclamation-triangle text-danger"}),t._v(" "),t.ban.public.warning?n("strong",[t._v("\n            Вы были ПРЕДУПРЕЖДЕНЫ\n        ")]):n("strong",{staticClass:"text-danger"},[t._v("Ой! Вы были забанены...")])]),t._v(" "),n("div",{staticClass:"mb-1 row g-2 align-items-center"},[n("div",{staticClass:"col-auto"},[n("strong",[t._v("Кем:")])]),t._v(" "),n("div",{staticClass:"col-auto"},[n("user",{attrs:{user:t.ban.public.moder,nickname:t.ban.public.moder_nickname}})],1)]),t._v(" "),t.ban.public.scope_text?n("div",{staticClass:"mb-1"},[n("strong",[t._v("Где:")]),t._v(" "),"chat"===t.ban.public.scope?[t.ban.public.room&&!t.ban.public.global?[n("em",[t._v("("+t._s(t.ban.public.scope_text)+")")]),t._v(" "),n("a",{attrs:{href:t.ban.public.room.link}},[t._v(t._s(t.ban.public.room.name))])]:[t._v("\n                Во всех чатах\n            ")]]:[t._v("\n            "+t._s(t.ban.public.scope_text)+"\n        ")]],2):t._e(),t._v(" "),t.ban.public.reason?n("div",{staticClass:"mb-1"},[n("strong",[t._v("За что:")]),t._v(" "),n("strong",{staticClass:"text-danger"},[t._v(t._s(t.ban.public.reason))])]):t._e(),t._v(" "),t.ban.public.comment?[n("small",[t._v("сообщение от модератора")]),t._v(":\n        "),n("div",{staticClass:"alert text-center",class:{"alert-warning":t.ban.public.warning,"alert-danger":!t.ban.public.warning}},[n("strong",[t._v(t._s(t.ban.public.comment))])])]:t._e()],2)}),[],!1,null,null,null).exports;const rv={name:"subscribe",props:{roomId:{},subscribed:{type:Boolean},count:0,disabled:{},value:{}},data:function(){return{subscribed$:this.value,count$:this.count,loading:!1}},created:function(){},mounted:function(){},methods:{toggle:function(){var t=this;this.loading=!0,pl.V.make("action/subscribe",{room_id:this.roomId,action:"subscribe",obj:"chat_room"}).then((function(e){t.count$=e.count,t.subscribed$=e.subscribed,t.$emit("input",t.subscribed$)})).catch((function(e){t.$root.popupFixErr(e)})).always((function(){t.loading=!1}))}}};const iv=(0,Fl.Z)(rv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn",class:{"progress-bar-striped":t.loading},attrs:{disabled:t.loading||t.disabled},on:{click:function(e){return t.toggle()}}},[n("i",{staticClass:"fa",class:{"fa-bell":!t.subscribed$,"fa-bell-slash":t.subscribed$},attrs:{"aria-hidden":"true"}}),t._v("\n    "+t._s(t.subscribed$?"Подписаны":"Подписка")+"\n\n    "),t.count$?[n("span",{staticClass:"d-none d-md-inline"},[t._v("("+t._s(t.count$)+")")])]:t._e()],2)}),[],!1,null,null,null).exports;const sv={name:"fly_ball",props:{},data:function(){return{}},created:function(){},mounted:function(){var t=this;$(this.$el);this.$el.addEventListener("animationend",(function(){t.$el.remove(),t.$destroy()})),this.$root.$el.appendChild(this.$el)},methods:{}};const ov=(0,Fl.Z)(sv,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"app-fly-ball"},[t._t("default")],2)}),[],!1,null,null,null).exports;const cv={name:"likeme",props:{obj:{type:String,required:!0},objId:{type:Number,required:!0},btnCls:{default:"btn-secondary"},positive:0,negative:0},data:function(){return{positive$:this.positive,negative$:this.negative,disabled:{negative:!1,positive:!1},loading:{negative:!1,positive:!1}}},watch:{positive:function(){this.positive$=this.positive},negative:function(){this.negative$=this.negative}},created:function(){},computed:{},mounted:function(){},methods:{btnClasses:function(t){var e={"progress-bar-striped progress-bar-animated":t?this.loading.positive:this.loading.negative};return e[this.btnCls]=!0,e},like:function(t){var e=this,n=t?"positive":"negative";this.loading[n]=!0,this.disabled[n]=!0,pl.V.make("like",{obj:this.obj,obj_id:this.objId,positive:t,action:"subscribe"}).then((function(t){e.positive$=t.positive,e.negative$=t.negative,setTimeout((function(){e.disabled[n]=!1}),3e3)})).catch((function(t){e.$root.popupFixErr(t)})).always((function(){e.loading[n]=!1}))}}};const lv=(0,Fl.Z)(cv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-like d-inline-block text-nowrap"},[n("button",{staticClass:"btn btn-secondary",class:t.btnClasses(!0),attrs:{disabled:t.disabled.positive||t.loading.positive},on:{click:function(e){return t.like(!0)}}},[n("i",{staticClass:"fa fa-thumbs-up",attrs:{"aria-hidden":"true"}}),t._v(" "),t.positive$?n("span",[t._v(t._s(t.positive$))]):t._e()]),t._v(" "),n("button",{staticClass:"btn btn-secondary",class:t.btnClasses(),attrs:{disabled:t.disabled.negative||t.loading.negative},on:{click:function(e){return t.like(!1)}}},[n("i",{staticClass:"fa fa-thumbs-down",attrs:{"aria-hidden":"true"}}),t._v(" "),t.negative$?n("span",[t._v(t._s(t.negative$))]):t._e()])])}),[],!1,null,null,null).exports;const uv={name:"complaint_modal",props:{subject:{type:String},subjectId:{},room:{}},data:function(){return{reported:!1}},created:function(){},mounted:function(){},methods:{}};const dv=(0,Fl.Z)(uv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Отправить жалобу"}},[n("data-loader",{attrs:{"load-params":{subject:t.subject,subject_id:t.subjectId,room:t.room},"load-func":"complaintForm"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return[n("forma",{attrs:{action:"/api/complaint"},on:{success:function(e){t.reported=!0}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.reported,expression:"!reported"}]},[n("div",{staticClass:"alert alert-warning"},[n("i",{staticClass:"fa fa-exclamation-triangle",attrs:{"aria-hidden":"true"}}),t._v("\n                    "+t._s(a.subject_text)+"\n                ")]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[n("strong",[t._v("Нарушение:")])]),t._v(" "),n("rules",{attrs:{radio:"rule"}})],1),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Комментарий (ник, текст чата и т. д.):")]),t._v(" "),n("textarea",{staticClass:"form-control mb-2",attrs:{name:"comment",required:""}}),t._v(" "),n("div",{staticClass:"row g-0 justify-content-between"},[n("div",{staticClass:"col-auto"},[n("uploader",{attrs:{obj:"complaint",maxFiles:1,alias:"user",label:"Картинка"}})],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("screenshot",{attrs:{alias:"user",obj:"complaint"}})],1)])]),t._v(" "),n("input",{attrs:{type:"hidden",name:"subject"},domProps:{value:t.subject}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"subject_id"},domProps:{value:t.subjectId}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"room"},domProps:{value:t.room}})])])]}}])}),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("button",{directives:[{name:"show",rawName:"v-show",value:t.reported,expression:"reported"}],staticClass:"btn btn-secondary close-trigger",attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v("Закрыть")]),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:!t.reported,expression:"!reported"}],staticClass:"btn btn-danger submit-trigger",attrs:{type:"submit"}},[t._v("Отправить жалобу")])])],1)}),[],!1,null,null,null).exports,fv={name:"complaint",props:{subject:{type:String},subjectId:{},room:{}},data:function(){return{}},created:function(){},mounted:function(){},methods:{click:function(){this.$root.render(dv,this.$options.propsData)}}};const hv=(0,Fl.Z)(fv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-secondary app-complaint-link",attrs:{"data-title":"Отправить жалобу"},on:{click:t.click}},[t._t("default",[n("i",{staticClass:"fa fa-flag "})])],2)}),[],!1,null,null,null).exports;var pv=null;const mv={name:"rules",props:{radio:{},select:{}},data:function(){return{rules:[]}},created:function(){var t=this;null===pv?(pv=!1,this.load()):!1===pv?this.$root.$once("rules",(function(e){t.rules=e})):this.rules=pv},mounted:function(){},methods:{load:function(){var t=this;pl.V.make("getRules",{}).then((function(e){t.rules=e.rules,pv=t.rules,t.$root.$emit("rules",pv)})).catch((function(e){t.$root.popupFixErr(e)}))}}};const vv=(0,Fl.Z)(mv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-rules"},[n("loader",{directives:[{name:"show",rawName:"v-show",value:!t.rules,expression:"!rules"}],attrs:{inline:""}}),t._v(" "),t.rules?[t.select?[n("select",{attrs:{name:t.select}},[n("option",{attrs:{value:""}},[t._v("Правило...")]),t._v(" "),t._l(t.rules,(function(e){return n("option",{domProps:{value:e.num}},[t._v("\n                    "+t._s(e.num)+". "+t._s(e.text)+"\n                ")])}))],2)]:t.radio?t._l(t.rules,(function(e){return n("label",{staticClass:"form-check"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:t.radio},domProps:{value:e.num}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v(t._s(e.text))])])})):t._l(t.rules,(function(e){return n("div",[n("span",[t._v(t._s(e.num)+".")]),t._v(" "+t._s(e.text)+"\n            ")])}))]:t._e()],2)}),[],!1,null,null,null).exports;const gv={name:"user_about_modal",props:{client:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const _v=(0,Fl.Z)(gv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Информация о себе"}},[n("about",{attrs:{client:t.client,read:!1}}),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[t._v("Сохранить")])])],1)}),[],!1,null,null,null).exports;const yv={name:"selecta",props:{url:{type:String},field:{type:String},fieldId:{default:"id"},name:{type:String},value:{},text:{},placeholder:{type:String},multiple:{type:Boolean},clsInput:{type:String,default:""},list:{type:Array,default:function(){return[]}}},data:function(){return{items:this.list||[],value$:this.value,text$:this.text,offset:0,loading:!1,limit:0,endOfData:!1}},created:function(){this.changeTm=null},watch:{value:function(){this.value$=this.value}},mounted:function(){this.input=this.$refs.input,this.inputHidden=this.$refs.inputHidden,this.dropdown=new bootstrap.Dropdown(this.$refs.input,{})},methods:{onClickInput:function(){this.closeMenu()},remove:function(){this.select("")},onChange:function(t){var e=this;if("ArrowDown"===t.key||40===t.which||40===t.keyCode){this.dropdown.show();var n=this.dropdown._menu,a=n?n.querySelector(".dropdown-item"):null;a&&a.focus()}else{var r=this.input.value;if(r&&r.length<2)return!1;this.changeTm&&clearTimeout(this.changeTm),this.changeTm=setTimeout((function(){if(r){if(!e.url)return error("url is not defined");e.offset=0,e.load({q:r})}}),1e3)}},load:function(t){var e=this;this.loading=!0,pl.V.make(this.url,t).then((function(t){e.offset?e.items.pushItems(t.items):e.items=t.items,e.dropdown.show(),e.limit=t.limit,e.endOfData=0===t.items.length})).catch((function(t){e.$root.popupFixErr(t)})).always((function(){e.loading=!1}))},loadMore:function(){!this.endOfData&&this.text$&&this.load({q:this.text$,offset:++this.offset})},closeMenu:function(){this.dropdown.hide(),this.dropdown.hide()},select:function(t){this.multiple||this.closeMenu(),this.text$=t?t[this.field]:"",this.value$=t?t[this.fieldId]:"",this.$emit("select",t),this.$emit("input",this.value$)}}};const bv=(0,Fl.Z)(yv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-selecta position-relative dropdown"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.text$,expression:"text$"}],ref:"input",staticClass:"form-control",class:t.clsInput,attrs:{readonly:t.loading,placeholder:t.placeholder},domProps:{value:t.text$},on:{keyup:function(e){return t.onChange(e)},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.onClickInput())},input:function(e){e.target.composing||(t.text$=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.value$,expression:"value$"}],ref:"inputHidden",attrs:{type:"hidden",name:t.name},domProps:{value:t.value$},on:{input:function(e){e.target.composing||(t.value$=e.target.value)}}}),t._v(" "),n("i",{staticClass:"fa fa-remove position-absolute top-0 end-0 mt-1 me-1 cursor-pointer",attrs:{"data-title":"Стереть"},on:{click:function(e){return t.remove()}}}),t._v(" "),n("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.loadMore,expression:"loadMore"}],ref:"dropdown",staticClass:"dropdown-menu w-100 list"},[n("div",{staticClass:"text-center mb-1 close",on:{click:function(e){return t.closeMenu()}}},[t._m(0)]),t._v(" "),t.items.length?t._l(t.items,(function(e){return n("a",{key:e.id,staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(n){return t.select(e)}}},["user"===e._c?[n("span",{staticClass:"ava"},[n("img",{attrs:{height:"30px",src:e.avatar}})]),t._v("\n                    "+t._s(e.name)+"\n                ")]:[t._v("\n                    "+t._s(e[t.field])+"\n                ")]],2)})):[n("div",{staticClass:"text-center py-2"},[n("em",[t._v("\n                "+t._s(t.text$?"ничего не найдено":"начните вводить")+"\n            ")])])],t._v(" "),n("load-more",{directives:[{name:"show",rawName:"v-show",value:!t.endOfData&&t.limit&&t.items.length>=t.limit,expression:"!endOfData &&  limit && items.length >= limit"}],staticClass:"mt-2 mb-5",attrs:{loading:t.loading},on:{click:function(e){return t.loadMore()}}})],2)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-secondary btn-sm w-100",attrs:{type:"button"}},[n("i",{staticClass:"fa fa-remove"}),t._v(" закрыть\n            ")])}],!1,null,null,null).exports;const Cv={name:"datepicker",props:{value:{},future:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},mounted:function(){var t=this,e=this.$el;!e.dataset.format&&/^\d{4}-\d{2}-\d{2}$/.test(e.value)&&(e.value=e.value.split("-").reverse().join(".")),$(e).datepicker(Object.assign({language:"ru",format:"dd.mm.yyyy",autoclose:!0,todayHighlight:!0,startDate:this.future?"new Date()":"",endDate:this.future?"":"new Date()"},e.dataset)).on("changeDate",(function(n){t.$emit("input",e.value)})),e.setAttribute("autocomplete","off")},methods:{}};const wv=(0,Fl.Z)(Cv,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})}),[],!1,null,null,null).exports;var kv={};const xv={name:"user_about_form",props:{client:{type:Object},fields:{type:Object},info:{type:Object},read:{default:!0},uid:{},inline:{default:!1},excluded:{type:Array}},data:function(){return{info$:this.info||null,fields$:null,city$:this.info?this.info._city:null,uid$:this.uid}},computed:{loading:function(){return!(null!==this.fields$&&null!==this.info$&&(null!==this.city$||this.info$&&!this.info$.city))}},created:function(){var t=this;!this.fields$&&this.global.user_fields&&(this.fields$=this.global.user_fields),!this.fields$&&kv.fields&&(this.fields$=kv.fields),this.fields$||pl.V.make("userInfoFields").then((function(e){t.fields$=e.fields,kv.fields=e.fields})).catch((function(e){t.$root.popupFixErr(e)})),!this.info$&&this.client&&(this.info$=this.client.info.extended||{}),!this.uid$&&this.client&&(this.uid$=this.client.info.uid),!this.city$&&this.client&&(this.city$={id:this.client.info.extended?this.client.info.extended.city:"",name:this.client.info?this.client.info.city:""}),this.info$||this.client||pl.V.make("userInfo",{uid:this.read?this.uid$:""}).then((function(e){t.info$=e||{},t.city$=e&&e._city||!1})).catch((function(e){t.$root.popupFixErr(e)}))},mounted:function(){var t=this,e=this.$refs.form;if(e){var n=this.getParent("modal");e.addPromise((function(){return new Promise((function(e,a){t.client&&t.$root.ws.echo("updateInfo",{info:t.info$,room:t.client.roomAlias},(function(){Cl.Z.storage("chat_info",t.$info),n&&n.close()})),e()}))}))}},methods:{getAge:function(t){var e=new Date(t),n=Cl.Z.getAgeFromDate(e);return n||"-"}}};const Sv=(0,Fl.Z)(xv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"d-inline":t.inline}},[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{position:"inline"}}),t._v(" "),t.read?t.loading?t._e():n("div",{class:{"d-inline-block":t.inline&&t.fields$&&t.fields$.length}},[t._t("default"),t._v(" "),t._l(t.fields$,(function(e,a){return!t.info$[a]||t.excluded&&-1!==t.excluded.indexOf(a)?t._e():n("div",{staticClass:"text-nowrap",class:{"d-inline-block":t.inline,"me-1":t.inline}},["text"!==e.type?[t._v("\n                "+t._s(e.name)+":\n            ")]:t._e(),t._v(" "),n("strong",{staticClass:"val"},["city"===e.type?n("span",[t._v("\n                    "+t._s(t.city$.name)+"\n                ")]):"date"===e.type?n("span",[t._v("\n                    "+t._s(t.getAge(t.info$[a]))+"\n                ")]):"text"===e.type?n("span",[n("em",{staticClass:"text-muted"},[t._v(t._s(t.info$[a]))])]):n("span",[e.values?[t._v("\n                        "+t._s(e.values[t.info$[a]])+"\n                    ")]:[t._v("\n                        "+t._s(t.info$[a])+"\n                    ")]],2)]),t._v(" "),n("small",{staticClass:"text-muted"},[t._v(t._s(e.unit))])],2)}))],2):n("forma",{ref:"form",staticClass:"container-fluid g-2",attrs:{action:t.global.uid?"/api/userExtended":"#"}},[n("ul",{staticClass:"nav nav-tabs d-none",attrs:{role:"tablist"}},[n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link active",attrs:{id:"home-tab","data-toggle":"tab",href:"#main-info",role:"tab","aria-selected":"true"}},[t._v("Основное")])])]),t._v(" "),t.loading?t._e():n("div",{staticClass:"tab-content pt-2"},[n("div",{staticClass:"tab-pane fade show active",attrs:{id:"main-info",role:"tabpanel"}},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"row g-2"},[n("div",{staticClass:"col-3"},[n("label",[t._v(t._s(t.fields$.birth.name))]),t._v(" "),n("datepicker",{staticClass:"form-control",attrs:{"data-orientation":"bottom auto",type:"text",name:"birth",pattern:t.fields$.birth.pattern,placeholder:t.fields$.birth.placeholder,autocomplete:"off"},model:{value:t.info$.birth,callback:function(e){t.$set(t.info$,"birth",e)},expression:"info$.birth"}})],1),t._v(" "),n("div",{staticClass:"col"},[n("label",[t._v(t._s(t.fields$.city.name))]),t._v(" "),n("selecta",{attrs:{url:"citySearch",name:"city",text:t.city$?t.city$.name:"",field:"city","field-id":"id",placeholder:t.fields$.city.placeholder,tabindex:"-1"},model:{value:t.info$.city,callback:function(e){t.$set(t.info$,"city",e)},expression:"info$.city"}})],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("label",[t._v(t._s(t.fields$.sex.name))]),t._v(" "),n("div",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.info$.sex,expression:"info$.sex"}],staticClass:"form-control",attrs:{name:"sex"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.info$,"sex",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("—")]),t._v(" "),t._l(t.fields$.sex.values,(function(e,a){return n("option",{domProps:{value:a}},[t._v(t._s(e))])}))],2)])])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"row g-2"},[n("div",{staticClass:"col-4"},[n("label",[t._v(t._s(t.fields$.relat.name))]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.info$.relat,expression:"info$.relat"}],staticClass:"form-control",attrs:{name:"relat"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.info$,"relat",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"",selected:""}},[t._v("—")]),t._v(" "),t._l(t.fields$.relat.values,(function(e,a){return n("option",{domProps:{value:a}},[t._v(t._s(e))])}))],2)]),t._v(" "),n("div",{staticClass:"col-4"},[n("label",[t._v(t._s(t.fields$.height.name))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.info$.height,expression:"info$.height"}],staticClass:"form-control",attrs:{type:"text",name:"height",pattern:t.fields$.height.pattern,placeholder:t.fields$.height.placeholder,autocomplete:"off"},domProps:{value:t.info$.height},on:{input:function(e){e.target.composing||t.$set(t.info$,"height",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"col-4"},[n("label",[t._v(t._s(t.fields$.weight.name))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.info$.weight,expression:"info$.weight"}],staticClass:"form-control",attrs:{type:"text",name:"weight",pattern:t.fields$.weight.pattern,placeholder:t.fields$.weight.placeholder,autocomplete:"off"},domProps:{value:t.info$.weight},on:{input:function(e){e.target.composing||t.$set(t.info$,"weight",e.target.value)}}})])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v(t._s(t.fields$.text.name)+":")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.info$.text,expression:"info$.text"}],staticClass:"form-control",attrs:{name:"text",placeholder:t.fields$.text.placeholder},domProps:{value:t.info$.text},on:{input:function(e){e.target.composing||t.$set(t.info$,"text",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"tab-pane fade",attrs:{id:"extended-intim",role:"tabpanel"}}),t._v(" "),n("div",{staticClass:"tab-pane fade",attrs:{id:"extended-info",role:"tabpanel"}})]),t._v(" "),t._t("default")],2)],1)}),[],!1,null,null,null).exports;var Ev=!0;const Tv={name:"share",props:{limit:{default:5},image:{}},data:function(){return{}},created:function(){},mounted:function(){var t=this;Ev?(Ev=!1,this.$root.script("//yastatic.net/share2/share.js",(function(){t.init()}))):this.init()},methods:{init:function(){Ya.share2(this.$el,{theme:{services:"vkontakte,telegram,facebook,odnoklassniki,moimir,viber,whatsapp,skype,twitter,lj,pinterest,tumblr,evernote,linkedin,lj,blogger,delicious,digg,reddit,pocket,qzone,renren,sinaWeibo,surfingbird,tencentWeibo",limit:this.limit},content:{url:window.location,image:Cl.Z.urlAbs(this.image)}})}}};const Av=(0,Fl.Z)(Tv,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"app-share"})}),[],!1,null,null,null).exports;function Rv(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ov(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ov(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function Ov(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const $v={name:"user_messages",props:{messages:{type:Array},owner:{type:Object},prevSize:{default:"small"},loading:{type:Boolean,default:!1},loadParams:{type:Object},submitParams:{type:Object},subject:{type:String}},data:function(){return{currentMessaging:null,messages$:this.messages.slice().reverse(),user:this.owner,typing$:!1,offset:0,minimalUI:!0,minimalUITogglerShow:!0,subject$:this.subject}},computed:{messagesParsed:function(){return this.messages$.map((function(t){return t}))},group:function(){return"groupChat"===this.user._c?this.user.id:null}},created:function(){var t=this;this.init(),this.endOfData=!1,this.$watch("uid",(function(){t.init()})),this.$watch("messages",(function(){t.messages$=t.messages.slice().reverse()})),this.$watch("loading",(function(){t.loading||t.scroll(),t.endOfData=!1}))},mounted:function(){var t=this;this.messagesEl=this.$refs.messages,this.form=this.$refs.form,this.textarea=this.$refs.textarea,this.uploader=this.$refs.uploader,this.smiles=this.$refs.smiles,this.form.addPromise((function(){return new Promise((function(e,n){var a=t.uploader.getAttached();t.textarea.value||a.length||(t.textarea.animate("shakeX"),n()),e()}))})),this.smiles.$on("click",(function(e){t.textarea.insertAtCaret(":"+e.code+": ")})),this.messagesEl.addEventListener("scroll",(function(){t.scrollHeight=t.messagesEl.scrollHeight,0!==t.messagesEl.scrollTop||t.endOfData||t.append()})),this.scroll()},methods:{init:function(){!this.messages$&&this.uid&&this.load(this.uid)},scroll:function(){this.messagesEl.scrollTo(0,this.messagesEl.scrollHeight)},sendEv:function(t){if(t instanceof KeyboardEvent){if(this.typeSend(),"Enter"!==t.code&&10!==t.which)return;if(t.ctrlKey||Cl.Z.isTouch())return error(t),void(this.textarea.value=this.textarea.value+(t.ctrlKey?"\n":""));this.form.submit(),t.preventDefault()}},onSubmited:function(t){this.textarea.value="",this.uploader.reset(),this.subject$="",Cl.Z.isTouch()?Cl.Z.closeVirtualKeyboard(this.textarea):(this.textarea.focus(),this.textarea.insertAtCaret("")),this.addMess(t.mess)},addMess:function(t){var e=this;log("add mess",t),this.messages$.push(t),this.$nextTick((function(){e.scroll()}))},getMessIndex:function(t){for(var e=0;e<this.messages$.length;e++)if(this.messages$[e].id===t)return e;return null},typing:function(t){void 0===t||t?this.$refs.typing.start():this.$refs.typing.stop()},typeSend:function(){var t=this;this.group||this.typeSendLock||(this.$root.ws.send("typingMess",{uid:this.user.id}),this.typeSendLock=!0,setTimeout((function(){t.typeSendLock=!1}),500))},append:function(){var t=this;if(0!==this.messages$.length){var e=this.messages$[0].id;pl.V.make("/api/messages",Object.assign(this.loadParams,{offset:-e})).then((function(e){var n=e.list;t.endOfData=0===n.length;var a,r=Rv(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;t.messages$.unshift(i)}}catch(t){r.e(t)}finally{r.f()}t.$nextTick((function(){t.messagesEl.scrollTo(0,t.messagesEl.scrollHeight-t.scrollHeight)}))})).catch((function(e){t.$root.popupFixErr(e)}))}},clean:function(){this.messages$=[]},removedMess:function(t){var e=this,n=this.$refs["message"+t],a=this.getMessIndex(t),r=this.messages$[a];n&&r&&n[0].animate(r.in?"bounceOutLeft":"bounceOutRight").then((function(){null!==a&&e.messages$.splice(a,1)}))},tikRnd:function(){return Math.random()>.5?"ц":"к"}}};const Pv=(0,Fl.Z)($v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-message row g-0 flex-column flex-nowrap"},[n("main",{ref:"messages",staticClass:"overflow-auto col "},[t.messagesParsed.length>0?t._l(t.messagesParsed,(function(e){return n("div",{ref:"message"+e.id,refInFor:!0,staticClass:"row g-0 my-3 align-items-end mess-row",class:{in:e.in,"justify-content-end":!e.in}},[n("div",{staticClass:"col-auto"},[n("div",{staticClass:"inner bg-light px-2 py-1 mx-2 d-inline-block position-relative"},[t.group&&!t.user.isOwner&&e.in?t._e():n("action",{staticClass:"remove-mess cursor-pointer position-absolute top-0 end-0  fa fa-remove",attrs:{tag:"i",action:"action/remove",data:{action:"remove",obj:"message",id:e.id},confirm:"Удалить сообщение?"},on:{success:function(n){return t.removedMess(e.id)}}}),t._v(" "),e.images&&e.images.avaiable?n("div",{staticClass:"mb-1"},[n("a",{attrs:{href:e.images.big,"data-fancybox":""}},[n("img",{attrs:{src:e.images[t.prevSize],width:e.images.sizes[t.prevSize].w,height:e.images.sizes[t.prevSize].h}})])]):t._e(),t._v(" "),e.user?n("div",{staticStyle:{"max-width":"200px"},attrs:{title:e.user.name}},[n("user",{attrs:{user:e.user}})],1):t._e(),t._v(" "),e.subject?n("div",{staticClass:"text-primary"},[n("strong",[t._v(t._s(e.subject))])]):t._e(),t._v(" "),n("span",{staticClass:"text-break",domProps:{innerHTML:t._s("dark"===t.$root.themeColor?e.text_dark:e.text_light)}}),t._v(" "),e.date?n("small",{staticClass:"text-muted"},[t._v(t._s(e.date))]):t._e()],1)])])})):t.loading?n("div",[t._m(0)]):n("div",{staticClass:"app-centerred-abs"},[t._v("\n            Нет сообщений\n        ")])],2),t._v(" "),n("footer",{directives:[{name:"show",rawName:"v-show",value:!(t.user.deactivate||t.user.trashed),expression:"!(user.deactivate || user.trashed)"}],staticClass:"col-auto mt-2 position-relative"},[n("typing",{ref:"typing",attrs:{strings:["вам","что-то","пишет"]}}),t._v(" "),n("smiles",{ref:"smiles",staticClass:"mb-1",class:{"d-none d-md-block":t.minimalUI},attrs:{"btn-cls":"btn-light"}}),t._v(" "),n("forma",{ref:"form",staticClass:"position-relative",attrs:{action:"/api/message"},on:{success:function(e){return t.onSubmited(e)}}},[n("input",{attrs:{type:"hidden",name:t.group?"group":"uid"},domProps:{value:t.user?t.user.id:""}}),t._v(" "),t._l(t.submitParams,(function(t,e){return n("input",{attrs:{type:"hidden",name:e},domProps:{value:t}})})),t._v(" "),t.subject$?n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"subject",checked:""},domProps:{value:t.subject$}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v(t._s(t.subject$))])]):t._e(),t._v(" "),n("div",{staticClass:"row g-0 align-items-stretch"},[n("div",{staticClass:"col position-relative"},[n("textarea",{directives:[{name:"upload",rawName:"v-upload"}],ref:"textarea",staticClass:"form-control",attrs:{name:"text",placeholder:"Enter - отправить, Ctrl+Enter - новая строка"},on:{keypress:function(e){return t.sendEv(e)},focus:function(e){t.minimalUITogglerShow=!1},blur:function(e){t.minimalUITogglerShow=!0}}}),t._v(" "),t.minimalUITogglerShow?n("div",{staticClass:"d-inline d-md-none position-absolute bottom-0 start-0 ms-2 mb-1 cursor-pointer",on:{click:function(e){t.minimalUI=!t.minimalUI}}},[n("i",{staticClass:"fa",class:{"fa-compress":!t.minimalUI,"fa-arrows-alt":t.minimalUI},attrs:{"aria-hidden":"true"}}),t._v(" "),n("small",[t._v("\n                            "+t._s(t.minimalUI?"больше":"меньше")+"\n                        ")])]):t._e()]),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-secondary h-100"},[t._v("ты"+t._s(t.tikRnd()))])])]),t._v(" "),n("div",{staticClass:"row g-0 mt-2",class:{"d-none d-md-flex":t.minimalUI}},[n("div",{staticClass:"col me-2"},[n("uploader",{ref:"uploader",attrs:{obj:"message",data:t.group?{group:t.group}:null}})],1)])],2)],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-centerred-abs"},[e("div",{staticClass:"spinner-border",attrs:{role:"status"}})])}],!1,null,null,null).exports;const Lv={name:"typing",props:{strings:{type:Array,default:function(){return["вам","что-то","пишет"]}},count:{type:Number,default:1}},data:function(){return{stoped:!0}},created:function(){},mounted:function(){this.text=this.$refs.text},methods:{start:function(){this.stop(),this.counter=0,this.stoped=!1,this.reset(),this.loop(),this.$emit("state",!0)},stop:function(){this.stoped||(this.tmLoop&&(clearTimeout(this.tmLoop),this.tmLoop=null),this.tmRm&&(clearTimeout(this.tmRm),this.tmRm=null),this.text.innerText="",this.stoped=!0,this.$emit("state",!1))},reset:function(){this.strings$=[];for(var t=0;t<this.strings.length;t++)this.strings$[t]=this.strings[t];this.strings$.length>0&&(this.curStr=this.strings$.shift(),this.letters=this.curStr.split("")),this.text.innerText=""},loop:function(){var t=this;this.tmLoop=setTimeout((function(){var e=t.letters.shift();e?(t.text.appendChild(document.createTextNode(e)),t.loop()):(t.curStr=t.strings$.shift(),t.removeText((function(){t.curStr?(t.letters=t.curStr.split(""),t.loop()):t.counter+1<t.count||!t.count?(t.counter++,t.reset(),t.loop()):t.stop()})))}),70)},removeText:function(t){var e=this;this.tmRm=setTimeout((function(){e.text.removeChild(e.text.childNodes[e.text.childNodes.length-1]),e.text.childNodes.length>0?e.removeText(t):t()}),50)}}};const Dv=(0,Fl.Z)(Lv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("small",{staticClass:"app-typing"},[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.stoped,expression:"!stoped"}],ref:"text"}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.stoped,expression:"!stoped"}],staticClass:"cursor"},[t._v("|")])])}),[],!1,null,null,null).exports;const Iv={name:"friend_button",props:{isFriend:{default:!1},uid:{required:!0}},data:function(){return{isFriend$:this.isFriend,loading:!1}},created:function(){this.disabled=0===this.isFriend$},mounted:function(){},methods:{toggle:function(){var t=this;this.loading=!0;var e=this.isFriend$?"remove":"add";pl.V.make("action/"+e,{obj:"friend",action:e,uid:this.uid}).then((function(e){t.isFriend$=e.friend,0===t.isFriend$&&t.$root.popupFix("Заявка в друзья отправлена")})).catch((function(e){t.$root.popupFixErr(e)})).always((function(){t.loading=!1}))}}};const Mv=(0,Fl.Z)(Iv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn",class:{"progress-bar-striped progress-bar-animated":t.loading},attrs:{disabled:t.loading||0===t.isFriend$},on:{click:function(e){return t.toggle()}}},[n("i",{staticClass:"fa",class:{"fa-handshake-o":!1===t.isFriend$,"fa-thumbs-down":!0===t.isFriend$,"fa-hourglass-end":0===t.isFriend$},attrs:{"aria-hidden":"true"}}),t._v("\n    "+t._s(t.isFriend$?"Не дружить":0===t.isFriend$?"Ожидаем...":"Подружиться")+"\n\n")])}),[],!1,null,null,null).exports;const Nv={name:"user_blacklist",props:{tag:{type:String,default:"button"},uid:{},added:{},value:{}},data:function(){return{added$:this.value}},created:function(){},mounted:function(){},methods:{toggle:function(t){this.added$=t,this.$root.popupFix(t?"Пользователь внесен в черный список":"Пользователь УДАЛЕН из черного списка"),this.$emit("input",this.added$)}}};const jv=(0,Fl.Z)(Nv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.added$?n("action",{attrs:{tag:t.tag,action:"action/unblocking",data:{obj:"user",action:"unblocking",uid:t.uid},confirm:"Удалить из черного списка?"},on:{success:function(e){return t.toggle(!1)}}},[t._t("default",[n("i",{staticClass:"fa fa-check"}),t._v("\n        Разблокировать\n    ")])],2):n("action",{attrs:{tag:t.tag,action:"action/blocking",data:{obj:"user",action:"blocking",uid:t.uid},confirm:"Добавить собеседника в черный список?"},on:{success:function(e){return t.toggle(!0)}}},[t._t("default",[n("i",{staticClass:"fa fa-ban"}),t._v("\n        Заблокировать\n\n    ")])],2)}),[],!1,null,null,null).exports;const Fv={name:"donate_popover",props:{prop:{type:String}},data:function(){return{transaction:this.$options.propsData}},created:function(){},mounted:function(){},methods:{}};const Bv=(0,Fl.Z)(Fv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center",staticStyle:{"font-size":"20px"}},[n("div",[t._v("\n        получен донат\n    ")]),t._v(" "),t._m(0),t._v(" "),n("div",[t.transaction.user?n("user",{attrs:{user:t.transaction.user}}):n("div",[t._v("\n            Аноним\n        ")])],1),t._v(" "),n("div",[n("strong",{staticClass:"text-danger",staticStyle:{"font-size":"30px"}},[n("rub",{attrs:{money:t.transaction.summ}},[t._v("+")])],1)]),t._v(" "),t.transaction.comment?n("div",[n("i",{staticClass:"fa fa-commenting"}),t._v(" "),n("em",[t._v("«"+t._s(t.transaction.comment)+"»")])]):t._e(),t._v(" "),t._m(1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"fa fa-arrow-down"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-2"},[n("i",{staticClass:"fa fa-thumbs-up"}),t._v(" спасибо")])}],!1,null,null,null).exports;const Uv={name:"donations_info",props:{ownerId:{type:Number},showTopDonaters:{type:Boolean,default:!1}},data:function(){return{donat:null,loading:!1,showDonaters:this.showTopDonaters,donaters:[],sortList:"",sortDirect:"desc",sizeModal:"",fixedY:!1}},watch:{showDonaters:function(){this.fixedY=this.showDonaters,this.sizeModal=this.showDonaters?"xl":""}},computed:{},created:function(){var t=this;this.$api((function(e){t.donat=e,t.donaters=e.donaters}),"getDonationInfo",{uid:this.ownerId})},mounted:function(){},methods:{setSort:function(t){var e=this.$refs.dataLoader;e&&(this.sortDirect=this.sortList!==t||"asc"===this.sortDirect?"desc":"asc",this.sortList=t,this.$nextTick((function(){e.update()})))}}};const Vv=(0,Fl.Z)(Uv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Донаты",fixedY:t.fixedY,size:t.sizeModal}},[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{inline:""}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDonaters&&!t.loading,expression:"!showDonaters && !loading"}]},[t.donat&&t.donat.settings&&t.donat.settings._showProgress?n("donate-progress",{staticClass:"my-3",attrs:{timeout:100,"summ-need":t.donat.settings.summ_need,"summ-total":t.donat.summ}}):t._e(),t._v(" "),t.donat&&t.donat.settings&&t.donat.settings.text?n("h3",{staticClass:"text-center"},[t._v("\n            «"+t._s(t.donat.settings.text)+"»\n        ")]):t._e(),t._v(" "),n("div",{staticClass:"text-center my-3"},[n("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.showDonaters=!0}}},[n("i",{staticClass:"fa fa-user"}),t._v("\n                Показать всех донатеров\n            ")])])],1),t._v(" "),!t.loading&&t.showDonaters?n("div",{staticClass:"row g-0 flex-column h-100"},[n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.showDonaters=!1}}},[n("i",{staticClass:"fa fa-arrow-left"}),t._v("\n                Взад\n            ")])]),t._v(" "),n("data-loader",{ref:"dataLoader",staticClass:"col overflow-y",attrs:{scroller:!0,"load-func":"getDonationInfo","load-params":{uid:t.ownerId,donaters:1,sort:t.sortList,sortDirect:t.sortDirect}},scopedSlots:t._u([{key:"default",fn:function(e){return[t.donaters&&t.donaters.length>0?n("table",{staticClass:"table table-striped table-hover"},[n("thead",[n("tr",{staticClass:"text-nowrap"},[n("th"),t._v(" "),n("th",[n("i",{directives:[{name:"show",rawName:"v-show",value:"summ"===t.sortList,expression:"sortList === 'summ'"}],staticClass:"fa",class:{"fa-arrow-down":"desc"===t.sortDirect,"fa-arrow-up":"asc"===t.sortDirect}}),t._v(" "),n("span",{staticClass:"app-link",on:{click:function(e){return t.setSort("summ")}}},[t._v("Сумма")])]),t._v(" "),n("th"),t._v(" "),n("th",[n("i",{directives:[{name:"show",rawName:"v-show",value:"date"===t.sortList,expression:"sortList === 'date'"}],staticClass:"fa",class:{"fa-arrow-down":"desc"===t.sortDirect,"fa-arrow-up":"asc"===t.sortDirect}}),t._v(" "),n("span",{staticClass:"app-link",on:{click:function(e){return t.setSort("date")}}},[t._v("Дата")])])])]),t._v(" "),n("tbody",t._l(t.donaters,(function(e){return n("tr",{key:e.id,staticClass:"text-nowrap"},[n("td",[e.user?n("user",{staticStyle:{"max-width":"200px"},attrs:{user:e.user}}):n("span",[t._v("Аноним")])],1),t._v(" "),n("td",[n("rub",{attrs:{money:e.summ}})],1),t._v(" "),n("td",[e.comment?n("div",{staticClass:"text-truncate",staticStyle:{"max-width":"300px"}},[t._v("\n                                «"+t._s(e.comment)+"»\n                            ")]):t._e()]),t._v(" "),n("td",[n("small",{staticClass:"text-muted"},[t._v(t._s(e.date))])])])})),0)]):n("div",{staticClass:"alert alert-secondary text-center my-3"},[t._v("\n                К сожалению, ещё никто не задонатил 😒\n            ")])]}}],null,!1,1926451867),model:{value:t.donaters,callback:function(e){t.donaters=e},expression:"donaters"}})],1):t._e()],1)}),[],!1,null,null,null).exports,Hv={name:"donaters_list",props:{ownerId:{type:Number},donaters:{type:Array},transactions:{type:Array},donationSettings:{type:Object},balans:{},showOnly:{type:String},compact:{type:Boolean,default:!1}},data:function(){return{PopoverDonate:Bv,summDonate:0,showOnly$:this.showOnly}},created:function(){},mounted:function(){},methods:{openDonations:function(t){this.render(Vv,Object.assign({ownerId:this.ownerId},t||{}))}}};const Zv=(0,Fl.Z)(Hv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-donaters-list"},[t.compact?t._e():n("h4",{staticClass:"mb-2"},[n("span",{staticClass:"app-link",on:{click:t.openDonations}},[t._v("«"+t._s(t.donationSettings&&t.donationSettings.text?t.donationSettings.text:"Принимаю донаты")+"»")])]),t._v(" "),t.donationSettings&&t.donationSettings._showProgress?n("donate-progress",{key:t.balans+"_"+t.donationSettings.summ_need,staticClass:"mb-2",attrs:{type:"line","summ-need":t.donationSettings.summ_need,"summ-total":t.balans,summ:t.summDonate}}):t._e(),t._v(" "),t.showOnly$&&"transactions"!=t.showOnly$||!t.transactions||!t.transactions.length?t._e():n("scroller",{staticClass:"row gap-2 g-0 flex-nowrap align-items-start"},t._l(t.transactions,(function(e,a){return n("div",{key:e.id,staticClass:"col-auto"},[n("div",{staticClass:"col-auto",attrs:{"data-title":e.user?e.user.name:"Аноним"}},[n("a",{attrs:{href:e.user?e.user.link:"#",target:"_blank"}},[n("img",{directives:[{name:"user",rawName:"v-user",value:e.user?e.user.id:"",expression:"transaction.user ? transaction.user.id : ''"}],staticStyle:{height:"53px"},attrs:{src:e.user?e.user.avatar:t.global.imageBlank}})])]),t._v(" "),n("div",{staticClass:"col-auto"},[n("span",{directives:[{name:"popover",rawName:"v-popover:[transaction]",value:t.PopoverDonate,expression:"PopoverDonate",arg:e}],staticClass:"d-inline-block app-link text-truncate",staticStyle:{"max-width":"400px"}},[n("strong",[n("rub",{attrs:{money:e.summ}})],1)])])])})),0),t._v(" "),t.showOnly$&&"top"!=t.showOnly$||!t.donaters||!t.donaters.length?t._e():n("scroller",{staticClass:"row gap-2 g-0 flex-nowrap align-items-start"},[t._l(t.donaters,(function(e,a){return n("div",{key:e.tid,staticClass:"col-auto"},[n("div",{staticClass:"row g-0 flex-column"},[n("div",{staticClass:"col-auto",attrs:{"data-title":(e.user?e.user.name:"Аноним")+" задонатил "+t.formatMoney(e.summ)}},[n("a",{attrs:{href:e.user?e.user.link:"#",target:"_blank"}},[n("img",{directives:[{name:"user",rawName:"v-user",value:e.user?e.user.id:"",expression:"donater.user ? donater.user.id : ''"}],staticStyle:{height:"53px"},attrs:{src:e.user?e.user.avatar:t.global.imageBlank}})])]),t._v(" "),n("div",{staticClass:"col-auto summ-container"},[n("strong",{staticClass:"d-inline-block text-truncate"},[n("rub",{attrs:{money:e.summ}})],1)])])])})),t._v(" "),t._l([1,2,3,4,5,6,7,9,10,11,12],(function(t){return n("div",{directives:[{name:"popover",rawName:"v-popover",value:"Сделайте донат и появитесь в этом списке!",expression:"'Сделайте донат и появитесь в этом списке!'"}],staticClass:"pb-1 col-auto plus border position-relative"},[n("i",{staticClass:"em em-male_superhero",attrs:{"aria-hidden":"true"}})])}))],2),t._v(" "),t.compact?t._e():n("div",{staticClass:"row g-0 gap-3"},[n("div",{staticClass:"col-auto"},[n("span",{staticClass:"app-link",class:"transactions"==t.showOnly$?"fw-bold":"",on:{click:function(e){t.showOnly$="transactions"}}},[n("i",{staticClass:"fa fa-clock-o"}),t._v("\n                последние\n            ")])]),t._v(" "),n("div",{staticClass:"col-auto"},[n("span",{staticClass:"app-link",class:"top"==t.showOnly$?"fw-bold":"",on:{click:function(e){t.showOnly$="top"}}},[n("i",{staticClass:"fa fa-line-chart"}),t._v("\n                ТОП-донатеры\n            ")])]),t._v(" "),n("div",{staticClass:"col-auto"},[n("span",{staticClass:"app-link",on:{click:function(e){return t.openDonations({showTopDonaters:!0})}}},[t._v("все")])])])],1)}),[],!1,null,null,null).exports;const Gv={name:"share_button",props:Object.assign(Av.props,{}),data:function(){return{}},created:function(){this.popoverShare=Av,this.popoverShareProps=this.$options.propsData},mounted:function(){},methods:{init:function(){}}};const zv=(0,Fl.Z)(Gv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{directives:[{name:"popover",rawName:"v-popover:[popoverShareProps]",value:t.popoverShare,expression:"popoverShare",arg:t.popoverShareProps}]},[t._t("default",[n("i",{staticClass:"fa fa-share"})])],2)}),[],!1,null,null,null).exports;const qv={name:"adv",props:{type:{type:String,required:!0},scope:{type:String,required:!0},canHiddenSec:{default:10},showTimeout:{default:300},mobilePopupDelay:{default:300},mobilePopupTime:{default:5},hiddable:{type:Boolean,default:!1},autoHeight:{type:Boolean,default:!1}},data:function(){return{idEl:Cl.Z.makeid(5),hidden:!1,canHidden:!1,canHiddenSec$:this.canHiddenSec,cookMPKey:"__ad_mp",mpTime:0,mobile:head.mobile,googShow:!1}},destroyed:function(){this.showTm&&clearTimeout(this.showTm),this.canHideTm&&clearTimeout(this.canHideTm)},created:function(){this.showTm=null,this.canHideTm=null},mounted:function(){var t=this;if(this.reklamaEl=this.$refs.reklamaHolder,this.autoHeight&&this.$refs.autoHeightEl){var e=this.$refs.autoHeightEl;this.autoHeightEl=e,0!==e.naturalWidth&&e.complete?this.tuneAutoHeight():e.addEventListener("load",(function(){t.tuneAutoHeight()}))}else this.render()},watch:{$route:function(t,e){}},methods:{tuneAutoHeight:function(){this.$el.style.height=this.autoHeightEl.height+"px",this.$el.style.overflow="hidden",this.autoHeightEl.style.display="none",this.render()},timer:function(){var t=this;this.canHideTm=setTimeout((function(){t.canHiddenSec$-=1,t.canHiddenSec$?t.timer():(t.canHidden=!0,t.canHideTm=null)}),1e3)},render:function(){var t=this;if("yandex"===this.type){var e="";if("room"===this.scope)e=document.body.clientWidth>=600?"R-A-402847-2":"R-A-402847-33";else if("streams"===this.scope)e="R-A-402847-1";else if("home"===this.scope)e=document.body.clientWidth>=420?"R-A-402847-31":"R-A-402847-30";else if("home_bottom"===this.scope)e="R-A-402847-30";else if("posts"===this.scope||"post"===this.scope)e="R-A-402847-6";else if("mobile_popup"===this.scope){var n=Cookies.get(this.cookMPKey);if(!head.mobile)return;if(-1===["room"].indexOf(this.$route.name))return;if(this.mpTime<this.mobilePopupTime&&n)return void this.mpTime++;this.mpTime=0,e="R-A-402847-28"}else"user"===this.scope||"users"===this.scope?e="R-A-402847-3":"streamsList"===this.scope&&(e="R-A-402847-24");window.Ya&&Ya.Context&&e&&Ya.Context.AdvManager.render({blockId:e,renderTo:this.idEl,async:!0,onRender:function(e){if("mobile_popup"===t.scope&&!Cookies.get(t.cookMPKey)){var n=new Date;n.setTime(n.getTime()+1e3*t.mobilePopupDelay),Cookies.set(t.cookMPKey,1,{expires:n})}t.onRender()}})}else if("google"===this.type){var a="";"home_bottom"===this.scope||"user"===this.scope?(this.$el.style.height="200px",a="3580386627"):"streamsList"===this.scope&&(a="4291623093"),a&&(this.googShow=!0,this.$nextTick((function(){t.$refs.reklamaHolder.setAttribute("data-ad-client","ca-pub-7025822107312089"),t.$refs.reklamaHolder.setAttribute("data-ad-slot",a),(window.adsbygoogle=window.adsbygoogle||[]).push({})})))}},onRender:function(){this.hiddable&&(this.canHiddenSec$=this.canHiddenSec,this.canHiddenSec?(this.canHidden=!1,this.timer()):this.canHidden=!0)},hide:function(){var t=this;this.canHidden&&(this.hidden=!0,this.showTm=setTimeout((function(){t.showTm=null,t.hidden=!1,t.render()}),1e3*this.showTimeout))}}};const Kv=(0,Fl.Z)(qv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!hidden"}],staticClass:"app-reklamka position-relative bg-white"},[t.autoHeight?n("img",{ref:"autoHeightEl",staticClass:"loading mw-100",attrs:{src:"/i/loading_stream.jpg"}}):t._e(),t._v(" "),"google"===t.type&&t.googShow?n("ins",{ref:"reklamaHolder",staticClass:"adsbygoogle",staticStyle:{display:"block",height:"100%"},attrs:{id:t.idEl}}):"yandex"===t.type?n("div",{ref:"reklamaHolder",attrs:{id:t.idEl}}):t._e(),t._v(" "),t.mobile?n("div",{staticClass:"text-end px-2 pb-1"},[t.hiddable?n("small",{staticClass:"text-muted app-link",on:{click:function(e){return t.hide()}}},[t._v("\n            скрыть "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.canHiddenSec$>0,expression:"canHiddenSec$ > 0"}]},[t._v("через "+t._s(t.canHiddenSec$))])]):t._e()]):n("div",{staticClass:"hover position-absolute top-0 start-0 m-2"},[t.hiddable?n("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){return t.hide()}}},[n("i",{staticClass:"fa fa-remove"}),t._v("\n            скрыть\n\n            "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.canHiddenSec$>0,expression:"canHiddenSec$ > 0"}]},[t._v("через "+t._s(t.canHiddenSec$))])]):t._e()])])}),[],!1,null,null,null).exports;const Wv={name:"scroller",props:{duration:{type:Number,default:500},step:{type:Number,default:1}},data:function(){return{arrows:["left","right"],isEnd:!1,isStart:!0,isScrollable:void 0,duration$:this.duration,step$:this.step}},destroyed:function(){this.hammer&&(this.hammer.destroy(),this.hammer=null)},created:function(){this.scrollBtnTm=null,this.start=0,this.currentDirection=null},mounted:function(){var t=this;this.left=this.$refs.left[0],this.right=this.$refs.right[0],this.maxScroll=this.$el.scrollWidth-this.$el.clientWidth,this.isScrollable=!Cl.Z.isTouch()&&this.$el.scrollWidth>0,this.isScrollable&&this.$nextTick((function(){t.arrowsPositions()})),Cl.Z.isTouch()&&(this.hammer=new Hammer(this.$el),this.hammer.get("pan").set({direction:Hammer.DIRECTION_HORIZONTAL}),this.hammer.on("panleft panright panend",(function(e){"panright"===e.type?t.scroll(!1):"panleft"===e.type?t.scroll(!0):e.type})))},methods:{touch:function(t){log(t)},arrowsPositions:function(){var t=this.$el;this.left.style.setProperty("left",t.scrollLeft+"px"),this.right.style.setProperty("left",t.scrollLeft+(t.clientWidth-this.right.clientWidth)+"px")},scrollBtn:function(t,e){e?this.start=!1:this.scroll(t,6,99999999)},onScroll:function(){this.arrowsPositions()},click:function(t){},wheel:function(t){var e=t.deltaY>0;this.scroll(e)},stepScroll:function(t){var e=this.$el;0===this.start&&(this.start=t);var n=this.duration$,a=this.step$,r=t-this.start;Math.min(r/n,1);"left"===this.currentDirection&&(a=0-a),e.scroll(e.scrollLeft+a,0);e.scrollWidth,e.clientWidth;this.isEnd=e.scrollLeft>=this.maxScroll,this.isStart=e.scrollLeft<=0,this.arrowsPositions(),"right"===this.currentDirection&&this.isEnd||"left"===this.currentDirection&&this.isStart||(!1===this.start&&error("stop"),r<n&&!1!==this.start&&window.requestAnimationFrame(this.stepScroll))},scroll:function(t,e,n){t&&this.isEnd||(this.start=0,this.currentDirection=t?"right":"left",this.duration$=n||this.duration,this.step$=e||this.step,window.requestAnimationFrame(this.stepScroll))}}};const Yv=(0,Fl.Z)(Wv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-scroller position-relative",on:{wheel:function(e){return e.preventDefault(),t.wheel(e)},scroll:function(e){return t.onScroll()}}},[t._l(t.arrows,(function(e,a){return n("button",{directives:[{name:"show",rawName:"v-show",value:t.isScrollable&&("left"===e&&!t.isStart||"right"===e&&!t.isEnd),expression:"isScrollable && ( (pos === 'left' && !isStart) || (pos === 'right' && !isEnd) )"}],key:e,ref:e,refInFor:!0,staticClass:"btn btn-secondary btn-sm arrow",class:"arrow-"+e,on:{mousedown:function(n){return t.scrollBtn("right"===e)},mouseup:function(n){return t.scrollBtn("right"===e,!0)},click:function(n){return t.click("right"===e)}}},[n("i",{staticClass:"fa",class:"fa-arrow-"+e})])})),t._v(" "),t._t("default")],2)}),[],!1,null,null,null).exports;const Xv={name:"users_selecter",props:Object.assign(bv.props,{users:{type:Array}}),data:function(){return{tab:"",users$:this.users}},computed:{},created:function(){},mounted:function(){},methods:{add:function(t){this.remove(t.id),this.users$.push(t)},remove:function(t){this.users$.unset((function(e){return e.id==t}))},selectFriend:function(t,e){this.add({id:t,name:e.name,avatar:e.avatar})},select:function(t){this.add({id:t.id,name:t.name,avatar:t.avatar})}}};const Jv=(0,Fl.Z)(Xv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"position-relative"},t._l(t.users$,(function(e){return n("div",{key:e.id,staticClass:"d-inline-flex align-items-center bg-light p-1 me-2  mb-2 position-relative "},[n("i",{staticClass:"fa fa-remove cursor-pointer position-absolute top-0 start-100 translate-middle",on:{click:function(n){return t.remove(e.id)}}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"uid[]"},domProps:{value:e.id}}),t._v(" "),n("img",{staticStyle:{height:"30px"},attrs:{src:e.avatar}}),t._v(" "),n("div",{staticClass:"text-truncate ms-2 d-inline-block",staticStyle:{"max-width":"200px"}},[t._v(t._s(e.name))])])})),0),t._v(" "),n("div",[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.tab="user"!==t.tab?"user":""}}},[n("i",{staticClass:"fa fa-user"}),t._v(" любой")]),t._v(" "),n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.tab="friend"!==t.tab?"friend":""}}},[n("i",{staticClass:"fa fa-handshake-o"}),t._v(" или друг")])]),t._v(" "),t.tab?n("div",{staticClass:"mt-2"},["user"===t.tab?n("selecta",t._b({attrs:{field:"name",url:"findUser",multiple:!0},on:{select:function(e){return t.select(e)}}},"selecta",t.$options.propsData,!1)):"friend"===t.tab?n("friends",{staticClass:"my-2",attrs:{selecter:t.selectFriend}}):t._e()],1):t._e()])}),[],!1,null,null,null).exports;const Qv={name:"load_more",props:{loading:{type:Boolean}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const tg=(0,Fl.Z)(Qv,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?n("div",[t._m(0)]):n("div",{staticClass:"text-center"},[n("span",{staticClass:"dotted",on:{click:function(e){return t.$emit("click")}}},[n("i",{staticClass:"fa fa-arrow-down"}),t._v("\n        загрузи ещё\n    ")])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center"},[e("div",{staticClass:"spinner-grow",attrs:{role:"status"}})])}],!1,null,null,null).exports;const eg={name:"notify",props:{prop:{type:String}},data:function(){return{permission:null,endpoints:[],loading:!1}},created:function(){var t=this;"undefined"!=typeof Notification&&void 0!==Notification.permission&&(this.permission=Notification.permission.toLowerCase()),this.$root.$on("notyfyPermission",(function(e){t.permission=e})),this.load()},mounted:function(){},methods:{load:function(){var t=this;this.loading=!0,pl.V.make("getEndpoints").then((function(e){t.endpoints=e.endpoints})).catch((function(e){t.$root.popupFixErr(e)})).always((function(){t.loading=!1}))},push:function(){this.$root.sw?this.$root.sw.notify({title:"Заголовок",body:"Тело",image:this.global.user?this.global.user.cover&&this.global.user.cover.medium||this.global.user.avatar:""}):this.$root.popupFixErr("Ошибка отправки. Оповещения не инициализированы")}}};const ng=(0,Fl.Z)(eg,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"text-center"},["granted"===t.permission?n("div",{staticClass:"alert alert-success"},[n("i",{staticClass:"fa fa-check"}),t._v(" Уведомления разрешены")]):"denied"===t.permission?n("div",{staticClass:"alert alert-danger"},[t._m(0),t._v(" "),t._m(1)]):"default"===t.permission?n("div",{staticClass:"alert alert-secondary"},[n("i",{staticClass:"fa fa-info-circle"}),t._v(" Вы ещё не дали разрешения на показ уведомлений")]):null===t.permission?n("div",{staticClass:"alert alert-danger"},[n("i",{staticClass:"fa fa-ban"}),t._v(" Ваш браузер не поддерживает уведомления")]):n("div",{staticClass:"alert alert-secondary"},[n("i",{staticClass:"fa fa-question"}),t._v(" Неизвестное состояние ("+t._s(t.permission)+")")]),t._v(" "),n("div",{staticClass:"mb-3"},[n("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.$root.openNotifyRequest()}}},[n("i",{staticClass:"fa fa-bell",attrs:{"aria-hidden":"true"}}),t._v(" Управление уведомлениями")]),t._v(" "),t._m(2)]),t._v(" "),n("action",{staticClass:"btn btn-light",attrs:{action:"action/sendtestEndpoint",data:{action:"sendtestEndpoint",obj:"user"}},on:{success:function(e){return t.$root.popupFix("Тестовое сообщение отправлено")}}},[n("i",{staticClass:"fa fa-paper-plane",attrs:{"aria-hidden":"true"}}),t._v(" Проверить")]),t._v(" "),n("button",{staticClass:"btn btn-light",on:{click:function(e){return t.push()}}},[n("i",{staticClass:"fa fa-bell",attrs:{"aria-hidden":"true"}}),t._v(" Push")])],1),t._v(" "),n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{inline:""}}),t._v(" "),t.endpoints.length>0?[n("div",{},[n("div",{staticClass:"text-center"},[n("span",{staticClass:"dotted",attrs:{"data-bs-toggle":"collapse",href:"#myendpoints",role:"button","aria-expanded":"false","aria-controls":"myendpoints"}},[t._v("Показать все устройства ("+t._s(t.endpoints.length)+")")])]),t._v(" "),n("div",{staticClass:"collapse  my-2 row g-0 justify-content-center",attrs:{id:"myendpoints"}},[n("div",{staticClass:"col-12"},[n("table",{staticClass:"table table-striped",staticStyle:{"table-layout":"fixed"}},[n("tbody",t._l(t.endpoints,(function(e){return n("tr",{directives:[{name:"show",rawName:"v-show",value:!e._trashed,expression:"!endpoint._trashed"}],staticClass:"text-nowrap"},[n("td",{staticStyle:{width:"40px"}},[n("i",{domProps:{innerHTML:t._s(e.iconBrowser)}})]),t._v(" "),n("td",{staticClass:"text-truncate",attrs:{title:e.user_agent}},[t.$root.sw&&t.$root.sw.token==e.token?n("i",{staticClass:"fa fa-check text-success",attrs:{"data-title":"Текущее устройство"}}):t._e(),t._v(" "),n("span",{class:{"fw-bold":t.$root.sw&&t.$root.sw.token==e.token}},[t._v(t._s("string"==typeof e.user_agent?e.user_agent.replace(/^Mozilla\/5.0/,""):"-"))])]),t._v(" "),n("td",{staticClass:"text-end d-none d-sm-table-cell",staticStyle:{width:"150px"}},[n("small",{staticClass:"text-muted"},[t._v(t._s(e.date))])]),t._v(" "),n("td",{staticStyle:{width:"90px"}},[n("copy",{staticClass:"mr-1  btn-sm",attrs:{text:e.token}}),t._v(" "),n("action",{staticClass:"btn btn-danger btn-sm",attrs:{action:"action/removeEndpoint",confirm:"Уверены?","data-action":" removeEndpoint",data:{obj:"user",action:"removeEndpoint",id:e.id}},on:{success:function(n){return t.endpoints.unset(e.id)}}},[n("i",{staticClass:"fa fa-remove cursor-pointer"})])],1)])})),0)])])]),t._v(" "),n("div",{staticClass:"my-2 text-center"},[n("action",{staticClass:"dotted text-danger",attrs:{tag:"span",action:"action/removeEndpoints",data:{action:"removeEndpoints",obj:"user"},confirm:"Удалить подписки со всех зарегистрированных устройств?"},on:{success:function(e){t.endpoints=[]}}},[n("i",{staticClass:"fa fa-remove"}),t._v("\n                    Удалить все устройства ("+t._s(t.endpoints.length)+")\n                ")])],1)])]:[t._m(3)]],2)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("strong",[n("i",{staticClass:"fa fa-ban"}),t._v(" Вы заблокировали уведомления в своем браузере")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("Для разблокировки перейдите в настройки сайтов вашего браузера")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("small",[t._v("получайте уведомления на рабочий стол о подписках и новых сообщениях, даже когда ваш браузер закрыт")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("small",{staticClass:"text-muted"},[t._v("нет регистраций")])])}],!1,null,null,null).exports;const ag={name:"screenshot",props:Ip.Z.props,data:function(){return{files:[]}},created:function(){},mounted:function(){},methods:{load:function(){var t=this;return new Promise((function(e,n){t.$root.script("/js/v2/html2canvas.min.js",(function(){e()}))}))},go:function(){var t=this,e=Object.assign(this.$options.propsData||{},{captureOptions:{videoSource:"display",options:{width:"auto"}}});this.render(Ip.Z,e).$on("success",(function(t){})).$on("success",(function(e){t.files=[],t.files.push(e)}))}}};const rg=(0,Fl.Z)(ag,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.files.length>0?n("span",[t._v("("+t._s(t.files.length)+") ")]):t._e(),t._v(" "),n("button",{staticClass:"btn btn-secondary btn-sm btn-dark",attrs:{type:"button"},on:{click:t.go}},[t._t("default",[n("i",{staticClass:"fa fa-desktop",attrs:{"aria-hidden":"true"}}),t._v(" Снимок экрана\n        ")])],2),t._v(" "),t._l(t.files,(function(t){return n("input",{attrs:{type:"hidden",name:"files[]"},domProps:{value:t.id}})}))],2)}),[],!1,null,null,null).exports;function ig(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return sg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sg(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function sg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const og={name:"",props:{item:{},obj:{type:String},objId:{type:Number},count:{type:Number},canWrite:{type:Boolean,default:!0},show:{type:Boolean,default:!1},autoExpand:{type:Boolean,default:!1}},data:function(){var t=location.hash.substr(1),e=parseInt(this.$route.query.comment_id||0),n="comments"===t||this.show;return{commentId:e,showForce:n,showComments:n||!1,loading:!1,item$:this.item,sort$:"new",state:{},threadKey:Cl.Z.makeid(5),loadParams:{order:"new",withTrashed:!1}}},watch:{showTrashed:function(){}},created:function(){this.observer=null},destroyed:function(){this.observer&&(this.observer.disconnect(),this.observer=null)},mounted:function(){var t=this;this.autoExpand&&!this.showComments&&"function"==typeof window.IntersectionObserver&&(this.observer=new window.IntersectionObserver((function(e,n){var a,r=ig(e);try{for(r.s();!(a=r.n()).done;){a.value.isIntersecting&&(t.showComments=!0,n.disconnect(),t.observer=null)}}catch(t){r.e(t)}finally{r.f()}}),{}),this.observer.observe(this.$el))},methods:{success:function(t){var e=this.$refs.comments;e&&e.append(t.comment)},sort:function(t){this.loadParams.order=t,this.sort$=t},loadedFirst:function(){var t=this.$refs.form&&this.$refs.form.$el;this.showForce&&t&&t.scrollIntoView&&setTimeout((function(){t.scrollIntoView({block:"center"})}),333)},showAll:function(){this.$refs.comments;this.commentId=0,this.showForce=!1,this.threadKey=Cl.Z.makeid(5)}}};const cg=(0,Fl.Z)(og,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.showComments?n("div",[t.item$?n("div",{staticClass:"text-end mb-2"},[n("action",{staticClass:"btn btn-sm btn-secondary",class:{"btn-secondary":!t.item$.alerts,"btn-success":t.item$.alerts},attrs:{action:"action/commentsAlertsSubscribe",data:{obj:t.obj,obj_id:t.objId,action:"commentsAlertsSubscribe"}},model:{value:t.item$.alerts,callback:function(e){t.$set(t.item$,"alerts",e)},expression:"item$.alerts"}},[n("i",{staticClass:"fa fa-bell"}),t._v("\n                "+t._s(t.item$.alerts?"Оповещать":"Не оповещать")+"\n            ")])],1):t._e(),t._v(" "),t.canWrite?n("comment-form",{ref:"form",staticClass:"mb-3 border p-3",attrs:{obj:t.obj,"obj-id":t.objId},on:{success:t.success}}):n("div",{staticClass:"alert alert-secondary text-center mt-2"},[n("i",{staticClass:"fa fa-lock",attrs:{"aria-hidden":"true"}}),t._v(" комментарии к данной теме закрыты\n        ")]),t._v(" "),t.global.moder?n("div",{staticClass:"my-2"},[n("label",{staticClass:"form-check form-switch form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.loadParams.withTrashed,expression:"loadParams.withTrashed"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.loadParams.withTrashed)?t._i(t.loadParams.withTrashed,null)>-1:t.loadParams.withTrashed},on:{change:function(e){var n=t.loadParams.withTrashed,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&t.$set(t.loadParams,"withTrashed",n.concat([null])):i>-1&&t.$set(t.loadParams,"withTrashed",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.loadParams,"withTrashed",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Показать удаленные")])])]):t._e(),t._v(" "),t.commentId?n("div",{staticClass:"my-2",on:{click:t.showAll}},[t._m(0)]):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.state.comments&&t.state.comments.length>0,expression:"state.comments  && state.comments.length > 0"}]},[n("div",{staticClass:"btn-group btn-group-sm text-right comments-order",attrs:{role:"group"}},[n("button",{staticClass:"btn btn-secondary",class:"new"===t.sort$&&"active",attrs:{type:"button","data-order":"new"},on:{click:function(e){return t.sort("new")}}},[n("i",{staticClass:"fa fa-clock-o",attrs:{"aria-hidden":"true"}}),t._v(" Новые\n                ")]),t._v(" "),n("button",{staticClass:"btn btn-secondary",class:"popular"===t.sort$&&"active",attrs:{type:"button","data-order":"popular"},on:{click:function(e){return t.sort("popular")}}},[n("i",{staticClass:"fa fa-fire",attrs:{"aria-hidden":"true"}}),t._v(" Популярные\n                ")]),t._v(" "),n("button",{staticClass:"btn btn-secondary",class:"likes"===t.sort$&&"active",attrs:{type:"button","data-order":"likes"},on:{click:function(e){return t.sort("likes")}}},[n("i",{staticClass:"fa fa-thumbs-o-up",attrs:{"aria-hidden":"true"}}),t._v(" Лайки\n                ")]),t._v(" "),n("button",{staticClass:"btn btn-secondary",class:"old"===t.sort$&&"active",attrs:{type:"button","data-order":"old"},on:{click:function(e){return t.sort("old")}}},[t._v("Старые")])])]),t._v(" "),t.count>0?n("div",{staticClass:"text-muted my-2"},[n("small",[t._v("комментариев: "),n("strong",[t._v(t._s(t.count))])])]):t._e(),t._v(" "),n("comment-thread",{key:t.threadKey,ref:"comments",attrs:{"load-params":t.loadParams,"comment-id":t.commentId,obj:t.obj,"obj-id":t.objId},on:{"~input":function(e){return t.loadedFirst(e)}},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1):n("div",{staticClass:"text-center"},[t.canWrite||t.count?n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.showComments=!0}}},[t._t("default",[n("i",{staticClass:"fa fa-comment-o"}),t._v("\n                "+t._s(t.count?"Показать комментарии":"Оставить комментарий")+" "),t.count?n("span",[t._v("("+t._s(t.count)+")")]):t._e()])],2):t._e()])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-secondary"},[n("i",{staticClass:"fa fa-arrow-left"}),t._v("\n                Все комментарии\n            ")])}],!1,null,null,null).exports;const lg={name:"comments_thread",props:{obj:{type:String},objId:{type:Number},pid:{type:Number},commentId:{type:Number,default:0},treeOpen:{type:Array},loadParams:{type:Object},value:{}},data:function(){return{treeOpen$:this.treeOpen||[],comments:null,endOfData:!1,offset:0,state:{loading:!1,comments:null}}},created:function(){var t=this;this.$watch("loadParams",(function(){t.offset=0,t.comments=[],t.load()}),{deep:!0})},mounted:function(){var t=this;this.load(),this.$root.$on("scroll-data",(function(){t.loadMore()}))},methods:{load:function(t){var e=this;this.state.loading=!0,t||(t={});var n=Object.assign({pid:this.pid,obj:this.obj,obj_id:this.objId},t,this.loadParams);this.commentId&&(n.comment_id=this.commentId),pl.V.make("getComments",n).then((function(n){var a=n.comments;e.endOfData=0===a.length||a.length<n.limit,n.treeOpen&&(e.treeOpen$=n.treeOpen),t.offset?e.comments.pushItems(a):e.comments=a,e.state.comments=e.comments,e.$emit("input",e.state)})).catch((function(t){e.$root.popupFixErr(t)})).always((function(){e.state.loading=!1}))},loadMore:function(){this.endOfData||this.state.loading||(this.offset++,this.load({offset:this.offset}))},append:function(t){this.comments instanceof Array||(this.comments=[]),this.comments.unshift(t)}}};const ug=(0,Fl.Z)(lg,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.state.loading?n("loader",{staticClass:"d-inline-block",attrs:{inline:""}}):t._e(),t._v(" "),null!==t.comments&&t.comments.length>0?t._l(t.comments,(function(e){return n("comment-item",{key:e.id,ref:"comment"+e.id,refInFor:!0,staticClass:"mb-2",attrs:{"load-params":t.loadParams,obj:t.obj,"obj-id":t.objId,comment:e,"tree-open":t.treeOpen$,hightlight:t.$route.query.comment_id==e.id}})})):null===t.comments||t.state.loading?t._e():[n("em",{staticClass:"text-muted"},[t._v("нет комментариев")])],t._v(" "),n("load-more",{directives:[{name:"show",rawName:"v-show",value:!t.endOfData&&!t.pid,expression:"!endOfData && !pid"}],staticClass:"my-5",attrs:{loading:t.state.loading},on:{click:t.loadMore}})],2)}),[],!1,null,null,null).exports;const dg={name:"comments_form",props:{obj:{type:String},objId:{type:Number},pid:{type:Number,default:0},accessUpload:{default:!0}},data:function(){return{text:"",loading:!1}},created:function(){},mounted:function(){this.uploader=this.$refs.uploader},methods:{success:function(t){this.text="",this.uploader&&this.uploader.reset(),this.$emit("success",t)}}};const fg=(0,Fl.Z)(dg,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("smiles",{staticClass:"mb-1",attrs:{textarea:t.idStatic("smiles")}}),t._v(" "),n("forma",{attrs:{action:"/api/comment"},on:{success:t.success,submit:function(e){t.loading=!0},complete:function(e){t.loading=!1}}},[n("input",{attrs:{type:"hidden",name:"obj"},domProps:{value:t.obj}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"obj_id"},domProps:{value:t.objId}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"pid"},domProps:{value:t.pid}}),t._v(" "),n("div",{staticClass:"mb-1"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"form-control",attrs:{id:t.idStatic("smiles"),name:"text",required:""},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]),t._v(" "),n("div",[n("captcha")],1),t._v(" "),n("div",{staticClass:"row g-0"},[n("div",{staticClass:"col"},[t.accessUpload?n("uploader",{ref:"uploader",attrs:{obj:"comment",alias:"mess"}}):t._e()],1),t._v(" "),n("div",{staticClass:"col-auto"},[t.pid?n("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(e){return t.$emit("cancel")}}},[t._v("Отмена")]):t._e(),t._v(" "),n("button",{staticClass:"btn",class:{"btn-primary":t.text,"btn-secondary":!t.text},attrs:{type:"submit",disabled:!t.text||t.loading}},[n("i",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"fa fa-circle-o-notch fa-spin fa-fw"}),t._v("\n                    "+t._s(t.pid?"Ответить":"Оставить комментарий")+"\n                ")])])])])],1)}),[],!1,null,null,null).exports;const hg={name:"comments_item",props:{comment:{type:Object},loadParams:{type:Object},obj:{type:String},objId:{type:Number},hightlight:{type:Boolean,default:!1},treeOpen:{type:Array}},data:function(){return{childrensCount:this.comment.childrensCount,replyComment:null,childOpened:this.treeOpen&&-1!==this.treeOpen.indexOf(this.comment.id)||!1,loading:!1,comments:null}},components:{},created:function(){},mounted:function(){var t=this;this.hightlight&&this.$el.scrollIntoView&&setTimeout((function(){t.$el.scrollIntoView({block:"center"})}),1e3)},methods:{reply:function(t){var e=this;this.replyComment=null,this.childrensCount++,!1===this.childOpened?this.childOpened=!0:(this.childOpened=!0,this.$nextTick((function(){var n=e.$refs.childThread;n&&n.append(t.comment)})))}}};const pg=(0,Fl.Z)(hg,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row g-0",class:{"border animate__animated animate__flash pb-2 border-danger":t.hightlight}},[n("div",{staticClass:"col-auto me-2 hover-parent"},[n("user",{attrs:{ava:"50",user:t.comment.user}}),t._v(" "),!t.comment.canRremove||t.comment.trashed&&!t.global.moder?t._e():n("div",{staticClass:"text-center mt-1 hover-child"},[n("action",{staticClass:"btn btn-sm",class:{"btn-danger":!t.comment.trashed,"btn-success":t.comment.trashed},attrs:{"data-title":"Удалить \\ Восстановить",action:"commentRemove",data:{id:t.comment.id}},model:{value:t.comment.trashed,callback:function(e){t.$set(t.comment,"trashed",e)},expression:"comment.trashed"}},[n("i",{staticClass:"fa fa-trash"})])],1)],1),t._v(" "),n("div",{staticClass:"col"},[t.comment.user?n("user",{attrs:{ava:!1,user:t.comment.user}}):t._e(),t._v(" "),n("small",{staticClass:"text-muted"},[t._v(t._s(t.comment.date))]),t._v(" "),n("div",{directives:[{name:"parse-smiles",rawName:"v-parse-smiles",value:t.comment.text,expression:"comment.text"}],class:{"text-muted text-decoration-line-through":t.comment.trashed}}),t._v(" "),t.comment.trashed?n("div",{staticClass:"mb-2"},[n("small",{staticClass:"text-muted"},[n("em",{staticClass:"text-danger"},[t._v("комментарий удален")]),t._v(" "),n("span",[t._v(t._s(t.comment.date_remove))]),t._v(" "),t.comment.removed_user?n("div",[t._v(t._s(t.comment.removed_user.name))]):t._e()])]):t._e(),t._v(" "),t.comment.image&&t.comment.image.avaiable?n("div",{staticClass:"mb-2"},[n("a",{attrs:{"data-fancybox":"",href:t.comment.image.big}},[n("img",{staticClass:"mw-100",attrs:{src:t.comment.image.medium}})])]):t._e(),t._v(" "),t.comment.trashed?t._e():n("div",{staticClass:"row g-0 mt-2"},[n("div",{staticClass:"col-auto me-1"},[n("like-me",{attrs:{"btn-cls":"btn-light btn-sm",obj:"comment","obj-id":t.comment.id,positive:t.comment.positive,negative:t.comment.negative}})],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-light btn-sm",on:{click:function(e){t.replyComment=t.comment}}},[t._v("ОТВЕТИТЬ")])])]),t._v(" "),t.replyComment?n("comment-form",{staticClass:"my-1",attrs:{pid:t.comment.id,obj:t.comment.obj,"obj-id":t.comment.obj_id},on:{success:t.reply,cancel:function(e){t.replyComment=null}}}):t._e(),t._v(" "),t.childrensCount?n("div",[n("span",{staticClass:"dotted",on:{click:function(e){t.childOpened=!1===t.childOpened||(null===t.childOpened||null)}}},[t._v("\n                "+t._s(t.childOpened?"скрыть ответы":"посмотреть все ответы")+"\n            ")]),t._v(" "),n("i",{staticClass:"fa",class:{"fa-chevron-down":!t.childOpened,"fa-chevron-up":t.childOpened}}),t._v(" ("+t._s(t.childrensCount)+")\n        ")]):t._e(),t._v(" "),!1!==t.childOpened?n("comment-thread",{directives:[{name:"show",rawName:"v-show",value:!0===t.childOpened,expression:"childOpened === true"}],ref:"childThread",staticClass:"mt-2",attrs:{"load-params":t.loadParams,pid:t.comment.id,obj:t.obj,"obj-id":t.objId,"tree-open":t.treeOpen}}):t._e()],1)])}),[],!1,null,null,null).exports;const mg={name:"",props:{action:{type:String},cityes:{type:Array,default:null},value:{type:Object},city:{type:Number},autoload:{type:Boolean}},data:function(){return{city$:this.city,cityes$:this.cityes,state:{},loading:void 0}},created:function(){var t=this;this.$watch("state",(function(){t.loading=t.state.loading,t.state.result&&t.state.result.cityes&&(t.cityes$=t.state.result.cityes),t.$emit("input",t.state)}),{deep:!0})},mounted:function(){this.autoload&&this.load()},methods:{load:function(t){t||(t={}),null===this.cityes$&&(t.cityes=1),this.$refs.forma.submit(t)},reset:function(){this.$emit("reset")},select:function(){var t=this;this.$nextTick((function(){t.$refs.forma.submit()}))}}};const vg=(0,Fl.Z)(mg,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("forma",{ref:"forma",staticClass:"position-relative",attrs:{action:t.action},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[n("div",{staticClass:"row justify-content-between gy-3"},[n("div",{staticClass:"col-12 col-sm-auto"},t._l([{name:"Ж",key:"f"},{name:"М",key:"m"},{name:"Т",key:"t"}],(function(e){return n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"sex"},domProps:{value:e.key}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v(t._s(e.name))])])})),0),t._v(" "),n("div",{staticClass:"col-12 col-sm-auto flex-nowrap d-flex"},[n("span",{staticClass:"me-2"},[t._v("лет:")]),t._v(" "),n("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"70px"},attrs:{autocomplete:"off",placeholder:"от",type:"text",name:"age_from",value:"",pattern:"^[0-9]{2,3}$"}}),t._v(" "),n("span",{staticClass:"mx-1"},[t._v("-")]),t._v(" "),n("input",{staticClass:"form-control form-control-sm",staticStyle:{width:"70px"},attrs:{autocomplete:"off",placeholder:"до",type:"text",name:"age_to",value:"",pattern:"^[0-9]{2,3}$"}})]),t._v(" "),n("div",{staticClass:"col-12 col-sm-auto"},[n("selecta",{staticStyle:{"min-width":"200px"},attrs:{url:"citySearch","cls-input":"form-control-sm",list:t.cityes$,name:"city",field:"city","field-id":"id",placeholder:"Город",tabindex:"-1"},model:{value:t.city$,callback:function(e){t.city$=e},expression:"city$"}})],1),t._v(" "),n("div",{staticClass:"col"},[n("input",{staticClass:"form-control form-control-sm",staticStyle:{"min-width":"200px"},attrs:{autocomplete:"off",type:"text",name:"__query",value:"",placeholder:"Строка поиска: ник, текст, статус и т.д."}})])]),t._v(" "),n("div",{staticClass:"row my-2 justify-content-end"},[null!==t.cityes$?n("div",{staticClass:"col d-none d-md-block"},t._l(t.cityes$,(function(e){return n("span",{staticClass:"px-1 me-2 mb-1 d-inline-block",class:{"bg-secondary text-white":e.id===t.city$},on:{click:function(n){t.city$=t.city$&&t.city$===e.id?"":e.id,t.select()}}},[n("span",{staticClass:"dotted"},[t._v(t._s(e.city))])])})),0):t._e(),t._v(" "),n("div",{staticClass:"col-auto"},[void 0!==t.loading?n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.reset}},[n("i",{staticClass:"fa fa-remove"})]):t._e(),t._v(" "),n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-search"}),t._v("\n                Найти\n            ")])])])])}),[],!1,null,null,null).exports;const gg={name:"list_form",props:{name:{type:String}},data:function(){return{}},created:function(){var t=this;this.childrens={render:function(e){var n=function(a){for(var r,i=a.length;i--;){(r=a[i]).children&&("em"===r.tag?a[i]=e(r.tag,{class:"bg-light p-2"},r.children):a[i].children=n(r.children)),a[i].tag;var s=r.text?r.text.trim():"";if(!r.tag&&s){var o="label_"+Cl.Z.makeid(5);a[i]=e("span",{on:{click:function(t){if("INPUT"===t.target.nodeName){var e=t.target.closest("li"),n=t.target.closest("ul");n&&n.querySelectorAll(":scope  li.active").forEach((function(t){t.classList.remove("active")})),e&&(e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active"))}}},class:{"form-check form-check-inline":!0}},[e("input",{class:{"form-check-input":!0},on:{change:function(e){t.$emit("input",e.target.value)}},attrs:{id:o,type:"radio",name:t.name,value:s}}),e("label",{attrs:{for:o},class:{"form-check-label":!0},domProps:{innerText:s}})])}}return a},a=n(this.$slots.default);return e("ul",a)}},this.items=this.$slots.default},mounted:function(){},methods:{}};const _g=(0,Fl.Z)(gg,(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.childrens,{tag:"component",staticClass:"app-list-form"},[t._t("default")],2)}),[],!1,null,null,null).exports;const yg={name:"support_ask",props:{prop:{type:String}},data:function(){return{}},created:function(){},mounted:function(){},methods:{cp:function(){alert("x")}}};const bg=(0,Fl.Z)(yg,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("list-form",{attrs:{name:"ask"}},[n("li",[t._v("\n        Меня забанили\n        "),n("ul",[n("li",[t._v("\n                Забанил автор чата или его смотрящие\n                "),n("em",[t._v("Напишите автору трансляции")])]),t._v(" "),n("li",[t._v("\n                Забанил модератор сайта\n                "),n("em",[t._v("\n                    Если вы не согласны с причиной бана,\n                    напишите модератору, который вас забанил или в поддержку. Вас обязательно разбанят\n                ")])])])]),t._v(" "),n("li",[t._v("\n        Не могу войти на сайт\n        "),n("ul",[n("li",[t._v("\n                Забыл пароль\n                "),n("em",[n("button",{staticClass:"btn btn-success",on:{click:t.cp}},[t._v("Cмените пароль")])])]),t._v(" "),n("li",[t._v("\n                Забыл логин\n                "),n("em",[t._v("\n                    Уточните ваши данные (на что начинается ваш логин, e-mail, страну, город)\n                    "),n("textarea",{staticClass:"form-control",attrs:{name:"lost_login"}})])]),t._v(" "),n("li",[t._v("\n                Потерял доступ к почте\n                "),n("em",[t._v("Зарегистрируйте новый акаунт")])]),t._v(" "),n("li",[t._v("\n                Не могу войти через соц. сеть\n                "),n("em",[t._v("Такое иногда бывает (в основном из-за сетевых задержек с провайдером, через которого вы авторизуетесь). Попробуйте повторить попытку чуть позже. Если после многих неудачных попыток так и не удалось войти — напишите")])])])]),t._v(" "),n("li",[t._v("\n        Не пришла проверочная ссылка после регистрации\n        "),n("em",[t._v("\n            Обычно письмо приходит в течении 5-10 секунд, но в некоторых случаях с задержкой. Если письмо не пришло в течении 10-15 минут — напишите\n        ")])]),t._v(" "),n("li",[t._v("\n        Не могу настроить \\ запустить трансляцию\n        "),n("em",[t._v("Обратитетесь в поддержку")])]),t._v(" "),n("li",[t._v("Другой вопрос / Other")])])}),[],!1,null,null,null).exports;const Cg={name:"dummy",props:{prop:{type:String}},data:function(){return{c:0}},destroyed:function(){error("dummy destroyed")},created:function(){var t=this;error("dummy created"),setInterval((function(){t.c++}),333)},mounted:function(){},methods:{}};const wg=(0,Fl.Z)(Cg,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n    i'm dummy "),n("strong",[t._v(t._s(t.c))])])}),[],!1,null,null,null).exports;n(3750),n(64319),n(22336);$.trumbowyg.svgPath="/i/trumbowyg/icons.svg";const kg={name:"html_editor",props:{uploader:{},smiles:{},features:{}},data:function(){return{content:this.$slots.default&&this.$slots.default.length?this.$slots.default[0].text:""}},created:function(){},mounted:function(){var t=this;this.smiles&&this.smiles.$on("click",(function(e){t.$textarea.trumbowyg("execCmd",{cmd:"insertText",param:" :"+e.code+":"})})),this.uploaderInit(),this.init()},watch:{uploader:function(){this.uploaderInit()}},methods:{uploaderInit:function(){var t=this;this.uploader&&this.uploader.$on("upload",(function(e){t.features,t.$textarea.trumbowyg("execCmd",{cmd:"insertHTML",param:'<a data-fancybox  href="'+e._orig+'"><img data-user-img src="'+("image/gif"===e.mime?e._orig:e.big)+'"/></a>'})}))},init:function(){var t=this,e=$(this.$el);this.$textarea=e;var n={lang:"ru",semantic:!0,removeformatPasted:!0,pasteHandlers:[function(e){t.uploader&&t.uploader.attachFromClipboard(e.originalEvent)}]};"blog"===this.features&&(n.btns=[["viewHTML"],["strong","em"],["unorderedList","orderedList"],["p","h3","blockquote"],["link"],["upload","user","stream","video"],["emoji"],["horizontalRule2"],["removeformat"],["undo","redo"],["fullscreen"]],n.uploader=this.uploader),e.trumbowyg(n).on("tbwchange",(function(){})),e.trumbowyg("html",this.content)}}};const xg=(0,Fl.Z)(kg,(function(){var t=this.$createElement;return(this._self._c||t)("textarea",{staticClass:"bg-white app-html-editor",on:{input:function(t){}}})}),[],!1,null,null,null).exports;const Sg={name:"circle_progress",props:{percentStart:{type:Number,default:10},percent:{type:Number,default:0},stroke:{type:Number,default:10},fill:{type:String,default:"green"},fillBg:{type:String,default:"lightgray"},timeout:{type:Number,default:500},speed:{type:String,default:"1s"}},data:function(){return{stroke$:this.stroke,radius$:0,radiusBg:0,strokeBg:0,cx:0,cy:0,styles:{},circumference:0}},created:function(){},computed:{},mounted:function(){var t=this;this.$el.getBoundingClientRect();this.cx="50%",this.cy="50%",this.radius$=50-this.stroke$/2,this.radiusBg=this.radius$,this.strokeBg=this.stroke$-1,this.circumference=2*this.radius$*Math.PI,this.styles={strokeDasharray:this.circumference+" "+this.circumference,strokeDashoffset:this.percentStart?this.getPercent(this.percentStart):this.circumference,transform:"rotate(-90deg)",transition:"none"},setTimeout((function(){t.progress(t.percent)}),this.timeout)},methods:{getPercent:function(t){return this.circumference-t*this.circumference/100},progress:function(t){this.styles.transition="stroke-dashoffset "+this.speed,this.styles.strokeDashoffset=this.getPercent(t)}}};const Eg=(0,Fl.Z)(Sg,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-circle-progress"},[n("svg",{attrs:{version:"1.1",width:"100%",height:"100%",viewBox:"0 0 100 100","shape-rendering":"geometricPrecision",preserveAspectRatio:"xMinYMin meet"}},[n("circle",{attrs:{fill:"transparent",cx:"50%",cy:"50%",r:t.radiusBg,"stroke-width":t.strokeBg,stroke:t.fillBg}}),t._v(" "),n("circle",{ref:"circle",style:t.styles,attrs:{stroke:t.fill,"stroke-width":t.stroke$,fill:"transparent",r:t.radius$,cx:t.cx,cy:t.cy}})]),t._v(" "),t._t("default")],2)}),[],!1,null,null,null).exports;const Tg={name:"donate_progress",props:{type:{type:String,default:"circle"},summ:{},summTotal:{},summNeed:{},timeout:{type:Number,default:1e3}},data:function(){var t=parseInt(Cl.Z.percentReverse(this.summNeed,this.summTotal-this.summ)),e=parseInt(Cl.Z.percentReverse(this.summNeed,this.summTotal)),n=e;return n>100&&(n=100),{percentStart:t,percent:n,percentAbs:e}},created:function(){},mounted:function(){},methods:{click:function(){this.percent+=10*Math.random(),this.percent>100&&(this.percent=0)}}};const Ag=(0,Fl.Z)(Tg,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return"circle"===t.type?n("div",{staticClass:"row justify-content-center position-relative"},[n("circle-progress",{staticClass:"col-6",staticStyle:{"min-width":"200px"},attrs:{percentStart:t.percentStart,percent:t.percent,timeout:t.timeout}},[n("div",{staticClass:"position-absolute app-centerred-abs text-center lh-1 text-nowrap"},[t.percentAbs>=100?n("i",{staticClass:"text-success fa fa-check"}):t._e(),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("собрано ("+t._s(t.percentAbs||0)+"%)")]),t._v(" "),n("div",{staticClass:"mb-2",staticStyle:{"font-size":"28px"}},[n("rub",{attrs:{money:t.summTotal||0}})],1),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("нужно")]),t._v(" "),n("div",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[n("strong",[n("rub",{staticStyle:{"font-size":"20px"},attrs:{money:t.summNeed||0}})],1)])])])],1):n("div",[t.percentAbs>=100?n("i",{staticClass:"text-success fa fa-check"}):t._e(),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("собрано ("+t._s(t.percentAbs||0)+"%)")]),t._v(" "),n("strong",{staticClass:"mb-2",staticStyle:{"font-size":"20px"}},[n("rub",{attrs:{money:t.summTotal||0}})],1),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("нужно")]),t._v(" "),n("strong",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[n("strong",[n("rub",{staticStyle:{"font-size":"20px"},attrs:{money:t.summNeed||0}})],1)]),t._v(" "),n("div",{staticClass:"progress",on:{click:function(e){return e.preventDefault(),t.click(e)}}},[n("div",{staticClass:"progress-bar progress-bar-striped",style:"width: "+t.percent+"%",attrs:{role:"progressbar","aria-valuenow":t.percent,"aria-valuemin":"0","aria-valuemax":"100"}})])])}),[],!1,null,null,null).exports;bo.component("streamer",(function(){return n.e(339).then(n.bind(n,67862))})),bo.component("streams",gu),bo.component("room",th),bo.component("player",gp),bo.component("video-player",yp),bo.component("video-capture",Ep),bo.component("chat",Gp),bo.component("uploader",Jp),bo.component("modal",Hl),bo.component("navbar",tm),bo.component("sitemenu",rm),bo.component("connect-status",sm),bo.component("friends",lm),bo.component("footer-puper",dm),bo.component("user",pm),bo.component("loader",vm),bo.component("data-loader",_m),bo.component("smiles",wm),bo.component("status",nm),bo.component("ban",Am),bo.component("nick-theme",Mm),bo.component("forma",Fm),bo.component("service",Um),bo.component("pay",yd),bo.component("pay-button",Hm),bo.component("pay-methods",Gm),bo.component("captcha",qm),bo.component("slider",Wm),bo.component("action",Xm),bo.component("play-audio",kf.Z),bo.component("bans",Om),bo.component("moders",Pm),bo.component("social-auth",Qm),bo.component("oauth-success",dd),bo.component("dropdown",ev),bo.component("baned",av),bo.component("subscribe",iv),bo.component("flyball",ov),bo.component("likeMe",lv),bo.component("complaint",hv),bo.component("rules",vv),bo.component("aboutModal",_v),bo.component("selecta",bv),bo.component("datepicker",wv),bo.component("about",Sv),bo.component("share",Av),bo.component("user-messages",uu),bo.component("user-message",Pv),bo.component("typing",Dv),bo.component("app-header",nh),bo.component("friend-button",Mv),bo.component("ignors",xm),bo.component("user-blacklist",jv),bo.component("donaters-list",Zv),bo.component("share-button",zv),bo.component("adv",Kv),bo.component("scroller",Yv),bo.component("users-selecter",Jv),bo.component("load-more",tg),bo.component("sw-notify",ng),bo.component("screenshot",rg),bo.component("comments",cg),bo.component("comment-thread",ug),bo.component("comment-form",fg),bo.component("comment-item",pg),bo.component("user-search-form",vg),bo.component("list-form",_g),bo.component("support-ask",bg),bo.component("catalog",$u),bo.component("posts",Xu),bo.component("dummy",wg),bo.component("pagex",Ru),bo.component("html-editor",xg),bo.component("vote",Yf.Z),bo.component("circle-progress",Eg),bo.component("donate-progress",Ag),bo.component("json",cp),bo.component("copy",{template:'<button v-on:click="copy()" class="btn btn-outline-secondary"><i class="" :class="{\'fa fa-clone\': !copied, \'bi bi-check2\': copied}" aria-hidden="true"></i></button>',props:{text:{}},data:function(){return{copied:!1}},methods:{copy:function(){var t=this;if(!this.copied){var e=document.body,n=this.getParent("modal");n&&(e=n.$el);var a=document.createElement("input");a.value=this.text,e.appendChild(a);a.select();document.execCommand("copy"),e.removeChild(a);var r=bootstrap.Tooltip.getInstance(this.$el);if(r)return info("another tooltip on instance, cancel show result",this.$el,r),this.copied=!0,setTimeout((function(){t.copied=!1}),1e3),void r.hide();var i=new bootstrap.Tooltip(this.$el,{container:e,animation:!1,placement:"top",trigger:"manual",delay:0,title:"Скопировано!"});i.show(),setTimeout((function(){i.tip&&i.tip.parentNode?(i.dispose(),t.copied=!1):error("tooltip han been removed from dom",i)}),1e3),this.copied=!0}}}}),bo.component("floating-toggler",{template:'<button class="btn" data-title="Плавающий режим" v-on:click="toggle()"><i aria-hidden="true" class="fa" :class="{\'fa-external-link\': !comp.isFloating, \'fa-compress\': comp.isFloating}"></i></button>',props:{name:{}},data:function(){return{comp:this.$parent}},created:function(){},methods:{toggle:function(){this.comp.isFloating?this.comp.floating(!1):this.comp.floating()}}}),bo.component("help",{template:'<i class="fa fa-question-circle" :data-help="$slots.default[0].text"></i>'});function Rg(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Og(t){return(Og="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $g(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Pg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pg(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function Pg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var Lg="389\n".toString().trim();"undefined"!=typeof console&&(console.log("%cLivacha.com v2","font-size: 50px; color: red"),console.log("%cBuild: "+Lg,"font-size: 20px; color: green"),console.log("%clive broadcasts","font-size: 20px; color: blue")),window.log=vl,window.info=gl,window.error=_l;var Dg=window.__app_settings||{},Ig=window.__app_data||{};pl.V.setToken(Dg.token||""),pl.V.superParams._v2=1,window.__show_logs=__app_settings.debug||__app_settings.admin,"function"==typeof window.moment&&moment.locale("ru"),au.global(),bo.mixin(Wl),bo.use(hl);var Mg=new hl({mode:"history"});Mg.beforeEach((function(t,e,n){var a=Mg.app,r=t.meta||{};if("start"===t.name){if(!a.global.uid)return a.login();var i=a.global.user.roomAlias;if(i){if("room"===a.$route.name&&a.$route.params.alias===i)return;return Mg.push("/chat/"+i)}}if("profile"!==t.name||a.global.user||"user_profile"!==a.global.route)return void 0!==r.centeredLayout?a.centeredLayout=r.centeredLayout:a.centeredLayout=!1,Hl.closeAll(),a.$refs.sitemenu&&a.$refs.sitemenu.toggle(!1),n()}));var Ng=document.querySelector("#app");const jg={router:Mg,el:"#app",name:"livacha_app",data:function(){return{content:Ng?Ng.innerHTML:"",appSettingsGlobal:Dg,clientHeight:void 0,theme:{theme:"dark",floating:!1,soundOff:!1},sharedBuffer:{floatingNodes:[]},documentVisible:!0,floatingSupported:!1,fullscreenMode:!1,roomAlertPopup:null,width:null,messaging:null,build:parseInt(Lg),centeredLayout:!1,fluidLayout:!1,needUpdate:!1,embed:Dg.embed}},delimiters:["${","}"],components:{garland:Ff},destroyed:function(){this.ws&&this.ws.off("message",this.messageWsListener)},computed:{themeColor:function(){var t=this.global.theme;return"auto"===t?"light":t}},created:function(){var t,e=this,n=$g(Wd.routes);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.$router.addRoute(a)}}catch(t){n.e(t)}finally{n.f()}this.name=this.global.appName.toLowerCase(),this.uri=location.origin,this.postMessSign="post_mess_sogn_"+this.name,this.prevLocation=null,this.sw=null,this.observeDOM(document.body),this.smiles=new rf({ver:this.global.ver,smilesPattern:this.global.smilesPattern}),this.ws=Ol.make(this.global.daemon.uri),this.ws.connect(),this.ws.on("message",this.messageWsListener),this.mobileApp=window.LvMobileAppInterface?new of:null,this.eventsDelay={},this.mobileApp&&(this.appSettingsGlobal.userMobileApp?this.mobileApp.call("user",this.appSettingsGlobal.userMobileApp):this.mobileApp.call("logout",{}),this.appSettingsGlobal.sessionMobileApp&&this.mobileApp.call("setSession",this.appSettingsGlobal.sessionMobileApp)),this.roomAlertPopupsQueue=[],this.roomAlertPopupLock=null,pl.f.onComplete((function(t){t.meta.user&&e.setUser(t.meta.user),e.mobileApp&&t.meta.userMobile&&e.mobileApp.call("user",t.meta.userMobile),t.meta.token_expire&&e.sessionUp()})),this.$on("login",(function(){"enter"!==e.$route.name?location.reload():location="/"})),Object.assign(this.theme,Cl.Z.storage("theme")||{}),this.$watch("theme",(function(){var t=e.theme.theme;Cl.Z.storage("theme",e.theme),e.global.theme=t,Cookies.set("theme",t,{expires:360}),e.applyTheme()}),{deep:!0}),this.beeper=this.render(kf.Z,{background:!0,autoplay:!1}),this.visibilityInit(),window.addEventListener("message",(function(t){var n=t.data||{},a=n.data;"oauth"===n.type&&(t.source&&t.source.close(),"login"===a.state.service&&e.$root.$emit("login"),e.$emit("oauth",a.state.service,a)),e.$emit("message",n.type,n.data)})),$(document).on("webkitfullscreenchange mozfullscreenchange msfullscreenchange fullscreenchange",(function(t){var n=e.getFullScreenEl();!n&&e.fullscreenMode&&(e.fullscreenMode=!1),n&&n===document.documentElement&&(e.fullscreenMode=!0),e.fluidLayout=e.fullscreenMode,e.$emit("fullscreenchange",n)})),window.addEventListener("scroll",(function(t){var n=document.scrollingElement;if(n){var a=n.scrollHeight-n.clientHeight;n.scrollTop>=a&&a>0&&e.$emit("scroll-data",t)}e.$emit("scroll",t)})),window.addEventListener("resize",(function(t){e.$emitDelay(100,"resize_delay",t),e.$emit("resize",t)})),this.floatingSupported=this.isFloatingSupported(),this.$on("fullscreenRequest",(function(){e.getFullScreenEl()?e.exitFullscreen():e.requestFullscreen(document.documentElement)})),this.clientIdentify().then((function(t){-1!==["chrome","ff"].indexOf(head.browser.name)&&e.initNotify(t)})),this.checkNewVer(this.global.ver)},mounted:function(){document.getElementById("app-loader").remove(),this.navbar=this.$refs.navbar,this.currentRoomHolder=this.$refs.currentRoomHolder,this.currentRoomHolderContainer=this.$refs.currentRoomHolderContainer,this.onResize(),window.addEventListener("resize",this.onResize),this.global.debug},methods:{$emitDelay:function(t,e,n){var a=this,r=this.eventsDelay[e]||null;r&&(clearTimeout(r),this.eventsDelay[e]=null),r=setTimeout((function(){a.$emit(e,n)}),t),this.eventsDelay[e]=r},requestNotify:function(){this.sw&&this.sw.initNotify()},initNotify:function(t){var e=this;this.scripts(["https://www.gstatic.com/firebasejs/7.9.2/firebase-app.js","https://www.gstatic.com/firebasejs/7.9.2/firebase-messaging.js"]).then((function(){if(vl("start sw init"),!window.Notification)return _l("window.Notification not supported, cancel init");try{e.sw=new Nl({firebaseConfig:e.global.firebaseConfig})}catch(t){return void e.popupFixErr(t)}var n=Notification.permission.toLowerCase();if(e.sw.on("error",(function(t){})),e.sw.on("token",(function(n,a){vl("firebase token",n);var r=Cl.Z.storage("endpoint"),i=e.global.endpoints||[],s=i&&i instanceof Array&&-1!==i.indexOf(n);!a&&r===n&&s||pl.V.make("endpointRegister",{endpoint:n,device:window.UAParser?JSON.stringify((new UAParser).getResult()):null,type:head.browser.name,hash:t}).then((function(t){Cl.Z.storage("endpoint",n)})).catch((function(t){_l(t)}))})),e.sw.on("message",(function(t){_l("message",t)})),e.sw.on("permission",(function(t){e.$emit("notyfyPermission",t)})),"granted"===n)e.sw.initNotify();else if("denied"===n);else if("default"===n){Cl.Z.storage("notifyDeny")?vl("notify disabled by user"):e.global.uid&&setTimeout((function(){e.openNotifyRequest()}),15e3)}}))},getFingerprint:function(){return new Promise((function(t,e){if(!window.Fingerprint2)return e("Fingerprint2 not defined");Fingerprint2.getV18({preprocessor:function(t,e){if("userAgent"===t){var n=new UAParser(e);e=n.getOS().name+" "+n.getBrowser().name}return e}},(function(e){vl("client ident",e),t(e)}))}))},getClientHash:function(){var t=Cl.Z.storage("client"),e=Cl.Z.storage("clientDate");if(!e)return null;try{var n=new Date(parseInt(e));if(!n)return null;vl("client date",n);var a=((new Date).getTime()-n.getTime())/1e3;vl("client diff",a),(!a||a<0||a>86400)&&(t=null)}catch(t){return _l("invalid client hash date",t),null}return t},clientIdentify:function(){var t=this;return new Promise((function(e,n){var a=t.getClientHash();t.global.checkedClient&&a?e(a):t.getFingerprint().then((function(t){pl.V.make("checkClient",{hash:t,mobile:head.mobile?1:0,device:window.UAParser?JSON.stringify((new UAParser).getResult()):null,userAgent:navigator.userAgent}).then((function(){Cl.Z.storage("client",t),Cl.Z.storage("clientDate",(new Date).getTime()),e(t)})).catch((function(t){_l(t),n(t)}))})).catch((function(t){_l(t),n(t)}))}))},messageWsListener:function(t,e,n){switch(t){case"streamsUpdate":if("publish"===e.type&&e.roomJson&&e.userJson){var a={room:e.roomJson,user:e.userJson};this.documentVisible&&(this.roomAlertPopupsQueue.push(a),this.roomAlertPopupRun())}break;case"banAlert":case"banedAlert":case"ban":this.render("baned",{ban:e}),e.public.warning||this.beep("ban");break;case"mess":"support"===e.tag?this.navbar.moderAlert=!0:("messaging"===this.$route.name||this.messaging&&!this.messaging.closed()||(this.navbar.messCount++,this.beep("mess")),e.group?(this.navbar.lastMessUid=0,this.navbar.lastMessGroup=e.group):(this.navbar.lastMessUid=e.from,this.navbar.lastMessGroup=0));break;case"notify":this.beep("alert"),this.navbar.alerts++,this.alerts&&this.alerts.load();break;case"moderAlert":this.navbar.moderAlert=!0,this.beep("alert");break;case"friendRequest":case"friendAdded":break;case"logout":this.popupFixErr("Сеанс завершен"),this.global.uid=null,this.global.user=null;break;case"leave_force":this.popupFixErr("Вы были удалены с чата "+e.room_name);break;case"site_update":this.checkNewVer(e.ver)}this.$emit("wsmess",t,e,n)},checkNewVer:function(t){gl("checkNewVer",t=parseInt(t),this.build),this.build!==t&&(this.needUpdate=!0)},applyUpdates:function(){this.needUpdate=!1,window.location.reload()},roomAlertPopupRun:function(){var t=this;!this.roomAlertPopupLock&&this.documentVisible&&(this.roomAlertPopup=this.roomAlertPopupsQueue.shift(),this.roomAlertPopup&&(this.roomAlertPopupLock=!0,this.$nextTick((function(){var e=t.$refs.roomAlertPopup;e.animate("bounceInUp").then((function(){t.roomAlertPopupLock=setTimeout((function(){e.animate("bounceOutLeft").then((function(){t.roomAlertPopup=null,t.roomAlertPopupLock=null,t.roomAlertPopupRun()}))}),3e3)}))}))))},roomAlertPopupClick:function(t){var e=this;!t.target.classList.contains("removeClc")&&this.roomAlertPopup&&this.openRoom(this.roomAlertPopup.room.id),this.roomAlertPopup=null,!0!==this.roomAlertPopupLock&&clearTimeout(this.roomAlertPopupLock),setTimeout((function(){e.roomAlertPopupLock=null,e.roomAlertPopupRun()}),200)},roomAlertPopupMouseenter:function(t){clearTimeout(this.roomAlertPopupLock)},visibilityInit:function(){var t,e,n=this;void 0!==document.hidden?(t="hidden",e="visibilitychange"):void 0!==document.msHidden?(t="msHidden",e="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),document.addEventListener(e,(function(){n.documentVisible=!document[t],n.documentVisible?n.$emit("visible"):(!0!==n.roomAlertPopupLock&&clearTimeout(n.roomAlertPopupLock),n.roomAlertPopupsQueue=[],n.roomAlertPopupLock=null,n.$emit("unvisible")),n.$emit("documentVisible",n.documentVisible)}),!1)},titleAnimate:function(t){var e=this;this.titleAnimateTm&&(clearInterval(this.titleAnimateTm),this.titleAnimateTm=null),this.titleOrig&&(document.title=this.titleOrig),!1!==t&&(this.$once("visible",(function(){e.titleAnimate(!1)})),this.titleOrig=document.title,this.titleAnimateTm=setInterval((function(){document.title=document.title===e.titleOrig?t:e.titleOrig}),1e3))},applyTheme:function(){var t=document.getElementById("css_theme_current"),e=this.themeColor;if(t){var n=t.getAttribute("href");n=n.replace(/theme_[a-z]+/,"theme_"+e),t.setAttribute("href",n)}},f5:function(t){if(116===(t=t||window.event).keyCode){if("chat"===this.global.route)return!1;if(this.f5wasPressed)return;t.preventDefault(),this.history("/"),this.f5wasPressed=!0}},observeDOM:function(t){var e=this,n=window.MutationObserver||window.WebKitMutationObserver;if(!n)return _l("MutationObserver",n);new n((function(t,n){t.forEach((function(t){t.type,t.addedNodes.forEach((function(t){var n="tagName"in t?t.tagName.toLowerCase():"";1===t.nodeType&&"script"!==n&&"iframe"!==n&&au.parse(t,e,"added")})),t.removedNodes.forEach((function(t){"tagName"in t&&t.tagName.toLowerCase();1===t.nodeType&&au.parse(t,e,"removed")}))}))})).observe(t,{childList:!0,subtree:!0,attributes:!0})},onResize:function(){if(this.width=this.$el.clientWidth,this.clientHeight=window.innerHeight,this.navbar){var t=$(this.navbar.$el).outerHeight();this.clientHeight-=t}var e=this.currentRoomHolder;e&&(e=this.currentRoomHolder,this.width),this.floatingSupported=this.isFloatingSupported()},getComponent:function(t){var e,n=$g(this.$children);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a.$options&&a.$options.name===t)return a}}catch(t){n.e(t)}finally{n.f()}},changeTheme:function(){this.make(hf,{}).$mount()},popupFix:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;"error"===e&&(e="danger");var n=this.make(df,{propsData:{text:Cl.Z.objToStr(t),type:e}});n.$mount(),$("body").append(n.$el)},popupFixErr:function(t){this.popupFix(t,"danger")},alert:function(t,e){e||(e={}),this.render(Hl,Object.assign({text:Cl.Z.objToStr(t),icon:"fa fa-exclamation-triangle text-danger",title:"Сообщение"},e))},createCompFromObject:function(t,e){return new(bo.extend(t))(Object.assign({parent:this},e))},toast:function(t,e,n){this.make(lf,{propsData:{type:n,element:e,text:t,title:""}}).$mount()},modal:function(t){this.make(Hl,{propsData:t}).$mount()},ignor:function(t,e){var n=this;t?pl.V.make("ignoreToggle",{uid:t}).then((function(t){n.global.user.ignors=t.list})).catch((function(t){n.popupFixErr(t)})):this.ws.send("ignore",{clientId:e})},roomSettingsOpen:function(t,e){var n={};n="object"===Og(t)?t:{ownerId:t,chat:e},this.render(vf,n)},play:function(t){this.render(kf.Z,{background:!0,src:t})},beep:function(t){return this.beeper.play(t)},setUser:function(t){t?(this.global.user=t,this.global.uid=t.id):(this.global.user=null,this.global.uid=null)},logout:function(t){var e=this;t.preventDefault(),pl.V.make("/api/logout").then((function(){})).catch((function(t){})).always((function(){e.setUser(null),location.reload()}))},login:function(t,e){t&&t.preventDefault(),this.render(Vu,e||{})},script:function(t,e){var n=document.createElement("script");return n.src=t,n.type="text/javascript",n.async=!1,n.onload=function(){e&&e(t)},document.head.appendChild(n),n},scripts:function(t){var e=this;return new Promise((function(n,a){var r,i=t.length,s=$g(t);try{for(s.s();!(r=s.n()).done;){var o=r.value;e.script(o,(function(t){0===--i&&n()}))}}catch(t){s.e(t)}finally{s.f()}}))},postMessage:function(t,e,n){n||(n=window);n.postMessage({type:t,data:e,sign:this.postMessSign},this.uri)},winCenter:function(t,e,n){var a=void 0!==window.screenLeft?window.screenLeft:window.screenX,r=void 0!==window.screenTop?window.screenTop:window.screenY,i=window.screen.width,s=window.screen.height,o=n.width||400,c=n.height||400;o>window.screen.width&&(o=window.screen.width),c>window.screen.height&&(c=window.screen.height);var l=i/window.screen.availWidth,u=(i-o)/2/l+a,d=(s-c)/2/l+r;n.top=d,n.left=u,n.width=o,n.height=c;var f="";Object.keys(n).map((function(t,e){f+=t+"="+n[t]+","}));var h=window.open(t,e,f);return h&&h.focus&&h.focus(),h},addFloating:function(t){this.sharedBuffer.floatingNodes.push(t),this.zIndexFloatingReset(),t.$el.style.setProperty("z-index",3),t.$el.addEventListener("mousedown",t.onFloatingActive)},zIndexFloatingReset:function(){var t,e=$g(this.$root.sharedBuffer.floatingNodes);try{for(e.s();!(t=e.n()).done;){t.value.$el.style.setProperty("z-index",2)}}catch(t){e.e(t)}finally{e.f()}},removeFloating:function(t){t.$el.removeEventListener("mousedown",t.onFloatingActive),t.$el.style.removeProperty("z-index");for(var e=this.$root.sharedBuffer.floatingNodes,n=0;n<e.length;n++)if(e[n]._uid===t._uid){e.splice(n,1);break}},isFloatingSupported:function(){return document.body.clientWidth>1e3},getFullScreenEl:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElementl||document.msFullscreenElement},requestFullscreen:function(t){var e=t.requestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;return!(!e||!e.call)&&e.call(t)},exitFullscreen:function(){try{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():_l("fail leave fullscreen")}catch(t){_l("exitFullscreen error: ",t.message)}},ball:function(t,e,n){return this.$root.render(FlyBall,Object.assign({text:this.$root.make(t,e).$mount().$el},n))},openRoom:function(t){this.mobileApp?this.global.user&&this.global.user.roomAlias===t?this.mobileApp.call("streamStart",{alias:t}):this.mobileApp.call("streamClick",{alias:t}):Mg.push("/chat/"+t)},openMessages:function(t){return"number"==typeof t&&t&&(t={uid:t}),t||(t={}),this.messaging?this.messaging.show(t):this.messaging=this.render(_f,t),this.messaging},openSupportMessages:function(t){this.render(_f,Object.assign({uid:this.global.support_uid,support:!0,listHidden:!0,loadList:!1},t))},openAlerts:function(){this.alerts?this.alerts.toggle():(this.alerts=this.render(wf),this.$el.appendChild(this.alerts.$el),this.alerts.toggle(!0))},openUser:function(t,e){this.render(bu,{uid:t,params:e})},openSupport:function(t){this.render(wu,t)},openChatHistory:function(t){this.render(xu,t)},openNotifyRequest:function(t){this.render(Sf,t)},openMyProfile:function(t){this.render(qu,t)},openSeller:function(){this.render(Tu)},openOrder:function(t){this.render(Tf,t)},openStreamChart:function(t){this.render(Of,t)},openFeedback:function(t){this.render(Wu,t)},openPay:function(t){return t||(t={}),this.render(Cd,t)},openBugReport:function(t){this.render(Pf,t)},openRecord:function(t,e){e||(e={}),e=Object.assign(e,{record:t}),this.render(Df,e)},openAdChat:function(t){t=t||{},this.render(Mf,t)},openVoteAdmin:function(t){t=t||{},this.render(Nf.Z,t)},isFriend:function(t){var e=this.getFirstChild("friends",!0);return!!(e&&e.onliners instanceof Array)&&e.onliners.find((function(e){return e.uid==t}))},bodyBackground:function(t,e){e||(e=this.$el),"object"===Og(t)?Object.assign(e.style,t):(e.style.removeProperty("background-image"),e.style.removeProperty("background-color"),e.style.removeProperty("background-repeat"),e.style.removeProperty("background-size"),e.style.removeProperty("background-position"))},header:function(t){var e=this.$refs.header;e&&(e.header=t)},title:function(t){window.document.title=t},nav:function(t,e){var n=this.$refs.header;if(n){n.nav instanceof Array||(n.nav=[]),t instanceof Array&&(n.nav=[]);var a,r=$g(t instanceof Array?t:[{text:t,link:e}]);try{for(r.s();!(a=r.n()).done;){var i=a.value;n.nav.push({text:i.text,link:i.link})}}catch(t){r.e(t)}finally{r.f()}}},updateMe:function(){this.$api((function(t){}),"UpdateMe")},sessionUp:function(){pl.V.raw("/sessionUp",{},"get").then((function(t){gl("token updated",t.token),pl.V.setToken(t.token)}))},konkursLink:function(){return"/ny2024"},sosHide:function(){Cookies.set("sos_hide",1,{expires:3}),this.appSettingsGlobal.showSos=!1}}};var Fg=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,a=[{key:"getData",value:function(t){return Ig[t]}},{key:"extractData",value:function(t){var e=void 0;return t in Ig&&(e=Object.assign({},Ig)[t],delete Ig[t],Ig[t+"__trashed_"+(new Date).getTime()]=e),e}}],(n=null)&&Rg(e.prototype,n),a&&Rg(e,a),t}();Fg.data=Ig;const Bg=jg;const Ug=(0,Fl.Z)(Bg,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-app",attrs:{id:"app","data-embed":t.embed,"data-route":t.$route.name,"data-fullscreen":t.fullscreenMode}},[n("navbar",{ref:"navbar"}),t._v(" "),t.appSettingsGlobal.isNy&&"home"===t.$route.name?n("garland"):t._e(),t._v(" "),n("sitemenu",{ref:"sitemenu"}),t._v(" "),n("app-header",{ref:"header"}),t._v(" "),t.global.moder?n("moderating",{key:"moderating",attrs:{moderating:t.global.moderating}}):t._e(),t._v(" "),"home"===t.$route.name?n("div",{staticClass:"container"},[n("adv",{staticClass:"my-3",attrs:{type:"yandex",scope:"home"}})],1):t._e(),t._v(" "),n("div",{key:"page",class:{fluidLayout:t.fluidLayout,"container-xl":!t.fluidLayout,"g-0":t.embed},attrs:{id:"page"}},[n("div",{staticClass:"row g-0",class:{"justify-content-center":t.centeredLayout}},[n("div",{staticClass:"col-12",class:{"col-12 col-md-8 col-lg-7 col-xl-6":t.centeredLayout}},["home"===t.$route.name&&t.$root.appSettingsGlobal.showSos?n("a",{staticClass:"d-block p-3 position-relative text-center text-reset",staticStyle:{border:"2px red solid","text-decoration":"none"},attrs:{href:"/sos"}},[n("i",{staticClass:"em em-sos",attrs:{"aria-role":"presentation","aria-label":"SQUARED SOS"}}),t._v(" "),n("strong",{staticClass:"text-danger"},[t._v("нужна ваша помощь для оплаты серверов для сайта")]),t._v(" "),n("button",{staticClass:"btn-close position-absolute end-0 top-0",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.sosHide()}}})]):t._e(),t._v(" "),n("router-view",{}),t._v(" "),n("router-view",{attrs:{name:"streams"}}),t._v(" "),"home"===t.$route.name&&"RU"!==t.global.country.iso?n("adv",{staticClass:"my-3",attrs:{type:"google",scope:"home_bottom"}}):t._e(),t._v(" "),n("router-view",{key:"news_front",staticClass:"news-block",attrs:{name:"news"}},[n("h3",{attrs:{slot:"top"},slot:"top"},[n("i",{staticClass:"fa fa-fire text-danger"}),t._v("\n                        Новости\n                    ")]),t._v(" "),n("p",[n("router-link",{attrs:{to:"/news"}},[t._v("все новости")])],1)]),t._v(" "),n("router-view",{key:"votes_front",attrs:{name:"votes"}},[n("h3",{attrs:{slot:"top"},slot:"top"},[n("i",{staticClass:"fa fa-question"}),t._v("\n                        Опросы\n                    ")]),t._v(" "),n("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.openVoteAdmin({scope:"pay",roomId:t.global.user&&t.global.user.roomId})}}},[t._v("Добавить опрос")]),t._v(" "),n("p",[n("router-link",{attrs:{to:"votes"}},[t._v("все опросы")])],1)]),t._v(" "),n("router-view",{key:"posts_front",attrs:{name:"posts"}},[n("h3",{attrs:{slot:"top"},slot:"top"},[n("i",{staticClass:"fa fa-bullhorn"}),t._v("\n                        Заметки пользователей\n                    ")]),t._v(" "),n("p",[n("router-link",{attrs:{to:"/posts"}},[t._v("все заметки")])],1)]),t._v(" "),n("div",{ref:"contentStatic",attrs:{id:"content-static"},domProps:{innerHTML:t._s(t.content)}}),t._v(" "),t.global.admin&&"home"===t.$route.name?n("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.$root.openStreamChart()}}},[t._v("Статистика")]):t._e()],1)])]),t._v(" "),n("adv",{staticStyle:{height:"0",overflow:"hidden"},attrs:{type:"yandex",scope:"mobile_popup"}}),t._v(" "),n("footer-puper"),t._v(" "),t.roomAlertPopup?n("div",{ref:"roomAlertPopup",staticClass:"room-alert-popup bg-dark position-fixed border row g-0 gap-0 align-items-center",on:{click:function(e){return t.roomAlertPopupClick(e)},mouseenter:function(e){return t.roomAlertPopupMouseenter(e)}}},[n("div",{staticClass:"col-auto h-100"},[n("img",{staticClass:"ava border h-100",attrs:{src:t.roomAlertPopup.user.avatar}})]),t._v(" "),n("div",{staticClass:"col-auto px-2 text-truncate text",staticStyle:{"max-width":"200px"}},[t._v("\n            "+t._s(t.roomAlertPopup.user.name)+"\n        ")]),t._v(" "),t._m(0)]):t._e(),t._v(" "),t.needUpdate?n("div",{staticClass:"need-update-popup bg-white text-dark border p-3 position-fixed bottom-0 start-0 animate__animated animate__backInUp"},[n("strong",[t._v("Внимание!")]),t._v(" "),t._m(1),t._v(" "),n("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.applyUpdates}},[n("i",{staticClass:"fa fa-refresh"}),t._v("\n            Перезагрузить\n        ")]),t._v(" "),n("button",{staticClass:"btn btn-secondary ",attrs:{type:"button"},on:{click:function(e){t.needUpdate=!1}}},[n("i",{staticClass:"fa fa-remove"})])]):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-auto h-100"},[e("button",{staticClass:"btn btn-secondary btn-sm remove removeClc"},[e("i",{staticClass:"fa fa-times removeClc",attrs:{"aria-hidden":"true"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-2 text-danger"},[n("i",{staticClass:"fa fa-exclamation-triangle text-danger"}),t._v("\n            Вы используете устаревшую"),n("br"),t._v(" версию сайта\n        ")])}],!1,null,null,null).exports;bo.config.devtools=!1;new bo(Ug)},89279:(t,e,n)=>{"use strict";function a(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw s}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function c(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.d(e,{V:()=>u,f:()=>d});var l=n(17187),u=function(){function t(){s(this,t),this.responseType="raw",this.withCredentials=!1,this.rawResponse=!1}return c(t,[{key:"request",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post";return t=/^http/.test(t)||/^\//.test(t)?t:"/api/"+t,this.responseType="json",this.raw(t,e,n)}},{key:"raw",value:function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post",r=new $.Deferred;if(n||(n={}),"object"===i(n)&&!(FormData&&n instanceof FormData))for(var s in n)n.hasOwnProperty(s)&&"boolean"==typeof n[s]&&(n[s]=n[s]?"1":"");"post"===a&&t.applySuperParams(n),n instanceof FormData&&FormData&&FormData.prototype._asNative;var o={url:e,data:n,method:a,processData:!(n instanceof FormData),contentType:!(n instanceof FormData)&&"application/x-www-form-urlencoded; charset=UTF-8"};return this.withCredentials&&(o.xhrFields={withCredentials:!0}),this._ajax(o,r),r}},{key:"_ajax",value:function(e,n){var a=this,r={beforeSend:function(){},success:function(){},error:function(){},complete:function(e,r){if(a.rawResponse)return n.resolve("json"===a.responseType?JSON.parse(e.responseText):e.responseText);var i=new d(a.responseType);i.xhr(e),i.meta.token&&t.setToken(i.meta.token),i.error?n.reject(i.error,i):n.resolve(i.result,i),t.listener.emit("request",i)}},i=Object.assign(r,e);$.ajax(i)}}],[{key:"make",value:function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post",r=new t;return r.request(e,n,a)}},{key:"raw",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post";return"object"===i(e)&&(e=JSON.stringify(e)),new Promise((function(a,r){var i=new XMLHttpRequest;i.onload=function(){if(200===i.status)try{a(JSON.parse(i.responseText))}catch(t){r(t)}else r("http error: "+i.status+": "+i.statusText)},i.onerror=function(){r("http error: "+i.status+": "+i.statusText)},i.open(n,t),i.setRequestHeader("Content-type","application/json"),i.send(e)}))}},{key:"action",value:function(e,n,a,r){var i={action:e,obj:n,obj_id:a||"",opt:r};return t.make("action/"+e,i)}}]),t}();u.applySuperParams=function(t){var e=u.superParams||{};for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];t instanceof FormData?(t.delete(n),t.append(n,a)):t[n]=a}},u.setToken=function(t){u.superParams._token=t},u.callbacksGlobal=[],u.superParams={},u.listener=new l;var d=function(){function t(e){s(this,t),this.result=null,this.raw=null,this.json=null,this.success=null,this.responseType=e,this.meta={},this.error=null}return c(t,[{key:"setError",value:function(t){this.error=t}},{key:"xhr",value:function(e){if(this.result=e.responseText,this.raw=e.responseText,this.status=e.status,200!==e.status){var n=e.statusText;404===e.status&&(n="Запрос не найден на сервере (404)"),503===e.status&&(n="Не так часто"),504===e.status&&(n="Превышено время ожидания от сервера. Повторите попытку через 10 сек."),500===e.status&&(n="Внутренняя ошибка сервера. Администратор уже решает проблему"),0===e.status&&(n="Ошибка сети или ваш браузер отклонил удаленное соединение"),e.responseText&&"string"==typeof e.responseText&&(e.responseText.match(/<!DOCTYPE|<html>/i)||(n+=" ("+e.responseText+")")),this.setError(n)}if("json"===this.responseType&&!this.error)try{this.json=JSON.parse(this.raw)}catch(t){error(this.raw,t),this.setError("От сервера поступили неразборчивые данные")}this.json&&!this.error&&(this.result=this.json.res,this.success=this.json.success,this.meta=this.json.meta||{},this.meta instanceof Array&&0===this.meta.length&&(this.meta={}),this.json.errors&&(this.json.errors instanceof Array?this.json.errors.length>0&&this.setError(this.json.errors[0]):this.json.errors&&this.setError(this.json.errors)),this.error||this.json.success||this.setError("Ошибка какая-то непонятная"));var r,i=a(t.callbacksGlobal);try{for(i.s();!(r=i.n()).done;){(0,r.value)(this)}}catch(t){i.e(t)}finally{i.f()}}}]),t}();d.callbacksGlobal=[],d.onComplete=function(t){d.callbacksGlobal.push(t)}},56410:(t,e,n)=>{"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw s}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=p(t);if(e){var r=p(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>C});var m=function(t){u(n,t);var e=f(n);function n(t){var a;return o(this,n),(a=e.call(this)).pc=t,a.statsTm=null,a.remoteStats=null,a.localStats=null,a}return l(n,[{key:"start",value:function(t){var e=this;this.statsTm?this.stop():this.statsTm=setInterval((function(){e.pc.getStats().then((function(t){var n="",a={remote:new v(e.pc,"remote",e.remoteStats),local:new v(e.pc,"local",e.localStats)},r=[];t.forEach((function(t){null,n=null;t.timestamp;"media-source"===t.type&&"audio"===t.kind&&(n="local",a.local.audio.audioLevel(t)),"inbound-rtp"!==t.type&&"outbound-rtp"!==t.type||(n="inbound-rtp"===t.type?"remote":"local",a[n][t.kind].codecImpl="remote"===n?t.decoderImplementation:t.encoderImplementation),"track"===t.type&&(n=t.remoteSource?"remote":"local",a[n][t.kind].updateTrack(t)),(n&&"inbound-rtp"===t.type||"outbound-rtp"===t.type||"track"===t.type)&&a[n].updateRtp(t.mediaType||t.kind,t),"codec"===t.type&&r.push(t)})),a.remote.setCodec(r),a.local.setCodec(r),e.remoteStats=a.remote,e.localStats=a.local,e.emit("stat")})).catch((function(t){error("error stats: ",t)}))}),t||1e3)}},{key:"stop",value:function(){if(this.statsTm)return clearInterval(this.statsTm),this.statsTm=null,!0}}]),n}(n(17187)),v=function(){function t(e,n,a){var r=this;o(this,t),this.type=n,this.video=new y,this.audio=new _,this.prev=a,this.active=void 0,this.icesPairs=[],this.connected=void 0,this.transportNotConn=0,("remote"===n?e.getReceivers():e.getSenders()).forEach((function(t){r.type;var e=t.track,n=t.transport;if(e&&e.enabled&&!e.muted&&(r[e.kind].active=!0),n&&n.iceTransport&&"connected"===n.iceTransport.state||r.transportNotConn++,n&&n.iceTransport&&"function"==typeof n.iceTransport.getSelectedCandidatePair){var a=n.iceTransport.getSelectedCandidatePair();a&&r.icesPairs.push(a)}})),this.connected=0===this.transportNotConn,this.active=this.video.active&&this.audio.active&&this.connected}return l(t,[{key:"updateRtp",value:function(t,e){var n="remote"===this.type?e.bytesReceived:e.bytesSent,a="remote"===this.type?e.framesDecoded:e.framesEncoded,r=e.timestamp;if(this.prev){var i=this.prev.now;if(void 0!==n){this[t]._tmBytes=r,i=this.prev[t]._tmBytes,this[t].bytes=n;var s=8*(n-this.prev[t].bytes)/(r-i);s=Math.round(s),this[t].bitrate=s}if("video"===t&&void 0!==a){i=this.prev[t]._tmFrames;var o=this.prev[t].frames;this[t]._tmFrames=r,this[t].frames=a;var c=(a-o)/((r-i)/1e3);c=Math.round(c),this[t].fps=c}}e.codecId&&(this[t].codecId=e.codecId)}},{key:"setCodec",value:function(t){this.audio.setCodec(t),this.video.setCodec(t)}}]),t}(),g=function(){function t(){o(this,t),this.codec=void 0,this.codecImpl=void 0,this.codecId=void 0,this.bitrate=void 0,this.bytes=void 0,this.active=void 0,this.packetsLost=void 0,this.ended=void 0,this.trackId=void 0}return l(t,[{key:"setCodec",value:function(t){var e=this;t.forEach((function(t){e.codecId===t.id&&(e.codec=t)}))}},{key:"updateTrack",value:function(t){this.ended=t.ended,this.trackId=t.trackIdentifier}},{key:"update",value:function(t){}}]),t}(),_=function(t){u(n,t);var e=f(n);function n(){var t;return o(this,n),(t=e.call(this)).type="audio",t.level=void 0,t}return l(n,[{key:"updateTrack",value:function(t){s(p(n.prototype),"updateTrack",this).call(this,t)}},{key:"audioLevel",value:function(t){this.level=t.audioLevel}}]),n}(g),y=function(t){u(n,t);var e=f(n);function n(t){var a;return o(this,n),(a=e.call(this,t)).type="video",a.width=void 0,a.height=void 0,a.framesDropped=void 0,a.frames=void 0,a.fps=void 0,a}return l(n,[{key:"updateTrack",value:function(t){s(p(n.prototype),"updateTrack",this).call(this,t),this.width=t.frameWidth,this.height=t.frameHeight,this.framesDropped=t.framesDropped,this.frames="framesReceived"in t?t.framesReceived:t.framesSent}}]),n}(g),b=function(){function t(){o(this,t)}return l(t,null,[{key:"updateLocalStream",value:function(t,e){var n;log("updateLocalStream",t,e),e.getTracks().forEach((function(a){if((n=t.getTransceivers()).length>0){var i,s=r(n);try{for(s.s();!(i=s.n()).done;){var o=i.value;if(o.sender&&o.sender.track.kind===a.kind)return void o.sender.replaceTrack(a).then((function(){info("track replaced: ",a.kind)})).catch((function(t){error("error replace track: ",a.kind,t)}))}}catch(t){s.e(t)}finally{s.f()}}if("function"==typeof t.addTransceiver){log("add new tranceiver to pc: ",a.kind);try{var c={direction:"sendonly",streams:[e]};"video"===a.kind&&(c.sendEncodings=[{maxBitrate:1572864}]),t.addTransceiver(a,c)}catch(t){error(t)}}else{log("add new track to pc: ",a.kind);t.addTrack(a,e);var l,u=r(n=t.getTransceivers());try{for(u.s();!(l=u.n()).done;){var d=l.value;try{d.direction="sendonly"}catch(t){error("error set direction on tranceiver",d,t)}}}catch(t){u.e(t)}finally{u.f()}}}))}},{key:"setCodec",value:function(t,e,n,a){var r=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype;if(a||(a="sender"),r){var i,s="sender"===a?RTCRtpSender.getCapabilities(e):RTCRtpReceiver.getCapabilities(e),o=[];if(s&&s.codecs){for(var c=(o=s.codecs).length;c--;)i=o[c],"video"===e?i.mimeType.toLowerCase()!=="video/"+n&&o.splice(c,1):i.mimeType.toLowerCase()!=="audio/"+n&&o.splice(c,1);if(!o.length)return;var l=0;return t.getTransceivers().forEach((function(t){var n=t[a].track.kind;n===e&&(log("codecs replaces: ",n,o),t.setCodecPreferences(o),l++)})),l}}else error("setCodecPreferences is not supported")}},{key:"getAllVideoEvents",value:function(){return t.videoEvents.split(" ")}}]),t}();b.videoEvents="complete resize abort canplay canplaythrough durationchange emptied encrypted ended error interruptbegin interruptend loadeddata loadedmetadata loadstart mozaudioavailable pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting",b.WebrtcStats=m;const C=b},19642:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var a=n(15991);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=u(t);if(e){var r=u(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(u,t);var e,n,r,c=o(u);function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),n=c.call(this),e instanceof HTMLVideoElement?(n.type="player",n.video=e):e instanceof MediaStream&&(n.type="streamer",n.stream=e),log("stream created",l(n)),n._destroyed=!1,n.conn=t,n.stat=new a.Z,n}return e=u,r=[{key:"isSupported",value:function(){return!1}}],(n=[{key:"play",value:function(){throw new Error("not implemented")}},{key:"publish",value:function(){throw new Error("not implemented")}},{key:"updateStream",value:function(t){throw new Error("not implemented")}},{key:"error",value:function(t){var e=Array.prototype.slice.call(arguments);e.unshift("error"),this._destroyed||this.emit.apply(this,e)}},{key:"alert",value:function(){var t=Array.prototype.slice.call(arguments);t.unshift("alert"),this.emit.apply(this,t)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("already destroyed");error("destroy",this),this.removeAllListeners(),this._destroyed=!0}}])&&i(e.prototype,n),r&&i(e,r),u}(n(17187));d.FLAG_RETRY=1,d.FLAG_FAIL=16;const f=d},15991:(t,e,n)=>{"use strict";function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n.d(e,{Z:()=>r});const r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fill(),this.defin}var e,n,r;return e=t,(n=[{key:"fill",value:function(){this.video={width:void 0,height:void 0,codec:void 0,bitrate:void 0,fps:void 0},this.audio={codec:void 0,bitrate:void 0,level:void 0},this.bitrate=void 0}}])&&a(e.prototype,n),r&&a(e,r),t}()},22336:()=>{!function(t){"use strict";var e={};t.extend(!0,t.trumbowyg,{langs:{en:{livacha:"My plugin"}},plugins:{livacha:{init:function(n){var a=n.o.uploader;n.o.plugins.livacha=t.extend(!0,{},e,n.o.plugins.livacha||{}),n.o.inlineElementsSelector=n.o.inlineElementsSelector.replace(/hr\,/,""),n.pasteHandlers.push((function(t){}));var r=function(t){var e=arguments[1]||"";n.execCmd("insertText","["+t+" "+e+"]")};n.addBtnDef("user",{fn:function(){n.openModalInsert("Вставить пользователя",{url:{label:"ссылка или логин",value:""},photo:{label:"фото профиля",type:"checkbox",value:""}},(function(t){return t.url&&(t.photo?r("profile",t.url):r("user",t.url)),!0}))},text:"Вставить пользователя",class:"livacha awesome"}),n.addBtnDef("stream",{fn:function(){n.openModalInsert("Вставить стрим",{url:{label:"ссылка или логин пользователя",value:""}},(function(t){return t.url&&r("stream",t.url),!0}))},text:"Вставить стрим",class:"livacha awesome"}),n.addBtnDef("video",{text:"Вставить видео",class:"livacha awesome",fn:function(){n.openModalInsert("Вставить видео",{url:{label:"YouTube, OK ссылка",value:""}},(function(t){return t.url&&r("video",t.url),!0}))}}),n.addBtnDef("horizontalRule2",{ico:"horizontalRule",fn:function(){n.execCmd("insertHorizontalRule"),n.execCmd("formatBlock")}}),a&&n.addBtnDef("upload",{text:"Вставить картинку",class:"livacha awesome2",fn:function(){a&&a.open()}})},tagHandler:function(t,e){return[]},destroy:function(t){}}}})}(jQuery)},5465:(t,e,n)=>{"use strict";function a(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw s}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n.d(e,{Z:()=>c});var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"makeid",value:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<t;a++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}},{key:"getRandomColor",value:function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}},{key:"round",value:function(t,e){var n=Math.round(t);if(t!=n){var a=(t=t.toFixed(2)).toString().split(".");a.length>1&&(t=a[0]+"."+a[1].substring(0,e))}else t=n.toString();return t}},{key:"fts",value:function(t){return this.round(t,2)}},{key:"bytes",value:function(t){var e=1024,n=1048576,a=1024*n;return t>=a?t=this.fts(t/a)+" GB":t>=n?t=this.fts(t/n)+" MB":t>=e?t=this.fts(t/e)+" KB":t>1||1==t?t+=" b.":t="0 b.",t}},{key:"json",value:function(t){if("object"!==i(t))try{t=void 0!==t?JSON.parse(t):{}}catch(e){t={}}return t}},{key:"firstToUpper",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},{key:"firstToLower",value:function(t){return t.charAt(0).toLowerCase()+t.slice(1)}},{key:"storage",value:function(t,e){var n;if("object"!==("undefined"==typeof localStorage?"undefined":i(localStorage)))return error("localStorage not supported");if("object"===i(e)&&(e=JSON.stringify(e)),"string"==typeof(n=void 0===e?localStorage.getItem(t):localStorage.setItem(t,e))&&"{"===n.substr(0,1))try{n=JSON.parse(n)}catch(t){error(t)}return n}},{key:"storageRemove",value:function(t){"localStorage"in window&&window.localStorage&&localStorage.removeItem(t)}},{key:"percent",value:function(t,e,n){var a=(t=parseInt(t))*(e/100);return n&&(a=Math.round(a)),a}},{key:"percentReverse",value:function(t,e,n){return 100*e/t}},{key:"findBy",value:function(t,e,n){var a;for(var r in t)if("object"===i(a=t[r])&&e in a&&a[e]===n)return a}},{key:"roundFix",value:function(t,e){return t=this.round(t,e),parseFloat(t).toFixed(e).toString()}},{key:"rand",value:function(t,e){return Math.random()*(e-t)+t}},{key:"escapeHtml",value:function(t){return t&&"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):t}},{key:"objToStr",value:function(t){return t?t instanceof Error?t.message:"string"==typeof t?t:"object"===i(t)?i(t):"":""}},{key:"ruslandToLatin",value:function(t){var e={а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"e",ж:"j",з:"z",и:"i",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"h",ц:"c",ч:"ch",ш:"sh",щ:"shch",ы:"y",э:"e",ю:"u",я:"ya"},n=[];t=t.replace(/[ъь]+/g,"").replace(/й/g,"i");for(var a=0;a<t.length;++a)n.push(e[t[a]]||null==e[t[a].toLowerCase()]&&t[a]||e[t[a].toLowerCase()].replace(/^(.)/,(function(t){return t.toUpperCase()})));return n.join("")}},{key:"slug",value:function(t){return this.ruslandToLatin(t).replace(/\s+/g,"_").replace(/[^a-z0-9_]/gi,"").replace(/_+/g,"_").replace(/_+$/,"").replace(/^_+/,"").toLowerCase()}},{key:"findIn",value:function(t,e){t=t.toLowerCase(),!e instanceof Array&&(e=[e]);var n,r=a(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i&&("number"==typeof i&&(i=i.toString()),"string"==typeof i&&-1!==(i=i.toLowerCase().trim()).indexOf(t)))return i}}catch(t){r.e(t)}finally{r.f()}return!1}},{key:"secToHHMMSS",value:function(t){var e=function(t){return(t<10?"0":"")+t};return(t<0?"-":"")+e((t=Math.abs(t))/3600|0)+":"+e(t%3600/60|0)+":"+e(t%60)}},{key:"getAgeFromDate",value:function(t){var e=Date.now()-t.getTime(),n=new Date(e);return Math.abs(n.getUTCFullYear()-1970)}},{key:"getComponents",value:function(t,e){var n={};return t.keys().forEach((function(a,r){var i=t(a).default,s=i.name||a.match(/[a-z0-9_]+/);s&&(n[s+(e?"_"+e:"")]=i)})),n}},{key:"urlAbs",value:function(t){return t&&!/^https?:\/\//.test(t)&&(t=window.location.origin+"/"+t.replace(/^\//,"")),t}},{key:"isEmpty",value:function(t){return!t||t&&0===Object.keys(t).length&&t.constructor===Object}},{key:"isNumber",value:function(t){return"number"==typeof t||"string"==typeof t&&/^[0-9]+$/.test(t)}},{key:"isTouch",value:function(){return void 0!==window.ontouchstart}},{key:"closeVirtualKeyboard",value:function(t){t.setAttribute("readonly","readonly"),t.setAttribute("disabled","readonly"),setTimeout((function(){t.removeAttribute("readonly"),t.removeAttribute("disabled")}),100)}},{key:"isImage",value:function(e){return-1!==t.images.indexOf(e.toLowerCase())}},{key:"formatMoney",value:function(t){return parseFloat(t).toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}},{key:"rectIsOverflow",value:function(t,e){e||(e=document.body);var n=t.getBoundingClientRect(),a=e.getBoundingClientRect();if(n.left<0||n.top<0||n.left+n.width>a.width||n.top+n.height>a.height)return!0}},{key:"base64Encode",value:function(t){return btoa(t)}},{key:"unicodeBase64Decode",value:function(t){return t=t.replace(/\s+/g,"").replace(/\-/g,"+").replace(/\_/g,"/"),decodeURIComponent(Array.prototype.map.call(window.atob(t),(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))}}],(n=null)&&s(e.prototype,n),r&&s(e,r),t}();o.images=["image/png","image/jpeg","image/gif","image/jpg"];const c=o},65875:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_t});var a={};n.r(a),n.d(a,{fixNegotiationNeeded:()=>O,shimAddTrackRemoveTrack:()=>A,shimAddTrackRemoveTrackWithNative:()=>T,shimGetDisplayMedia:()=>C,shimGetSendersWithDtmf:()=>x,shimGetStats:()=>S,shimGetUserMedia:()=>b,shimMediaStream:()=>w,shimOnTrack:()=>k,shimPeerConnection:()=>R,shimSenderReceiverGetStats:()=>E});var r={};n.r(r),n.d(r,{shimAddTransceiver:()=>F,shimCreateAnswer:()=>V,shimCreateOffer:()=>U,shimGetDisplayMedia:()=>P,shimGetParameters:()=>B,shimGetUserMedia:()=>$,shimOnTrack:()=>L,shimPeerConnection:()=>D,shimRTCDataChannel:()=>j,shimReceiverGetStats:()=>M,shimRemoveStream:()=>N,shimSenderGetStats:()=>I});var i={};n.r(i),n.d(i,{shimAudioContext:()=>X,shimCallbacksAPI:()=>G,shimConstraints:()=>q,shimCreateOfferLegacy:()=>Y,shimGetUserMedia:()=>z,shimLocalStreamsAPI:()=>H,shimRTCIceServerUrls:()=>K,shimRemoteStreamsAPI:()=>Z,shimTrackEventTransceiver:()=>W});var s={};n.r(s),n.d(s,{removeExtmapAllowMixed:()=>it,shimAddIceCandidateNullOrEmpty:()=>st,shimConnectionState:()=>rt,shimMaxMessageSize:()=>nt,shimParameterlessSetLocalDescription:()=>ot,shimRTCIceCandidate:()=>tt,shimRTCIceCandidateRelayProtocol:()=>et,shimSendThrowTypeError:()=>at});let o=!0,c=!0;function l(t,e,n){const a=t.match(e);return a&&a.length>=n&&parseInt(a[n],10)}function u(t,e,n){if(!t.RTCPeerConnection)return;const a=t.RTCPeerConnection.prototype,r=a.addEventListener;a.addEventListener=function(t,a){if(t!==e)return r.apply(this,arguments);const i=t=>{const e=n(t);e&&(a.handleEvent?a.handleEvent(e):a(e))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,i),r.apply(this,[t,i])};const i=a.removeEventListener;a.removeEventListener=function(t,n){if(t!==e||!this._eventMap||!this._eventMap[e])return i.apply(this,arguments);if(!this._eventMap[e].has(n))return i.apply(this,arguments);const a=this._eventMap[e].get(n);return this._eventMap[e].delete(n),0===this._eventMap[e].size&&delete this._eventMap[e],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[t,a])},Object.defineProperty(a,"on"+e,{get(){return this["_on"+e]},set(t){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),t&&this.addEventListener(e,this["_on"+e]=t)},enumerable:!0,configurable:!0})}function d(t){return"boolean"!=typeof t?new Error("Argument type: "+typeof t+". Please use a boolean."):(o=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function f(t){return"boolean"!=typeof t?new Error("Argument type: "+typeof t+". Please use a boolean."):(c=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function h(){if("object"==typeof window){if(o)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function p(t,e){c&&console.warn(t+" is deprecated, please use "+e+" instead.")}function m(t){return"[object Object]"===Object.prototype.toString.call(t)}function v(t){return m(t)?Object.keys(t).reduce((function(e,n){const a=m(t[n]),r=a?v(t[n]):t[n],i=a&&!Object.keys(r).length;return void 0===r||i?e:Object.assign(e,{[n]:r})}),{}):t}function g(t,e,n){e&&!n.has(e.id)&&(n.set(e.id,e),Object.keys(e).forEach((a=>{a.endsWith("Id")?g(t,t.get(e[a]),n):a.endsWith("Ids")&&e[a].forEach((e=>{g(t,t.get(e),n)}))})))}function _(t,e,n){const a=n?"outbound-rtp":"inbound-rtp",r=new Map;if(null===e)return r;const i=[];return t.forEach((t=>{"track"===t.type&&t.trackIdentifier===e.id&&i.push(t)})),i.forEach((e=>{t.forEach((n=>{n.type===a&&n.trackId===e.id&&g(t,n,r)}))})),r}const y=h;function b(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const a=function(t){if("object"!=typeof t||t.mandatory||t.optional)return t;const e={};return Object.keys(t).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const a="object"==typeof t[n]?t[n]:{ideal:t[n]};void 0!==a.exact&&"number"==typeof a.exact&&(a.min=a.max=a.exact);const r=function(t,e){return t?t+e.charAt(0).toUpperCase()+e.slice(1):"deviceId"===e?"sourceId":e};if(void 0!==a.ideal){e.optional=e.optional||[];let t={};"number"==typeof a.ideal?(t[r("min",n)]=a.ideal,e.optional.push(t),t={},t[r("max",n)]=a.ideal,e.optional.push(t)):(t[r("",n)]=a.ideal,e.optional.push(t))}void 0!==a.exact&&"number"!=typeof a.exact?(e.mandatory=e.mandatory||{},e.mandatory[r("",n)]=a.exact):["min","max"].forEach((t=>{void 0!==a[t]&&(e.mandatory=e.mandatory||{},e.mandatory[r(t,n)]=a[t])}))})),t.advanced&&(e.optional=(e.optional||[]).concat(t.advanced)),e},r=function(t,r){if(e.version>=61)return r(t);if((t=JSON.parse(JSON.stringify(t)))&&"object"==typeof t.audio){const e=function(t,e,n){e in t&&!(n in t)&&(t[n]=t[e],delete t[e])};e((t=JSON.parse(JSON.stringify(t))).audio,"autoGainControl","googAutoGainControl"),e(t.audio,"noiseSuppression","googNoiseSuppression"),t.audio=a(t.audio)}if(t&&"object"==typeof t.video){let i=t.video.facingMode;i=i&&("object"==typeof i?i:{ideal:i});const s=e.version<66;if(i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){let e;if(delete t.video.facingMode,"environment"===i.exact||"environment"===i.ideal?e=["back","rear"]:"user"!==i.exact&&"user"!==i.ideal||(e=["front"]),e)return n.mediaDevices.enumerateDevices().then((n=>{let s=(n=n.filter((t=>"videoinput"===t.kind))).find((t=>e.some((e=>t.label.toLowerCase().includes(e)))));return!s&&n.length&&e.includes("back")&&(s=n[n.length-1]),s&&(t.video.deviceId=i.exact?{exact:s.deviceId}:{ideal:s.deviceId}),t.video=a(t.video),y("chrome: "+JSON.stringify(t)),r(t)}))}t.video=a(t.video)}return y("chrome: "+JSON.stringify(t)),r(t)},i=function(t){return e.version>=64?t:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[t.name]||t.name,message:t.message,constraint:t.constraint||t.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(t,e,a){r(t,(t=>{n.webkitGetUserMedia(t,e,(t=>{a&&a(i(t))}))}))}.bind(n),n.mediaDevices.getUserMedia){const t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return r(e,(e=>t(e).then((t=>{if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((t=>{t.stop()})),new DOMException("","NotFoundError");return t}),(t=>Promise.reject(i(t))))))}}}function C(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&("function"==typeof e?t.navigator.mediaDevices.getDisplayMedia=function(n){return e(n).then((e=>{const a=n.video&&n.video.width,r=n.video&&n.video.height,i=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxFrameRate:i||3}},a&&(n.video.mandatory.maxWidth=a),r&&(n.video.mandatory.maxHeight=r),t.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function w(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function k(t){if("object"==typeof t&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=e=>{e.stream.addEventListener("addtrack",(n=>{let a;a=t.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((t=>t.track&&t.track.id===n.track.id)):{track:n.track};const r=new Event("track");r.track=n.track,r.receiver=a,r.transceiver={receiver:a},r.streams=[e.stream],this.dispatchEvent(r)})),e.stream.getTracks().forEach((n=>{let a;a=t.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((t=>t.track&&t.track.id===n.id)):{track:n};const r=new Event("track");r.track=n,r.receiver=a,r.transceiver={receiver:a},r.streams=[e.stream],this.dispatchEvent(r)}))},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else u(t,"track",(t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t)))}function x(t){if("object"==typeof t&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(t,e){return{track:e,get dtmf(){return void 0===this._dtmf&&("audio"===e.kind?this._dtmf=t.createDTMFSender(e):this._dtmf=null),this._dtmf},_pc:t}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(t,a){let r=n.apply(this,arguments);return r||(r=e(this,t),this._senders.push(r)),r};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(t){a.apply(this,arguments);const e=this._senders.indexOf(t);-1!==e&&this._senders.splice(e,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(t){this._senders=this._senders||[],n.apply(this,[t]),t.getTracks().forEach((t=>{this._senders.push(e(this,t))}))};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){this._senders=this._senders||[],a.apply(this,[t]),t.getTracks().forEach((t=>{const e=this._senders.find((e=>e.track===t));e&&this._senders.splice(this._senders.indexOf(e),1)}))}}else if("object"==typeof t&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const t=e.apply(this,[]);return t.forEach((t=>t._pc=this)),t},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function S(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[t,n,a]=arguments;if(arguments.length>0&&"function"==typeof t)return e.apply(this,arguments);if(0===e.length&&(0===arguments.length||"function"!=typeof t))return e.apply(this,[]);const r=function(t){const e={};return t.result().forEach((t=>{const n={id:t.id,timestamp:t.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type};t.names().forEach((e=>{n[e]=t.stat(e)})),e[n.id]=n})),e},i=function(t){return new Map(Object.keys(t).map((e=>[e,t[e]])))};if(arguments.length>=2){const a=function(t){n(i(r(t)))};return e.apply(this,[a,t])}return new Promise(((t,n)=>{e.apply(this,[function(e){t(i(r(e)))},n])})).then(n,a)}}function E(t){if(!("object"==typeof t&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const t=e.apply(this,[]);return t.forEach((t=>t._pc=this)),t});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const t=n.apply(this,arguments);return t._pc=this,t}),t.RTCRtpSender.prototype.getStats=function(){const t=this;return this._pc.getStats().then((e=>_(e,t.track,!0)))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const t=e.apply(this,[]);return t.forEach((t=>t._pc=this)),t}),u(t,"track",(t=>(t.receiver._pc=t.srcElement,t))),t.RTCRtpReceiver.prototype.getStats=function(){const t=this;return this._pc.getStats().then((e=>_(e,t.track,!1)))}}if(!("getStats"in t.RTCRtpSender.prototype)||!("getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const t=arguments[0];let e,n,a;return this.getSenders().forEach((n=>{n.track===t&&(e?a=!0:e=n)})),this.getReceivers().forEach((e=>(e.track===t&&(n?a=!0:n=e),e.track===t))),a||e&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):e?e.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function T(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((t=>this._shimmedLocalStreams[t][0]))};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(t,n){if(!n)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const a=e.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(a)&&this._shimmedLocalStreams[n.id].push(a):this._shimmedLocalStreams[n.id]=[n,a],a};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(t){this._shimmedLocalStreams=this._shimmedLocalStreams||{},t.getTracks().forEach((t=>{if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError")}));const e=this.getSenders();n.apply(this,arguments);const a=this.getSenders().filter((t=>-1===e.indexOf(t)));this._shimmedLocalStreams[t.id]=[t].concat(a)};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[t.id],a.apply(this,arguments)};const r=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(t){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},t&&Object.keys(this._shimmedLocalStreams).forEach((e=>{const n=this._shimmedLocalStreams[e].indexOf(t);-1!==n&&this._shimmedLocalStreams[e].splice(n,1),1===this._shimmedLocalStreams[e].length&&delete this._shimmedLocalStreams[e]})),r.apply(this,arguments)}}function A(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return T(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((t=>this._reverseStreams[t.id]))};const a=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(e){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},e.getTracks().forEach((t=>{if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[e.id]){const n=new t.MediaStream(e.getTracks());this._streams[e.id]=n,this._reverseStreams[n.id]=e,e=n}a.apply(this,[e])};const r=t.RTCPeerConnection.prototype.removeStream;function i(t,e){let n=e.sdp;return Object.keys(t._reverseStreams||[]).forEach((e=>{const a=t._reverseStreams[e],r=t._streams[a.id];n=n.replace(new RegExp(r.id,"g"),a.id)})),new RTCSessionDescription({type:e.type,sdp:n})}function s(t,e){let n=e.sdp;return Object.keys(t._reverseStreams||[]).forEach((e=>{const a=t._reverseStreams[e],r=t._streams[a.id];n=n.replace(new RegExp(a.id,"g"),r.id)})),new RTCSessionDescription({type:e.type,sdp:n})}t.RTCPeerConnection.prototype.removeStream=function(t){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[t.id]||t]),delete this._reverseStreams[this._streams[t.id]?this._streams[t.id].id:t.id],delete this._streams[t.id]},t.RTCPeerConnection.prototype.addTrack=function(e,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const a=[].slice.call(arguments,1);if(1!==a.length||!a[0].getTracks().find((t=>t===e)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const r=this.getSenders().find((t=>t.track===e));if(r)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[n.id];if(i)i.addTrack(e),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const a=new t.MediaStream([e]);this._streams[n.id]=a,this._reverseStreams[a.id]=n,this.addStream(a)}return this.getSenders().find((t=>t.track===e))},["createOffer","createAnswer"].forEach((function(e){const n=t.RTCPeerConnection.prototype[e],a={[e](){const t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[e=>{const n=i(this,e);t[0].apply(null,[n])},e=>{t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((t=>i(this,t)))}};t.RTCPeerConnection.prototype[e]=a[e]}));const o=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=s(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const t=c.get.apply(this);return""===t.type?t:i(this,t)}}),t.RTCPeerConnection.prototype.removeTrack=function(t){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!t._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(t._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let e;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((e=>t.track===e))&&(e=this._streams[n])})),e&&(1===e.getTracks().length?this.removeStream(this._reverseStreams[e.id]):e.removeTrack(t.track),this.dispatchEvent(new Event("negotiationneeded")))}}function R(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(e){const n=t.RTCPeerConnection.prototype[e],a={[e](){return arguments[0]=new("addIceCandidate"===e?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};t.RTCPeerConnection.prototype[e]=a[e]}))}function O(t,e){u(t,"negotiationneeded",(t=>{const n=t.target;if(!(e.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return t}))}function $(t,e){const n=t&&t.navigator,a=t&&t.MediaStreamTrack;if(n.getUserMedia=function(t,e,a){p("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(t).then(e,a)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const t=function(t,e,n){e in t&&!(n in t)&&(t[n]=t[e],delete t[e])},e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),t(n.audio,"autoGainControl","mozAutoGainControl"),t(n.audio,"noiseSuppression","mozNoiseSuppression")),e(n)},a&&a.prototype.getSettings){const e=a.prototype.getSettings;a.prototype.getSettings=function(){const n=e.apply(this,arguments);return t(n,"mozAutoGainControl","autoGainControl"),t(n,"mozNoiseSuppression","noiseSuppression"),n}}if(a&&a.prototype.applyConstraints){const e=a.prototype.applyConstraints;a.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),t(n,"autoGainControl","mozAutoGainControl"),t(n,"noiseSuppression","mozNoiseSuppression")),e.apply(this,[n])}}}}function P(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const t=new DOMException("getDisplayMedia without video constraints is undefined");return t.name="NotFoundError",t.code=8,Promise.reject(t)}return!0===n.video?n.video={mediaSource:e}:n.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(n)})}function L(t){"object"==typeof t&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function D(t,e){if("object"!=typeof t||!t.RTCPeerConnection&&!t.mozRTCPeerConnection)return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(e){const n=t.RTCPeerConnection.prototype[e],a={[e](){return arguments[0]=new("addIceCandidate"===e?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};t.RTCPeerConnection.prototype[e]=a[e]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},a=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[t,r,i]=arguments;return a.apply(this,[t||null]).then((t=>{if(e.version<53&&!r)try{t.forEach((t=>{t.type=n[t.type]||t.type}))}catch(e){if("TypeError"!==e.name)throw e;t.forEach(((e,a)=>{t.set(a,Object.assign({},e,{type:n[e.type]||e.type}))}))}return t})).then(r,i)}}function I(t){if("object"!=typeof t||!t.RTCPeerConnection||!t.RTCRtpSender)return;if(t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const t=e.apply(this,[]);return t.forEach((t=>t._pc=this)),t});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const t=n.apply(this,arguments);return t._pc=this,t}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function M(t){if("object"!=typeof t||!t.RTCPeerConnection||!t.RTCRtpSender)return;if(t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const t=e.apply(this,[]);return t.forEach((t=>t._pc=this)),t}),u(t,"track",(t=>(t.receiver._pc=t.srcElement,t))),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function N(t){t.RTCPeerConnection&&!("removeStream"in t.RTCPeerConnection.prototype)&&(t.RTCPeerConnection.prototype.removeStream=function(t){p("removeStream","removeTrack"),this.getSenders().forEach((e=>{e.track&&t.getTracks().includes(e.track)&&this.removeTrack(e)}))})}function j(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function F(t){if("object"!=typeof t||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let t=arguments[1]&&arguments[1].sendEncodings;void 0===t&&(t=[]),t=[...t];const n=t.length>0;n&&t.forEach((t=>{if("rid"in t){if(!/^[a-z0-9]{0,16}$/i.test(t.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in t&&!(parseFloat(t.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in t&&!(parseFloat(t.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const a=e.apply(this,arguments);if(n){const{sender:e}=a,n=e.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=t,e.sendEncodings=t,this.setParametersPromises.push(e.setParameters(n).then((()=>{delete e.sendEncodings})).catch((()=>{delete e.sendEncodings}))))}return a})}function B(t){if("object"!=typeof t||!t.RTCRtpSender)return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const t=e.apply(this,arguments);return"encodings"in t||(t.encodings=[].concat(this.sendEncodings||[{}])),t})}function U(t){if("object"!=typeof t||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>e.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):e.apply(this,arguments)}}function V(t){if("object"!=typeof t||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>e.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):e.apply(this,arguments)}}function H(t){if("object"==typeof t&&t.RTCPeerConnection){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach((n=>e.call(this,n,t))),t.getVideoTracks().forEach((n=>e.call(this,n,t)))},t.RTCPeerConnection.prototype.addTrack=function(t,...n){return n&&n.forEach((t=>{this._localStreams?this._localStreams.includes(t)||this._localStreams.push(t):this._localStreams=[t]})),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const e=this._localStreams.indexOf(t);if(-1===e)return;this._localStreams.splice(e,1);const n=t.getTracks();this.getSenders().forEach((t=>{n.includes(t.track)&&this.removeTrack(t)}))})}}function Z(t){if("object"==typeof t&&t.RTCPeerConnection&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=t=>{t.streams.forEach((t=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(t))return;this._remoteStreams.push(t);const e=new Event("addstream");e.stream=t,this.dispatchEvent(e)}))})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((e=>{if(t._remoteStreams||(t._remoteStreams=[]),t._remoteStreams.indexOf(e)>=0)return;t._remoteStreams.push(e);const n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}))}),e.apply(t,arguments)}}}function G(t){if("object"!=typeof t||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,a=e.createAnswer,r=e.setLocalDescription,i=e.setRemoteDescription,s=e.addIceCandidate;e.createOffer=function(t,e){const a=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[a]);return e?(r.then(t,e),Promise.resolve()):r},e.createAnswer=function(t,e){const n=arguments.length>=2?arguments[2]:arguments[0],r=a.apply(this,[n]);return e?(r.then(t,e),Promise.resolve()):r};let o=function(t,e,n){const a=r.apply(this,[t]);return n?(a.then(e,n),Promise.resolve()):a};e.setLocalDescription=o,o=function(t,e,n){const a=i.apply(this,[t]);return n?(a.then(e,n),Promise.resolve()):a},e.setRemoteDescription=o,o=function(t,e,n){const a=s.apply(this,[t]);return n?(a.then(e,n),Promise.resolve()):a},e.addIceCandidate=o}function z(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,n=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=t=>n(q(t))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(t,n,a){e.mediaDevices.getUserMedia(t).then(n,a)}.bind(e))}function q(t){return t&&void 0!==t.video?Object.assign({},t,{video:v(t.video)}):t}function K(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(t,n){if(t&&t.iceServers){const e=[];for(let n=0;n<t.iceServers.length;n++){let a=t.iceServers[n];void 0===a.urls&&a.url?(p("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,e.push(a)):e.push(t.iceServers[n])}t.iceServers=e}return new e(t,n)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:()=>e.generateCertificate})}function W(t){"object"==typeof t&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Y(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(t){if(t){void 0!==t.offerToReceiveAudio&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);const e=this.getTransceivers().find((t=>"audio"===t.receiver.track.kind));!1===t.offerToReceiveAudio&&e?"sendrecv"===e.direction?e.setDirection?e.setDirection("sendonly"):e.direction="sendonly":"recvonly"===e.direction&&(e.setDirection?e.setDirection("inactive"):e.direction="inactive"):!0!==t.offerToReceiveAudio||e||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==t.offerToReceiveVideo&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);const n=this.getTransceivers().find((t=>"video"===t.receiver.track.kind));!1===t.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==t.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function X(t){"object"!=typeof t||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var J=n(57539),Q=n.n(J);function tt(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(t){if("object"==typeof t&&t.candidate&&0===t.candidate.indexOf("a=")&&((t=JSON.parse(JSON.stringify(t))).candidate=t.candidate.substring(2)),t.candidate&&t.candidate.length){const n=new e(t),a=Q().parseCandidate(t.candidate);for(const t in a)t in n||Object.defineProperty(n,t,{value:a[t]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new e(t)},t.RTCIceCandidate.prototype=e.prototype,u(t,"icecandidate",(e=>(e.candidate&&Object.defineProperty(e,"candidate",{value:new t.RTCIceCandidate(e.candidate),writable:"false"}),e)))}function et(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||u(t,"icecandidate",(t=>{if(t.candidate){const e=Q().parseCandidate(t.candidate.candidate);"relay"===e.type&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[e.priority>>24])}return t}))}function nt(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(t){if(!t||!t.sdp)return!1;const e=Q().splitSections(t.sdp);return e.shift(),e.some((t=>{const e=Q().parseMLine(t);return e&&"application"===e.kind&&-1!==e.protocol.indexOf("SCTP")}))},a=function(t){const e=t.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===e||e.length<2)return-1;const n=parseInt(e[1],10);return n!=n?-1:n},r=function(t){let n=65536;return"firefox"===e.browser&&(n=e.version<57?-1===t?16384:2147483637:e.version<60?57===e.version?65535:65536:2147483637),n},i=function(t,n){let a=65536;"firefox"===e.browser&&57===e.version&&(a=65535);const r=Q().matchPrefix(t.sdp,"a=max-message-size:");return r.length>0?a=parseInt(r[0].substring(19),10):"firefox"===e.browser&&-1!==n&&(a=2147483637),a},s=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===e.browser&&e.version>=76){const{sdpSemantics:t}=this.getConfiguration();"plan-b"===t&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const t=a(arguments[0]),e=r(t),n=i(arguments[0],t);let s;s=0===e&&0===n?Number.POSITIVE_INFINITY:0===e||0===n?Math.max(e,n):Math.min(e,n);const o={};Object.defineProperty(o,"maxMessageSize",{get:()=>s}),this._sctp=o}return s.apply(this,arguments)}}function at(t){if(!t.RTCPeerConnection||!("createDataChannel"in t.RTCPeerConnection.prototype))return;function e(t,e){const n=t.send;t.send=function(){const a=arguments[0],r=a.length||a.size||a.byteLength;if("open"===t.readyState&&e.sctp&&r>e.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+e.sctp.maxMessageSize+" bytes)");return n.apply(t,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const t=n.apply(this,arguments);return e(t,this),t},u(t,"datachannel",(t=>(e(t.channel,t.target),t)))}function rt(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((t=>{const n=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=t=>{const e=t.target;if(e._lastConnectionState!==e.connectionState){e._lastConnectionState=e.connectionState;const n=new Event("connectionstatechange",t);e.dispatchEvent(n)}return t},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function it(t,e){if(!t.RTCPeerConnection)return;if("chrome"===e.browser&&e.version>=71)return;if("safari"===e.browser&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(e){if(e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")){const n=e.sdp.split("\n").filter((t=>"a=extmap-allow-mixed"!==t.trim())).join("\n");t.RTCSessionDescription&&e instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:e.type,sdp:n}):e.sdp=n}return n.apply(this,arguments)}}function st(t,e){if(!t.RTCPeerConnection||!t.RTCPeerConnection.prototype)return;const n=t.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===e.browser&&e.version<78||"firefox"===e.browser&&e.version<68||"safari"===e.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function ot(t,e){if(!t.RTCPeerConnection||!t.RTCPeerConnection.prototype)return;const n=t.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(t.RTCPeerConnection.prototype.setLocalDescription=function(){let t=arguments[0]||{};if("object"!=typeof t||t.type&&t.sdp)return n.apply(this,arguments);if(t={type:t.type,sdp:t.sdp},!t.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":t.type="offer";break;default:t.type="answer"}if(t.sdp||"offer"!==t.type&&"answer"!==t.type)return n.apply(this,[t]);const e="offer"===t.type?this.createOffer:this.createAnswer;return e.apply(this).then((t=>n.apply(this,[t])))})}!function({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=h,o=function(t){const e={browser:null,version:null};if(void 0===t||!t.navigator)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=l(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===t.isSecureContext&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=l(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!t.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return e.browser="Not a supported browser.",e;e.browser="safari",e.version=l(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype}return e}(t),c={browserDetails:o,commonShim:s,extractVersion:l,disableLog:d,disableWarnings:f,sdp:J};switch(o.browser){case"chrome":if(!a||!R||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),c;if(null===o.version)return n("Chrome shim can not determine version, not shimming."),c;n("adapter.js shimming chrome."),c.browserShim=a,st(t,o),ot(t),b(t,o),w(t),R(t,o),k(t),A(t,o),x(t),S(t),E(t),O(t,o),tt(t),et(t),rt(t),nt(t,o),at(t),it(t,o);break;case"firefox":if(!r||!D||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),c;n("adapter.js shimming firefox."),c.browserShim=r,st(t,o),ot(t),$(t,o),D(t,o),L(t),N(t),I(t),M(t),j(t),F(t),B(t),U(t),V(t),tt(t),rt(t),nt(t,o),at(t);break;case"safari":if(!i||!e.shimSafari)return n("Safari shim is not included in this adapter release."),c;n("adapter.js shimming safari."),c.browserShim=i,st(t,o),ot(t),K(t),Y(t),G(t),H(t),Z(t),W(t),z(t),X(t),tt(t),et(t),nt(t,o),at(t),it(t,o);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var ct=n(56410);function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function ft(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function ht(t,e,n){return(ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gt(t)););return t}(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function pt(t,e){return(pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=gt(t);if(e){var r=gt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return vt(this,n)}}function vt(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const _t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pt(t,e)}(i,t);var e,n,a,r=mt(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t,e)).pc=null,n._icesCached=[],n._wcrtStat=null,n}return e=i,(n=[{key:"_sendCandidate",value:function(){throw new Error("not implemented")}},{key:"updateStream",value:function(t){ct.Z.updateLocalStream(this.pc,t)}},{key:"_createOffer",value:function(t){var e=this;return this.pc?(log("creating offer",t),this.pc.createOffer(t).then((function(t){return e.pc.setLocalDescription(t).then((function(){return log("setLocalDescription ok",t),t}))}))):Promise.reject("Не могу создать предложение. Соединение не создано или закрыто")}},{key:"_sendIcesCache",value:function(){if(this._icesCached.length>0){log("sends cached  ices: ",this._icesCached.length);var t,e=ut(this._icesCached);try{for(e.s();!(t=e.n()).done;){var n=t.value;this._sendCandidate(n)}}catch(t){e.e(t)}finally{e.f()}this._icesCached=[]}}},{key:"destroy",value:function(){ht(gt(i.prototype),"destroy",this).call(this),log("closing webrtc..."),this.pc&&"closed"!==this.pc.connectionState&&(this.pc.close(),this.pc=null),this._wcrtStat&&(this._wcrtStat.stop(),this._wcrtStat=null),this.video&&(this.video.srcObject=null,this.video.src="")}},{key:"_createPC",value:function(){var t=this;this.isBugIceAndroid11=navigator.userAgent.match(/Android 11/);var e={iceServers:[{urls:["stun:stun.l.google.com:19302"]}]};this.isBugIceAndroid11;var n=new RTCPeerConnection(e);log("RTCPeerConnection created",n,e);var a=[];this.video&&(this.video.srcObject=new MediaStream,n.addEventListener("track",(function(e){var n=e.track;info("add remote track: ",n.kind,n),t.video.srcObject.addTrack(n),n.addEventListener("unmute",(function(e){t.emit("trackunmute",n),log("track ".concat(n.kind," is UNMUTED"),n)})),n.addEventListener("mute",(function(){t.emit("trackmute",n),info("remote track ".concat(n.kind," is MUTED"),n)}))}))),n.addEventListener("onicecandidateerror",(function(t){error("onicecandidateerror",t)})),n.addEventListener("icecandidate",(function(e){e.candidate?("stable"!==n.signalingState?t._icesCached.push(e.candidate):t._sendCandidate(e.candidate),log("candidate local: ",e.candidate.candidate,"sdpMid: "+e.candidate.sdpMid),a.push(e.candidate)):info("ice gathering complete")})),n.addEventListener("signalingstatechange",(function(){n.signalingState})),n.addEventListener("icegatheringstatechange",(function(){n.iceGatheringState})),n.addEventListener("negotiationneeded",(function(t){log("negotiationneeded")})),["iceconnectionstatechange","connectionstatechange","icegatheringstatechange","signalingstatechange"].forEach((function(e){n.addEventListener(e,(function(e){var r=-1!==["failed","disconnected","closed"].indexOf(n.iceConnectionState);if(window[r?"error":"log"](e.type+":","connectionState: ".concat(n.connectionState,", iceConnectionState: ").concat(n.iceConnectionState,", iceGatheringState: ").concat(n.iceGatheringState," signalingState: ").concat(n.signalingState,", ices local: ").concat(a.length)),"connected"===n.iceConnectionState&&"connected"===n.connectionState){var i=t._getIcePairsTracks();if(i.length>0){var s,o=ut(i);try{for(o.s();!(s=o.n()).done;){var c=s.value;info("ice connected: ",c.track&&c.track.kind.toUpperCase(),"".concat(c.local.address,":").concat(c.local.port,"@").concat(c.local.protocol," ==> ").concat(c.remote.address,":").concat(c.remote.port,"@").concat(c.remote.protocol))}}catch(t){o.e(t)}finally{o.f()}}else info("ice connected");t.stream&&t.emit("start")}if("connected"===n.iceConnectionState&&"connecting"===n.connectionState){var l,u=ut(t._getIcePairsTracks());try{for(u.s();!(l=u.n()).done;){var d=l.value;0===a.length&&(info("add ices force...bugfix",d.track&&d.track.kind),t._sendCandidate(d.local))}}catch(t){u.e(t)}finally{u.f()}}if(r){var f=" ("+e.type+"="+n.iceConnectionState+")";t.error("wcrt error: "+f)}}))}));var r=new ct.Z.WebrtcStats(n);return r.start(),r.on("stat",(function(){try{var e=t.stream?r.localStats:r.remoteStats;if(!e)return;var n=e.audio.codec?e.audio.codec.mimeType:"",a=e.video.codec?e.video.codec.mimeType:"";-1!==n.indexOf("/")&&(n=n.split("/")[1]),-1!==a.indexOf("/")&&(a=a.split("/")[1]),Object.assign(e.audio,{level:void 0!==e.audio.level?parseInt(100*e.audio.level):void 0}),Object.assign(e.video,{});for(var i=0,s=[e.video,e.audio];i<s.length;i++){var o=s[i];o.bitrate=1024*o.bitrate,o.codec&&"object"===lt(o.codec)&&(o.codec=o.codec.mimeType&&-1!==o.codec.mimeType.indexOf("/")?o.codec.mimeType.split("/")[1]:o.codec.mimeType)}var c=e.video.bitrate+e.audio.bitrate;t.stat.fill(),Object.assign(t.stat.audio,e.audio),Object.assign(t.stat.video,e.video),t.stat.bitrate=c,t.emit("stat",t.stat)}catch(e){error("error in stat: ",e),r.stop(),t._wcrtStat=null}})),this._wcrtStat=r,this.pc=n,n}},{key:"_getIcePairsTracks",value:function(){var t,e=[],n=this.pc,a=ut(this.stream?n.getSenders():n.getReceivers());try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.transport&&r.transport.iceTransport){var i=r.transport.iceTransport.getSelectedCandidatePair();i?(i.track=r.track,e.push(i)):error("no pair")}}}catch(t){a.e(t)}finally{a.f()}return e}}])&&ft(e.prototype,n),a&&ft(e,a),i}(n(19642).Z)},90640:function(t,e,n){var a,r,i;function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var c="undefined"!=typeof window&&void 0!==window.document,l=c?window:{},u=!(!c||!l.document.documentElement)&&"ontouchstart"in l.document.documentElement,d=!!c&&"PointerEvent"in l,f="cropper",h="all",p="crop",m="move",v="zoom",g="e",_="w",y="s",b="n",C="ne",w="nw",k="se",x="sw",S="".concat(f,"-crop"),E="".concat(f,"-disabled"),T="".concat(f,"-hidden"),A="".concat(f,"-hide"),R="".concat(f,"-invisible"),O="".concat(f,"-modal"),$="".concat(f,"-move"),P="".concat(f,"Action"),L="".concat(f,"Preview"),D="crop",I="move",M="none",N="crop",j="cropend",F="cropmove",B="cropstart",U="dblclick",V=d?"pointerdown":u?"touchstart":"mousedown",H=d?"pointermove":u?"touchmove":"mousemove",Z=d?"pointerup pointercancel":u?"touchend touchcancel":"mouseup",G="ready",z="resize",q="wheel",K="zoom",W="image/jpeg",Y=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,X=/^data:/,J=/^data:image\/jpeg;base64,/,Q=/^img|canvas$/i,tt={viewMode:0,dragMode:D,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},et=Number.isNaN||l.isNaN;function nt(t){return"number"==typeof t&&!et(t)}var at=function(t){return t>0&&t<1/0};function rt(t){return void 0===t}function it(e){return"object"===t(e)&&null!==e}var st=Object.prototype.hasOwnProperty;function ot(t){if(!it(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&st.call(n,"isPrototypeOf")}catch(t){return!1}}function ct(t){return"function"==typeof t}var lt=Array.prototype.slice;function ut(t){return Array.from?Array.from(t):lt.call(t)}function dt(t,e){return t&&ct(e)&&(Array.isArray(t)||nt(t.length)?ut(t).forEach((function(n,a){e.call(t,n,a,t)})):it(t)&&Object.keys(t).forEach((function(n){e.call(t,t[n],n,t)}))),t}var ft=Object.assign||function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];return it(t)&&n.length>0&&n.forEach((function(e){it(e)&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t},ht=/\.\d*(?:0|9){12}\d*$/;function pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return ht.test(t)?Math.round(t*e)/e:t}var mt=/^width|height|left|top|marginLeft|marginTop$/;function vt(t,e){var n=t.style;dt(e,(function(t,e){mt.test(e)&&nt(t)&&(t="".concat(t,"px")),n[e]=t}))}function gt(t,e){if(e)if(nt(t.length))dt(t,(function(t){gt(t,e)}));else if(t.classList)t.classList.add(e);else{var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function _t(t,e){e&&(nt(t.length)?dt(t,(function(t){_t(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function yt(t,e,n){e&&(nt(t.length)?dt(t,(function(t){yt(t,e,n)})):n?gt(t,e):_t(t,e))}var bt=/([a-z\d])([A-Z])/g;function Ct(t){return t.replace(bt,"$1-$2").toLowerCase()}function wt(t,e){return it(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Ct(e)))}function kt(t,e,n){it(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(Ct(e)),n)}var xt=/\s\s*/,St=function(){var t=!1;if(c){var e=!1,n=function(){},a=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});l.addEventListener("test",n,a),l.removeEventListener("test",n,a)}return t}();function Et(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=n;e.trim().split(xt).forEach((function(e){if(!St){var i=t.listeners;i&&i[e]&&i[e][n]&&(r=i[e][n],delete i[e][n],0===Object.keys(i[e]).length&&delete i[e],0===Object.keys(i).length&&delete t.listeners)}t.removeEventListener(e,r,a)}))}function Tt(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=n;e.trim().split(xt).forEach((function(e){if(a.once&&!St){var i=t.listeners,s=void 0===i?{}:i;r=function(){delete s[e][n],t.removeEventListener(e,r,a);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];n.apply(t,o)},s[e]||(s[e]={}),s[e][n]&&t.removeEventListener(e,s[e][n],a),s[e][n]=r,t.listeners=s}t.addEventListener(e,r,a)}))}function At(t,e,n){var a;return ct(Event)&&ct(CustomEvent)?a=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,n),t.dispatchEvent(a)}function Rt(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ot=l.location,$t=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Pt(t){var e=t.match($t);return null!==e&&(e[1]!==Ot.protocol||e[2]!==Ot.hostname||e[3]!==Ot.port)}function Lt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function Dt(t){var e=t.rotate,n=t.scaleX,a=t.scaleY,r=t.translateX,i=t.translateY,s=[];nt(r)&&0!==r&&s.push("translateX(".concat(r,"px)")),nt(i)&&0!==i&&s.push("translateY(".concat(i,"px)")),nt(e)&&0!==e&&s.push("rotate(".concat(e,"deg)")),nt(n)&&1!==n&&s.push("scaleX(".concat(n,")")),nt(a)&&1!==a&&s.push("scaleY(".concat(a,")"));var o=s.length?s.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function It(t,e){var n=t.pageX,a=t.pageY,r={endX:n,endY:a};return e?r:i({startX:n,startY:a},r)}function Mt(t){var e=t.aspectRatio,n=t.height,a=t.width,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",i=at(a),s=at(n);if(i&&s){var o=n*e;"contain"===r&&o>a||"cover"===r&&o<a?n=a/e:a=n*e}else i?n=a/e:s&&(a=n*e);return{width:a,height:n}}function Nt(t,e,n,a){var r=e.aspectRatio,i=e.naturalWidth,o=e.naturalHeight,c=e.rotate,l=void 0===c?0:c,u=e.scaleX,d=void 0===u?1:u,f=e.scaleY,h=void 0===f?1:f,p=n.aspectRatio,m=n.naturalWidth,v=n.naturalHeight,g=a.fillColor,_=void 0===g?"transparent":g,y=a.imageSmoothingEnabled,b=void 0===y||y,C=a.imageSmoothingQuality,w=void 0===C?"low":C,k=a.maxWidth,x=void 0===k?1/0:k,S=a.maxHeight,E=void 0===S?1/0:S,T=a.minWidth,A=void 0===T?0:T,R=a.minHeight,O=void 0===R?0:R,$=document.createElement("canvas"),P=$.getContext("2d"),L=Mt({aspectRatio:p,width:x,height:E}),D=Mt({aspectRatio:p,width:A,height:O},"cover"),I=Math.min(L.width,Math.max(D.width,m)),M=Math.min(L.height,Math.max(D.height,v)),N=Mt({aspectRatio:r,width:x,height:E}),j=Mt({aspectRatio:r,width:A,height:O},"cover"),F=Math.min(N.width,Math.max(j.width,i)),B=Math.min(N.height,Math.max(j.height,o)),U=[-F/2,-B/2,F,B];return $.width=pt(I),$.height=pt(M),P.fillStyle=_,P.fillRect(0,0,I,M),P.save(),P.translate(I/2,M/2),P.rotate(l*Math.PI/180),P.scale(d,h),P.imageSmoothingEnabled=b,P.imageSmoothingQuality=w,P.drawImage.apply(P,[t].concat(s(U.map((function(t){return Math.floor(pt(t))}))))),P.restore(),$}var jt=String.fromCharCode,Ft=/^data:.*,/;function Bt(t){var e,n=new DataView(t);try{var a,r,i;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var s=n.byteLength,o=2;o+1<s;){if(255===n.getUint8(o)&&225===n.getUint8(o+1)){r=o;break}o+=1}if(r){var c=r+10;if("Exif"===function(t,e,n){var a="";n+=e;for(var r=e;r<n;r+=1)a+=jt(t.getUint8(r));return a}(n,r+4,4)){var l=n.getUint16(c);if(((a=18761===l)||19789===l)&&42===n.getUint16(c+2,a)){var u=n.getUint32(c+4,a);u>=8&&(i=c+u)}}}if(i){var d,f,h=n.getUint16(i,a);for(f=0;f<h;f+=1)if(d=i+12*f+2,274===n.getUint16(d,a)){d+=8,e=n.getUint16(d,a),n.setUint16(d,1,a);break}}}catch(t){e=1}return e}var Ut={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,n=this.container,a=this.cropper,r=Number(e.minContainerWidth),i=Number(e.minContainerHeight);gt(a,T),_t(t,T);var s={width:Math.max(n.offsetWidth,r>=0?r:200),height:Math.max(n.offsetHeight,i>=0?i:100)};this.containerData=s,vt(a,{width:s.width,height:s.height}),gt(t,T),_t(a,T)},initCanvas:function(){var t=this.containerData,e=this.imageData,n=this.options.viewMode,a=Math.abs(e.rotate)%180==90,r=a?e.naturalHeight:e.naturalWidth,i=a?e.naturalWidth:e.naturalHeight,s=r/i,o=t.width,c=t.height;t.height*s>t.width?3===n?o=t.height*s:c=t.width/s:3===n?c=t.width/s:o=t.height*s;var l={aspectRatio:s,naturalWidth:r,naturalHeight:i,width:o,height:c};this.canvasData=l,this.limited=1===n||2===n,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(t.width-l.width)/2,l.top=(t.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=ft({},l)},limitCanvas:function(t,e){var n=this.options,a=this.containerData,r=this.canvasData,i=this.cropBoxData,s=n.viewMode,o=r.aspectRatio,c=this.cropped&&i;if(t){var l=Number(n.minCanvasWidth)||0,u=Number(n.minCanvasHeight)||0;s>1?(l=Math.max(l,a.width),u=Math.max(u,a.height),3===s&&(u*o>l?l=u*o:u=l/o)):s>0&&(l?l=Math.max(l,c?i.width:0):u?u=Math.max(u,c?i.height:0):c&&(l=i.width,(u=i.height)*o>l?l=u*o:u=l/o));var d=Mt({aspectRatio:o,width:l,height:u});l=d.width,u=d.height,r.minWidth=l,r.minHeight=u,r.maxWidth=1/0,r.maxHeight=1/0}if(e)if(s>(c?0:1)){var f=a.width-r.width,h=a.height-r.height;r.minLeft=Math.min(0,f),r.minTop=Math.min(0,h),r.maxLeft=Math.max(0,f),r.maxTop=Math.max(0,h),c&&this.limited&&(r.minLeft=Math.min(i.left,i.left+(i.width-r.width)),r.minTop=Math.min(i.top,i.top+(i.height-r.height)),r.maxLeft=i.left,r.maxTop=i.top,2===s&&(r.width>=a.width&&(r.minLeft=Math.min(0,f),r.maxLeft=Math.max(0,f)),r.height>=a.height&&(r.minTop=Math.min(0,h),r.maxTop=Math.max(0,h))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=a.width,r.maxTop=a.height},renderCanvas:function(t,e){var n=this.canvasData,a=this.imageData;if(e){var r=function(t){var e=t.width,n=t.height,a=t.degree;if(90==(a=Math.abs(a)%180))return{width:n,height:e};var r=a%90*Math.PI/180,i=Math.sin(r),s=Math.cos(r),o=e*s+n*i,c=e*i+n*s;return a>90?{width:c,height:o}:{width:o,height:c}}({width:a.naturalWidth*Math.abs(a.scaleX||1),height:a.naturalHeight*Math.abs(a.scaleY||1),degree:a.rotate||0}),i=r.width,s=r.height,o=n.width*(i/n.naturalWidth),c=n.height*(s/n.naturalHeight);n.left-=(o-n.width)/2,n.top-=(c-n.height)/2,n.width=o,n.height=c,n.aspectRatio=i/s,n.naturalWidth=i,n.naturalHeight=s,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,vt(this.canvas,ft({width:n.width,height:n.height},Dt({translateX:n.left,translateY:n.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,n=this.imageData,a=n.naturalWidth*(e.width/e.naturalWidth),r=n.naturalHeight*(e.height/e.naturalHeight);ft(n,{width:a,height:r,left:(e.width-a)/2,top:(e.height-r)/2}),vt(this.image,ft({width:n.width,height:n.height},Dt(ft({translateX:n.left,translateY:n.top},n)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,n=t.aspectRatio||t.initialAspectRatio,a=Number(t.autoCropArea)||.8,r={width:e.width,height:e.height};n&&(e.height*n>e.width?r.height=r.width/n:r.width=r.height*n),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*a),r.height=Math.max(r.minHeight,r.height*a),r.left=e.left+(e.width-r.width)/2,r.top=e.top+(e.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=ft({},r)},limitCropBox:function(t,e){var n=this.options,a=this.containerData,r=this.canvasData,i=this.cropBoxData,s=this.limited,o=n.aspectRatio;if(t){var c=Number(n.minCropBoxWidth)||0,l=Number(n.minCropBoxHeight)||0,u=s?Math.min(a.width,r.width,r.width+r.left,a.width-r.left):a.width,d=s?Math.min(a.height,r.height,r.height+r.top,a.height-r.top):a.height;c=Math.min(c,a.width),l=Math.min(l,a.height),o&&(c&&l?l*o>c?l=c/o:c=l*o:c?l=c/o:l&&(c=l*o),d*o>u?d=u/o:u=d*o),i.minWidth=Math.min(c,u),i.minHeight=Math.min(l,d),i.maxWidth=u,i.maxHeight=d}e&&(s?(i.minLeft=Math.max(0,r.left),i.minTop=Math.max(0,r.top),i.maxLeft=Math.min(a.width,r.left+r.width)-i.width,i.maxTop=Math.min(a.height,r.top+r.height)-i.height):(i.minLeft=0,i.minTop=0,i.maxLeft=a.width-i.width,i.maxTop=a.height-i.height))},renderCropBox:function(){var t=this.options,e=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,t.movable&&t.cropBoxMovable&&kt(this.face,P,n.width>=e.width&&n.height>=e.height?m:h),vt(this.cropBox,ft({width:n.width,height:n.height},Dt({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),At(this.element,N,this.getData())}},Vt={initPreview:function(){var t=this.element,e=this.crossOrigin,n=this.options.preview,a=e?this.crossOriginUrl:this.url,r=t.alt||"The image to preview",i=document.createElement("img");if(e&&(i.crossOrigin=e),i.src=a,i.alt=r,this.viewBox.appendChild(i),this.viewBoxImage=i,n){var s=n;"string"==typeof n?s=t.ownerDocument.querySelectorAll(n):n.querySelector&&(s=[n]),this.previews=s,dt(s,(function(t){var n=document.createElement("img");kt(t,L,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(n.crossOrigin=e),n.src=a,n.alt=r,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(n)}))}},resetPreview:function(){dt(this.previews,(function(t){var e=wt(t,L);vt(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(it(t[e]))try{delete t[e]}catch(n){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(n){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Ct(e)))}(t,L)}))},preview:function(){var t=this.imageData,e=this.canvasData,n=this.cropBoxData,a=n.width,r=n.height,i=t.width,s=t.height,o=n.left-e.left-t.left,c=n.top-e.top-t.top;this.cropped&&!this.disabled&&(vt(this.viewBoxImage,ft({width:i,height:s},Dt(ft({translateX:-o,translateY:-c},t)))),dt(this.previews,(function(e){var n=wt(e,L),l=n.width,u=n.height,d=l,f=u,h=1;a&&(f=r*(h=l/a)),r&&f>u&&(d=a*(h=u/r),f=u),vt(e,{width:d,height:f}),vt(e.getElementsByTagName("img")[0],ft({width:i*h,height:s*h},Dt(ft({translateX:-o*h,translateY:-c*h},t))))})))}},Ht={bind:function(){var t=this.element,e=this.options,n=this.cropper;ct(e.cropstart)&&Tt(t,B,e.cropstart),ct(e.cropmove)&&Tt(t,F,e.cropmove),ct(e.cropend)&&Tt(t,j,e.cropend),ct(e.crop)&&Tt(t,N,e.crop),ct(e.zoom)&&Tt(t,K,e.zoom),Tt(n,V,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&Tt(n,q,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Tt(n,U,this.onDblclick=this.dblclick.bind(this)),Tt(t.ownerDocument,H,this.onCropMove=this.cropMove.bind(this)),Tt(t.ownerDocument,Z,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&Tt(window,z,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,n=this.cropper;ct(e.cropstart)&&Et(t,B,e.cropstart),ct(e.cropmove)&&Et(t,F,e.cropmove),ct(e.cropend)&&Et(t,j,e.cropend),ct(e.crop)&&Et(t,N,e.crop),ct(e.zoom)&&Et(t,K,e.zoom),Et(n,V,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Et(n,q,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Et(n,U,this.onDblclick),Et(t.ownerDocument,H,this.onCropMove),Et(t.ownerDocument,Z,this.onCropEnd),e.responsive&&Et(window,z,this.onResize)}},Zt={resize:function(){if(!this.disabled){var t,e,n=this.options,a=this.container,r=this.containerData,i=a.offsetWidth/r.width;1===i&&a.offsetHeight===r.height||(n.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(dt(t,(function(e,n){t[n]=e*i}))),this.setCropBoxData(dt(e,(function(t,n){e[n]=t*i})))))}},dblclick:function(){this.disabled||this.options.dragMode===M||this.setDragMode(function(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}(this.dragBox,S)?I:D)},wheel:function(t){var e=this,n=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?a=t.deltaY>0?1:-1:t.wheelDelta?a=-t.wheelDelta/120:t.detail&&(a=t.detail>0?1:-1),this.zoom(-a*n,t)))},cropStart:function(t){var e=t.buttons,n=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(nt(e)&&1!==e||nt(n)&&0!==n||t.ctrlKey))){var a,r=this.options,i=this.pointers;t.changedTouches?dt(t.changedTouches,(function(t){i[t.identifier]=It(t)})):i[t.pointerId||0]=It(t),a=Object.keys(i).length>1&&r.zoomable&&r.zoomOnTouch?v:wt(t.target,P),Y.test(a)&&!1!==At(this.element,B,{originalEvent:t,action:a})&&(t.preventDefault(),this.action=a,this.cropping=!1,a===p&&(this.cropping=!0,gt(this.dragBox,O)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var n=this.pointers;t.preventDefault(),!1!==At(this.element,F,{originalEvent:t,action:e})&&(t.changedTouches?dt(t.changedTouches,(function(t){ft(n[t.identifier]||{},It(t,!0))})):ft(n[t.pointerId||0]||{},It(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,n=this.pointers;t.changedTouches?dt(t.changedTouches,(function(t){delete n[t.identifier]})):delete n[t.pointerId||0],e&&(t.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,yt(this.dragBox,O,this.cropped&&this.options.modal)),At(this.element,j,{originalEvent:t,action:e}))}}},Gt={change:function(t){var e,n=this.options,a=this.canvasData,r=this.containerData,s=this.cropBoxData,o=this.pointers,c=this.action,l=n.aspectRatio,u=s.left,d=s.top,f=s.width,S=s.height,E=u+f,A=d+S,R=0,O=0,$=r.width,P=r.height,L=!0;!l&&t.shiftKey&&(l=f&&S?f/S:1),this.limited&&(R=s.minLeft,O=s.minTop,$=R+Math.min(r.width,a.width,a.left+a.width),P=O+Math.min(r.height,a.height,a.top+a.height));var D=o[Object.keys(o)[0]],I={x:D.endX-D.startX,y:D.endY-D.startY},M=function(t){switch(t){case g:E+I.x>$&&(I.x=$-E);break;case _:u+I.x<R&&(I.x=R-u);break;case b:d+I.y<O&&(I.y=O-d);break;case y:A+I.y>P&&(I.y=P-A)}};switch(c){case h:u+=I.x,d+=I.y;break;case g:if(I.x>=0&&(E>=$||l&&(d<=O||A>=P))){L=!1;break}M(g),(f+=I.x)<0&&(c=_,u-=f=-f),l&&(S=f/l,d+=(s.height-S)/2);break;case b:if(I.y<=0&&(d<=O||l&&(u<=R||E>=$))){L=!1;break}M(b),S-=I.y,d+=I.y,S<0&&(c=y,d-=S=-S),l&&(f=S*l,u+=(s.width-f)/2);break;case _:if(I.x<=0&&(u<=R||l&&(d<=O||A>=P))){L=!1;break}M(_),f-=I.x,u+=I.x,f<0&&(c=g,u-=f=-f),l&&(S=f/l,d+=(s.height-S)/2);break;case y:if(I.y>=0&&(A>=P||l&&(u<=R||E>=$))){L=!1;break}M(y),(S+=I.y)<0&&(c=b,d-=S=-S),l&&(f=S*l,u+=(s.width-f)/2);break;case C:if(l){if(I.y<=0&&(d<=O||E>=$)){L=!1;break}M(b),S-=I.y,d+=I.y,f=S*l}else M(b),M(g),I.x>=0?E<$?f+=I.x:I.y<=0&&d<=O&&(L=!1):f+=I.x,I.y<=0?d>O&&(S-=I.y,d+=I.y):(S-=I.y,d+=I.y);f<0&&S<0?(c=x,d-=S=-S,u-=f=-f):f<0?(c=w,u-=f=-f):S<0&&(c=k,d-=S=-S);break;case w:if(l){if(I.y<=0&&(d<=O||u<=R)){L=!1;break}M(b),S-=I.y,d+=I.y,f=S*l,u+=s.width-f}else M(b),M(_),I.x<=0?u>R?(f-=I.x,u+=I.x):I.y<=0&&d<=O&&(L=!1):(f-=I.x,u+=I.x),I.y<=0?d>O&&(S-=I.y,d+=I.y):(S-=I.y,d+=I.y);f<0&&S<0?(c=k,d-=S=-S,u-=f=-f):f<0?(c=C,u-=f=-f):S<0&&(c=x,d-=S=-S);break;case x:if(l){if(I.x<=0&&(u<=R||A>=P)){L=!1;break}M(_),f-=I.x,u+=I.x,S=f/l}else M(y),M(_),I.x<=0?u>R?(f-=I.x,u+=I.x):I.y>=0&&A>=P&&(L=!1):(f-=I.x,u+=I.x),I.y>=0?A<P&&(S+=I.y):S+=I.y;f<0&&S<0?(c=C,d-=S=-S,u-=f=-f):f<0?(c=k,u-=f=-f):S<0&&(c=w,d-=S=-S);break;case k:if(l){if(I.x>=0&&(E>=$||A>=P)){L=!1;break}M(g),S=(f+=I.x)/l}else M(y),M(g),I.x>=0?E<$?f+=I.x:I.y>=0&&A>=P&&(L=!1):f+=I.x,I.y>=0?A<P&&(S+=I.y):S+=I.y;f<0&&S<0?(c=w,d-=S=-S,u-=f=-f):f<0?(c=x,u-=f=-f):S<0&&(c=C,d-=S=-S);break;case m:this.move(I.x,I.y),L=!1;break;case v:this.zoom(function(t){var e=i({},t),n=0;return dt(t,(function(t,a){delete e[a],dt(e,(function(e){var a=Math.abs(t.startX-e.startX),r=Math.abs(t.startY-e.startY),i=Math.abs(t.endX-e.endX),s=Math.abs(t.endY-e.endY),o=Math.sqrt(a*a+r*r),c=(Math.sqrt(i*i+s*s)-o)/o;Math.abs(c)>Math.abs(n)&&(n=c)}))})),n}(o),t),L=!1;break;case p:if(!I.x||!I.y){L=!1;break}e=Rt(this.cropper),u=D.startX-e.left,d=D.startY-e.top,f=s.minWidth,S=s.minHeight,I.x>0?c=I.y>0?k:C:I.x<0&&(u-=f,c=I.y>0?x:w),I.y<0&&(d-=S),this.cropped||(_t(this.cropBox,T),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}L&&(s.width=f,s.height=S,s.left=u,s.top=d,this.action=c,this.renderCropBox()),dt(o,(function(t){t.startX=t.endX,t.startY=t.endY}))}},zt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&gt(this.dragBox,O),_t(this.cropBox,T),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=ft({},this.initialImageData),this.canvasData=ft({},this.initialCanvasData),this.cropBoxData=ft({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(ft(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),_t(this.dragBox,O),gt(this.cropBox,T)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,dt(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,_t(this.cropper,E)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,gt(this.cropper,E)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,a=n.left,r=n.top;return this.moveTo(rt(t)?t:a+Number(t),rt(e)?e:r+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(nt(t)&&(n.left=t,a=!0),nt(e)&&(n.top=e,a=!0),a&&this.renderCanvas(!0)),this},zoom:function(t,e){var n=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(n.width*t/n.naturalWidth,null,e)},zoomTo:function(t,e,n){var a=this.options,r=this.canvasData,i=r.width,s=r.height,o=r.naturalWidth,c=r.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&a.zoomable){var l=o*t,u=c*t;if(!1===At(this.element,K,{ratio:t,oldRatio:i/o,originalEvent:n}))return this;if(n){var d=this.pointers,f=Rt(this.cropper),h=d&&Object.keys(d).length?function(t){var e=0,n=0,a=0;return dt(t,(function(t){var r=t.startX,i=t.startY;e+=r,n+=i,a+=1})),{pageX:e/=a,pageY:n/=a}}(d):{pageX:n.pageX,pageY:n.pageY};r.left-=(l-i)*((h.pageX-f.left-r.left)/i),r.top-=(u-s)*((h.pageY-f.top-r.top)/s)}else ot(e)&&nt(e.x)&&nt(e.y)?(r.left-=(l-i)*((e.x-r.left)/i),r.top-=(u-s)*((e.y-r.top)/s)):(r.left-=(l-i)/2,r.top-=(u-s)/2);r.width=l,r.height=u,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return nt(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,nt(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(nt(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.imageData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(nt(t)&&(n.scaleX=t,a=!0),nt(e)&&(n.scaleY=e,a=!0),a&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,a=this.imageData,r=this.canvasData,i=this.cropBoxData;if(this.ready&&this.cropped){t={x:i.left-r.left,y:i.top-r.top,width:i.width,height:i.height};var s=a.width/a.naturalWidth;if(dt(t,(function(e,n){t[n]=e/s})),e){var o=Math.round(t.y+t.height),c=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=c-t.x,t.height=o-t.y}}else t={x:0,y:0,width:0,height:0};return n.rotatable&&(t.rotate=a.rotate||0),n.scalable&&(t.scaleX=a.scaleX||1,t.scaleY=a.scaleY||1),t},setData:function(t){var e=this.options,n=this.imageData,a=this.canvasData,r={};if(this.ready&&!this.disabled&&ot(t)){var i=!1;e.rotatable&&nt(t.rotate)&&t.rotate!==n.rotate&&(n.rotate=t.rotate,i=!0),e.scalable&&(nt(t.scaleX)&&t.scaleX!==n.scaleX&&(n.scaleX=t.scaleX,i=!0),nt(t.scaleY)&&t.scaleY!==n.scaleY&&(n.scaleY=t.scaleY,i=!0)),i&&this.renderCanvas(!0,!0);var s=n.width/n.naturalWidth;nt(t.x)&&(r.left=t.x*s+a.left),nt(t.y)&&(r.top=t.y*s+a.top),nt(t.width)&&(r.width=t.width*s),nt(t.height)&&(r.height=t.height*s),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?ft({},this.containerData):{}},getImageData:function(){return this.sized?ft({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&dt(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){e[n]=t[n]})),e},setCanvasData:function(t){var e=this.canvasData,n=e.aspectRatio;return this.ready&&!this.disabled&&ot(t)&&(nt(t.left)&&(e.left=t.left),nt(t.top)&&(e.top=t.top),nt(t.width)?(e.width=t.width,e.height=t.width/n):nt(t.height)&&(e.height=t.height,e.width=t.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,n,a=this.cropBoxData,r=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&ot(t)&&(nt(t.left)&&(a.left=t.left),nt(t.top)&&(a.top=t.top),nt(t.width)&&t.width!==a.width&&(e=!0,a.width=t.width),nt(t.height)&&t.height!==a.height&&(n=!0,a.height=t.height),r&&(e?a.height=a.width/r:n&&(a.width=a.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,n=Nt(this.image,this.imageData,e,t);if(!this.cropped)return n;var a=this.getData(),r=a.x,i=a.y,o=a.width,c=a.height,l=n.width/Math.floor(e.naturalWidth);1!==l&&(r*=l,i*=l,o*=l,c*=l);var u=o/c,d=Mt({aspectRatio:u,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),f=Mt({aspectRatio:u,width:t.minWidth||0,height:t.minHeight||0},"cover"),h=Mt({aspectRatio:u,width:t.width||(1!==l?n.width:o),height:t.height||(1!==l?n.height:c)}),p=h.width,m=h.height;p=Math.min(d.width,Math.max(f.width,p)),m=Math.min(d.height,Math.max(f.height,m));var v=document.createElement("canvas"),g=v.getContext("2d");v.width=pt(p),v.height=pt(m),g.fillStyle=t.fillColor||"transparent",g.fillRect(0,0,p,m);var _=t.imageSmoothingEnabled,y=void 0===_||_,b=t.imageSmoothingQuality;g.imageSmoothingEnabled=y,b&&(g.imageSmoothingQuality=b);var C,w,k,x,S,E,T=n.width,A=n.height,R=r,O=i;R<=-o||R>T?(R=0,C=0,k=0,S=0):R<=0?(k=-R,R=0,S=C=Math.min(T,o+R)):R<=T&&(k=0,S=C=Math.min(o,T-R)),C<=0||O<=-c||O>A?(O=0,w=0,x=0,E=0):O<=0?(x=-O,O=0,E=w=Math.min(A,c+O)):O<=A&&(x=0,E=w=Math.min(c,A-O));var $=[R,O,C,w];if(S>0&&E>0){var P=p/o;$.push(k*P,x*P,S*P,E*P)}return g.drawImage.apply(g,[n].concat(s($.map((function(t){return Math.floor(pt(t))}))))),v},setAspectRatio:function(t){var e=this.options;return this.disabled||rt(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,n=this.dragBox,a=this.face;if(this.ready&&!this.disabled){var r=t===D,i=e.movable&&t===I;t=r||i?t:M,e.dragMode=t,kt(n,P,t),yt(n,S,r),yt(n,$,i),e.cropBoxMovable||(kt(a,P,t),yt(a,S,r),yt(a,$,i))}return this}},qt=l.Cropper,Kt=function(){function t(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,t),!n||!Q.test(n.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=n,this.options=ft({},tt,ot(a)&&a),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var a,r,i;return a=t,i=[{key:"noConflict",value:function(){return window.Cropper=qt,t}},{key:"setDefaults",value:function(t){ft(tt,ot(t)&&t)}}],(r=[{key:"init",value:function(){var t,e=this.element,n=e.tagName.toLowerCase();if(!e.cropper){if(e.cropper=this,"img"===n){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===n&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var n=this.element,a=this.options;if(a.rotatable||a.scalable||(a.checkOrientation=!1),a.checkOrientation&&window.ArrayBuffer)if(X.test(t))J.test(t)?this.read((r=t.replace(Ft,""),i=atob(r),s=new ArrayBuffer(i.length),dt(o=new Uint8Array(s),(function(t,e){o[e]=i.charCodeAt(e)})),s)):this.clone();else{var r,i,s,o,c=new XMLHttpRequest,l=this.clone.bind(this);this.reloading=!0,this.xhr=c,c.onabort=l,c.onerror=l,c.ontimeout=l,c.onprogress=function(){c.getResponseHeader("content-type")!==W&&c.abort()},c.onload=function(){e.read(c.response)},c.onloadend=function(){e.reloading=!1,e.xhr=null},a.checkCrossOrigin&&Pt(t)&&n.crossOrigin&&(t=Lt(t)),c.open("GET",t),c.responseType="arraybuffer",c.withCredentials="use-credentials"===n.crossOrigin,c.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,n=this.imageData,a=Bt(t),r=0,i=1,s=1;if(a>1){this.url=function(t,e){for(var n=[],a=new Uint8Array(t);a.length>0;)n.push(jt.apply(null,ut(a.subarray(0,8192)))),a=a.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}(t,W);var o=function(t){var e=0,n=1,a=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:a=-1;break;case 5:e=90,a=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}return{rotate:e,scaleX:n,scaleY:a}}(a);r=o.rotate,i=o.scaleX,s=o.scaleY}e.rotatable&&(n.rotate=r),e.scalable&&(n.scaleX=i,n.scaleY=s),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,n=t.crossOrigin,a=e;this.options.checkCrossOrigin&&Pt(e)&&(n||(n="anonymous"),a=Lt(e)),this.crossOrigin=n,this.crossOriginUrl=a;var r=document.createElement("img");n&&(r.crossOrigin=n),r.src=a||e,r.alt=t.alt||"The image to crop",this.image=r,r.onload=this.start.bind(this),r.onerror=this.stop.bind(this),gt(r,A),t.parentNode.insertBefore(r,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var n=l.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(l.navigator.userAgent),a=function(e,n){ft(t.imageData,{naturalWidth:e,naturalHeight:n,aspectRatio:e/n}),t.initialImageData=ft({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||n){var r=document.createElement("img"),i=document.body||document.documentElement;this.sizingImage=r,r.onload=function(){a(r.width,r.height),n||i.removeChild(r)},r.src=e.src,n||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",i.appendChild(r))}else a(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,n=this.image,a=t.parentNode,r=document.createElement("div");r.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var i=r.querySelector(".".concat(f,"-container")),s=i.querySelector(".".concat(f,"-canvas")),o=i.querySelector(".".concat(f,"-drag-box")),c=i.querySelector(".".concat(f,"-crop-box")),l=c.querySelector(".".concat(f,"-face"));this.container=a,this.cropper=i,this.canvas=s,this.dragBox=o,this.cropBox=c,this.viewBox=i.querySelector(".".concat(f,"-view-box")),this.face=l,s.appendChild(n),gt(t,T),a.insertBefore(i,t.nextSibling),this.isImg||_t(n,A),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,gt(c,T),e.guides||gt(c.getElementsByClassName("".concat(f,"-dashed")),T),e.center||gt(c.getElementsByClassName("".concat(f,"-center")),T),e.background&&gt(i,"".concat(f,"-bg")),e.highlight||gt(l,R),e.cropBoxMovable&&(gt(l,$),kt(l,P,h)),e.cropBoxResizable||(gt(c.getElementsByClassName("".concat(f,"-line")),T),gt(c.getElementsByClassName("".concat(f,"-point")),T)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),ct(e.ready)&&Tt(t,G,e.ready,{once:!0}),At(t,G)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),_t(this.element,T))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&n(a.prototype,r),i&&n(a,i),t}();return ft(Kt.prototype,Ut,Vt,Ht,Zt,Gt,zt),Kt},"object"===s(e)?t.exports=i():void 0===(r="function"==typeof(a=i)?a.call(e,n,e,t):a)||(t.exports=r)},6159:(t,e,n)=>{"use strict";function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n.d(e,{Z:()=>r});const r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}var e,n,r;return e=t,(n=[{key:"isComplete",value:function(){var t=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,e=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&t&&e}},{key:"isSeekable",value:function(){return!0===this.hasKeyframesIndex}},{key:"getNearestKeyframe",value:function(t){if(null==this.keyframesIndex)return null;var e=this.keyframesIndex,n=this._search(e.times,t);return{index:n,milliseconds:e.times[n],fileposition:e.filepositions[n]}}},{key:"_search",value:function(t,e){var n=0,a=t.length-1,r=0,i=0,s=a;for(e<t[0]&&(n=0,i=s+1);i<=s;){if((r=i+Math.floor((s-i)/2))===a||e>=t[r]&&e<t[r+1]){n=r;break}t[r]<e?i=r+1:s=r-1}return n}}])&&a(e.prototype,n),r&&a(e,r),t}()},38855:(t,e,n)=>{"use strict";function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function r(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{Wk:()=>s,Yy:()=>o,Vn:()=>c,J1:()=>l});var s=function t(e,n,a,r,s){i(this,t),this.dts=e,this.pts=n,this.duration=a,this.originalDts=r,this.isSyncPoint=s,this.fileposition=null},o=function(){function t(){i(this,t),this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return r(t,[{key:"appendSyncPoint",value:function(t){t.isSyncPoint=!0,this.syncPoints.push(t)}}]),t}(),c=function(){function t(){i(this,t),this._list=[]}return r(t,[{key:"clear",value:function(){this._list=[]}},{key:"appendArray",value:function(t){var e=this._list;0!==t.length&&(e.length>0&&t[0].originalDts<e[e.length-1].originalDts&&this.clear(),Array.prototype.push.apply(e,t))}},{key:"getLastSyncPointBeforeDts",value:function(t){if(0==this._list.length)return null;var e=this._list,n=0,a=e.length-1,r=0,i=0,s=a;for(t<e[0].dts&&(n=0,i=s+1);i<=s;){if((r=i+Math.floor((s-i)/2))===a||t>=e[r].dts&&t<e[r+1].dts){n=r;break}e[r].dts<t?i=r+1:s=r-1}return this._list[n]}}]),t}(),l=function(){function t(e){i(this,t),this._type=e,this._list=[],this._lastAppendLocation=-1}return r(t,[{key:"type",get:function(){return this._type}},{key:"length",get:function(){return this._list.length}},{key:"isEmpty",value:function(){return 0===this._list.length}},{key:"clear",value:function(){this._list=[],this._lastAppendLocation=-1}},{key:"_searchNearestSegmentBefore",value:function(t){var e=this._list;if(0===e.length)return-2;var n=e.length-1,a=0,r=0,i=n,s=0;if(t<e[0].originalBeginDts)return s=-1;for(;r<=i;){if((a=r+Math.floor((i-r)/2))===n||t>e[a].lastSample.originalDts&&t<e[a+1].originalBeginDts){s=a;break}e[a].originalBeginDts<t?r=a+1:i=a-1}return s}},{key:"_searchNearestSegmentAfter",value:function(t){return this._searchNearestSegmentBefore(t)+1}},{key:"append",value:function(t){var e=this._list,n=t,a=this._lastAppendLocation,r=0;-1!==a&&a<e.length&&n.originalBeginDts>=e[a].lastSample.originalDts&&(a===e.length-1||a<e.length-1&&n.originalBeginDts<e[a+1].originalBeginDts)?r=a+1:e.length>0&&(r=this._searchNearestSegmentBefore(n.originalBeginDts)+1),this._lastAppendLocation=r,this._list.splice(r,0,n)}},{key:"getLastSegmentBefore",value:function(t){var e=this._searchNearestSegmentBefore(t);return e>=0?this._list[e]:null}},{key:"getLastSampleBefore",value:function(t){var e=this.getLastSegmentBefore(t);return null!=e?e.lastSample:null}},{key:"getLastSyncPointBefore",value:function(t){for(var e=this._searchNearestSegmentBefore(t),n=this._list[e].syncPoints;0===n.length&&e>0;)e--,n=this._list[e].syncPoints;return n.length>0?n[n.length-1]:null}}]),t}()},66874:(t,e,n)=>{"use strict";n.d(e,{Z:()=>D});var a=n(17187),r=n.n(a),i=n(14569),s=n(76655),o=n(6159);function c(t,e,n){var a=t;if(e+n<a.length){for(;n--;)if(128!=(192&a[++e]))return!1;return!0}return!1}const l=function(t){for(var e=[],n=t,a=0,r=t.length;a<r;)if(n[a]<128)e.push(String.fromCharCode(n[a])),++a;else{if(n[a]<192);else if(n[a]<224){if(c(n,a,1)){var i=(31&n[a])<<6|63&n[a+1];if(i>=128){e.push(String.fromCharCode(65535&i)),a+=2;continue}}}else if(n[a]<240){if(c(n,a,2)){var s=(15&n[a])<<12|(63&n[a+1])<<6|63&n[a+2];if(s>=2048&&55296!=(63488&s)){e.push(String.fromCharCode(65535&s)),a+=3;continue}}}else if(n[a]<248&&c(n,a,3)){var o=(7&n[a])<<18|(63&n[a+1])<<12|(63&n[a+2])<<6|63&n[a+3];if(o>65536&&o<1114112){o-=65536,e.push(String.fromCharCode(o>>>10|55296)),e.push(String.fromCharCode(1023&o|56320)),a+=4;continue}}e.push(String.fromCharCode(65533)),++a}return e.join("")};var u=n(57967);function d(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var f,h=(f=new ArrayBuffer(2),new DataView(f).setInt16(0,256,!0),256===new Int16Array(f)[0]);const p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,a=[{key:"parseScriptData",value:function(e,n,a){var r={};try{var s=t.parseValue(e,n,a),o=t.parseValue(e,n+s.size,a-s.size);r[s.data]=o.data}catch(t){i.Z.e("AMF",t.toString())}return r}},{key:"parseObject",value:function(e,n,a){if(a<3)throw new u.rT("Data not enough when parse ScriptDataObject");var r=t.parseString(e,n,a),i=t.parseValue(e,n+r.size,a-r.size),s=i.objectEnd;return{data:{name:r.data,value:i.data},size:r.size+i.size,objectEnd:s}}},{key:"parseVariable",value:function(e,n,a){return t.parseObject(e,n,a)}},{key:"parseString",value:function(t,e,n){if(n<2)throw new u.rT("Data not enough when parse String");var a=new DataView(t,e,n).getUint16(0,!h);return{data:a>0?l(new Uint8Array(t,e+2,a)):"",size:2+a}}},{key:"parseLongString",value:function(t,e,n){if(n<4)throw new u.rT("Data not enough when parse LongString");var a=new DataView(t,e,n).getUint32(0,!h);return{data:a>0?l(new Uint8Array(t,e+4,a)):"",size:4+a}}},{key:"parseDate",value:function(t,e,n){if(n<10)throw new u.rT("Data size invalid when parse Date");var a=new DataView(t,e,n),r=a.getFloat64(0,!h),i=a.getInt16(8,!h);return{data:new Date(r+=60*i*1e3),size:10}}},{key:"parseValue",value:function(e,n,a){if(a<1)throw new u.rT("Data not enough when parse Value");var r,s=new DataView(e,n,a),o=1,c=s.getUint8(0),l=!1;try{switch(c){case 0:r=s.getFloat64(1,!h),o+=8;break;case 1:r=!!s.getUint8(1),o+=1;break;case 2:var d=t.parseString(e,n+1,a-1);r=d.data,o+=d.size;break;case 3:r={};var f=0;for(9==(16777215&s.getUint32(a-4,!h))&&(f=3);o<a-4;){var p=t.parseObject(e,n+o,a-o-f);if(p.objectEnd)break;r[p.data.name]=p.data.value,o+=p.size}o<=a-3&&9==(16777215&s.getUint32(o-1,!h))&&(o+=3);break;case 8:r={},o+=4;var m=0;for(9==(16777215&s.getUint32(a-4,!h))&&(m=3);o<a-8;){var v=t.parseVariable(e,n+o,a-o-m);if(v.objectEnd)break;r[v.data.name]=v.data.value,o+=v.size}o<=a-3&&9==(16777215&s.getUint32(o-1,!h))&&(o+=3);break;case 9:r=void 0,o=1,l=!0;break;case 10:r=[];var g=s.getUint32(1,!h);o+=4;for(var _=0;_<g;_++){var y=t.parseValue(e,n+o,a-o);r.push(y.data),o+=y.size}break;case 11:var b=t.parseDate(e,n+1,a-1);r=b.data,o+=b.size;break;case 12:var C=t.parseString(e,n+1,a-1);r=C.data,o+=C.size;break;default:o=a,i.Z.w("AMF","Unsupported AMF value type "+c)}}catch(t){i.Z.e("AMF",t.toString())}return{data:r,size:o,objectEnd:l}}}],(n=null)&&d(e.prototype,n),a&&d(e,a),t}();function m(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}var e,n,a;return e=t,(n=[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var t=this._total_bytes-this._buffer_index;if(t<=0)throw new u.rT("ExpGolomb: _fillCurrentWord() but no bytes available");var e=Math.min(4,t),n=new Uint8Array(4);n.set(this._buffer.subarray(this._buffer_index,this._buffer_index+e)),this._current_word=new DataView(n.buffer).getUint32(0,!1),this._buffer_index+=e,this._current_word_bits_left=8*e}},{key:"readBits",value:function(t){if(t>32)throw new u.OC("ExpGolomb: readBits() bits exceeded max 32bits!");if(t<=this._current_word_bits_left){var e=this._current_word>>>32-t;return this._current_word<<=t,this._current_word_bits_left-=t,e}var n=this._current_word_bits_left?this._current_word:0;n>>>=32-this._current_word_bits_left;var a=t-this._current_word_bits_left;this._fillCurrentWord();var r=Math.min(a,this._current_word_bits_left),i=this._current_word>>>32-r;return this._current_word<<=r,this._current_word_bits_left-=r,n=n<<r|i}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){var t;for(t=0;t<this._current_word_bits_left;t++)if(0!=(this._current_word&2147483648>>>t))return this._current_word<<=t,this._current_word_bits_left-=t,t;return this._fillCurrentWord(),t+this._skipLeadingZero()}},{key:"readUEG",value:function(){var t=this._skipLeadingZero();return this.readBits(t+1)-1}},{key:"readSEG",value:function(){var t=this.readUEG();return 1&t?t+1>>>1:-1*(t>>>1)}}])&&m(e.prototype,n),a&&m(e,a),t}();function g(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const _=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,a=[{key:"_ebsp2rbsp",value:function(t){for(var e=t,n=e.byteLength,a=new Uint8Array(n),r=0,i=0;i<n;i++)i>=2&&3===e[i]&&0===e[i-1]&&0===e[i-2]||(a[r]=e[i],r++);return new Uint8Array(a.buffer,0,r)}},{key:"parseSPS",value:function(e){var n=t._ebsp2rbsp(e),a=new v(n);a.readByte();var r=a.readByte();a.readByte();var i=a.readByte();a.readUEG();var s=t.getProfileString(r),o=t.getLevelString(i),c=1,l=420,u=8;if((100===r||110===r||122===r||244===r||44===r||83===r||86===r||118===r||128===r||138===r||144===r)&&(3===(c=a.readUEG())&&a.readBits(1),c<=3&&(l=[0,420,422,444][c]),u=a.readUEG()+8,a.readUEG(),a.readBits(1),a.readBool()))for(var d=3!==c?8:12,f=0;f<d;f++)a.readBool()&&(f<6?t._skipScalingList(a,16):t._skipScalingList(a,64));a.readUEG();var h=a.readUEG();if(0===h)a.readUEG();else if(1===h){a.readBits(1),a.readSEG(),a.readSEG();for(var p=a.readUEG(),m=0;m<p;m++)a.readSEG()}var g=a.readUEG();a.readBits(1);var _=a.readUEG(),y=a.readUEG(),b=a.readBits(1);0===b&&a.readBits(1),a.readBits(1);var C=0,w=0,k=0,x=0;a.readBool()&&(C=a.readUEG(),w=a.readUEG(),k=a.readUEG(),x=a.readUEG());var S=1,E=1,T=0,A=!0,R=0,O=0;if(a.readBool()){if(a.readBool()){var $=a.readByte();$>0&&$<16?(S=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][$-1],E=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][$-1]):255===$&&(S=a.readByte()<<8|a.readByte(),E=a.readByte()<<8|a.readByte())}if(a.readBool()&&a.readBool(),a.readBool()&&(a.readBits(4),a.readBool()&&a.readBits(24)),a.readBool()&&(a.readUEG(),a.readUEG()),a.readBool()){var P=a.readBits(32),L=a.readBits(32);A=a.readBool(),T=(R=L)/(O=2*P)}}var D=1;1===S&&1===E||(D=S/E);var I=0,M=0;0===c?(I=1,M=2-b):(I=3===c?1:2,M=(1===c?2:1)*(2-b));var N=16*(_+1),j=16*(y+1)*(2-b);N-=(C+w)*I,j-=(k+x)*M;var F=Math.ceil(N*D);return a.destroy(),a=null,{profile_string:s,level_string:o,bit_depth:u,ref_frames:g,chroma_format:l,chroma_format_string:t.getChromaFormatString(l),frame_rate:{fixed:A,fps:T,fps_den:O,fps_num:R},sar_ratio:{width:S,height:E},codec_size:{width:N,height:j},present_size:{width:F,height:j}}}},{key:"_skipScalingList",value:function(t,e){for(var n=8,a=8,r=0;r<e;r++)0!==a&&(a=(n+t.readSEG()+256)%256),n=0===a?n:a}},{key:"getProfileString",value:function(t){switch(t){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(t){return(t/10).toFixed(1)}},{key:"getChromaFormatString",value:function(t){switch(t){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}}],(n=null)&&g(e.prototype,n),a&&g(e,a),t}();var y=n(50441);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const w=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.TAG="FLVDemuxer",this._config=n,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new o.Z,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]}()}var e,n,a;return e=t,a=[{key:"probe",value:function(t){var e=new Uint8Array(t),n={match:!1};if(70!==e[0]||76!==e[1]||86!==e[2]||1!==e[3])return n;var a,r,i=(4&e[4])>>>2!=0,s=0!=(1&e[4]),o=(a=e)[r=5]<<24|a[r+1]<<16|a[r+2]<<8|a[r+3];return o<9?n:{match:!0,consumed:o,dataOffset:o,hasAudioTrack:i,hasVideoTrack:s}}}],(n=[{key:"destroy",value:function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null}},{key:"bindDataSource",value:function(t){return t.onDataArrival=this.parseChunks.bind(this),this}},{key:"onTrackMetadata",get:function(){return this._onTrackMetadata},set:function(t){this._onTrackMetadata=t}},{key:"onMediaInfo",get:function(){return this._onMediaInfo},set:function(t){this._onMediaInfo=t}},{key:"onMetaDataArrived",get:function(){return this._onMetaDataArrived},set:function(t){this._onMetaDataArrived=t}},{key:"onScriptDataArrived",get:function(){return this._onScriptDataArrived},set:function(t){this._onScriptDataArrived=t}},{key:"onError",get:function(){return this._onError},set:function(t){this._onError=t}},{key:"onDataAvailable",get:function(){return this._onDataAvailable},set:function(t){this._onDataAvailable=t}},{key:"timestampBase",get:function(){return this._timestampBase},set:function(t){this._timestampBase=t}},{key:"overridedDuration",get:function(){return this._duration},set:function(t){this._durationOverrided=!0,this._duration=t,this._mediaInfo.duration=t}},{key:"overridedHasAudio",set:function(t){this._hasAudioFlagOverrided=!0,this._hasAudio=t,this._mediaInfo.hasAudio=t}},{key:"overridedHasVideo",set:function(t){this._hasVideoFlagOverrided=!0,this._hasVideo=t,this._mediaInfo.hasVideo=t}},{key:"resetMediaInfo",value:function(){this._mediaInfo=new o.Z}},{key:"_isInitialMetadataDispatched",value:function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched}},{key:"parseChunks",value:function(e,n){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new u.rT("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var a=0,r=this._littleEndian;if(0===n){if(!(e.byteLength>13))return 0;a=t.probe(e).dataOffset}for(this._firstParse&&(this._firstParse=!1,n+a!==this._dataOffset&&i.Z.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==new DataView(e,a).getUint32(0,!r)&&i.Z.w(this.TAG,"PrevTagSize0 !== 0 !!!"),a+=4);a<e.byteLength;){this._dispatch=!0;var s=new DataView(e,a);if(a+11+4>e.byteLength)break;var o=s.getUint8(0),c=16777215&s.getUint32(0,!r);if(a+11+c+4>e.byteLength)break;if(8===o||9===o||18===o){var l=s.getUint8(4),d=s.getUint8(5),f=s.getUint8(6)|d<<8|l<<16|s.getUint8(7)<<24;0!=(16777215&s.getUint32(7,!r))&&i.Z.w(this.TAG,"Meet tag which has StreamID != 0!");var h=a+11;switch(o){case 8:this._parseAudioData(e,h,c,f);break;case 9:this._parseVideoData(e,h,c,f,n+a);break;case 18:this._parseScriptData(e,h,c)}var p=s.getUint32(11+c,!r);p!==11+c&&i.Z.w(this.TAG,"Invalid PrevTagSize ".concat(p)),a+=11+c+4}else i.Z.w(this.TAG,"Unsupported tag type ".concat(o,", skipped")),a+=11+c+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),a}},{key:"_parseScriptData",value:function(t,e,n){var a=p.parseScriptData(t,e,n);if(a.hasOwnProperty("onMetaData")){if(null==a.onMetaData||"object"!==b(a.onMetaData))return void i.Z.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&i.Z.w(this.TAG,"Found another onMetaData tag!"),this._metadata=a;var r=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},r)),"boolean"==typeof r.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=r.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof r.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=r.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof r.audiodatarate&&(this._mediaInfo.audioDataRate=r.audiodatarate),"number"==typeof r.videodatarate&&(this._mediaInfo.videoDataRate=r.videodatarate),"number"==typeof r.width&&(this._mediaInfo.width=r.width),"number"==typeof r.height&&(this._mediaInfo.height=r.height),"number"==typeof r.duration){if(!this._durationOverrided){var s=Math.floor(r.duration*this._timescale);this._duration=s,this._mediaInfo.duration=s}}else this._mediaInfo.duration=0;if("number"==typeof r.framerate){var o=Math.floor(1e3*r.framerate);if(o>0){var c=o/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=c,this._referenceFrameRate.fps_num=o,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=c}}if("object"===b(r.keyframes)){this._mediaInfo.hasKeyframesIndex=!0;var l=r.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(l),r.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=r,i.Z.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(a).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},a))}},{key:"_parseKeyframesIndex",value:function(t){for(var e=[],n=[],a=1;a<t.times.length;a++){var r=this._timestampBase+Math.floor(1e3*t.times[a]);e.push(r),n.push(t.filepositions[a])}return{times:e,filepositions:n}}},{key:"_parseAudioData",value:function(t,e,n,a){if(n<=1)i.Z.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){this._littleEndian;var r=new DataView(t,e,n).getUint8(0),s=r>>>4;if(2===s||10===s){var o=0,c=(12&r)>>>2;if(c>=0&&c<=4){o=this._flvSoundRateTable[c];var l=1&r,u=this._audioMetadata,d=this._audioTrack;if(u||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(u=this._audioMetadata={}).type="audio",u.id=d.id,u.timescale=this._timescale,u.duration=this._duration,u.audioSampleRate=o,u.channelCount=0===l?1:2),10===s){var f=this._parseAACAudioData(t,e+1,n-1);if(null==f)return;if(0===f.packetType){u.config&&i.Z.w(this.TAG,"Found another AudioSpecificConfig!");var h=f.data;u.audioSampleRate=h.samplingRate,u.channelCount=h.channelCount,u.codec=h.codec,u.originalCodec=h.originalCodec,u.config=h.config,u.refSampleDuration=1024/u.audioSampleRate*u.timescale,i.Z.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",u);var p=this._mediaInfo;p.audioCodec=u.originalCodec,p.audioSampleRate=u.audioSampleRate,p.audioChannelCount=u.channelCount,p.hasVideo?null!=p.videoCodec&&(p.mimeType='video/x-flv; codecs="'+p.videoCodec+","+p.audioCodec+'"'):p.mimeType='video/x-flv; codecs="'+p.audioCodec+'"',p.isComplete()&&this._onMediaInfo(p)}else if(1===f.packetType){var m=this._timestampBase+a,v={unit:f.data,length:f.data.byteLength,dts:m,pts:m};d.samples.push(v),d.length+=f.data.length}else i.Z.e(this.TAG,"Flv: Unsupported AAC data type ".concat(f.packetType))}else if(2===s){if(!u.codec){var g=this._parseMP3AudioData(t,e+1,n-1,!0);if(null==g)return;u.audioSampleRate=g.samplingRate,u.channelCount=g.channelCount,u.codec=g.codec,u.originalCodec=g.originalCodec,u.refSampleDuration=1152/u.audioSampleRate*u.timescale,i.Z.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",u);var _=this._mediaInfo;_.audioCodec=u.codec,_.audioSampleRate=u.audioSampleRate,_.audioChannelCount=u.channelCount,_.audioDataRate=g.bitRate,_.hasVideo?null!=_.videoCodec&&(_.mimeType='video/x-flv; codecs="'+_.videoCodec+","+_.audioCodec+'"'):_.mimeType='video/x-flv; codecs="'+_.audioCodec+'"',_.isComplete()&&this._onMediaInfo(_)}var b=this._parseMP3AudioData(t,e+1,n-1,!1);if(null==b)return;var C=this._timestampBase+a,w={unit:b,length:b.byteLength,dts:C,pts:C};d.samples.push(w),d.length+=b.length}}else this._onError(y.Z.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+c)}else this._onError(y.Z.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+s)}}},{key:"_parseAACAudioData",value:function(t,e,n){if(!(n<=1)){var a={},r=new Uint8Array(t,e,n);return a.packetType=r[0],0===r[0]?a.data=this._parseAACAudioSpecificConfig(t,e+1,n-1):a.data=r.subarray(1),a}i.Z.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")}},{key:"_parseAACAudioSpecificConfig",value:function(t,e,n){var a,r,i=new Uint8Array(t,e,n),s=null,o=0,c=null;if(o=a=i[0]>>>3,(r=(7&i[0])<<1|i[1]>>>7)<0||r>=this._mpegSamplingRates.length)this._onError(y.Z.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var l=this._mpegSamplingRates[r],u=(120&i[1])>>>3;if(!(u<0||u>=8)){5===o&&(c=(7&i[1])<<1|i[2]>>>7,i[2]);var d=self.navigator.userAgent.toLowerCase();return-1!==d.indexOf("firefox")?r>=6?(o=5,s=new Array(4),c=r-3):(o=2,s=new Array(2),c=r):-1!==d.indexOf("android")?(o=2,s=new Array(2),c=r):(o=5,c=r,s=new Array(4),r>=6?c=r-3:1===u&&(o=2,s=new Array(2),c=r)),s[0]=o<<3,s[0]|=(15&r)>>>1,s[1]=(15&r)<<7,s[1]|=(15&u)<<3,5===o&&(s[1]|=(15&c)>>>1,s[2]=(1&c)<<7,s[2]|=8,s[3]=0),{config:s,samplingRate:l,channelCount:u,codec:"mp4a.40."+o,originalCodec:"mp4a.40."+a}}this._onError(y.Z.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}}},{key:"_parseMP3AudioData",value:function(t,e,n,a){if(!(n<4)){this._littleEndian;var r=new Uint8Array(t,e,n),s=null;if(a){if(255!==r[0])return;var o=r[1]>>>3&3,c=(6&r[1])>>1,l=(240&r[2])>>>4,u=(12&r[2])>>>2,d=3!=(r[3]>>>6&3)?2:1,f=0,h=0;switch(o){case 0:f=this._mpegAudioV25SampleRateTable[u];break;case 2:f=this._mpegAudioV20SampleRateTable[u];break;case 3:f=this._mpegAudioV10SampleRateTable[u]}switch(c){case 1:l<this._mpegAudioL3BitRateTable.length&&(h=this._mpegAudioL3BitRateTable[l]);break;case 2:l<this._mpegAudioL2BitRateTable.length&&(h=this._mpegAudioL2BitRateTable[l]);break;case 3:l<this._mpegAudioL1BitRateTable.length&&(h=this._mpegAudioL1BitRateTable[l])}s={bitRate:h,samplingRate:f,channelCount:d,codec:"mp3",originalCodec:"mp3"}}else s=r;return s}i.Z.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")}},{key:"_parseVideoData",value:function(t,e,n,a,r){if(n<=1)i.Z.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");else if(!0!==this._hasVideoFlagOverrided||!1!==this._hasVideo){var s=new Uint8Array(t,e,n)[0],o=(240&s)>>>4,c=15&s;7===c?this._parseAVCVideoPacket(t,e+1,n-1,a,r,o):this._onError(y.Z.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(c))}}},{key:"_parseAVCVideoPacket",value:function(t,e,n,a,r,s){if(n<4)i.Z.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var o=this._littleEndian,c=new DataView(t,e,n),l=c.getUint8(0),u=(16777215&c.getUint32(0,!o))<<8>>8;if(0===l)this._parseAVCDecoderConfigurationRecord(t,e+4,n-4);else if(1===l)this._parseAVCVideoData(t,e+4,n-4,a,r,s,u);else if(2!==l)return void this._onError(y.Z.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(l))}}},{key:"_parseAVCDecoderConfigurationRecord",value:function(t,e,n){if(n<7)i.Z.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var a=this._videoMetadata,r=this._videoTrack,s=this._littleEndian,o=new DataView(t,e,n);if(a){if(void 0!==a.avcc)return}else!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(a=this._videoMetadata={}).type="video",a.id=r.id,a.timescale=this._timescale,a.duration=this._duration;var c=o.getUint8(0),l=o.getUint8(1);if(o.getUint8(2),o.getUint8(3),1===c&&0!==l)if(this._naluLengthSize=1+(3&o.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var u=31&o.getUint8(5);if(0!==u){u>1&&i.Z.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ".concat(u));for(var d=6,f=0;f<u;f++){var h=o.getUint16(d,!s);if(d+=2,0!==h){var p=new Uint8Array(t,e+d,h);d+=h;var m=_.parseSPS(p);if(0===f){a.codecWidth=m.codec_size.width,a.codecHeight=m.codec_size.height,a.presentWidth=m.present_size.width,a.presentHeight=m.present_size.height,a.profile=m.profile_string,a.level=m.level_string,a.bitDepth=m.bit_depth,a.chromaFormat=m.chroma_format,a.sarRatio=m.sar_ratio,a.frameRate=m.frame_rate,!1!==m.frame_rate.fixed&&0!==m.frame_rate.fps_num&&0!==m.frame_rate.fps_den||(a.frameRate=this._referenceFrameRate);var v=a.frameRate.fps_den,g=a.frameRate.fps_num;a.refSampleDuration=a.timescale*(v/g);for(var b=p.subarray(1,4),C="avc1.",w=0;w<3;w++){var k=b[w].toString(16);k.length<2&&(k="0"+k),C+=k}a.codec=C;var x=this._mediaInfo;x.width=a.codecWidth,x.height=a.codecHeight,x.fps=a.frameRate.fps,x.profile=a.profile,x.level=a.level,x.refFrames=m.ref_frames,x.chromaFormat=m.chroma_format_string,x.sarNum=a.sarRatio.width,x.sarDen=a.sarRatio.height,x.videoCodec=C,x.hasAudio?null!=x.audioCodec&&(x.mimeType='video/x-flv; codecs="'+x.videoCodec+","+x.audioCodec+'"'):x.mimeType='video/x-flv; codecs="'+x.videoCodec+'"',x.isComplete()&&this._onMediaInfo(x)}}}var S=o.getUint8(d);if(0!==S){S>1&&i.Z.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ".concat(S)),d++;for(var E=0;E<S;E++){var T=o.getUint16(d,!s);d+=2,0!==T&&(d+=T)}a.avcc=new Uint8Array(n),a.avcc.set(new Uint8Array(t,e,n),0),i.Z.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",a)}else this._onError(y.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(y.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(y.Z.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1));else this._onError(y.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}}},{key:"_parseAVCVideoData",value:function(t,e,n,a,r,s,o){for(var c=this._littleEndian,l=new DataView(t,e,n),u=[],d=0,f=0,h=this._naluLengthSize,p=this._timestampBase+a,m=1===s;f<n;){if(f+4>=n){i.Z.w(this.TAG,"Malformed Nalu near timestamp ".concat(p,", offset = ").concat(f,", dataSize = ").concat(n));break}var v=l.getUint32(f,!c);if(3===h&&(v>>>=8),v>n-h)return void i.Z.w(this.TAG,"Malformed Nalus near timestamp ".concat(p,", NaluSize > DataSize!"));var g=31&l.getUint8(f+h);5===g&&(m=!0);var _=new Uint8Array(t,e+f,h+v),y={type:g,data:_};u.push(y),d+=_.byteLength,f+=h+v}if(u.length){var b=this._videoTrack,C={units:u,length:d,isKeyframe:m,dts:p,cts:o,pts:p+o};m&&(C.fileposition=r),b.samples.push(C),b.length+=d}}}])&&C(e.prototype,n),a&&C(e,a),t}();function k(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var x=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,a=[{key:"init",value:function(){for(var e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=t.constants={};n.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),n.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),n.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),n.STSC=n.STCO=n.STTS,n.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),n.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),n.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),n.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}},{key:"box",value:function(t){for(var e=8,n=null,a=Array.prototype.slice.call(arguments,1),r=a.length,i=0;i<r;i++)e+=a[i].byteLength;(n=new Uint8Array(e))[0]=e>>>24&255,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n.set(t,4);for(var s=8,o=0;o<r;o++)n.set(a[o],s),s+=a[o].byteLength;return n}},{key:"generateInitSegment",value:function(e){var n=t.box(t.types.ftyp,t.constants.FTYP),a=t.moov(e),r=new Uint8Array(n.byteLength+a.byteLength);return r.set(n,0),r.set(a,n.byteLength),r}},{key:"moov",value:function(e){var n=t.mvhd(e.timescale,e.duration),a=t.trak(e),r=t.mvex(e);return t.box(t.types.moov,n,a,r)}},{key:"mvhd",value:function(e,n){return t.box(t.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}},{key:"trak",value:function(e){return t.box(t.types.trak,t.tkhd(e),t.mdia(e))}},{key:"tkhd",value:function(e){var n=e.id,a=e.duration,r=e.presentWidth,i=e.presentHeight;return t.box(t.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>>8&255,255&r,0,0,i>>>8&255,255&i,0,0]))}},{key:"mdia",value:function(e){return t.box(t.types.mdia,t.mdhd(e),t.hdlr(e),t.minf(e))}},{key:"mdhd",value:function(e){var n=e.timescale,a=e.duration;return t.box(t.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,a>>>24&255,a>>>16&255,a>>>8&255,255&a,85,196,0,0]))}},{key:"hdlr",value:function(e){var n=null;return n="audio"===e.type?t.constants.HDLR_AUDIO:t.constants.HDLR_VIDEO,t.box(t.types.hdlr,n)}},{key:"minf",value:function(e){var n=null;return n="audio"===e.type?t.box(t.types.smhd,t.constants.SMHD):t.box(t.types.vmhd,t.constants.VMHD),t.box(t.types.minf,n,t.dinf(),t.stbl(e))}},{key:"dinf",value:function(){return t.box(t.types.dinf,t.box(t.types.dref,t.constants.DREF))}},{key:"stbl",value:function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.constants.STTS),t.box(t.types.stsc,t.constants.STSC),t.box(t.types.stsz,t.constants.STSZ),t.box(t.types.stco,t.constants.STCO))}},{key:"stsd",value:function(e){return"audio"===e.type?"mp3"===e.codec?t.box(t.types.stsd,t.constants.STSD_PREFIX,t.mp3(e)):t.box(t.types.stsd,t.constants.STSD_PREFIX,t.mp4a(e)):t.box(t.types.stsd,t.constants.STSD_PREFIX,t.avc1(e))}},{key:"mp3",value:function(e){var n=e.channelCount,a=e.audioSampleRate,r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,a>>>8&255,255&a,0,0]);return t.box(t.types[".mp3"],r)}},{key:"mp4a",value:function(e){var n=e.channelCount,a=e.audioSampleRate,r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,a>>>8&255,255&a,0,0]);return t.box(t.types.mp4a,r,t.esds(e))}},{key:"esds",value:function(e){var n=e.config||[],a=n.length,r=new Uint8Array([0,0,0,0,3,23+a,0,1,0,4,15+a,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([a]).concat(n).concat([6,1,2]));return t.box(t.types.esds,r)}},{key:"avc1",value:function(e){var n=e.avcc,a=e.codecWidth,r=e.codecHeight,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,255&a,r>>>8&255,255&r,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return t.box(t.types.avc1,i,t.box(t.types.avcC,n))}},{key:"mvex",value:function(e){return t.box(t.types.mvex,t.trex(e))}},{key:"trex",value:function(e){var n=e.id,a=new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return t.box(t.types.trex,a)}},{key:"moof",value:function(e,n){return t.box(t.types.moof,t.mfhd(e.sequenceNumber),t.traf(e,n))}},{key:"mfhd",value:function(e){var n=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]);return t.box(t.types.mfhd,n)}},{key:"traf",value:function(e,n){var a=e.id,r=t.box(t.types.tfhd,new Uint8Array([0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a])),i=t.box(t.types.tfdt,new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n])),s=t.sdtp(e),o=t.trun(e,s.byteLength+16+16+8+16+8+8);return t.box(t.types.traf,r,i,o,s)}},{key:"sdtp",value:function(e){for(var n=e.samples||[],a=n.length,r=new Uint8Array(4+a),i=0;i<a;i++){var s=n[i].flags;r[i+4]=s.isLeading<<6|s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy}return t.box(t.types.sdtp,r)}},{key:"trun",value:function(e,n){var a=e.samples||[],r=a.length,i=12+16*r,s=new Uint8Array(i);n+=8+i,s.set([0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0);for(var o=0;o<r;o++){var c=a[o].duration,l=a[o].size,u=a[o].flags,d=a[o].cts;s.set([c>>>24&255,c>>>16&255,c>>>8&255,255&c,l>>>24&255,l>>>16&255,l>>>8&255,255&l,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.isNonSync,0,0,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*o)}return t.box(t.types.trun,s)}},{key:"mdat",value:function(e){return t.box(t.types.mdat,e)}}],(n=null)&&k(e.prototype,n),a&&k(e,a),t}();x.init();const S=x;function E(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const T=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,a=[{key:"getSilentFrame",value:function(t,e){if("mp4a.40.2"===t){if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}],(n=null)&&E(e.prototype,n),a&&E(e,a),t}();var A=n(38855);function R(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const O=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new A.J1("audio"),this._videoSegmentInfoList=new A.J1("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!s.Z.chrome||!(s.Z.version.major<50||50===s.Z.version.major&&s.Z.version.build<2661)),this._fillSilentAfterSeek=s.Z.msedge||s.Z.msie,this._mp3UseMpegAudio=!s.Z.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}var e,n,a;return e=t,(n=[{key:"destroy",value:function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null}},{key:"bindDataSource",value:function(t){return t.onDataAvailable=this.remux.bind(this),t.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this}},{key:"onInitSegment",get:function(){return this._onInitSegment},set:function(t){this._onInitSegment=t}},{key:"onMediaSegment",get:function(){return this._onMediaSegment},set:function(t){this._onMediaSegment=t}},{key:"insertDiscontinuity",value:function(){this._audioNextDts=this._videoNextDts=void 0}},{key:"seek",value:function(t){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()}},{key:"remux",value:function(t,e){if(!this._onMediaSegment)throw new u.rT("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(t,e),this._remuxVideo(e),this._remuxAudio(t)}},{key:"_onTrackMetadataReceived",value:function(t,e){var n=null,a="mp4",r=e.codec;if("audio"===t)this._audioMeta=e,"mp3"===e.codec&&this._mp3UseMpegAudio?(a="mpeg",r="",n=new Uint8Array):n=S.generateInitSegment(e);else{if("video"!==t)return;this._videoMeta=e,n=S.generateInitSegment(e)}if(!this._onInitSegment)throw new u.rT("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(t,{type:t,data:n.buffer,codec:r,container:"".concat(t,"/").concat(a),mediaDuration:e.duration})}},{key:"_calculateDtsBase",value:function(t,e){this._dtsBaseInited||(t.samples&&t.samples.length&&(this._audioDtsBase=t.samples[0].dts),e.samples&&e.samples.length&&(this._videoDtsBase=e.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)}},{key:"flushStashedSamples",value:function(){var t=this._videoStashedLastSample,e=this._audioStashedLastSample,n={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=t&&(n.samples.push(t),n.length=t.length);var a={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};null!=e&&(a.samples.push(e),a.length=e.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(n,!0),this._remuxAudio(a,!0)}},{key:"_remuxAudio",value:function(t,e){if(null!=this._audioMeta){var n,a=t,r=a.samples,o=void 0,c=-1,l=this._audioMeta.refSampleDuration,u="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,d=this._dtsBaseInited&&void 0===this._audioNextDts,f=!1;if(r&&0!==r.length&&(1!==r.length||e)){var h=0,p=null,m=0;u?(h=0,m=a.length):(h=8,m=8+a.length);var v=null;if(r.length>1&&(m-=(v=r.pop()).length),null!=this._audioStashedLastSample){var g=this._audioStashedLastSample;this._audioStashedLastSample=null,r.unshift(g),m+=g.length}null!=v&&(this._audioStashedLastSample=v);var _=r[0].dts-this._dtsBase;if(this._audioNextDts)o=_-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())o=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(f=!0);else{var y=this._audioSegmentInfoList.getLastSampleBefore(_);if(null!=y){var b=_-(y.originalDts+y.duration);b<=3&&(b=0),o=_-(y.dts+y.duration+b)}else o=0}if(f){var C=_-o,w=this._videoSegmentInfoList.getLastSegmentBefore(_);if(null!=w&&w.beginDts<C){var k=T.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(k){var x=w.beginDts,E=C-w.beginDts;i.Z.v(this.TAG,"InsertPrefixSilentAudio: dts: ".concat(x,", duration: ").concat(E)),r.unshift({unit:k,dts:x,pts:x}),m+=k.byteLength}}else f=!1}for(var R=[],O=0;O<r.length;O++){var $=r[O],P=$.unit,L=$.dts-this._dtsBase,D=L,I=!1,M=null,N=0;if(!(L<-.001)){if("mp3"!==this._audioMeta.codec){var j=L;if(this._audioNextDts&&(j=this._audioNextDts),(o=L-j)<=-3*l){i.Z.w(this.TAG,"Dropping 1 audio frame (originalDts: ".concat(L," ms ,curRefDts: ").concat(j," ms)  due to dtsCorrection: ").concat(o," ms overlap."));continue}if(o>=3*l&&this._fillAudioTimestampGap&&!s.Z.safari){I=!0;var F=Math.floor(o/l);i.Z.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\n"+"originalDts: ".concat(L," ms, curRefDts: ").concat(j," ms, ")+"dtsCorrection: ".concat(Math.round(o)," ms, generate: ").concat(F," frames")),D=Math.floor(j),N=Math.floor(j+l)-D;var B=T.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);null==B&&(i.Z.w(this.TAG,"Unable to generate silent frame for "+"".concat(this._audioMeta.originalCodec," with ").concat(this._audioMeta.channelCount," channels, repeat last frame")),B=P),M=[];for(var U=0;U<F;U++){j+=l;var V=Math.floor(j),H=Math.floor(j+l)-V,Z={dts:V,pts:V,cts:0,unit:B,size:B.byteLength,duration:H,originalDts:L,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};M.push(Z),m+=Z.size}this._audioNextDts=j+l}else D=Math.floor(j),N=Math.floor(j+l)-D,this._audioNextDts=j+l}else D=L-o,N=O!==r.length-1?r[O+1].dts-this._dtsBase-o-D:null!=v?v.dts-this._dtsBase-o-D:R.length>=1?R[R.length-1].duration:Math.floor(l),this._audioNextDts=D+N;-1===c&&(c=D),R.push({dts:D,pts:D,cts:0,unit:$.unit,size:$.unit.byteLength,duration:N,originalDts:L,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),I&&R.push.apply(R,M)}}if(0===R.length)return a.samples=[],void(a.length=0);u?p=new Uint8Array(m):((p=new Uint8Array(m))[0]=m>>>24&255,p[1]=m>>>16&255,p[2]=m>>>8&255,p[3]=255&m,p.set(S.types.mdat,4));for(var G=0;G<R.length;G++){var z=R[G].unit;p.set(z,h),h+=z.byteLength}var q=R[R.length-1];n=q.dts+q.duration;var K=new A.Yy;K.beginDts=c,K.endDts=n,K.beginPts=c,K.endPts=n,K.originalBeginDts=R[0].originalDts,K.originalEndDts=q.originalDts+q.duration,K.firstSample=new A.Wk(R[0].dts,R[0].pts,R[0].duration,R[0].originalDts,!1),K.lastSample=new A.Wk(q.dts,q.pts,q.duration,q.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(K),a.samples=R,a.sequenceNumber++;var W=null;W=u?new Uint8Array:S.moof(a,c),a.samples=[],a.length=0;var Y={type:"audio",data:this._mergeBoxes(W,p).buffer,sampleCount:R.length,info:K};u&&d&&(Y.timestampOffset=c),this._onMediaSegment("audio",Y)}}}},{key:"_remuxVideo",value:function(t,e){if(null!=this._videoMeta){var n,a,r=t,i=r.samples,s=void 0,o=-1,c=-1;if(i&&0!==i.length&&(1!==i.length||e)){var l=8,u=null,d=8+t.length,f=null;if(i.length>1&&(d-=(f=i.pop()).length),null!=this._videoStashedLastSample){var h=this._videoStashedLastSample;this._videoStashedLastSample=null,i.unshift(h),d+=h.length}null!=f&&(this._videoStashedLastSample=f);var p=i[0].dts-this._dtsBase;if(this._videoNextDts)s=p-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())s=0;else{var m=this._videoSegmentInfoList.getLastSampleBefore(p);if(null!=m){var v=p-(m.originalDts+m.duration);v<=3&&(v=0),s=p-(m.dts+m.duration+v)}else s=0}for(var g=new A.Yy,_=[],y=0;y<i.length;y++){var b=i[y],C=b.dts-this._dtsBase,w=b.isKeyframe,k=C-s,x=b.cts,E=k+x;-1===o&&(o=k,c=E);var T=0;if(T=y!==i.length-1?i[y+1].dts-this._dtsBase-s-k:null!=f?f.dts-this._dtsBase-s-k:_.length>=1?_[_.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),w){var R=new A.Wk(k,E,T,b.dts,!0);R.fileposition=b.fileposition,g.appendSyncPoint(R)}_.push({dts:k,pts:E,cts:x,units:b.units,size:b.length,isKeyframe:w,duration:T,originalDts:C,flags:{isLeading:0,dependsOn:w?2:1,isDependedOn:w?1:0,hasRedundancy:0,isNonSync:w?0:1}})}(u=new Uint8Array(d))[0]=d>>>24&255,u[1]=d>>>16&255,u[2]=d>>>8&255,u[3]=255&d,u.set(S.types.mdat,4);for(var O=0;O<_.length;O++)for(var $=_[O].units;$.length;){var P=$.shift().data;u.set(P,l),l+=P.byteLength}var L=_[_.length-1];if(n=L.dts+L.duration,a=L.pts+L.duration,this._videoNextDts=n,g.beginDts=o,g.endDts=n,g.beginPts=c,g.endPts=a,g.originalBeginDts=_[0].originalDts,g.originalEndDts=L.originalDts+L.duration,g.firstSample=new A.Wk(_[0].dts,_[0].pts,_[0].duration,_[0].originalDts,_[0].isKeyframe),g.lastSample=new A.Wk(L.dts,L.pts,L.duration,L.originalDts,L.isKeyframe),this._isLive||this._videoSegmentInfoList.append(g),r.samples=_,r.sequenceNumber++,this._forceFirstIDR){var D=_[0].flags;D.dependsOn=2,D.isNonSync=0}var I=S.moof(r,o);r.samples=[],r.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(I,u).buffer,sampleCount:_.length,info:g})}}}},{key:"_mergeBoxes",value:function(t,e){var n=new Uint8Array(t.byteLength+e.byteLength);return n.set(t,0),n.set(e,t.byteLength),n}}])&&R(e.prototype,n),a&&R(e,a),t}();var $=n(74387),P=n(25877);n(69851);function L(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const D=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.TAG="TransmuxingController",this._emitter=new(r()),this._config=n,e.segments||(e.segments=[{duration:e.duration,filesize:e.filesize,url:e.url}]),"boolean"!=typeof e.cors&&(e.cors=!0),"boolean"!=typeof e.withCredentials&&(e.withCredentials=!1),this._mediaDataSource=e,this._currentSegmentIndex=0;var a=0;this._mediaDataSource.segments.forEach((function(t){t.timestampBase=a,a+=t.duration,t.cors=e.cors,t.withCredentials=e.withCredentials,n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy)})),isNaN(a)||this._mediaDataSource.duration===a||(this._mediaDataSource.duration=a),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}var e,n,a;return e=t,(n=[{key:"destroy",value:function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(t,e){this._emitter.addListener(t,e)}},{key:"off",value:function(t,e){this._emitter.removeListener(t,e)}},{key:"start",value:function(){this._loadSegment(0),this._enableStatisticsReporter()}},{key:"_loadSegment",value:function(t,e){this._currentSegmentIndex=t;var n=this._mediaDataSource.segments[t],a=this._ioctl=new $.Z(n,this._config,t);a.onError=this._onIOException.bind(this),a.onSeeked=this._onIOSeeked.bind(this),a.onComplete=this._onIOComplete.bind(this),a.onRedirect=this._onIORedirect.bind(this),a.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),e?this._demuxer.bindDataSource(this._ioctl):a.onDataArrival=this._onInitChunkArrival.bind(this),a.open(e)}},{key:"stop",value:function(){this._internalAbort(),this._disableStatisticsReporter()}},{key:"_internalAbort",value:function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)}},{key:"pause",value:function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())}},{key:"resume",value:function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())}},{key:"seek",value:function(t){if(null!=this._mediaInfo&&this._mediaInfo.isSeekable()){var e=this._searchSegmentIndexContains(t);if(e===this._currentSegmentIndex){var n=this._mediaInfo.segments[e];if(null==n)this._pendingSeekTime=t;else{var a=n.getNearestKeyframe(t);this._remuxer.seek(a.milliseconds),this._ioctl.seek(a.fileposition),this._pendingResolveSeekPoint=a.milliseconds}}else{var r=this._mediaInfo.segments[e];if(null==r)this._pendingSeekTime=t,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(e);else{var i=r.getNearestKeyframe(t);this._internalAbort(),this._remuxer.seek(t),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[e].timestampBase,this._loadSegment(e,i.fileposition),this._pendingResolveSeekPoint=i.milliseconds,this._reportSegmentMediaInfo(e)}}this._enableStatisticsReporter()}}},{key:"_searchSegmentIndexContains",value:function(t){for(var e=this._mediaDataSource.segments,n=e.length-1,a=0;a<e.length;a++)if(t<e[a].timestampBase){n=a-1;break}return n}},{key:"_onInitChunkArrival",value:function(t,e){var n=this,a=null,r=0;if(e>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,r=this._demuxer.parseChunks(t,e);else if((a=w.probe(t)).match){this._demuxer=new w(a,this._config),this._remuxer||(this._remuxer=new O(this._config));var s=this._mediaDataSource;null==s.duration||isNaN(s.duration)||(this._demuxer.overridedDuration=s.duration),"boolean"==typeof s.hasAudio&&(this._demuxer.overridedHasAudio=s.hasAudio),"boolean"==typeof s.hasVideo&&(this._demuxer.overridedHasVideo=s.hasVideo),this._demuxer.timestampBase=s.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),r=this._demuxer.parseChunks(t,e)}else a=null,i.Z.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then((function(){n._internalAbort()})),this._emitter.emit(P.Z.DEMUX_ERROR,y.Z.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),r=0;return r}},{key:"_onMediaInfo",value:function(t){var e=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},t),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,o.Z.prototype));var n=Object.assign({},t);Object.setPrototypeOf(n,o.Z.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=n,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then((function(){var t=e._pendingSeekTime;e._pendingSeekTime=null,e.seek(t)}))}},{key:"_onMetaDataArrived",value:function(t){this._emitter.emit(P.Z.METADATA_ARRIVED,t)}},{key:"_onScriptDataArrived",value:function(t){this._emitter.emit(P.Z.SCRIPTDATA_ARRIVED,t)}},{key:"_onIOSeeked",value:function(){this._remuxer.insertDiscontinuity()}},{key:"_onIOComplete",value:function(t){var e=t+1;e<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(e)):(this._remuxer.flushStashedSamples(),this._emitter.emit(P.Z.LOADING_COMPLETE),this._disableStatisticsReporter())}},{key:"_onIORedirect",value:function(t){var e=this._ioctl.extraData;this._mediaDataSource.segments[e].redirectedURL=t}},{key:"_onIORecoveredEarlyEof",value:function(){this._emitter.emit(P.Z.RECOVERED_EARLY_EOF)}},{key:"_onIOException",value:function(t,e){i.Z.e(this.TAG,"IOException: type = ".concat(t,", code = ").concat(e.code,", msg = ").concat(e.msg)),this._emitter.emit(P.Z.IO_ERROR,t,e),this._disableStatisticsReporter()}},{key:"_onDemuxException",value:function(t,e){i.Z.e(this.TAG,"DemuxException: type = ".concat(t,", info = ").concat(e)),this._emitter.emit(P.Z.DEMUX_ERROR,t,e)}},{key:"_onRemuxerInitSegmentArrival",value:function(t,e){this._emitter.emit(P.Z.INIT_SEGMENT,t,e)}},{key:"_onRemuxerMediaSegmentArrival",value:function(t,e){if(null==this._pendingSeekTime&&(this._emitter.emit(P.Z.MEDIA_SEGMENT,t,e),null!=this._pendingResolveSeekPoint&&"video"===t)){var n=e.info.syncPoints,a=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,s.Z.safari&&n.length>0&&n[0].originalDts===a&&(a=n[0].pts),this._emitter.emit(P.Z.RECOMMEND_SEEKPOINT,a)}}},{key:"_enableStatisticsReporter",value:function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))}},{key:"_disableStatisticsReporter",value:function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"_reportSegmentMediaInfo",value:function(t){var e=this._mediaInfo.segments[t],n=Object.assign({},e);n.duration=this._mediaInfo.duration,n.segmentCount=this._mediaInfo.segmentCount,delete n.segments,delete n.keyframesIndex,this._emitter.emit(P.Z.MEDIA_INFO,n)}},{key:"_reportStatisticsInfo",value:function(){var t={};t.url=this._ioctl.currentURL,t.hasRedirect=this._ioctl.hasRedirect,t.hasRedirect&&(t.redirectedURL=this._ioctl.currentRedirectedURL),t.speed=this._ioctl.currentSpeed,t.loaderType=this._ioctl.loaderType,t.currentSegmentIndex=this._currentSegmentIndex,t.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(P.Z.STATISTICS_INFO,t)}}])&&L(e.prototype,n),a&&L(e,a),t}()},25877:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},8492:(t,e,n)=>{"use strict";n(14569),n(7778),n(3222),n(66874),n(25877)},50441:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},18082:(t,e,n)=>{"use strict";n.d(e,{default:()=>F});var a=n(3222),r=n(74387),i={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function s(){return Object.assign({},i)}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,a=[{key:"supportMSEH264Playback",value:function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"supportNetworkStreamIO",value:function(){var t=new r.Z({},s()),e=t.loaderType;return t.destroy(),"fetch-stream-loader"==e||"xhr-moz-chunked-loader"==e}},{key:"getNetworkLoaderTypeName",value:function(){var t=new r.Z({},s()),e=t.loaderType;return t.destroy(),e}},{key:"supportNativeMediaPlayback",value:function(e){null==t.videoElement&&(t.videoElement=window.document.createElement("video"));var n=t.videoElement.canPlayType(e);return"probably"===n||"maybe"==n}},{key:"getFeatureList",value:function(){var e={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return e.mseFlvPlayback=t.supportMSEH264Playback(),e.networkStreamIO=t.supportNetworkStreamIO(),e.networkLoaderName=t.getNetworkLoaderTypeName(),e.mseLiveFlvPlayback=e.mseFlvPlayback&&e.networkStreamIO,e.nativeMP4H264Playback=t.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),e.nativeWebmVP8Playback=t.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),e.nativeWebmVP9Playback=t.supportNativeMediaPlayback('video/webm; codecs="vp9"'),e}}],(n=null)&&o(e.prototype,n),a&&o(e,a),t}();var l=n(69851),u=n(17187),d=n.n(u),f=n(14569),h=n(76655);const p={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"};var m=n(5122),v=n.n(m),g=n(7778),_=n(66874),y=n(25877),b=(n(8492),n(6159));function C(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const w=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.TAG="Transmuxer",this._emitter=new(d()),n.enableWorker&&"undefined"!=typeof Worker)try{this._worker=v()(8492),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[e,n]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},g.Z.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:g.Z.getConfig()})}catch(t){f.Z.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new _.Z(e,n)}else this._controller=new _.Z(e,n);if(this._controller){var a=this._controller;a.on(y.Z.IO_ERROR,this._onIOError.bind(this)),a.on(y.Z.DEMUX_ERROR,this._onDemuxError.bind(this)),a.on(y.Z.INIT_SEGMENT,this._onInitSegment.bind(this)),a.on(y.Z.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),a.on(y.Z.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),a.on(y.Z.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),a.on(y.Z.MEDIA_INFO,this._onMediaInfo.bind(this)),a.on(y.Z.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),a.on(y.Z.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),a.on(y.Z.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),a.on(y.Z.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}var e,n,a;return e=t,(n=[{key:"destroy",value:function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),g.Z.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(t,e){this._emitter.addListener(t,e)}},{key:"off",value:function(t,e){this._emitter.removeListener(t,e)}},{key:"hasWorker",value:function(){return null!=this._worker}},{key:"open",value:function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()}},{key:"close",value:function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()}},{key:"seek",value:function(t){this._worker?this._worker.postMessage({cmd:"seek",param:t}):this._controller.seek(t)}},{key:"pause",value:function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()}},{key:"resume",value:function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()}},{key:"_onInitSegment",value:function(t,e){var n=this;Promise.resolve().then((function(){n._emitter.emit(y.Z.INIT_SEGMENT,t,e)}))}},{key:"_onMediaSegment",value:function(t,e){var n=this;Promise.resolve().then((function(){n._emitter.emit(y.Z.MEDIA_SEGMENT,t,e)}))}},{key:"_onLoadingComplete",value:function(){var t=this;Promise.resolve().then((function(){t._emitter.emit(y.Z.LOADING_COMPLETE)}))}},{key:"_onRecoveredEarlyEof",value:function(){var t=this;Promise.resolve().then((function(){t._emitter.emit(y.Z.RECOVERED_EARLY_EOF)}))}},{key:"_onMediaInfo",value:function(t){var e=this;Promise.resolve().then((function(){e._emitter.emit(y.Z.MEDIA_INFO,t)}))}},{key:"_onMetaDataArrived",value:function(t){var e=this;Promise.resolve().then((function(){e._emitter.emit(y.Z.METADATA_ARRIVED,t)}))}},{key:"_onScriptDataArrived",value:function(t){var e=this;Promise.resolve().then((function(){e._emitter.emit(y.Z.SCRIPTDATA_ARRIVED,t)}))}},{key:"_onStatisticsInfo",value:function(t){var e=this;Promise.resolve().then((function(){e._emitter.emit(y.Z.STATISTICS_INFO,t)}))}},{key:"_onIOError",value:function(t,e){var n=this;Promise.resolve().then((function(){n._emitter.emit(y.Z.IO_ERROR,t,e)}))}},{key:"_onDemuxError",value:function(t,e){var n=this;Promise.resolve().then((function(){n._emitter.emit(y.Z.DEMUX_ERROR,t,e)}))}},{key:"_onRecommendSeekpoint",value:function(t){var e=this;Promise.resolve().then((function(){e._emitter.emit(y.Z.RECOMMEND_SEEKPOINT,t)}))}},{key:"_onLoggingConfigChanged",value:function(t){this._worker&&this._worker.postMessage({cmd:"logging_config",param:t})}},{key:"_onWorkerMessage",value:function(t){var e=t.data,n=e.data;if("destroyed"===e.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(e.msg){case y.Z.INIT_SEGMENT:case y.Z.MEDIA_SEGMENT:this._emitter.emit(e.msg,n.type,n.data);break;case y.Z.LOADING_COMPLETE:case y.Z.RECOVERED_EARLY_EOF:this._emitter.emit(e.msg);break;case y.Z.MEDIA_INFO:Object.setPrototypeOf(n,b.Z.prototype),this._emitter.emit(e.msg,n);break;case y.Z.METADATA_ARRIVED:case y.Z.SCRIPTDATA_ARRIVED:case y.Z.STATISTICS_INFO:this._emitter.emit(e.msg,n);break;case y.Z.IO_ERROR:case y.Z.DEMUX_ERROR:this._emitter.emit(e.msg,n.type,n.info);break;case y.Z.RECOMMEND_SEEKPOINT:this._emitter.emit(e.msg,n);break;case"logcat_callback":f.Z.emitter.emit("log",n.type,n.logcat)}}}])&&C(e.prototype,n),a&&C(e,a),t}();const k={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"};var x=n(38855),S=n(57967);function E(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const T=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.TAG="MSEController",this._config=e,this._emitter=new(d()),this._config.isLive&&null==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new x.Vn}var e,n,a;return e=t,(n=[{key:"destroy",value:function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(t,e){this._emitter.addListener(t,e)}},{key:"off",value:function(t,e){this._emitter.removeListener(t,e)}},{key:"attachMediaElement",value:function(t){if(this._mediaSource)throw new S.rT("MediaSource has been attached to an HTMLMediaElement!");var e=this._mediaSource=new window.MediaSource;e.addEventListener("sourceopen",this.e.onSourceOpen),e.addEventListener("sourceended",this.e.onSourceEnded),e.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=t,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),t.src=this._mediaSourceObjectURL}},{key:"detachMediaElement",value:function(){if(this._mediaSource){var t=this._mediaSource;for(var e in this._sourceBuffers){var n=this._pendingSegments[e];n.splice(0,n.length),this._pendingSegments[e]=null,this._pendingRemoveRanges[e]=null,this._lastInitSegments[e]=null;var a=this._sourceBuffers[e];if(a){if("closed"!==t.readyState){try{t.removeSourceBuffer(a)}catch(t){f.Z.e(this.TAG,t.message)}a.removeEventListener("error",this.e.onSourceBufferError),a.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[e]=null,this._sourceBuffers[e]=null}}if("open"===t.readyState)try{t.endOfStream()}catch(t){f.Z.e(this.TAG,t.message)}t.removeEventListener("sourceopen",this.e.onSourceOpen),t.removeEventListener("sourceended",this.e.onSourceEnded),t.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)}},{key:"appendInitSegment",value:function(t,e){if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(t),void this._pendingSegments[t.type].push(t);var n=t,a="".concat(n.container);n.codec&&n.codec.length>0&&(a+=";codecs=".concat(n.codec));var r=!1;if(f.Z.v(this.TAG,"Received Initialization Segment, mimeType: "+a),this._lastInitSegments[n.type]=n,a!==this._mimeTypes[n.type]){if(this._mimeTypes[n.type])f.Z.v(this.TAG,"Notice: ".concat(n.type," mimeType changed, origin: ").concat(this._mimeTypes[n.type],", target: ").concat(a));else{r=!0;try{var i=this._sourceBuffers[n.type]=this._mediaSource.addSourceBuffer(a);i.addEventListener("error",this.e.onSourceBufferError),i.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(t){return f.Z.e(this.TAG,t.message),void this._emitter.emit(k.ERROR,{code:t.code,msg:t.message})}}this._mimeTypes[n.type]=a}e||this._pendingSegments[n.type].push(n),r||this._sourceBuffers[n.type]&&!this._sourceBuffers[n.type].updating&&this._doAppendSegments(),h.Z.safari&&"audio/mpeg"===n.container&&n.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=n.mediaDuration/1e3,this._updateMediaSourceDuration())}},{key:"appendMediaSegment",value:function(t){if(!this._mediaElement.error){var e=t;this._pendingSegments[e.type].push(e),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var n=this._sourceBuffers[e.type];!n||n.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()}}},{key:"seek",value:function(t){for(var e in this._sourceBuffers)if(this._sourceBuffers[e]){var n=this._sourceBuffers[e];if("open"===this._mediaSource.readyState)try{n.abort()}catch(t){f.Z.e(this.TAG,t.message)}this._idrList.clear();var a=this._pendingSegments[e];if(a.splice(0,a.length),"closed"!==this._mediaSource.readyState){for(var r=0;r<n.buffered.length;r++){var i=n.buffered.start(r),s=n.buffered.end(r);this._pendingRemoveRanges[e].push({start:i,end:s})}if(n.updating||this._doRemoveRanges(),h.Z.safari){var o=this._lastInitSegments[e];o&&(this._pendingSegments[e].push(o),n.updating||this._doAppendSegments())}}}}},{key:"endOfStream",value:function(){var t=this._mediaSource,e=this._sourceBuffers;t&&"open"===t.readyState?e.video&&e.video.updating||e.audio&&e.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,t.endOfStream()):t&&"closed"===t.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)}},{key:"getNearestKeyframe",value:function(t){return this._idrList.getLastSyncPointBeforeDts(t)}},{key:"_needCleanupSourceBuffer",value:function(){if(!this._config.autoCleanupSourceBuffer)return!1;var t=this._mediaElement.currentTime;for(var e in this._sourceBuffers){var n=this._sourceBuffers[e];if(n){var a=n.buffered;if(a.length>=1&&t-a.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1}},{key:"_doCleanupSourceBuffer",value:function(){var t=this._mediaElement.currentTime;for(var e in this._sourceBuffers){var n=this._sourceBuffers[e];if(n){for(var a=n.buffered,r=!1,i=0;i<a.length;i++){var s=a.start(i),o=a.end(i);if(s<=t&&t<o+3){if(t-s>=this._config.autoCleanupMaxBackwardDuration){r=!0;var c=t-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[e].push({start:s,end:c})}}else o<t&&(r=!0,this._pendingRemoveRanges[e].push({start:s,end:o}))}r&&!n.updating&&this._doRemoveRanges()}}}},{key:"_updateMediaSourceDuration",value:function(){var t=this._sourceBuffers;if(0!==this._mediaElement.readyState&&"open"===this._mediaSource.readyState&&!(t.video&&t.video.updating||t.audio&&t.audio.updating)){var e=this._mediaSource.duration,n=this._pendingMediaDuration;n>0&&(isNaN(e)||n>e)&&(f.Z.v(this.TAG,"Update MediaSource duration from ".concat(e," to ").concat(n)),this._mediaSource.duration=n),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}}},{key:"_doRemoveRanges",value:function(){for(var t in this._pendingRemoveRanges)if(this._sourceBuffers[t]&&!this._sourceBuffers[t].updating)for(var e=this._sourceBuffers[t],n=this._pendingRemoveRanges[t];n.length&&!e.updating;){var a=n.shift();e.remove(a.start,a.end)}}},{key:"_doAppendSegments",value:function(){var t=this._pendingSegments;for(var e in t)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating&&t[e].length>0){var n=t[e].shift();if(n.timestampOffset){var a=this._sourceBuffers[e].timestampOffset,r=n.timestampOffset/1e3;Math.abs(a-r)>.1&&(f.Z.v(this.TAG,"Update MPEG audio timestampOffset from ".concat(a," to ").concat(r)),this._sourceBuffers[e].timestampOffset=r),delete n.timestampOffset}if(!n.data||0===n.data.byteLength)continue;try{this._sourceBuffers[e].appendBuffer(n.data),this._isBufferFull=!1,"video"===e&&n.hasOwnProperty("info")&&this._idrList.appendArray(n.info.syncPoints)}catch(t){this._pendingSegments[e].unshift(n),22===t.code?(this._isBufferFull||this._emitter.emit(k.BUFFER_FULL),this._isBufferFull=!0):(f.Z.e(this.TAG,"type: "+e+", error: "+t.message),this._emitter.emit(k.ERROR,{code:t.code,msg:t.message}))}}}},{key:"_onSourceOpen",value:function(){if(f.Z.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var t=this._pendingSourceBufferInit;t.length;){var e=t.shift();this.appendInitSegment(e,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(k.SOURCE_OPEN)}},{key:"_onSourceEnded",value:function(){f.Z.v(this.TAG,"MediaSource onSourceEnded")}},{key:"_onSourceClose",value:function(){f.Z.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))}},{key:"_hasPendingSegments",value:function(){var t=this._pendingSegments;return t.video.length>0||t.audio.length>0}},{key:"_hasPendingRemoveRanges",value:function(){var t=this._pendingRemoveRanges;return t.video.length>0||t.audio.length>0}},{key:"_onSourceBufferUpdateEnd",value:function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(k.UPDATE_END)}},{key:"_onSourceBufferError",value:function(t){f.Z.e(this.TAG,"SourceBuffer Error: ".concat(t))}}])&&E(e.prototype,n),a&&E(e,a),t}();var A=n(50441),R={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},O={NETWORK_EXCEPTION:l.nm.EXCEPTION,NETWORK_STATUS_CODE_INVALID:l.nm.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:l.nm.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:l.nm.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:A.Z.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:A.Z.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:A.Z.CODEC_UNSUPPORTED};function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const L=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(d()),this._config=s(),"object"===$(n)&&Object.assign(this._config,n),"flv"!==e.type.toLowerCase())throw new S.OC("FlvPlayer requires an flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var a=h.Z.chrome&&(h.Z.version.major<50||50===h.Z.version.major&&h.Z.version.build<2661);this._alwaysSeekKeyframe=!!(a||h.Z.msedge||h.Z.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}var e,n,a;return e=t,(n=[{key:"destroy",value:function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(t,e){var n=this;t===p.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then((function(){n._emitter.emit(p.MEDIA_INFO,n.mediaInfo)})):t===p.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then((function(){n._emitter.emit(p.STATISTICS_INFO,n.statisticsInfo)})),this._emitter.addListener(t,e)}},{key:"off",value:function(t,e){this._emitter.removeListener(t,e)}},{key:"attachMediaElement",value:function(t){var e=this;if(this._mediaElement=t,t.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),t.addEventListener("seeking",this.e.onvSeeking),t.addEventListener("canplay",this.e.onvCanPlay),t.addEventListener("stalled",this.e.onvStalled),t.addEventListener("progress",this.e.onvProgress),this._msectl=new T(this._config),this._msectl.on(k.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(k.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(k.SOURCE_OPEN,(function(){e._mseSourceOpened=!0,e._hasPendingLoad&&(e._hasPendingLoad=!1,e.load())})),this._msectl.on(k.ERROR,(function(t){e._emitter.emit(p.ERROR,R.MEDIA_ERROR,O.MEDIA_MSE_ERROR,t)})),this._msectl.attachMediaElement(t),null!=this._pendingSeekTime)try{t.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(t){}}},{key:"detachMediaElement",value:function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)}},{key:"load",value:function(){var t=this;if(!this._mediaElement)throw new S.rT("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new S.rT("FlvPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new w(this._mediaDataSource,this._config),this._transmuxer.on(y.Z.INIT_SEGMENT,(function(e,n){t._msectl.appendInitSegment(n)})),this._transmuxer.on(y.Z.MEDIA_SEGMENT,(function(e,n){if(t._msectl.appendMediaSegment(n),t._config.lazyLoad&&!t._config.isLive){var a=t._mediaElement.currentTime;n.info.endDts>=1e3*(a+t._config.lazyLoadMaxDuration)&&null==t._progressChecker&&(f.Z.v(t.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),t._suspendTransmuxer())}})),this._transmuxer.on(y.Z.LOADING_COMPLETE,(function(){t._msectl.endOfStream(),t._emitter.emit(p.LOADING_COMPLETE)})),this._transmuxer.on(y.Z.RECOVERED_EARLY_EOF,(function(){t._emitter.emit(p.RECOVERED_EARLY_EOF)})),this._transmuxer.on(y.Z.IO_ERROR,(function(e,n){t._emitter.emit(p.ERROR,R.NETWORK_ERROR,e,n)})),this._transmuxer.on(y.Z.DEMUX_ERROR,(function(e,n){t._emitter.emit(p.ERROR,R.MEDIA_ERROR,e,{code:-1,msg:n})})),this._transmuxer.on(y.Z.MEDIA_INFO,(function(e){t._mediaInfo=e,t._emitter.emit(p.MEDIA_INFO,Object.assign({},e))})),this._transmuxer.on(y.Z.METADATA_ARRIVED,(function(e){t._emitter.emit(p.METADATA_ARRIVED,e)})),this._transmuxer.on(y.Z.SCRIPTDATA_ARRIVED,(function(e){t._emitter.emit(p.SCRIPTDATA_ARRIVED,e)})),this._transmuxer.on(y.Z.STATISTICS_INFO,(function(e){t._statisticsInfo=t._fillStatisticsInfo(e),t._emitter.emit(p.STATISTICS_INFO,Object.assign({},t._statisticsInfo))})),this._transmuxer.on(y.Z.RECOMMEND_SEEKPOINT,(function(e){t._mediaElement&&!t._config.accurateSeek&&(t._requestSetTime=!0,t._mediaElement.currentTime=e/1e3)})),this._transmuxer.open()))}},{key:"unload",value:function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)}},{key:"play",value:function(){return this._mediaElement.play()}},{key:"pause",value:function(){this._mediaElement.pause()}},{key:"type",get:function(){return this._type}},{key:"buffered",get:function(){return this._mediaElement.buffered}},{key:"duration",get:function(){return this._mediaElement.duration}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(t){this._mediaElement.volume=t}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(t){this._mediaElement.muted=t}},{key:"currentTime",get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(t){this._mediaElement?this._internalSeek(t):this._pendingSeekTime=t}},{key:"mediaInfo",get:function(){return Object.assign({},this._mediaInfo)}},{key:"statisticsInfo",get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)}},{key:"_fillStatisticsInfo",value:function(t){if(t.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return t;var e=!0,n=0,a=0;if(this._mediaElement.getVideoPlaybackQuality){var r=this._mediaElement.getVideoPlaybackQuality();n=r.totalVideoFrames,a=r.droppedVideoFrames}else null!=this._mediaElement.webkitDecodedFrameCount?(n=this._mediaElement.webkitDecodedFrameCount,a=this._mediaElement.webkitDroppedFrameCount):e=!1;return e&&(t.decodedFrames=n,t.droppedFrames=a),t}},{key:"_onmseUpdateEnd",value:function(){if(this._config.lazyLoad&&!this._config.isLive){for(var t=this._mediaElement.buffered,e=this._mediaElement.currentTime,n=0,a=0;a<t.length;a++){var r=t.start(a),i=t.end(a);if(r<=e&&e<i){n=i;break}}n>=e+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(f.Z.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}}},{key:"_onmseBufferFull",value:function(){f.Z.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()}},{key:"_suspendTransmuxer",value:function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))}},{key:"_checkProgressAndResume",value:function(){for(var t=this._mediaElement.currentTime,e=this._mediaElement.buffered,n=!1,a=0;a<e.length;a++){var r=e.start(a),i=e.end(a);if(t>=r&&t<i){t>=i-this._config.lazyLoadRecoverDuration&&(n=!0);break}}n&&(window.clearInterval(this._progressChecker),this._progressChecker=null,n&&(f.Z.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))}},{key:"_isTimepointBuffered",value:function(t){for(var e=this._mediaElement.buffered,n=0;n<e.length;n++){var a=e.start(n),r=e.end(n);if(t>=a&&t<r)return!0}return!1}},{key:"_internalSeek",value:function(t){var e=this._isTimepointBuffered(t),n=!1,a=0;if(t<1&&this._mediaElement.buffered.length>0){var r=this._mediaElement.buffered.start(0);(r<1&&t<r||h.Z.safari)&&(n=!0,a=h.Z.safari?.1:r)}if(n)this._requestSetTime=!0,this._mediaElement.currentTime=a;else if(e){if(this._alwaysSeekKeyframe){var i=this._msectl.getNearestKeyframe(Math.floor(1e3*t));this._requestSetTime=!0,this._mediaElement.currentTime=null!=i?i.dts/1e3:t}else this._requestSetTime=!0,this._mediaElement.currentTime=t;null!=this._progressChecker&&this._checkProgressAndResume()}else null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(t),this._transmuxer.seek(Math.floor(1e3*t)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=t)}},{key:"_checkAndApplyUnbufferedSeekpoint",value:function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var t=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(t)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(t),this._transmuxer.seek(Math.floor(1e3*t)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=t))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}},{key:"_checkAndResumeStuckPlayback",value:function(t){var e=this._mediaElement;if(t||!this._receivedCanPlay||e.readyState<2){var n=e.buffered;n.length>0&&e.currentTime<n.start(0)&&(f.Z.w(this.TAG,"Playback seems stuck at ".concat(e.currentTime,", seek to ").concat(n.start(0))),this._requestSetTime=!0,this._mediaElement.currentTime=n.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)}},{key:"_onvLoadedMetadata",value:function(t){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)}},{key:"_onvSeeking",value:function(t){var e=this._mediaElement.currentTime,n=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(e<1&&n.length>0){var a=n.start(0);if(a<1&&e<a||h.Z.safari)return this._requestSetTime=!0,void(this._mediaElement.currentTime=h.Z.safari?.1:a)}if(this._isTimepointBuffered(e)){if(this._alwaysSeekKeyframe){var r=this._msectl.getNearestKeyframe(Math.floor(1e3*e));null!=r&&(this._requestSetTime=!0,this._mediaElement.currentTime=r.dts/1e3)}null!=this._progressChecker&&this._checkProgressAndResume()}else this._seekpointRecord={seekPoint:e,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}}},{key:"_onvCanPlay",value:function(t){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)}},{key:"_onvStalled",value:function(t){this._checkAndResumeStuckPlayback(!0)}},{key:"_onvProgress",value:function(t){this._checkAndResumeStuckPlayback()}}])&&P(e.prototype,n),a&&P(e,a),t}();function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const M=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(d()),this._config=s(),"object"===D(n)&&Object.assign(this._config,n),"flv"===e.type.toLowerCase())throw new S.OC("NativePlayer does't support flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new S.OC("NativePlayer(".concat(e.type,") doesn't support multipart playback!"));this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}var e,n,a;return e=t,(n=[{key:"destroy",value:function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(t,e){var n=this;t===p.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){n._emitter.emit(p.MEDIA_INFO,n.mediaInfo)})):t===p.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){n._emitter.emit(p.STATISTICS_INFO,n.statisticsInfo)})),this._emitter.addListener(t,e)}},{key:"off",value:function(t,e){this._emitter.removeListener(t,e)}},{key:"attachMediaElement",value:function(t){if(this._mediaElement=t,t.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{t.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(t){}}},{key:"detachMediaElement",value:function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"load",value:function(){if(!this._mediaElement)throw new S.rT("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)}},{key:"unload",value:function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"play",value:function(){return this._mediaElement.play()}},{key:"pause",value:function(){this._mediaElement.pause()}},{key:"type",get:function(){return this._type}},{key:"buffered",get:function(){return this._mediaElement.buffered}},{key:"duration",get:function(){return this._mediaElement.duration}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(t){this._mediaElement.volume=t}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(t){this._mediaElement.muted=t}},{key:"currentTime",get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(t){this._mediaElement?this._mediaElement.currentTime=t:this._pendingSeekTime=t}},{key:"mediaInfo",get:function(){var t={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(t.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(t.width=this._mediaElement.videoWidth,t.height=this._mediaElement.videoHeight)),t}},{key:"statisticsInfo",get:function(){var t={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return t;var e=!0,n=0,a=0;if(this._mediaElement.getVideoPlaybackQuality){var r=this._mediaElement.getVideoPlaybackQuality();n=r.totalVideoFrames,a=r.droppedVideoFrames}else null!=this._mediaElement.webkitDecodedFrameCount?(n=this._mediaElement.webkitDecodedFrameCount,a=this._mediaElement.webkitDroppedFrameCount):e=!1;return e&&(t.decodedFrames=n,t.droppedFrames=a),t}},{key:"_onvLoadedMetadata",value:function(t){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(p.MEDIA_INFO,this.mediaInfo)}},{key:"_reportStatisticsInfo",value:function(){this._emitter.emit(p.STATISTICS_INFO,this.statisticsInfo)}}])&&I(e.prototype,n),a&&I(e,a),t}();function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}a.Z.install();var j={createPlayer:function(t,e){var n=t;if(null==n||"object"!==N(n))throw new S.OC("MediaDataSource must be an javascript object!");if(!n.hasOwnProperty("type"))throw new S.OC("MediaDataSource must has type field to indicate video file type!");switch(n.type){case"flv":return new L(n,e);default:return new M(n,e)}},isSupported:function(){return c.supportMSEH264Playback()},getFeatureList:function(){return c.getFeatureList()}};j.BaseLoader=l.fp,j.LoaderStatus=l.GM,j.LoaderErrors=l.nm,j.Events=p,j.ErrorTypes=R,j.ErrorDetails=O,j.FlvPlayer=L,j.NativePlayer=M,j.LoggingControl=g.Z,Object.defineProperty(j,"version",{enumerable:!0,get:function(){return __VERSION__}});const F=j},13383:(t,e,n)=>{t.exports=n(18082).default},74387:(t,e,n)=>{"use strict";n.d(e,{Z:()=>Q});var a=n(14569);function r(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}var e,n,a;return e=t,(n=[{key:"reset",value:function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0}},{key:"addBytes",value:function(t){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=t,this._totalBytes+=t):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=t,this._totalBytes+=t):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=t,this._totalBytes+=t,this._lastCheckpoint=this._now())}},{key:"currentKBps",get:function(){this.addBytes(0);var t=(this._now()-this._lastCheckpoint)/1e3;return 0==t&&(t=1),this._intervalBytes/t/1024}},{key:"lastSecondKBps",get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0}},{key:"averageKBps",get:function(){var t=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/t/1024}}])&&r(e.prototype,n),a&&r(e,a),t}();var s=n(69851),o=n(76655),c=n(57967);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function d(t,e,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=m(t);if(e){var r=m(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(i,t);var e,n,a,r=h(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,"fetch-stream-loader")).TAG="FetchStreamLoader",n._seekHandler=t,n._config=e,n._needStash=!0,n._requestAbort=!1,n._contentLength=null,n._receivedLength=0,n}return e=i,a=[{key:"isSupported",value:function(){try{var t=o.Z.msedge&&o.Z.version.minor>=15048,e=!o.Z.msedge||t;return self.fetch&&self.ReadableStream&&e}catch(t){return!1}}}],(n=[{key:"destroy",value:function(){this.isWorking()&&this.abort(),d(m(i.prototype),"destroy",this).call(this)}},{key:"open",value:function(t,e){var n=this;this._dataSource=t,this._range=e;var a=t.url;this._config.reuseRedirectedURL&&null!=t.redirectedURL&&(a=t.redirectedURL);var r=this._seekHandler.getConfig(a,e),i=new self.Headers;if("object"===l(r.headers)){var o=r.headers;for(var u in o)o.hasOwnProperty(u)&&i.append(u,o[u])}var d={method:"GET",headers:i,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if("object"===l(this._config.headers))for(var f in this._config.headers)i.append(f,this._config.headers[f]);!1===t.cors&&(d.mode="same-origin"),t.withCredentials&&(d.credentials="include"),t.referrerPolicy&&(d.referrerPolicy=t.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,d.signal=this._abortController.signal),this._status=s.GM.kConnecting,self.fetch(r.url,d).then((function(t){if(n._requestAbort)return n._status=s.GM.kIdle,void t.body.cancel();if(t.ok&&t.status>=200&&t.status<=299){if(t.url!==r.url&&n._onURLRedirect){var e=n._seekHandler.removeURLParameters(t.url);n._onURLRedirect(e)}var a=t.headers.get("Content-Length");return null!=a&&(n._contentLength=parseInt(a),0!==n._contentLength&&n._onContentLengthKnown&&n._onContentLengthKnown(n._contentLength)),n._pump.call(n,t.body.getReader())}if(n._status=s.GM.kError,!n._onError)throw new c.OZ("FetchStreamLoader: Http code invalid, "+t.status+" "+t.statusText);n._onError(s.nm.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})})).catch((function(t){if(!n._abortController||!n._abortController.signal.aborted){if(n._status=s.GM.kError,!n._onError)throw t;n._onError(s.nm.EXCEPTION,{code:-1,msg:t.message})}}))}},{key:"abort",value:function(){if(this._requestAbort=!0,(this._status!==s.GM.kBuffering||!o.Z.chrome)&&this._abortController)try{this._abortController.abort()}catch(t){}}},{key:"_pump",value:function(t){var e=this;return t.read().then((function(n){if(n.done)if(null!==e._contentLength&&e._receivedLength<e._contentLength){e._status=s.GM.kError;var a=s.nm.EARLY_EOF,r={code:-1,msg:"Fetch stream meet Early-EOF"};if(!e._onError)throw new c.OZ(r.msg);e._onError(a,r)}else e._status=s.GM.kComplete,e._onComplete&&e._onComplete(e._range.from,e._range.from+e._receivedLength-1);else{if(e._abortController&&e._abortController.signal.aborted)return void(e._status=s.GM.kComplete);if(!0===e._requestAbort)return e._status=s.GM.kComplete,t.cancel();e._status=s.GM.kBuffering;var i=n.value.buffer,o=e._range.from+e._receivedLength;e._receivedLength+=i.byteLength,e._onDataArrival&&e._onDataArrival(i,o,e._receivedLength),e._pump(t)}})).catch((function(t){if(e._abortController&&e._abortController.signal.aborted)e._status=s.GM.kComplete;else if(11!==t.code||!o.Z.msedge){e._status=s.GM.kError;var n=0,a=null;if(19!==t.code&&"network error"!==t.message||!(null===e._contentLength||null!==e._contentLength&&e._receivedLength<e._contentLength)?(n=s.nm.EXCEPTION,a={code:t.code,msg:t.message}):(n=s.nm.EARLY_EOF,a={code:t.code,msg:"Fetch stream meet Early-EOF"}),!e._onError)throw new c.OZ(a.msg);e._onError(n,a)}}))}}])&&u(e.prototype,n),a&&u(e,a),i}(s.fp);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function y(t,e,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=k(t);if(e){var r=k(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return w(this,n)}}function w(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(o,t);var e,n,r,i=C(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,"xhr-moz-chunked-loader")).TAG="MozChunkedLoader",n._seekHandler=t,n._config=e,n._needStash=!0,n._xhr=null,n._requestAbort=!1,n._contentLength=null,n._receivedLength=0,n}return e=o,r=[{key:"isSupported",value:function(){try{var t=new XMLHttpRequest;return t.open("GET","https://example.com",!0),t.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===t.responseType}catch(t){return a.Z.w("MozChunkedLoader",t.message),!1}}}],(n=[{key:"destroy",value:function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),y(k(o.prototype),"destroy",this).call(this)}},{key:"open",value:function(t,e){this._dataSource=t,this._range=e;var n=t.url;this._config.reuseRedirectedURL&&null!=t.redirectedURL&&(n=t.redirectedURL);var a=this._seekHandler.getConfig(n,e);this._requestURL=a.url;var r=this._xhr=new XMLHttpRequest;if(r.open("GET",a.url,!0),r.responseType="moz-chunked-arraybuffer",r.onreadystatechange=this._onReadyStateChange.bind(this),r.onprogress=this._onProgress.bind(this),r.onloadend=this._onLoadEnd.bind(this),r.onerror=this._onXhrError.bind(this),t.withCredentials&&(r.withCredentials=!0),"object"===g(a.headers)){var i=a.headers;for(var o in i)i.hasOwnProperty(o)&&r.setRequestHeader(o,i[o])}if("object"===g(this._config.headers)){var c=this._config.headers;for(var l in c)c.hasOwnProperty(l)&&r.setRequestHeader(l,c[l])}this._status=s.GM.kConnecting,r.send()}},{key:"abort",value:function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=s.GM.kComplete}},{key:"_onReadyStateChange",value:function(t){var e=t.target;if(2===e.readyState){if(null!=e.responseURL&&e.responseURL!==this._requestURL&&this._onURLRedirect){var n=this._seekHandler.removeURLParameters(e.responseURL);this._onURLRedirect(n)}if(0!==e.status&&(e.status<200||e.status>299)){if(this._status=s.GM.kError,!this._onError)throw new c.OZ("MozChunkedLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(s.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}else this._status=s.GM.kBuffering}}},{key:"_onProgress",value:function(t){if(this._status!==s.GM.kError){null===this._contentLength&&null!==t.total&&0!==t.total&&(this._contentLength=t.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var e=t.target.response,n=this._range.from+this._receivedLength;this._receivedLength+=e.byteLength,this._onDataArrival&&this._onDataArrival(e,n,this._receivedLength)}}},{key:"_onLoadEnd",value:function(t){!0!==this._requestAbort?this._status!==s.GM.kError&&(this._status=s.GM.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1}},{key:"_onXhrError",value:function(t){this._status=s.GM.kError;var e=0,n=null;if(this._contentLength&&t.loaded<this._contentLength?(e=s.nm.EARLY_EOF,n={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(e=s.nm.EXCEPTION,n={code:-1,msg:t.constructor.name+" "+t.type}),!this._onError)throw new c.OZ(n.msg);this._onError(e,n)}}])&&_(e.prototype,n),r&&_(e,r),o}(s.fp);function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function T(t,e,n){return(T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$(t)););return t}(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=$(t);if(e){var r=$(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return O(this,n)}}function O(t,e){return!e||"object"!==S(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}s.fp;function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function D(t,e,n){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=j(t);if(e){var r=j(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return N(this,n)}}function N(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(l,t);var e,n,r,o=M(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=o.call(this,"xhr-range-loader")).TAG="RangeLoader",n._seekHandler=t,n._config=e,n._needStash=!1,n._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],n._currentChunkSizeKB=384,n._currentSpeedNormalized=0,n._zeroSpeedChunkCount=0,n._xhr=null,n._speedSampler=new i,n._requestAbort=!1,n._waitForTotalLength=!1,n._totalLengthReceived=!1,n._currentRequestURL=null,n._currentRedirectedURL=null,n._currentRequestRange=null,n._totalLength=null,n._contentLength=null,n._receivedLength=0,n._lastTimeLoaded=0,n}return e=l,r=[{key:"isSupported",value:function(){try{var t=new XMLHttpRequest;return t.open("GET","https://example.com",!0),t.responseType="arraybuffer","arraybuffer"===t.responseType}catch(t){return a.Z.w("RangeLoader",t.message),!1}}}],(n=[{key:"destroy",value:function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),D(j(l.prototype),"destroy",this).call(this)}},{key:"currentSpeed",get:function(){return this._speedSampler.lastSecondKBps}},{key:"open",value:function(t,e){this._dataSource=t,this._range=e,this._status=s.GM.kConnecting;var n=!1;null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(n=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||n?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))}},{key:"_openSubRange",value:function(){var t=1024*this._currentChunkSizeKB,e=this._range.from+this._receivedLength,n=e+t;null!=this._contentLength&&n-this._range.from>=this._contentLength&&(n=this._range.from+this._contentLength-1),this._currentRequestRange={from:e,to:n},this._internalOpen(this._dataSource,this._currentRequestRange)}},{key:"_internalOpen",value:function(t,e){this._lastTimeLoaded=0;var n=t.url;this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?n=this._currentRedirectedURL:null!=t.redirectedURL&&(n=t.redirectedURL));var a=this._seekHandler.getConfig(n,e);this._currentRequestURL=a.url;var r=this._xhr=new XMLHttpRequest;if(r.open("GET",a.url,!0),r.responseType="arraybuffer",r.onreadystatechange=this._onReadyStateChange.bind(this),r.onprogress=this._onProgress.bind(this),r.onload=this._onLoad.bind(this),r.onerror=this._onXhrError.bind(this),t.withCredentials&&(r.withCredentials=!0),"object"===P(a.headers)){var i=a.headers;for(var s in i)i.hasOwnProperty(s)&&r.setRequestHeader(s,i[s])}if("object"===P(this._config.headers)){var o=this._config.headers;for(var c in o)o.hasOwnProperty(c)&&r.setRequestHeader(c,o[c])}r.send()}},{key:"abort",value:function(){this._requestAbort=!0,this._internalAbort(),this._status=s.GM.kComplete}},{key:"_internalAbort",value:function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)}},{key:"_onReadyStateChange",value:function(t){var e=t.target;if(2===e.readyState){if(null!=e.responseURL){var n=this._seekHandler.removeURLParameters(e.responseURL);e.responseURL!==this._currentRequestURL&&n!==this._currentRedirectedURL&&(this._currentRedirectedURL=n,this._onURLRedirect&&this._onURLRedirect(n))}if(e.status>=200&&e.status<=299){if(this._waitForTotalLength)return;this._status=s.GM.kBuffering}else{if(this._status=s.GM.kError,!this._onError)throw new c.OZ("RangeLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(s.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}}}},{key:"_onProgress",value:function(t){if(this._status!==s.GM.kError){if(null===this._contentLength){var e=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,e=!0;var n=t.total;this._internalAbort(),null!=n&0!==n&&(this._totalLength=n)}if(-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,e)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var a=t.loaded-this._lastTimeLoaded;this._lastTimeLoaded=t.loaded,this._speedSampler.addBytes(a)}}},{key:"_normalizeSpeed",value:function(t){var e=this._chunkSizeKBList,n=e.length-1,a=0,r=0,i=n;if(t<e[0])return e[0];for(;r<=i;){if((a=r+Math.floor((i-r)/2))===n||t>=e[a]&&t<e[a+1])return e[a];e[a]<t?r=a+1:i=a-1}}},{key:"_onLoad",value:function(t){if(this._status!==s.GM.kError)if(this._waitForTotalLength)this._waitForTotalLength=!1;else{this._lastTimeLoaded=0;var e=this._speedSampler.lastSecondKBps;if(0===e&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(e=this._speedSampler.currentKBps)),0!==e){var n=this._normalizeSpeed(e);this._currentSpeedNormalized!==n&&(this._currentSpeedNormalized=n,this._currentChunkSizeKB=n)}var a=t.target.response,r=this._range.from+this._receivedLength;this._receivedLength+=a.byteLength;var i=!1;null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():i=!0,this._onDataArrival&&this._onDataArrival(a,r,this._receivedLength),i&&(this._status=s.GM.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}}},{key:"_onXhrError",value:function(t){this._status=s.GM.kError;var e=0,n=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(e=s.nm.EARLY_EOF,n={code:-1,msg:"RangeLoader meet Early-Eof"}):(e=s.nm.EXCEPTION,n={code:-1,msg:t.constructor.name+" "+t.type}),!this._onError)throw new c.OZ(n.msg);this._onError(e,n)}}])&&L(e.prototype,n),r&&L(e,r),l}(s.fp);function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function V(t,e,n){return(V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=z(t)););return t}(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=z(t);if(e){var r=z(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return G(this,n)}}function G(t,e){return!e||"object"!==B(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(i,t);var e,n,a,r=Z(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,"websocket-loader")).TAG="WebSocketLoader",t._needStash=!0,t._ws=null,t._requestAbort=!1,t._receivedLength=0,t}return e=i,a=[{key:"isSupported",value:function(){try{return void 0!==self.WebSocket}catch(t){return!1}}}],(n=[{key:"destroy",value:function(){this._ws&&this.abort(),V(z(i.prototype),"destroy",this).call(this)}},{key:"open",value:function(t){try{var e=this._ws=new self.WebSocket(t.url);e.binaryType="arraybuffer",e.onopen=this._onWebSocketOpen.bind(this),e.onclose=this._onWebSocketClose.bind(this),e.onmessage=this._onWebSocketMessage.bind(this),e.onerror=this._onWebSocketError.bind(this),this._status=s.GM.kConnecting}catch(t){this._status=s.GM.kError;var n={code:t.code,msg:t.message};if(!this._onError)throw new c.OZ(n.msg);this._onError(s.nm.EXCEPTION,n)}}},{key:"abort",value:function(){var t=this._ws;!t||0!==t.readyState&&1!==t.readyState||(this._requestAbort=!0,t.close()),this._ws=null,this._status=s.GM.kComplete}},{key:"_onWebSocketOpen",value:function(t){this._status=s.GM.kBuffering}},{key:"_onWebSocketClose",value:function(t){!0!==this._requestAbort?(this._status=s.GM.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1}},{key:"_onWebSocketMessage",value:function(t){var e=this;if(t.data instanceof ArrayBuffer)this._dispatchArrayBuffer(t.data);else if(t.data instanceof Blob){var n=new FileReader;n.onload=function(){e._dispatchArrayBuffer(n.result)},n.readAsArrayBuffer(t.data)}else{this._status=s.GM.kError;var a={code:-1,msg:"Unsupported WebSocket message type: "+t.data.constructor.name};if(!this._onError)throw new c.OZ(a.msg);this._onError(s.nm.EXCEPTION,a)}}},{key:"_dispatchArrayBuffer",value:function(t){var e=t,n=this._receivedLength;this._receivedLength+=e.byteLength,this._onDataArrival&&this._onDataArrival(e,n,this._receivedLength)}},{key:"_onWebSocketError",value:function(t){this._status=s.GM.kError;var e={code:t.code,msg:t.message};if(!this._onError)throw new c.OZ(e.msg);this._onError(s.nm.EXCEPTION,e)}}])&&U(e.prototype,n),a&&U(e,a),i}(s.fp);function K(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const W=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._zeroStart=e||!1}var e,n,a;return e=t,(n=[{key:"getConfig",value:function(t,e){var n,a={};return 0!==e.from||-1!==e.to?(n=-1!==e.to?"bytes=".concat(e.from.toString(),"-").concat(e.to.toString()):"bytes=".concat(e.from.toString(),"-"),a.Range=n):this._zeroStart&&(a.Range="bytes=0-"),{url:t,headers:a}}},{key:"removeURLParameters",value:function(t){return t}}])&&K(e.prototype,n),a&&K(e,a),t}();function Y(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const X=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._startName=e,this._endName=n}var e,n,a;return e=t,(n=[{key:"getConfig",value:function(t,e){var n=t;if(0!==e.from||-1!==e.to){var a=!0;-1===n.indexOf("?")&&(n+="?",a=!1),a&&(n+="&"),n+="".concat(this._startName,"=").concat(e.from.toString()),-1!==e.to&&(n+="&".concat(this._endName,"=").concat(e.to.toString()))}return{url:n,headers:{}}}},{key:"removeURLParameters",value:function(t){var e=t.split("?")[0],n=void 0,a=t.indexOf("?");-1!==a&&(n=t.substring(a+1));var r="";if(null!=n&&n.length>0)for(var i=n.split("&"),s=0;s<i.length;s++){var o=i[s].split("="),c=s>0;o[0]!==this._startName&&o[0]!==this._endName&&(c&&(r+="&"),r+=i[s])}return 0===r.length?e:e+"?"+r}}])&&Y(e.prototype,n),a&&Y(e,a),t}();function J(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}const Q=function(){function t(e,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.TAG="IOController",this._config=n,this._extraData=a,this._stashInitialSize=393216,null!=n.stashInitialSize&&n.stashInitialSize>0&&(this._stashInitialSize=n.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,!1===n.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize?e.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new i,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}var e,n,r;return e=t,(n=[{key:"destroy",value:function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null}},{key:"isWorking",value:function(){return this._loader&&this._loader.isWorking()&&!this._paused}},{key:"isPaused",value:function(){return this._paused}},{key:"status",get:function(){return this._loader.status}},{key:"extraData",get:function(){return this._extraData},set:function(t){this._extraData=t}},{key:"onDataArrival",get:function(){return this._onDataArrival},set:function(t){this._onDataArrival=t}},{key:"onSeeked",get:function(){return this._onSeeked},set:function(t){this._onSeeked=t}},{key:"onError",get:function(){return this._onError},set:function(t){this._onError=t}},{key:"onComplete",get:function(){return this._onComplete},set:function(t){this._onComplete=t}},{key:"onRedirect",get:function(){return this._onRedirect},set:function(t){this._onRedirect=t}},{key:"onRecoveredEarlyEof",get:function(){return this._onRecoveredEarlyEof},set:function(t){this._onRecoveredEarlyEof=t}},{key:"currentURL",get:function(){return this._dataSource.url}},{key:"hasRedirect",get:function(){return null!=this._redirectedURL||null!=this._dataSource.redirectedURL}},{key:"currentRedirectedURL",get:function(){return this._redirectedURL||this._dataSource.redirectedURL}},{key:"currentSpeed",get:function(){return this._loaderClass===F?this._loader.currentSpeed:this._speedSampler.lastSecondKBps}},{key:"loaderType",get:function(){return this._loader.type}},{key:"_selectSeekHandler",value:function(){var t=this._config;if("range"===t.seekType)this._seekHandler=new W(this._config.rangeLoadZeroStart);else if("param"===t.seekType){var e=t.seekParamStart||"bstart",n=t.seekParamEnd||"bend";this._seekHandler=new X(e,n)}else{if("custom"!==t.seekType)throw new c.OC("Invalid seekType in config: ".concat(t.seekType));if("function"!=typeof t.customSeekHandler)throw new c.OC("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new t.customSeekHandler}}},{key:"_selectLoader",value:function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=q;else if(v.isSupported())this._loaderClass=v;else if(x.isSupported())this._loaderClass=x;else{if(!F.isSupported())throw new c.OZ("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=F}}},{key:"_createLoader",value:function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)}},{key:"open",value:function(t){this._currentRange={from:0,to:-1},t&&(this._currentRange.from=t),this._speedSampler.reset(),t||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))}},{key:"abort",value:function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)}},{key:"pause",value:function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)}},{key:"resume",value:function(){if(this._paused){this._paused=!1;var t=this._resumeFrom;this._resumeFrom=0,this._internalSeek(t,!0)}}},{key:"seek",value:function(t){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(t,!0)}},{key:"_internalSeek",value:function(t,e){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(e),this._loader.destroy(),this._loader=null;var n={from:t,to:-1};this._currentRange={from:n.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,n),this._onSeeked&&this._onSeeked()}},{key:"updateUrl",value:function(t){if(!t||"string"!=typeof t||0===t.length)throw new c.OC("Url must be a non-empty string!");this._dataSource.url=t}},{key:"_expandBuffer",value:function(t){for(var e=this._stashSize;e+1048576<t;)e*=2;if((e+=1048576)!==this._bufferSize){var n=new ArrayBuffer(e);if(this._stashUsed>0){var a=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(n,0,e).set(a,0)}this._stashBuffer=n,this._bufferSize=e}}},{key:"_normalizeSpeed",value:function(t){var e=this._speedNormalizeList,n=e.length-1,a=0,r=0,i=n;if(t<e[0])return e[0];for(;r<=i;){if((a=r+Math.floor((i-r)/2))===n||t>=e[a]&&t<e[a+1])return e[a];e[a]<t?r=a+1:i=a-1}}},{key:"_adjustStashSize",value:function(t){var e=0;(e=this._config.isLive||t<512?t:t>=512&&t<=1024?Math.floor(1.5*t):2*t)>8192&&(e=8192);var n=1024*e+1048576;this._bufferSize<n&&this._expandBuffer(n),this._stashSize=1024*e}},{key:"_dispatchChunks",value:function(t,e){return this._currentRange.to=e+t.byteLength-1,this._onDataArrival(t,e)}},{key:"_onURLRedirect",value:function(t){this._redirectedURL=t,this._onRedirect&&this._onRedirect(t)}},{key:"_onContentLengthKnown",value:function(t){t&&this._fullRequestFlag&&(this._totalLength=t,this._fullRequestFlag=!1)}},{key:"_onLoaderChunkArrival",value:function(t,e,n){if(!this._onDataArrival)throw new c.rT("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(t.byteLength);var a=this._speedSampler.lastSecondKBps;if(0!==a){var r=this._normalizeSpeed(a);this._speedNormalized!==r&&(this._speedNormalized=r,this._adjustStashSize(r))}if(this._enableStash)if(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=e),this._stashUsed+t.byteLength<=this._stashSize)new Uint8Array(this._stashBuffer,0,this._stashSize).set(new Uint8Array(t),this._stashUsed),this._stashUsed+=t.byteLength;else{var i=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){var s=this._stashBuffer.slice(0,this._stashUsed),o=this._dispatchChunks(s,this._stashByteStart);if(o<s.byteLength){if(o>0){var l=new Uint8Array(s,o);i.set(l,0),this._stashUsed=l.byteLength,this._stashByteStart+=o}}else this._stashUsed=0,this._stashByteStart+=o;this._stashUsed+t.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+t.byteLength),i=new Uint8Array(this._stashBuffer,0,this._bufferSize)),i.set(new Uint8Array(t),this._stashUsed),this._stashUsed+=t.byteLength}else{var u=this._dispatchChunks(t,e);if(u<t.byteLength){var d=t.byteLength-u;d>this._bufferSize&&(this._expandBuffer(d),i=new Uint8Array(this._stashBuffer,0,this._bufferSize)),i.set(new Uint8Array(t,u),0),this._stashUsed+=d,this._stashByteStart=e+u}}}else if(0===this._stashUsed){var f=this._dispatchChunks(t,e);if(f<t.byteLength){var h=t.byteLength-f;h>this._bufferSize&&this._expandBuffer(h),new Uint8Array(this._stashBuffer,0,this._bufferSize).set(new Uint8Array(t,f),0),this._stashUsed+=h,this._stashByteStart=e+f}}else{this._stashUsed+t.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+t.byteLength);var p=new Uint8Array(this._stashBuffer,0,this._bufferSize);p.set(new Uint8Array(t),this._stashUsed),this._stashUsed+=t.byteLength;var m=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(m<this._stashUsed&&m>0){var v=new Uint8Array(this._stashBuffer,m);p.set(v,0)}this._stashUsed-=m,this._stashByteStart+=m}}}},{key:"_flushStashBuffer",value:function(t){if(this._stashUsed>0){var e=this._stashBuffer.slice(0,this._stashUsed),n=this._dispatchChunks(e,this._stashByteStart),r=e.byteLength-n;if(n<e.byteLength){if(!t){if(n>0){var i=new Uint8Array(this._stashBuffer,0,this._bufferSize),s=new Uint8Array(e,n);i.set(s,0),this._stashUsed=s.byteLength,this._stashByteStart+=n}return 0}a.Z.w(this.TAG,"".concat(r," bytes unconsumed data remain when flush buffer, dropped"))}return this._stashUsed=0,this._stashByteStart=0,r}return 0}},{key:"_onLoaderComplete",value:function(t,e){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)}},{key:"_onLoaderError",value:function(t,e){switch(a.Z.e(this.TAG,"Loader error, code = ".concat(e.code,", msg = ").concat(e.msg)),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,t=s.nm.UNRECOVERABLE_EARLY_EOF),t){case s.nm.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var n=this._currentRange.to+1;return void(n<this._totalLength&&(a.Z.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(n,!1)))}t=s.nm.UNRECOVERABLE_EARLY_EOF;break;case s.nm.UNRECOVERABLE_EARLY_EOF:case s.nm.CONNECTING_TIMEOUT:case s.nm.HTTP_STATUS_CODE_INVALID:case s.nm.EXCEPTION:}if(!this._onError)throw new c.OZ("IOException: "+e.msg);this._onError(t,e)}}])&&J(e.prototype,n),r&&J(e,r),t}()},69851:(t,e,n)=>{"use strict";n.d(e,{GM:()=>i,nm:()=>s,fp:()=>o});var a=n(57967);function r(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var i={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},s={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._type=e||"undefined",this._status=i.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}var e,n,s;return e=t,(n=[{key:"destroy",value:function(){this._status=i.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}},{key:"isWorking",value:function(){return this._status===i.kConnecting||this._status===i.kBuffering}},{key:"type",get:function(){return this._type}},{key:"status",get:function(){return this._status}},{key:"needStashBuffer",get:function(){return this._needStash}},{key:"onContentLengthKnown",get:function(){return this._onContentLengthKnown},set:function(t){this._onContentLengthKnown=t}},{key:"onURLRedirect",get:function(){return this._onURLRedirect},set:function(t){this._onURLRedirect=t}},{key:"onDataArrival",get:function(){return this._onDataArrival},set:function(t){this._onDataArrival=t}},{key:"onError",get:function(){return this._onError},set:function(t){this._onError=t}},{key:"onComplete",get:function(){return this._onComplete},set:function(t){this._onComplete=t}},{key:"open",value:function(t,e){throw new a.do("Unimplemented abstract function!")}},{key:"abort",value:function(){throw new a.do("Unimplemented abstract function!")}}])&&r(e.prototype,n),s&&r(e,s),t}()},76655:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var a={};!function(){var t=self.navigator.userAgent.toLowerCase(),e=/(edge)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(iemobile)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(t)||[],n=/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(android)/.exec(t)||/(windows)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||[],r={browser:e[5]||e[3]||e[1]||"",version:e[2]||e[4]||"0",majorVersion:e[4]||e[2]||"0",platform:n[0]||""},i={};if(r.browser){i[r.browser]=!0;var s=r.majorVersion.split(".");i.version={major:parseInt(r.majorVersion,10),string:r.version},s.length>1&&(i.version.minor=parseInt(s[1],10)),s.length>2&&(i.version.build=parseInt(s[2],10))}if(r.platform&&(i[r.platform]=!0),(i.chrome||i.opr||i.safari)&&(i.webkit=!0),i.rv||i.iemobile){i.rv&&delete i.rv;var o="msie";r.browser=o,i.msie=!0}if(i.edge){delete i.edge;var c="msedge";r.browser=c,i.msedge=!0}if(i.opr){var l="opera";r.browser=l,i.opera=!0}if(i.safari&&i.android){var u="android";r.browser=u,i.android=!0}for(var d in i.name=r.browser,i.platform=r.platform,a)a.hasOwnProperty(d)&&delete a[d];Object.assign(a,i)}();const r=a},57967:(t,e,n)=>{"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=c(t);if(e){var r=c(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function d(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}n.d(e,{OZ:()=>f,rT:()=>h,OC:()=>p,do:()=>m});var f=function(){function t(e){l(this,t),this._message=e}return d(t,[{key:"name",get:function(){return"RuntimeException"}},{key:"message",get:function(){return this._message}},{key:"toString",value:function(){return this.name+": "+this.message}}]),t}(),h=function(t){r(n,t);var e=s(n);function n(t){return l(this,n),e.call(this,t)}return d(n,[{key:"name",get:function(){return"IllegalStateException"}}]),n}(f),p=function(t){r(n,t);var e=s(n);function n(t){return l(this,n),e.call(this,t)}return d(n,[{key:"name",get:function(){return"InvalidArgumentException"}}]),n}(f),m=function(t){r(n,t);var e=s(n);function n(t){return l(this,n),e.call(this,t)}return d(n,[{key:"name",get:function(){return"NotImplementedException"}}]),n}(f)},14569:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var a=n(17187),r=n.n(a);function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,a=[{key:"e",value:function(e,n){e&&!t.FORCE_GLOBAL_TAG||(e=t.GLOBAL_TAG);var a="[".concat(e,"] > ").concat(n);t.ENABLE_CALLBACK&&t.emitter.emit("log","error",a),t.ENABLE_ERROR&&(console.error?console.error(a):console.warn?console.warn(a):console.log(a))}},{key:"i",value:function(e,n){e&&!t.FORCE_GLOBAL_TAG||(e=t.GLOBAL_TAG);var a="[".concat(e,"] > ").concat(n);t.ENABLE_CALLBACK&&t.emitter.emit("log","info",a),t.ENABLE_INFO&&(console.info?console.info(a):console.log(a))}},{key:"w",value:function(e,n){e&&!t.FORCE_GLOBAL_TAG||(e=t.GLOBAL_TAG);var a="[".concat(e,"] > ").concat(n);t.ENABLE_CALLBACK&&t.emitter.emit("log","warn",a),t.ENABLE_WARN&&(console.warn?console.warn(a):console.log(a))}},{key:"d",value:function(e,n){e&&!t.FORCE_GLOBAL_TAG||(e=t.GLOBAL_TAG);var a="[".concat(e,"] > ").concat(n);t.ENABLE_CALLBACK&&t.emitter.emit("log","debug",a),t.ENABLE_DEBUG&&(console.debug?console.debug(a):console.log(a))}},{key:"v",value:function(e,n){e&&!t.FORCE_GLOBAL_TAG||(e=t.GLOBAL_TAG);var a="[".concat(e,"] > ").concat(n);t.ENABLE_CALLBACK&&t.emitter.emit("log","verbose",a),t.ENABLE_VERBOSE&&console.log(a)}}],(n=null)&&i(e.prototype,n),a&&i(e,a),t}();s.GLOBAL_TAG="flv.js",s.FORCE_GLOBAL_TAG=!1,s.ENABLE_ERROR=!0,s.ENABLE_INFO=!0,s.ENABLE_WARN=!0,s.ENABLE_DEBUG=!0,s.ENABLE_VERBOSE=!0,s.ENABLE_CALLBACK=!1,s.emitter=new(r());const o=s},7778:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var a=n(17187),r=n.n(a),i=n(14569);function s(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,a=[{key:"forceGlobalTag",get:function(){return i.Z.FORCE_GLOBAL_TAG},set:function(e){i.Z.FORCE_GLOBAL_TAG=e,t._notifyChange()}},{key:"globalTag",get:function(){return i.Z.GLOBAL_TAG},set:function(e){i.Z.GLOBAL_TAG=e,t._notifyChange()}},{key:"enableAll",get:function(){return i.Z.ENABLE_VERBOSE&&i.Z.ENABLE_DEBUG&&i.Z.ENABLE_INFO&&i.Z.ENABLE_WARN&&i.Z.ENABLE_ERROR},set:function(e){i.Z.ENABLE_VERBOSE=e,i.Z.ENABLE_DEBUG=e,i.Z.ENABLE_INFO=e,i.Z.ENABLE_WARN=e,i.Z.ENABLE_ERROR=e,t._notifyChange()}},{key:"enableDebug",get:function(){return i.Z.ENABLE_DEBUG},set:function(e){i.Z.ENABLE_DEBUG=e,t._notifyChange()}},{key:"enableVerbose",get:function(){return i.Z.ENABLE_VERBOSE},set:function(e){i.Z.ENABLE_VERBOSE=e,t._notifyChange()}},{key:"enableInfo",get:function(){return i.Z.ENABLE_INFO},set:function(e){i.Z.ENABLE_INFO=e,t._notifyChange()}},{key:"enableWarn",get:function(){return i.Z.ENABLE_WARN},set:function(e){i.Z.ENABLE_WARN=e,t._notifyChange()}},{key:"enableError",get:function(){return i.Z.ENABLE_ERROR},set:function(e){i.Z.ENABLE_ERROR=e,t._notifyChange()}},{key:"getConfig",value:function(){return{globalTag:i.Z.GLOBAL_TAG,forceGlobalTag:i.Z.FORCE_GLOBAL_TAG,enableVerbose:i.Z.ENABLE_VERBOSE,enableDebug:i.Z.ENABLE_DEBUG,enableInfo:i.Z.ENABLE_INFO,enableWarn:i.Z.ENABLE_WARN,enableError:i.Z.ENABLE_ERROR,enableCallback:i.Z.ENABLE_CALLBACK}}},{key:"applyConfig",value:function(t){i.Z.GLOBAL_TAG=t.globalTag,i.Z.FORCE_GLOBAL_TAG=t.forceGlobalTag,i.Z.ENABLE_VERBOSE=t.enableVerbose,i.Z.ENABLE_DEBUG=t.enableDebug,i.Z.ENABLE_INFO=t.enableInfo,i.Z.ENABLE_WARN=t.enableWarn,i.Z.ENABLE_ERROR=t.enableError,i.Z.ENABLE_CALLBACK=t.enableCallback}},{key:"_notifyChange",value:function(){var e=t.emitter;if(e.listenerCount("change")>0){var n=t.getConfig();e.emit("change",n)}}},{key:"registerListener",value:function(e){t.emitter.addListener("change",e)}},{key:"removeListener",value:function(e){t.emitter.removeListener("change",e)}},{key:"addLogListener",value:function(e){i.Z.emitter.addListener("log",e),i.Z.emitter.listenerCount("log")>0&&(i.Z.ENABLE_CALLBACK=!0,t._notifyChange())}},{key:"removeLogListener",value:function(e){i.Z.emitter.removeListener("log",e),0===i.Z.emitter.listenerCount("log")&&(i.Z.ENABLE_CALLBACK=!1,t._notifyChange())}}],(n=null)&&s(e.prototype,n),a&&s(e,a),t}();o.emitter=new(r());const c=o},3222:(t,e,n)=>{"use strict";function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n.d(e,{Z:()=>i});var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,i;return e=t,i=[{key:"install",value:function(){Object.setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Object.assign=Object.assign||function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var a=arguments[n];if(null!=a)for(var r in a)a.hasOwnProperty(r)&&(e[r]=a[r])}return e},"function"!=typeof self.Promise&&n(82702).polyfill()}}],(r=null)&&a(e.prototype,r),i&&a(e,i),t}();r.install();const i=r},64319:()=>{jQuery.trumbowyg.langs.ru={viewHTML:"Посмотреть HTML",undo:"Отменить",redo:"Повторить",formatting:"Форматирование",p:"Обычный",blockquote:"Цитата",code:"Код",header:"Заголовок",bold:"Полужирный",italic:"Курсив",strikethrough:"Зачеркнутый",underline:"Подчеркнутый",strong:"Полужирный",em:"Курсив",del:"Зачеркнутый",superscript:"Надстрочный",subscript:"Подстрочный",unorderedList:"Обычный список",orderedList:"Нумерованный список",insertImage:"Вставить изображение",insertVideo:"Вставить видео",link:"Ссылка",createLink:"Вставить ссылку",unlink:"Удалить ссылку",justifyLeft:"По левому краю",justifyCenter:"По центру",justifyRight:"По правому краю",justifyFull:"По ширине",horizontalRule:"Горизонтальная линия",removeformat:"Очистить форматирование",fullscreen:"Во весь экран",close:"Закрыть",submit:"Вставить",reset:"Отменить",required:"Обязательное",description:"Описание",title:"Подсказка",text:"Текст"}},3750:()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}jQuery.trumbowyg={langs:{en:{viewHTML:"View HTML",undo:"Undo",redo:"Redo",formatting:"Formatting",p:"Paragraph",blockquote:"Quote",code:"Code",header:"Header",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",strong:"Strong",em:"Emphasis",del:"Deleted",superscript:"Superscript",subscript:"Subscript",unorderedList:"Unordered list",orderedList:"Ordered list",insertImage:"Insert Image",link:"Link",createLink:"Insert link",unlink:"Remove link",justifyLeft:"Align Left",justifyCenter:"Align Center",justifyRight:"Align Right",justifyFull:"Align Justify",horizontalRule:"Insert horizontal rule",removeformat:"Remove format",fullscreen:"Fullscreen",close:"Close",submit:"Confirm",reset:"Cancel",required:"Required",description:"Description",title:"Title",text:"Text",target:"Target",width:"Width"}},plugins:{},svgPath:null,svgAbsoluteUseHref:!1,hideButtonTexts:null},Object.defineProperty(jQuery.trumbowyg,"defaultOptions",{value:{lang:"en",fixedBtnPane:!1,fixedFullWidth:!1,autogrow:!1,autogrowOnEnter:!1,imageWidthModalEdit:!1,hideButtonTexts:null,prefix:"trumbowyg-",tagClasses:{},semantic:!0,semanticKeepAttributes:!1,resetCss:!1,removeformatPasted:!1,tabToIndent:!1,tagsToRemove:[],tagsToKeep:["hr","img","embed","iframe","input"],btns:[["viewHTML"],["undo","redo"],["formatting"],["strong","em","del"],["superscript","subscript"],["link"],["insertImage"],["justifyLeft","justifyCenter","justifyRight","justifyFull"],["unorderedList","orderedList"],["horizontalRule"],["removeformat"],["fullscreen"]],btnsDef:{},changeActiveDropdownIcon:!1,inlineElementsSelector:"a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u",pasteHandlers:[],plugins:{},urlProtocol:!1,minimalLinks:!1,defaultLinkTarget:void 0,svgPath:null},writable:!1,enumerable:!0,configurable:!1}),function(e,n,a,r){"use strict";var i="tbwconfirm",s="tbwcancel";r.fn.trumbowyg=function(t,e){var n="trumbowyg";if(t===Object(t)||!t)return this.each((function(){r(this).data(n)||r(this).data(n,new o(this,t))}));if(1===this.length)try{var a=r(this).data(n);switch(t){case"execCmd":return a.execCmd(e.cmd,e.param,e.forceCss,e.skipTrumbowyg);case"openModal":return a.openModal(e.title,e.content);case"closeModal":return a.closeModal();case"openModalInsert":return a.openModalInsert(e.title,e.fields,e.callback);case"saveRange":return a.saveRange();case"getRange":return a.range;case"getRangeText":return a.getRangeText();case"restoreRange":return a.restoreRange();case"enable":return a.setDisabled(!1);case"disable":return a.setDisabled(!0);case"toggle":return a.toggle();case"destroy":return a.destroy();case"empty":return a.empty();case"html":return a.html(e)}}catch(t){}return!1};var o=function(t,i){var s=this,o=r.trumbowyg;s.doc=t.ownerDocument||a,s.$ta=r(t),s.$c=r(t),null!=(i=i||{}).lang||null!=o.langs[i.lang]?s.lang=r.extend(!0,{},o.langs.en,o.langs[i.lang]):s.lang=o.langs.en,s.hideButtonTexts=null!=o.hideButtonTexts?o.hideButtonTexts:i.hideButtonTexts;var c=null!=o.svgPath?o.svgPath:i.svgPath;if(s.hasSvg=!1!==c,!1!==c&&(o.svgAbsoluteUseHref||0===r("#trumbowyg-icons",s.doc).length))if(null==c&&r("script[src]").each((function(t,e){var n=e.src,a=n.match("trumbowyg(.min)?.js");null!=a&&(c=n.substring(0,n.indexOf(a[0]))+"ui/icons.svg")})),null==c)console.warn("You must define svgPath: https://goo.gl/CfTY9U");else if(!o.svgAbsoluteUseHref){var l=s.doc.createElement("div");l.id="trumbowyg-icons",s.doc.body.insertBefore(l,s.doc.body.childNodes[0]),r.ajax({async:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"xml",crossDomain:!0,url:c,data:null,beforeSend:null,complete:null,success:function(t){l.innerHTML=(new XMLSerializer).serializeToString(t.documentElement)}})}var u=s.doc.querySelector("base")?n.location.href.split(/[?#]/)[0]:"";s.svgPath=o.svgAbsoluteUseHref?c:u;var d=s.lang.header,f=function(){return(n.chrome||n.Intl&&Intl.v8BreakIterator)&&"CSS"in n};s.btnsDef={viewHTML:{fn:"toggle",class:"trumbowyg-not-disable"},undo:{isSupported:f,key:"Z"},redo:{isSupported:f,key:"Y"},p:{fn:"formatBlock"},blockquote:{fn:"formatBlock"},h1:{fn:"formatBlock",title:d+" 1"},h2:{fn:"formatBlock",title:d+" 2"},h3:{fn:"formatBlock",title:d+" 3"},h4:{fn:"formatBlock",title:d+" 4"},h5:{fn:"formatBlock",title:d+" 5"},h6:{fn:"formatBlock",title:d+" 6"},subscript:{tag:"sub"},superscript:{tag:"sup"},bold:{key:"B",tag:"b"},italic:{key:"I",tag:"i"},underline:{tag:"u"},strikethrough:{tag:"strike"},strong:{fn:"bold",key:"B"},em:{fn:"italic",key:"I"},del:{fn:"strikethrough"},createLink:{key:"K",tag:"a"},unlink:{},insertImage:{},justifyLeft:{tag:"left",forceCss:!0},justifyCenter:{tag:"center",forceCss:!0},justifyRight:{tag:"right",forceCss:!0},justifyFull:{tag:"justify",forceCss:!0},unorderedList:{fn:"insertUnorderedList",tag:"ul"},orderedList:{fn:"insertOrderedList",tag:"ol"},horizontalRule:{fn:"insertHorizontalRule"},removeformat:{},fullscreen:{class:"trumbowyg-not-disable"},close:{fn:"destroy",class:"trumbowyg-not-disable"},formatting:{dropdown:["p","blockquote","h1","h2","h3","h4"],ico:"p"},link:{dropdown:["createLink","unlink"]}},s.o=r.extend(!0,{},o.defaultOptions,i),s.o.hasOwnProperty("imgDblClickHandler")||(s.o.imgDblClickHandler=s.getDefaultImgDblClickHandler()),s.urlPrefix=s.setupUrlPrefix(),s.disabled=s.o.disabled||"TEXTAREA"===t.nodeName&&t.disabled,i.btns?s.o.btns=i.btns:s.o.semantic||(s.o.btns[3]=["bold","italic","underline","strikethrough"]),r.each(s.o.btnsDef,(function(t,e){s.addBtnDef(t,e)})),s.eventNamespace="trumbowyg-event",s.keys=[],s.tagToButton={},s.tagHandlers=[],s.pasteHandlers=[].concat(s.o.pasteHandlers),s.isIE=-1!==e.userAgent.indexOf("MSIE")||-1!==e.appVersion.indexOf("Trident/"),s.isMac=-1!==e.platform.toUpperCase().indexOf("MAC"),s.init()};o.prototype={DEFAULT_SEMANTIC_MAP:{b:"strong",i:"em",s:"del",strike:"del",div:"p"},init:function(){var t=this;t.height=t.$ta.height(),t.initPlugins();try{t.doc.execCommand("enableObjectResizing",!1,!1),t.doc.execCommand("defaultParagraphSeparator",!1,"p")}catch(t){}t.buildEditor(),t.buildBtnPane(),t.fixedBtnPaneEvents(),t.buildOverlay(),setTimeout((function(){t.disabled&&t.setDisabled(!0),t.$c.trigger("tbwinit")}))},addBtnDef:function(t,e){this.btnsDef[t]=r.extend(e,this.btnsDef[t]||{})},setupUrlPrefix:function(){var t=this.o.urlProtocol;if(t)return"string"!=typeof t?"https://":t.replace("://","")+"://"},buildEditor:function(){var t=this,e=t.o.prefix,a="";t.$box=r("<div/>",{class:e+"box "+e+"editor-visible "+e+t.o.lang+" trumbowyg"}),t.isTextarea=t.$ta.is("textarea"),t.isTextarea?(a=t.$ta.val(),t.$ed=r("<div/>"),t.$box.insertAfter(t.$ta).append(t.$ed,t.$ta)):(t.$ed=t.$ta,a=t.$ed.html(),t.$ta=r("<textarea/>",{name:t.$ta.attr("id"),height:t.height}).val(a),t.$box.insertAfter(t.$ed).append(t.$ta,t.$ed),t.syncCode()),t.$ta.addClass(e+"textarea").attr("tabindex",-1),t.$ed.addClass(e+"editor").attr({contenteditable:!0,dir:t.lang._dir||"ltr"}).html(a),t.o.tabindex&&t.$ed.attr("tabindex",t.o.tabindex),t.$c.is("[placeholder]")&&t.$ed.attr("placeholder",t.$c.attr("placeholder")),t.$c.is("[spellcheck]")&&t.$ed.attr("spellcheck",t.$c.attr("spellcheck")),t.o.resetCss&&t.$ed.addClass(e+"reset-css"),t.o.autogrow||t.$ta.add(t.$ed).css({height:t.height}),t.semanticCode(),t.o.autogrowOnEnter&&t.$ed.addClass(e+"autogrow-on-enter");var i,s=!1,o=!1;t.$ed.on("dblclick","img",t.o.imgDblClickHandler).on("keydown",(function(e){var n=e.which;if(8!==n&&13!==n&&46!==n||t.toggleSpan(!0),!e.ctrlKey&&!e.metaKey||e.altKey){if(t.o.tabToIndent&&"Tab"===e.key)try{return e.shiftKey?t.execCmd("outdent",!0,null):t.execCmd("indent",!0,null),!1}catch(t){}}else{s=!0;var a=t.keys[String.fromCharCode(e.which).toUpperCase()];try{return t.execCmd(a.fn,a.param),!1}catch(t){}}})).on("compositionstart compositionupdate",(function(){o=!0})).on("keyup compositionend",(function(e){if("compositionend"===e.type)o=!1;else if(o)return;var n=e.which;if(!(n>=37&&n<=40)){if(8!==n&&13!==n&&46!==n||t.toggleSpan(),!e.ctrlKey&&!e.metaKey||89!==n&&90!==n)if(s||17===n)void 0===e.which&&t.semanticCode(!1,!1,!0);else{var a=!t.isIE||"compositionend"===e.type;t.semanticCode(!1,a&&13===n),t.$c.trigger("tbwchange")}else t.semanticCode(!1,!0),t.$c.trigger("tbwchange");setTimeout((function(){s=!1}),50)}})).on("mouseup keydown keyup",(function(e){(!e.ctrlKey&&!e.metaKey||e.altKey)&&setTimeout((function(){s=!1}),50),clearTimeout(i),i=setTimeout((function(){t.updateButtonPaneStatus()}),50)})).on("focus blur",(function(e){if("blur"===e.type&&t.clearButtonPaneStatus(),t.$c.trigger("tbw"+e.type),t.o.autogrowOnEnter){if(t.autogrowOnEnterDontClose)return;"focus"===e.type?(t.autogrowOnEnterWasFocused=!0,t.autogrowEditorOnEnter()):t.o.autogrow||(t.$ed.css({height:t.$ed.css("min-height")}),t.$c.trigger("tbwresize"))}})).on("keyup focus",(function(){t.$ta.val().match(/<.*>/)||t.$ed.html().match(/<.*>/)||setTimeout((function(){var e=t.isIE?"<p>":"p";t.doc.execCommand("formatBlock",!1,e),t.syncCode()}),0)})).on("cut drop",(function(){setTimeout((function(){t.semanticCode(!1,!0),t.$c.trigger("tbwchange")}),0)})).on("paste",(function(e){if(t.o.removeformatPasted){e.preventDefault(),n.getSelection&&n.getSelection().deleteFromDocument&&n.getSelection().deleteFromDocument();try{var a=n.clipboardData.getData("Text");try{t.doc.selection.createRange().pasteHTML(a)}catch(e){t.doc.getSelection().getRangeAt(0).insertNode(t.doc.createTextNode(a))}t.$c.trigger("tbwchange",e)}catch(n){t.execCmd("insertText",(e.originalEvent||e).clipboardData.getData("text/plain"))}}r.each(t.pasteHandlers,(function(t,n){n(e)})),setTimeout((function(){t.semanticCode(!1,!0),t.$c.trigger("tbwpaste",e),t.$c.trigger("tbwchange")}),0)})),t.$ta.on("keyup",(function(){t.$c.trigger("tbwchange")})).on("paste",(function(){setTimeout((function(){t.$c.trigger("tbwchange")}),0)})),r(t.doc.body).on("keydown."+t.eventNamespace,(function(n){if(27===n.which&&r("."+e+"modal-box").length>=1)return t.closeModal(),!1}))},autogrowEditorOnEnter:function(){var t=this;t.$ed.removeClass("autogrow-on-enter");var e=t.$ed[0].clientHeight;t.$ed.height("auto");var n=t.$ed[0].scrollHeight;t.$ed.addClass("autogrow-on-enter"),e!==n&&(t.$ed.height(e),setTimeout((function(){t.$ed.css({height:n}),t.$c.trigger("tbwresize")}),0))},buildBtnPane:function(){var t=this,e=t.o.prefix,n=t.$btnPane=r("<div/>",{class:e+"button-pane"});r.each(t.o.btns,(function(a,i){r.isArray(i)||(i=[i]);var s=r("<div/>",{class:e+"button-group "+(i.indexOf("fullscreen")>=0?e+"right":"")});r.each(i,(function(e,n){try{t.isSupportedBtn(n)&&s.append(t.buildBtn(n))}catch(t){}})),s.html().trim().length>0&&n.append(s)})),t.$box.prepend(n)},buildBtn:function(t){var e=this,n=e.o.prefix,a=e.btnsDef[t],i=a.dropdown,s=null==a.hasIcon||a.hasIcon,o=e.lang[t]||t,c=r("<button/>",{type:"button",class:n+t+"-button "+(a.class||"")+(s?"":" "+n+"textual-button"),html:e.hasSvg&&s?'<svg><use xlink:href="'+e.svgPath+"#"+n+(a.ico||t).replace(/([A-Z]+)/g,"-$1").toLowerCase()+'"/></svg>':e.hideButtonTexts?"":a.text||a.title||e.lang[t]||t,title:(a.title||a.text||o)+(a.key?" ("+(e.isMac?"Cmd":"Ctrl")+" + "+a.key+")":""),tabindex:-1,mousedown:function(){return i&&!r("."+t+"-"+n+"dropdown",e.$box).is(":hidden")||r("body",e.doc).trigger("mousedown"),!((e.$btnPane.hasClass(n+"disable")||e.$box.hasClass(n+"disabled"))&&!r(this).hasClass(n+"active")&&!r(this).hasClass(n+"not-disable")||(e.execCmd((i?"dropdown":a.fn)||t,a.param||t,a.forceCss),1))}});if(i){c.addClass(n+"open-dropdown");var l=n+"dropdown",u={class:l+"-"+t+" "+l+" "+n+"fixed-top "+(a.dropdownClass||"")};u["data-"+l]=t;var d=r("<div/>",u);r.each(i,(function(t,n){e.btnsDef[n]&&e.isSupportedBtn(n)&&d.append(e.buildSubBtn(n))})),e.$box.append(d.hide())}else a.key&&(e.keys[a.key]={fn:a.fn||t,param:a.param||t});return i||(e.tagToButton[(a.tag||t).toLowerCase()]=t),c},buildSubBtn:function(t){var e=this,n=e.o.prefix,a=e.btnsDef[t],i=null==a.hasIcon||a.hasIcon;return a.key&&(e.keys[a.key]={fn:a.fn||t,param:a.param||t}),e.tagToButton[(a.tag||t).toLowerCase()]=t,r("<button/>",{type:"button",class:n+t+"-dropdown-button "+(a.class||"")+(a.ico?" "+n+a.ico+"-button":""),html:e.hasSvg&&i?'<svg><use xlink:href="'+e.svgPath+"#"+n+(a.ico||t).replace(/([A-Z]+)/g,"-$1").toLowerCase()+'"/></svg>'+(a.text||a.title||e.lang[t]||t):a.text||a.title||e.lang[t]||t,title:a.key?"("+(e.isMac?"Cmd":"Ctrl")+" + "+a.key+")":null,style:a.style||null,mousedown:function(){return r("body",e.doc).trigger("mousedown"),e.execCmd(a.fn||t,a.param||t,a.forceCss),!1}})},isSupportedBtn:function(t){try{return this.btnsDef[t].isSupported()}catch(t){}return!0},buildOverlay:function(){var t=this;return t.$overlay=r("<div/>",{class:t.o.prefix+"overlay"}).appendTo(t.$box),t.$overlay},showOverlay:function(){var t=this;r(n).trigger("scroll"),t.$overlay.fadeIn(200),t.$box.addClass(t.o.prefix+"box-blur")},hideOverlay:function(){var t=this;t.$overlay.fadeOut(50),t.$box.removeClass(t.o.prefix+"box-blur")},fixedBtnPaneEvents:function(){var t=this,e=t.o.fixedFullWidth,a=t.$box;t.o.fixedBtnPane&&(t.isFixed=!1,r(n).on("scroll."+t.eventNamespace+" resize."+t.eventNamespace,(function(){if(a){t.syncCode();var i=r(n).scrollTop(),s=a.offset().top+1,o=t.$btnPane,c=o.outerHeight()-2;i-s>0&&i-s-t.height<0?(t.isFixed||(t.isFixed=!0,o.css({position:"fixed",top:0,left:e?0:"auto",zIndex:7}),t.$box.css({paddingTop:o.height()})),o.css({width:e?"100%":a.width()-1}),r("."+t.o.prefix+"fixed-top",a).css({position:e?"fixed":"absolute",top:e?c:c+(i-s),zIndex:15})):t.isFixed&&(t.isFixed=!1,o.removeAttr("style"),t.$box.css({paddingTop:0}),r("."+t.o.prefix+"fixed-top",a).css({position:"absolute",top:c}))}})))},setDisabled:function(t){var e=this,n=e.o.prefix;e.disabled=t,t?e.$ta.attr("disabled",!0):e.$ta.removeAttr("disabled"),e.$box.toggleClass(n+"disabled",t),e.$ed.attr("contenteditable",!t)},destroy:function(){var t=this,e=t.o.prefix;t.isTextarea?t.$box.after(t.$ta.css({height:""}).val(t.html()).removeClass(e+"textarea").show()):t.$box.after(t.$ed.css({height:""}).removeClass(e+"editor").removeAttr("contenteditable").removeAttr("dir").html(t.html()).show()),t.$ed.off("dblclick","img"),t.destroyPlugins(),t.$box.remove(),t.$c.removeData("trumbowyg"),r("body").removeClass(e+"body-fullscreen"),t.$c.trigger("tbwclose"),r(n).off("scroll."+t.eventNamespace+" resize."+t.eventNamespace),r(t.doc.body).off("keydown."+t.eventNamespace)},empty:function(){this.$ta.val(""),this.syncCode(!0)},toggle:function(){var t=this,e=t.o.prefix;t.o.autogrowOnEnter&&(t.autogrowOnEnterDontClose=!t.$box.hasClass(e+"editor-hidden")),t.semanticCode(!1,!0),t.$c.trigger("tbwchange"),setTimeout((function(){t.doc.activeElement.blur(),t.$box.toggleClass(e+"editor-hidden "+e+"editor-visible"),t.$btnPane.toggleClass(e+"disable"),r("."+e+"viewHTML-button",t.$btnPane).toggleClass(e+"active"),t.$box.hasClass(e+"editor-visible")?t.$ta.attr("tabindex",-1):t.$ta.removeAttr("tabindex"),t.o.autogrowOnEnter&&!t.autogrowOnEnterDontClose&&t.autogrowEditorOnEnter()}),0)},toggleSpan:function(t){this.$ed.find("span").each((function(){!0===t?r(this).attr("data-tbw-flag",!0):r(this).attr("data-tbw-flag")?r(this).removeAttr("data-tbw-flag"):r(this).contents().unwrap()}))},dropdown:function(t){var e=this,a=r("body",e.doc),i=e.o.prefix,s=r("[data-"+i+"dropdown="+t+"]",e.$box),o=r("."+i+t+"-button",e.$btnPane),c=s.is(":hidden");if(a.trigger("mousedown"),c){var l=o.offset().left;o.addClass(i+"active"),s.css({position:"absolute",top:o.offset().top-e.$btnPane.offset().top+o.outerHeight(),left:e.o.fixedFullWidth&&e.isFixed?l:l-e.$btnPane.offset().left}).show(),r(n).trigger("scroll"),a.on("mousedown."+e.eventNamespace,(function(t){s.is(t.target)||(r("."+i+"dropdown",e.$box).hide(),r("."+i+"active",e.$btnPane).removeClass(i+"active"),a.off("mousedown."+e.eventNamespace))}))}},html:function(t){var e=this;return null!=t?(e.$ta.val(t),e.syncCode(!0),e.$c.trigger("tbwchange"),e):e.$ta.val()},syncTextarea:function(){var t=this;t.$ta.val(t.$ed.text().trim().length>0||t.$ed.find(t.o.tagsToKeep.join(",")).length>0?t.$ed.html():"")},syncCode:function(t){var e=this;if(!t&&e.$ed.is(":visible"))e.syncTextarea();else{var n=r("<div>").html(e.$ta.val()),a=r("<div>").append(n);r(e.o.tagsToRemove.join(","),a).remove(),e.$ed.html(a.contents().html())}if(e.o.autogrow&&(e.height=e.$ed.height(),e.height!==e.$ta.css("height")&&(e.$ta.css({height:e.height}),e.$c.trigger("tbwresize"))),e.o.autogrowOnEnter){e.$ed.height("auto");var i=e.autogrowOnEnterWasFocused?e.$ed[0].scrollHeight:e.$ed.css("min-height");i!==e.$ta.css("height")&&(e.$ed.css({height:i}),e.$c.trigger("tbwresize"))}},semanticCode:function(t,e,n){var a=this;a.saveRange(),a.syncCode(t);var i=!0;if(a.range&&a.range.collapsed&&(i=!1),a.o.semantic){if(a.semanticTag("b",a.o.semanticKeepAttributes),a.semanticTag("i",a.o.semanticKeepAttributes),a.semanticTag("s",a.o.semanticKeepAttributes),a.semanticTag("strike",a.o.semanticKeepAttributes),e){var s=a.o.inlineElementsSelector,o=":not("+s+")";a.$ed.contents().filter((function(){return 3===this.nodeType&&this.nodeValue.trim().length>0})).wrap("<span data-tbw/>");(function t(e){if(0!==e.length){var n=e.nextUntil(o).addBack().wrapAll("<p/>").parent(),a=n.nextAll(s).first();n.next("br").remove(),t(a)}})(a.$ed.children(s).first()),a.semanticTag("div",!0),r("[data-tbw]",a.$ed).contents().unwrap(),a.$ed.find("p:empty").remove()}!n&&i&&a.restoreRange(),a.syncTextarea()}},semanticTag:function(e,n,a){var i,s=this,o=e;if(null!=this.o.semantic&&"object"==t(this.o.semantic)&&this.o.semantic.hasOwnProperty(e))i=this.o.semantic[e];else{if(!0!==this.o.semantic||!this.DEFAULT_SEMANTIC_MAP.hasOwnProperty(e))return;i=this.DEFAULT_SEMANTIC_MAP[e]}a&&(e=i,i=o),r(e,this.$ed).each((function(){var t=!1,e=r(this);if(0===e.contents().length)return!1;s.range&&s.range.startContainer.parentNode===this&&(t=!0);var a=r("<"+i+"/>");a.insertBefore(e),n&&r.each(e.prop("attributes"),(function(){a.attr(this.name,this.value)})),a.html(e.html()),e.remove(),!0===t&&(s.range.selectNodeContents(a.get(0)),s.range.collapse(!1))}))},createLink:function(){for(var t,e,n,a=this,i=a.doc.getSelection(),s=i.getRangeAt(0),o=i.focusNode,c=(new XMLSerializer).serializeToString(s.cloneContents())||s+"";["A","DIV"].indexOf(o.nodeName)<0;)o=o.parentNode;if(o&&"A"===o.nodeName){var l=r(o);c=l.text(),t=l.attr("href"),a.o.minimalLinks||(e=l.attr("title"),n=l.attr("target")||a.o.defaultLinkTarget);var u=a.doc.createRange();u.selectNode(o),i.removeAllRanges(),i.addRange(u)}a.saveRange();var d={url:{label:a.lang.linkUrl||"URL",required:!0,value:t},text:{label:a.lang.text,value:c}};a.o.minimalLinks||r.extend(d,{title:{label:a.lang.title,value:e},target:{label:a.lang.target,value:n}}),a.openModalInsert(a.lang.createLink,d,(function(t){var e=a.prependUrlPrefix(t.url);if(!e.length)return!1;var n=r(['<a href="',e,'">',t.text||t.url,"</a>"].join(""));return t.title&&n.attr("title",t.title),(t.target||a.o.defaultLinkTarget)&&n.attr("target",t.target||a.o.defaultLinkTarget),a.range.deleteContents(),a.range.insertNode(n[0]),a.syncCode(),a.$c.trigger("tbwchange"),!0}))},prependUrlPrefix:function(t){return this.urlPrefix?/^([a-z][-+.a-z0-9]*:|\/|#)/i.test(t)?t:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?"mailto:"+t:this.urlPrefix+t:t},unlink:function(){var t=this,e=t.doc.getSelection(),n=e.focusNode;if(e.isCollapsed){for(;["A","DIV"].indexOf(n.nodeName)<0;)n=n.parentNode;if(n&&"A"===n.nodeName){var a=t.doc.createRange();a.selectNode(n),e.removeAllRanges(),e.addRange(a)}}t.execCmd("unlink",void 0,void 0,!0)},insertImage:function(){var t=this;t.saveRange();var e={url:{label:"URL",required:!0},alt:{label:t.lang.description,value:t.getRangeText()}};t.o.imageWidthModalEdit&&(e.width={}),t.openModalInsert(t.lang.insertImage,e,(function(e){t.execCmd("insertImage",e.url,!1,!0);var n=r('img[src="'+e.url+'"]:not([alt])',t.$box);return n.attr("alt",e.alt),t.o.imageWidthModalEdit&&n.attr({width:e.width}),t.syncCode(),t.$c.trigger("tbwchange"),!0}))},fullscreen:function(){var t,e=this,a=e.o.prefix,i=a+"fullscreen",s=i+"-placeholder",o=e.$box.outerHeight();e.$box.toggleClass(i),(t=e.$box.hasClass(i))?e.$box.before(r("<div/>",{class:s}).css({height:o})):r("."+s).remove(),r("body").toggleClass(a+"body-fullscreen",t),r(n).trigger("scroll"),e.$c.trigger("tbw"+(t?"open":"close")+"fullscreen")},execCmd:function(t,e,a,i){var s=this;i=!!i||"","dropdown"!==t&&s.$ed.focus(),"strikethrough"===t&&s.o.semantic&&s.semanticTag("strike",s.o.semanticKeepAttributes,!0);try{s.doc.execCommand("styleWithCSS",!1,a||!1)}catch(t){}try{s[t+i](e)}catch(a){try{t(e)}catch(a){"insertHorizontalRule"===t?e=void 0:"formatBlock"===t&&s.isIE&&(e="<"+e+">"),s.doc.execCommand(t,!1,e),s.syncCode(),s.semanticCode(!1,!0);try{var o=n.getSelection().focusNode;r(n.getSelection().focusNode.parentNode).hasClass("trumbowyg-editor")||(o=n.getSelection().focusNode.parentNode);var c=s.o.tagClasses[e];c&&r(o).addClass(c)}catch(t){}}"dropdown"!==t&&(s.updateButtonPaneStatus(),s.$c.trigger("tbwchange"))}},openModal:function(t,e,a){var o=this,c=o.o.prefix;if(a=!1!==a,r("."+c+"modal-box",o.$box).length>0)return!1;o.o.autogrowOnEnter&&(o.autogrowOnEnterDontClose=!0),o.saveRange(),o.showOverlay(),o.$btnPane.addClass(c+"disable");var l,u=r("<div/>",{class:c+"modal "+c+"fixed-top"}).css({top:o.$box.offset().top+o.$btnPane.height(),zIndex:99999}).appendTo(r(o.doc.body));o.$overlay.one("click",(function(){return u.trigger(s),!1})),l=a?r("<form/>",{action:"",html:e}).on("submit",(function(){return u.trigger(i),!1})).on("reset",(function(){return u.trigger(s),!1})).on("submit reset",(function(){o.o.autogrowOnEnter&&(o.autogrowOnEnterDontClose=!1)})):e;var d=r("<div/>",{class:c+"modal-box",html:l}).css({top:"-"+o.$btnPane.outerHeight(),opacity:0,paddingBottom:a?null:"5%"}).appendTo(u).animate({top:0,opacity:1},100);return t&&r("<span/>",{text:t,class:c+"modal-title"}).prependTo(d),a&&(r(":input:first",d).focus(),o.buildModalBtn("submit",d),o.buildModalBtn("reset",d),u.height(d.outerHeight()+10)),r(n).trigger("scroll"),o.$c.trigger("tbwmodalopen"),u},buildModalBtn:function(t,e){var n=this.o.prefix;return r("<button/>",{class:n+"modal-button "+n+"modal-"+t,type:t,text:this.lang[t]||t}).appendTo(r("form",e))},closeModal:function(){var t=this,e=t.o.prefix;t.$btnPane.removeClass(e+"disable"),t.$overlay.off();var n=r("."+e+"modal-box",r(t.doc.body));n.animate({top:"-"+n.height()},100,(function(){n.parent().remove(),t.hideOverlay(),t.$c.trigger("tbwmodalclose")})),t.restoreRange()},openModalInsert:function(t,e,n){var a=this,o=a.o.prefix,c=a.lang,l="",u=o+"form-"+Date.now()+"-";return r.each(e,(function(t,e){var n=e.label||t,a=e.name||t,r=e.attributes||{},i=u+t,s=Object.keys(r).map((function(t){return t+'="'+r[t]+'"'})).join(" ");"function"==typeof e.type?(e.name||(e.name=a),l+=e.type(e,i,o,c)):(l+='<div class="'+o+'input-row"><div class="'+o+'input-infos"><label for="'+i+'"><span>'+(c[n]?c[n]:n)+'</span></label></div><div class="'+o+'input-html"><input id="'+i+'" type="'+(e.type||"text")+'" name="'+a+'" '+s,l+=("checkbox"===e.type&&e.value?' checked="checked"':"")+' value="'+(e.value||"").replace(/"/g,"&quot;")+'"></div>',l+="</div>")})),a.openModal(t,l).on(i,(function(){var t=r("form",r(this)),s=!0,o={};r.each(e,(function(e,n){var i=n.name||e,c=r(':input[name="'+i+'"]',t);switch(c[0].type.toLowerCase()){case"checkbox":o[i]=c.is(":checked");break;case"radio":o[i]=c.filter(":checked").val();break;default:o[i]=r.trim(c.val())}n.required&&""===o[i]?(s=!1,a.addErrorOnModalField(c,a.lang.required)):n.pattern&&!n.pattern.test(o[i])&&(s=!1,a.addErrorOnModalField(c,n.patternError))})),s&&(a.restoreRange(),n(o,e)&&(a.syncCode(),a.$c.trigger("tbwchange"),a.closeModal(),r(this).off(i)))})).one(s,(function(){r(this).off(i),a.closeModal()}))},addErrorOnModalField:function(t,e){var n=this.o.prefix,a=n+"msg-error",i=t.closest("."+n+"input-row");t.on("change keyup",(function(){i.removeClass(n+"input-error"),setTimeout((function(){i.find("."+a).remove()}),150)})),i.addClass(n+"input-error").find("."+n+"input-infos label").append(r("<span/>",{class:a,text:e}))},getDefaultImgDblClickHandler:function(){var t=this;return function(){var e=r(this),n=e.attr("src"),a="(Base64)";0===n.indexOf("data:image")&&(n=a);var i={url:{label:"URL",value:n,required:!0},alt:{label:t.lang.description,value:e.attr("alt")}};return t.o.imageWidthModalEdit&&(i.width={value:e.attr("width")?e.attr("width"):""}),t.openModalInsert(t.lang.insertImage,i,(function(n){return n.url!==a&&e.attr({src:n.url}),e.attr({alt:n.alt}),t.o.imageWidthModalEdit&&(parseInt(n.width)>0?e.attr({width:n.width}):e.removeAttr("width")),!0})),!1}},saveRange:function(){var t=this,e=t.doc.getSelection();if(t.range=null,e&&e.rangeCount){var n,a=t.range=e.getRangeAt(0),r=t.doc.createRange();r.selectNodeContents(t.$ed[0]),r.setEnd(a.startContainer,a.startOffset),n=(r+"").length,t.metaRange={start:n,end:n+(a+"").length}}},restoreRange:function(){var t,e=this,n=e.metaRange,a=e.range,r=e.doc.getSelection();if(a){if(n&&n.start!==n.end){var i,s=0,o=[e.$ed[0]],c=!1,l=!1;for(t=e.doc.createRange();!l&&(i=o.pop());)if(3===i.nodeType){var u=s+i.length;!c&&n.start>=s&&n.start<=u&&(t.setStart(i,n.start-s),c=!0),c&&n.end>=s&&n.end<=u&&(t.setEnd(i,n.end-s),l=!0),s=u}else for(var d=i.childNodes,f=d.length;f>0;)f-=1,o.push(d[f])}try{r.removeAllRanges()}catch(t){}r.addRange(t||a)}},getRangeText:function(){return this.range+""},clearButtonPaneStatus:function(){var t=this,e=t.o.prefix,n=e+"active-button "+e+"active",a=e+"original-icon";r("."+e+"active-button",t.$btnPane).removeClass(n),r("."+a,t.$btnPane).each((function(){r(this).find("svg use").attr("xlink:href",r(this).data(a))}))},updateButtonPaneStatus:function(){var t=this,e=t.o.prefix,n=e+"active-button "+e+"active",a=e+"original-icon",i=t.getTagsRecursive(t.doc.getSelection().focusNode);t.clearButtonPaneStatus(),r.each(i,(function(i,s){var o=t.tagToButton[s.toLowerCase()],c=r("."+e+o+"-button",t.$btnPane);if(c.length>0)c.addClass(n);else try{var l=(c=r("."+e+"dropdown ."+e+o+"-dropdown-button",t.$box)).find("svg use"),u=c.parent().data(e+"dropdown"),d=r("."+e+u+"-button",t.$box),f=d.find("svg use");d.addClass(n),t.o.changeActiveDropdownIcon&&l.length>0&&(d.addClass(a).data(a,f.attr("xlink:href")),f.attr("xlink:href",l.attr("xlink:href")))}catch(t){}}))},getTagsRecursive:function(t,e){var n=this;if(e=e||(t&&t.tagName?[t.tagName]:[]),!t||!t.parentNode)return e;var a=(t=t.parentNode).tagName;return"DIV"===a?e:("P"===a&&""!==t.style.textAlign&&e.push(t.style.textAlign),r.each(n.tagHandlers,(function(a,r){e=e.concat(r(t,n))})),e.push(a),n.getTagsRecursive(t,e).filter((function(t){return null!=t})))},initPlugins:function(){var t=this;t.loadedPlugins=[],r.each(r.trumbowyg.plugins,(function(e,n){n.shouldInit&&!n.shouldInit(t)||(n.init(t),n.tagHandler&&t.tagHandlers.push(n.tagHandler),t.loadedPlugins.push(n))}))},destroyPlugins:function(){var t=this;r.each(this.loadedPlugins,(function(e,n){n.destroy&&n.destroy(t)}))}}}(navigator,window,document,jQuery)},34796:function(t,e,n){var a,r,i,s;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=n.nmd(t),s=function(){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==o(t)&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=67)}([function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e,n){var a=n(25)("wks"),r=n(27),i=n(2).Symbol,s="function"==typeof i;(t.exports=function(t){return a[t]||(a[t]=s&&i[t]||(s?i:r)("Symbol."+t))}).store=a},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){t.exports=!n(8)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){var a=n(2),r=n(0),i=n(19),s=n(5),o=n(9),c=function t(e,n,c){var l,u,d,f=e&t.F,h=e&t.G,p=e&t.S,m=e&t.P,v=e&t.B,g=e&t.W,_=h?r:r[n]||(r[n]={}),y=_.prototype,b=h?a:p?a[n]:(a[n]||{}).prototype;for(l in h&&(c=n),c)(u=!f&&b&&void 0!==b[l])&&o(_,l)||(d=u?b[l]:c[l],_[l]=h&&"function"!=typeof b[l]?c[l]:v&&u?i(d,a):g&&b[l]==d?function(t){var e=function(e,n,a){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,a)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(d):m&&"function"==typeof d?i(Function.call,d):d,m&&((_.virtual||(_.virtual={}))[l]=d,e&t.R&&y&&!y[l]&&s(y,l,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var a=n(6),r=n(13);t.exports=n(3)?function(t,e,n){return a.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var a=n(7),r=n(36),i=n(37),s=Object.defineProperty;e.f=n(3)?Object.defineProperty:function(t,e,n){if(a(t),e=i(e,!0),a(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var a=n(12);t.exports=function(t){if(!a(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var a=n(15);t.exports=function(t){return Object(a(t))}},function(t,e,n){t.exports={default:n(62),__esModule:!0}},function(t,e){t.exports=function(t){return"object"==o(t)?null!==t:"function"==typeof t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var a=n(39),r=n(28);t.exports=Object.keys||function(t){return a(t,r)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,a=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?a:n)(t)}},function(t,e,n){var a=n(25)("keys"),r=n(27);t.exports=function(t){return a[t]||(a[t]=r(t))}},function(t,e){t.exports={}},function(t,e,n){var a=n(35);t.exports=function(t,e,n){if(a(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,a){return t.call(e,n,a)};case 3:return function(n,a,r){return t.call(e,n,a,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var a=n(12),r=n(2).document,i=a(r)&&a(r.createElement);t.exports=function(t){return i?r.createElement(t):{}}},function(t,e,n){var a=n(22),r=n(15);t.exports=function(t){return a(r(t))}},function(t,e,n){var a=n(23);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==a(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var a=n(16),r=Math.min;t.exports=function(t){return t>0?r(a(t),9007199254740991):0}},function(t,e,n){var a=n(0),r=n(2),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:a.version,mode:n(26)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!0},function(t,e){var n=0,a=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+a).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var a=n(6).f,r=n(9),i=n(1)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,i)&&a(t,i,{configurable:!0,value:e})}},function(t,e,n){t.exports={default:n(33),__esModule:!0}},function(t){t.exports=JSON.parse('{"name":"vue-json-pretty","version":"1.7.1","description":"A JSON tree view component that is easy to use and also supports data selection.","author":"leezng <im.leezng@gmail.com>","main":"lib/vue-json-pretty.js","scripts":{"dev":"node build/dev-server.js","build":"node build/build.js","build:example":"cross-env EXAMPLE_ENV=true node build/build.js","e2e":"node test/e2e/runner.js","test":"npm run e2e","lint":"eslint --ext .js,.vue src test/e2e/specs example"},"repository":{"type":"git","url":"git@github.com:leezng/vue-json-pretty.git"},"homepage":"https://leezng.github.io/vue-json-pretty","keywords":["vue","json","format","pretty","vue-component"],"license":"MIT","bugs":{"url":"https://github.com/leezng/vue-json-pretty/issues"},"devDependencies":{"autoprefixer":"^7.1.2","babel-core":"^6.26.3","babel-loader":"7","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.7.0","babel-preset-stage-2":"^6.24.1","chalk":"^2.0.1","clean-webpack-plugin":"^3.0.0","connect-history-api-fallback":"^1.3.0","copy-webpack-plugin":"^6.0.2","cross-env":"^7.0.2","cross-spawn":"^5.0.1","css-loader":"^0.28.0","cssnano":"^3.10.0","eslint":"^7.3.1","eslint-friendly-formatter":"^4.0.1","eslint-loader":"^4.0.2","eslint-plugin-vue":"^6.2.2","eventsource-polyfill":"^0.9.6","express":"^4.17.1","file-loader":"^6.0.0","friendly-errors-webpack-plugin":"^1.7.0","html-webpack-plugin":"^4.3.0","http-proxy-middleware":"^0.17.3","less":"^3.11.3","less-loader":"^6.1.2","mini-css-extract-plugin":"^0.9.0","nightwatch":"^1.0.19","opn":"^5.1.0","optimize-css-assets-webpack-plugin":"^5.0.3","selenium-server":"^3.0.1","semver":"^5.3.0","shelljs":"^0.7.6","url-loader":"^4.1.0","vue":"^2.6.11","vue-loader":"^14.2.4","vue-style-loader":"^4.1.2","vue-template-compiler":"^2.6.11","webpack":"^4.43.0","webpack-bundle-analyzer":"^3.8.0","webpack-dev-middleware":"^3.7.2","webpack-hot-middleware":"^2.25.0","webpack-merge":"^4.1.0"},"engines":{"node":">= 10.0.0","npm":">= 5.0.0"},"browserslist":["> 1%","last 10 versions","not ie <= 11"],"files":["lib"],"dependencies":{}}')},function(t,e,n){"use strict";e.__esModule=!0;var a,r=(a=n(44))&&a.__esModule?a:{default:a};e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}},function(t,e,n){n(34),t.exports=n(0).Object.assign},function(t,e,n){var a=n(4);a(a.S+a.F,"Object",{assign:n(38)})},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){t.exports=!n(3)&&!n(8)((function(){return 7!=Object.defineProperty(n(20)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var a=n(12);t.exports=function(t,e){if(!a(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!a(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!a(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!a(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";var a=n(3),r=n(14),i=n(42),s=n(43),o=n(10),c=n(22),l=Object.assign;t.exports=!l||n(8)((function(){var t={},e={},n=Symbol(),a="abcdefghijklmnopqrst";return t[n]=7,a.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=a}))?function(t,e){for(var n=o(t),l=arguments.length,u=1,d=i.f,f=s.f;l>u;)for(var h,p=c(arguments[u++]),m=d?r(p).concat(d(p)):r(p),v=m.length,g=0;v>g;)h=m[g++],a&&!f.call(p,h)||(n[h]=p[h]);return n}:l},function(t,e,n){var a=n(9),r=n(21),i=n(40)(!1),s=n(17)("IE_PROTO");t.exports=function(t,e){var n,o=r(t),c=0,l=[];for(n in o)n!=s&&a(o,n)&&l.push(n);for(;e.length>c;)a(o,n=e[c++])&&(~i(l,n)||l.push(n));return l}},function(t,e,n){var a=n(21),r=n(24),i=n(41);t.exports=function(t){return function(e,n,s){var o,c=a(e),l=r(c.length),u=i(s,l);if(t&&n!=n){for(;l>u;)if((o=c[u++])!=o)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}}},function(t,e,n){var a=n(16),r=Math.max,i=Math.min;t.exports=function(t,e){return(t=a(t))<0?r(t+e,0):i(t,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){t.exports={default:n(45),__esModule:!0}},function(t,e,n){n(46),n(55),t.exports=n(0).Array.from},function(t,e,n){"use strict";var a=n(47)(!0);n(48)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=a(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e,n){var a=n(16),r=n(15);t.exports=function(t){return function(e,n){var i,s,o=String(r(e)),c=a(n),l=o.length;return c<0||c>=l?t?"":void 0:(i=o.charCodeAt(c))<55296||i>56319||c+1===l||(s=o.charCodeAt(c+1))<56320||s>57343?t?o.charAt(c):i:t?o.slice(c,c+2):s-56320+(i-55296<<10)+65536}}},function(t,e,n){"use strict";var a=n(26),r=n(4),i=n(49),s=n(5),o=n(18),c=n(50),l=n(29),u=n(54),d=n(1)("iterator"),f=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,p,m,v,g){c(n,e,p);var _,y,b,C=function(t){if(!f&&t in S)return S[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",k="values"==m,x=!1,S=t.prototype,E=S[d]||S["@@iterator"]||m&&S[m],T=E||C(m),A=m?k?C("entries"):T:void 0,R="Array"==e&&S.entries||E;if(R&&(b=u(R.call(new t)))!==Object.prototype&&b.next&&(l(b,w,!0),a||"function"==typeof b[d]||s(b,d,h)),k&&E&&"values"!==E.name&&(x=!0,T=function(){return E.call(this)}),a&&!g||!f&&!x&&S[d]||s(S,d,T),o[e]=T,o[w]=h,m)if(_={values:k?T:C("values"),keys:v?T:C("keys"),entries:A},g)for(y in _)y in S||i(S,y,_[y]);else r(r.P+r.F*(f||x),e,_);return _}},function(t,e,n){t.exports=n(5)},function(t,e,n){"use strict";var a=n(51),r=n(13),i=n(29),s={};n(5)(s,n(1)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=a(s,{next:r(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var a=n(7),r=n(52),i=n(28),s=n(17)("IE_PROTO"),o=function(){},c=function(){var t,e=n(20)("iframe"),a=i.length;for(e.style.display="none",n(53).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;a--;)delete c.prototype[i[a]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(o.prototype=a(t),n=new o,o.prototype=null,n[s]=t):n=c(),void 0===e?n:r(n,e)}},function(t,e,n){var a=n(6),r=n(7),i=n(14);t.exports=n(3)?Object.defineProperties:function(t,e){r(t);for(var n,s=i(e),o=s.length,c=0;o>c;)a.f(t,n=s[c++],e[n]);return t}},function(t,e,n){var a=n(2).document;t.exports=a&&a.documentElement},function(t,e,n){var a=n(9),r=n(10),i=n(17)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),a(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){"use strict";var a=n(19),r=n(4),i=n(10),s=n(56),o=n(57),c=n(24),l=n(58),u=n(59);r(r.S+r.F*!n(61)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,r,d,f=i(t),h="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,g=0,_=u(f);if(v&&(m=a(m,p>2?arguments[2]:void 0,2)),null==_||h==Array&&o(_))for(n=new h(e=c(f.length));e>g;g++)l(n,g,v?m(f[g],g):f[g]);else for(d=_.call(f),n=new h;!(r=d.next()).done;g++)l(n,g,v?s(d,m,[r.value,g],!0):r.value);return n.length=g,n}})},function(t,e,n){var a=n(7);t.exports=function(t,e,n,r){try{return r?e(a(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&a(i.call(t)),e}}},function(t,e,n){var a=n(18),r=n(1)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(a.Array===t||i[r]===t)}},function(t,e,n){"use strict";var a=n(6),r=n(13);t.exports=function(t,e,n){e in t?a.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){var a=n(60),r=n(1)("iterator"),i=n(18);t.exports=n(0).getIteratorMethod=function(t){if(null!=t)return t[r]||t["@@iterator"]||i[a(t)]}},function(t,e,n){var a=n(23),r=n(1)("toStringTag"),i="Arguments"==a(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?n:i?a(e):"Object"==(s=a(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var a=n(1)("iterator"),r=!1;try{var i=[7][a]();i.return=function(){r=!0},Array.from(i,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var i=[7],s=i[a]();s.next=function(){return{done:n=!0}},i[a]=function(){return s},t(i)}catch(t){}return n}},function(t,e,n){n(63),t.exports=n(0).Object.keys},function(t,e,n){var a=n(10),r=n(14);n(64)("keys",(function(){return function(t){return r(a(t))}}))},function(t,e,n){var a=n(4),r=n(0),i=n(8);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),a(a.S+a.F*i((function(){n(1)})),"Object",s)}},function(t,e,n){var a=n(66);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals),(0,n(68).default)("4e38e324",a,!0,{})},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(30),r=n.n(a),i=n(31),s=n(32),c=n.n(s),l=n(11),u=n.n(l);function d(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function f(t,e,n,a,r,i,s,c){var l=o((t=t||{}).default);"object"!==l&&"function"!==l||(t=t.default);var u,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=n,d._compiled=!0),a&&(d.functional=!0),i&&(d._scopeId=i),s?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},d._ssrRegister=u):r&&(u=c?function(){r.call(this,this.$root.$options.shadowRoot)}:r),u)if(d.functional){d._injectStyles=u;var f=d.render;d.render=function(t,e){return u.call(e),f(t,e)}}else{var h=d.beforeCreate;d.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:d}}var h=f({props:{showDoubleQuotes:Boolean,parentData:{type:[String,Number,Boolean,Array,Object],default:null},data:{type:[String,Number,Boolean],default:""},showComma:Boolean,currentKey:{type:[Number,String],default:""},customValueFormatter:{type:Function,default:null}},computed:{valueClass:function(){return"vjs-value vjs-value__"+this.dataType},dataType:function(){return d(this.data)}},methods:{defaultFormatter:function(t){var e=t+"";return"string"===this.dataType&&(e='"'+e+'"'),e},customFormatter:function(t){return this.customValueFormatter?this.customValueFormatter(t,this.currentKey,this.parentData,this.defaultFormatter(t)):this.defaultFormatter(t)}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("default"),t._v(" "),t.customValueFormatter?n("span",{class:t.valueClass,domProps:{innerHTML:t._s(t.customFormatter(t.data))}}):n("span",{class:t.valueClass},[t._v(t._s(t.defaultFormatter(t.data)))]),t.showComma?n("span",[t._v(",")]):t._e()],2)}),[],!1,null,null,null).exports,p=f({props:{value:{type:Boolean,default:!1}},data:function(){return{focus:!1}},computed:{model:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{class:["vjs-checkbox",t.value?"is-checked":""],on:{click:function(t){t.stopPropagation()}}},[n("span",{staticClass:"vjs-checkbox__inner"}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"vjs-checkbox__original",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.model)?t._i(t.model,null)>-1:t.model},on:{change:[function(e){var n=t.model,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&(t.model=n.concat([null])):i>-1&&(t.model=n.slice(0,i).concat(n.slice(i+1)))}else t.model=r},function(e){return t.$emit("change",t.model)}],focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}})])}),[],!1,null,null,null).exports,m=f({props:{path:{type:String,default:""},value:{type:String,default:""}},data:function(){return{focus:!1}},computed:{currentPath:function(){return this.path},model:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{change:function(){this.$emit("change",this.model)}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{class:["vjs-radio",t.model===t.currentPath?"is-checked":""],on:{click:function(t){t.stopPropagation()}}},[n("span",{staticClass:"vjs-radio__inner"}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"vjs-radio__original",attrs:{type:"radio"},domProps:{value:t.currentPath,checked:t._q(t.model,t.currentPath)},on:{change:[function(e){t.model=t.currentPath},t.change],focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}})])}),[],!1,null,null,null).exports,v={props:{visible:{required:!0,type:Boolean},data:{required:!0},showComma:Boolean,collapsedOnClickBrackets:Boolean},computed:{dataVisiable:{get:function(){return this.visible},set:function(t){this.collapsedOnClickBrackets&&this.$emit("update:visible",t)}}},methods:{toggleBrackets:function(){this.dataVisiable=!this.dataVisiable},bracketsFormatter:function(t){return this.showComma?t+",":t}}},g=f({mixins:[v],props:{showLength:Boolean},methods:{closedBracketsGenerator:function(t){var e=Array.isArray(t)?"[...]":"{...}";return this.bracketsFormatter(e)},lengthGenerator:function(t){return" // "+(Array.isArray(t)?t.length+" items":u()(t).length+" keys")}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("default"),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.dataVisiable,expression:"dataVisiable"}],staticClass:"vjs-tree__brackets",on:{click:function(e){return e.stopPropagation(),t.toggleBrackets(e)}}},[t._v("\n    "+t._s(Array.isArray(t.data)?"[":"{")+"\n  ")]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.dataVisiable,expression:"!dataVisiable"}]},[n("span",{staticClass:"vjs-tree__brackets",on:{click:function(e){return e.stopPropagation(),t.toggleBrackets(e)}}},[t._v("\n      "+t._s(t.closedBracketsGenerator(t.data))+"\n    ")]),t._v(" "),t.showLength?n("span",{staticClass:"vjs-comment"},[t._v("\n      "+t._s(t.lengthGenerator(t.data))+"\n    ")]):t._e()])],2)}),[],!1,null,null,null).exports,_=f({mixins:[v]},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.dataVisiable,expression:"dataVisiable"}]},[n("span",{staticClass:"vjs-tree__brackets",on:{click:function(e){return e.stopPropagation(),t.toggleBrackets(e)}}},[t._v("\n    "+t._s(t.bracketsFormatter(Array.isArray(t.data)?"]":"}"))+"\n  ")])])}),[],!1,null,null,null),y=f({name:"VueJsonPretty",components:{SimpleText:h,VueCheckbox:p,VueRadio:m,BracketsLeft:g,BracketsRight:_.exports},props:{data:{type:[String,Number,Boolean,Array,Object],default:null},deep:{type:Number,default:1/0},showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},path:{type:String,default:"root"},selectableType:{type:String,default:""},showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},selectOnClickNode:{type:Boolean,default:!0},value:{type:[Array,String],default:function(){return""}},pathSelectable:{type:Function,default:function(){return!0}},highlightMouseoverNode:{type:Boolean,default:!1},highlightSelectedNode:{type:Boolean,default:!0},collapsedOnClickBrackets:{type:Boolean,default:!0},customValueFormatter:{type:Function,default:null},parentData:{type:[String,Number,Boolean,Array,Object],default:null},currentDeep:{type:Number,default:1},currentKey:{type:[Number,String],default:""}},data:function(){return{visible:this.currentDeep<=this.deep,isMouseover:!1,currentCheckboxVal:!!Array.isArray(this.value)&&this.value.includes(this.path)}},computed:{model:{get:function(){var t="multiple"===this.selectableType?[]:"single"===this.selectableType?"":null;return this.value||t},set:function(t){this.$emit("input",t)}},lastKey:function(){if(Array.isArray(this.parentData))return this.parentData.length-1;if(this.isObject(this.parentData)){var t=u()(this.parentData);return t[t.length-1]}return""},notLastKey:function(){return this.currentKey!==this.lastKey},selectable:function(){return this.pathSelectable(this.path,this.data)&&(this.isMultiple||this.isSingle)},isMultiple:function(){return"multiple"===this.selectableType},isSingle:function(){return"single"===this.selectableType},isSelected:function(){return this.isMultiple?this.model.includes(this.path):!!this.isSingle&&this.model===this.path},prettyKey:function(){return this.showDoubleQuotes?'"'+this.currentKey+'"':this.currentKey},propsError:function(){return!this.selectableType||this.selectOnClickNode||this.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}},watch:{deep:function(t){this.visible=this.currentDeep<=t},propsError:{handler:function(t){if(t)throw new Error("[vue-json-pretty] "+t)},immediate:!0}},methods:{handleValueChange:function(t){var e=this;if(!this.isMultiple||"checkbox"!==t&&"tree"!==t){if(this.isSingle&&("radio"===t||"tree"===t)&&this.model!==this.path){var n=this.model,a=this.path;this.model=a,this.$emit("change",a,n)}}else{var r=this.model.findIndex((function(t){return t===e.path})),i=[].concat(c()(this.model));-1!==r?this.model.splice(r,1):this.model.push(this.path),"checkbox"!==t&&(this.currentCheckboxVal=!this.currentCheckboxVal),this.$emit("change",this.model,i)}},handleClick:function(t){t._uid&&t._uid!==this._uid||(t._uid=this._uid,this.$emit("click",this.path,this.data),this.selectable&&this.selectOnClickNode&&this.handleValueChange("tree"))},handleItemClick:function(t,e){this.$emit("click",t,e)},handleItemChange:function(t,e){this.selectable&&this.$emit("change",t,e)},handleMouseover:function(){this.highlightMouseoverNode&&(this.selectable||""===this.selectableType)&&(this.isMouseover=!0)},handleMouseout:function(){this.highlightMouseoverNode&&(this.selectable||""===this.selectableType)&&(this.isMouseover=!1)},isObject:function(t){return"object"===d(t)},getChildPath:function(t){return this.path+(Array.isArray(this.data)?"["+t+"]":t.includes(".")?'["'+t+'"]':"."+t)}},errorCaptured:function(){return!1}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"vjs-tree":!0,"has-selectable-control":t.isMultiple||t.showSelectController,"is-root":1===t.currentDeep,"is-selectable":t.selectable,"is-selected":t.isSelected,"is-highlight-selected":t.isSelected&&t.highlightSelectedNode,"is-mouseover":t.isMouseover},on:{click:t.handleClick,mouseover:function(e){return e.stopPropagation(),t.handleMouseover(e)},mouseout:function(e){return e.stopPropagation(),t.handleMouseout(e)}}},[t.showSelectController&&t.selectable?[t.isMultiple?n("vue-checkbox",{on:{change:function(e){return t.handleValueChange("checkbox")}},model:{value:t.currentCheckboxVal,callback:function(e){t.currentCheckboxVal=e},expression:"currentCheckboxVal"}}):t.isSingle?n("vue-radio",{attrs:{path:t.path},on:{change:function(e){return t.handleValueChange("radio")}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}):t._e()]:t._e(),t._v(" "),Array.isArray(t.data)||t.isObject(t.data)?[n("brackets-left",{attrs:{visible:t.visible,data:t.data,"show-length":t.showLength,"collapsed-on-click-brackets":t.collapsedOnClickBrackets,"show-comma":t.notLastKey},on:{"update:visible":function(e){t.visible=e}}},[t.currentDeep>1&&!Array.isArray(t.parentData)?n("span",{staticClass:"vjs-key"},[t._v("\n        "+t._s(t.prettyKey)+":\n      ")]):t._e()]),t._v(" "),t._l(t.data,(function(e,a){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],key:a,class:{"vjs-tree__content":!0,"has-line":t.showLine}},[n("vue-json-pretty",{attrs:{"parent-data":t.data,data:e,deep:t.deep,"show-length":t.showLength,"show-double-quotes":t.showDoubleQuotes,"show-line":t.showLine,"highlight-mouseover-node":t.highlightMouseoverNode,"highlight-selected-node":t.highlightSelectedNode,path:t.getChildPath(a),"path-selectable":t.pathSelectable,"selectable-type":t.selectableType,"show-select-controller":t.showSelectController,"select-on-click-node":t.selectOnClickNode,"collapsed-on-click-brackets":t.collapsedOnClickBrackets,"current-key":a,"current-deep":t.currentDeep+1,"custom-value-formatter":t.customValueFormatter},on:{click:t.handleItemClick,change:t.handleItemChange},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)})),t._v(" "),n("brackets-right",{attrs:{visible:t.visible,data:t.data,"collapsed-on-click-brackets":t.collapsedOnClickBrackets,"show-comma":t.notLastKey},on:{"update:visible":function(e){t.visible=e}}})]:n("simple-text",{attrs:{"custom-value-formatter":t.customValueFormatter,"show-double-quotes":t.showDoubleQuotes,"show-comma":t.notLastKey,"parent-data":t.parentData,data:t.data,"current-key":t.currentKey}},[t.parentData&&t.currentKey&&!Array.isArray(t.parentData)?n("span",{staticClass:"vjs-key"},[t._v("\n      "+t._s(t.prettyKey)+":\n    ")]):t._e()])],2)}),[],!1,null,null,null).exports;n(65),e.default=r()({},y,{version:i.version})},function(t,e,n){"use strict";function a(t,e){for(var n=[],a={},r=0;r<e.length;r++){var i=e[r],s=i[0],o={id:t+":"+r,css:i[1],media:i[2],sourceMap:i[3]};a[s]?a[s].parts.push(o):n.push(a[s]={id:s,parts:[o]})}return n}n.r(e),n.d(e,"default",(function(){return h}));var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},s=r&&(document.head||document.getElementsByTagName("head")[0]),o=null,c=0,l=!1,u=function(){},d=null,f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(t,e,n,r){l=n,d=r||{};var s=a(t,e);return p(s),function(e){for(var n=[],r=0;r<s.length;r++){var o=s[r];(c=i[o.id]).refs--,n.push(c)}for(e?p(s=a(t,e)):s=[],r=0;r<n.length;r++){var c;if(0===(c=n[r]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete i[c.id]}}}}function p(t){for(var e=0;e<t.length;e++){var n=t[e],a=i[n.id];if(a){a.refs++;for(var r=0;r<a.parts.length;r++)a.parts[r](n.parts[r]);for(;r<n.parts.length;r++)a.parts.push(v(n.parts[r]));a.parts.length>n.parts.length&&(a.parts.length=n.parts.length)}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(v(n.parts[r]));i[n.id]={id:n.id,refs:1,parts:s}}}}function m(){var t=document.createElement("style");return t.type="text/css",s.appendChild(t),t}function v(t){var e,n,a=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(a){if(l)return u;a.parentNode.removeChild(a)}if(f){var r=c++;a=o||(o=m()),e=y.bind(null,a,r,!1),n=y.bind(null,a,r,!0)}else a=m(),e=b.bind(null,a),n=function(){a.parentNode.removeChild(a)};return e(t),function(a){if(a){if(a.css===t.css&&a.media===t.media&&a.sourceMap===t.sourceMap)return;e(t=a)}else n()}}var g,_=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function y(t,e,n,a){var r=n?"":a.css;if(t.styleSheet)t.styleSheet.cssText=_(e,r);else{var i=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function b(t,e){var n=e.css,a=e.media,r=e.sourceMap;if(a&&t.setAttribute("media",a),d.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}}])},"object"==o(e)&&"object"==o(t)?t.exports=s():(r=[],void 0===(i="function"==typeof(a=s)?a.apply(e,r):a)||(t.exports=i))},47535:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var a=n(23645),r=n.n(a)()((function(t){return t[1]}));r.push([t.id,'.vjs-checkbox{position:absolute;left:-30px;color:#1f2d3d;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vjs-checkbox.is-checked .vjs-checkbox__inner{background-color:#1890ff;border-color:#0076e4}.vjs-checkbox.is-checked .vjs-checkbox__inner:after{-webkit-transform:rotate(45deg) scaleY(1);transform:rotate(45deg) scaleY(1)}.vjs-checkbox .vjs-checkbox__inner{display:inline-block;position:relative;border:1px solid #bfcbd9;border-radius:2px;vertical-align:middle;-webkit-box-sizing:border-box;box-sizing:border-box;width:16px;height:16px;background-color:#fff;z-index:1;cursor:pointer;-webkit-transition:border-color .25s cubic-bezier(.71,-.46,.29,1.46),background-color .25s cubic-bezier(.71,-.46,.29,1.46);-o-transition:border-color .25s cubic-bezier(.71,-.46,.29,1.46),background-color .25s cubic-bezier(.71,-.46,.29,1.46);transition:border-color .25s cubic-bezier(.71,-.46,.29,1.46),background-color .25s cubic-bezier(.71,-.46,.29,1.46)}.vjs-checkbox .vjs-checkbox__inner:after{-webkit-box-sizing:content-box;box-sizing:content-box;content:"";border:2px solid #fff;border-left:0;border-top:0;height:8px;left:4px;position:absolute;top:1px;-webkit-transform:rotate(45deg) scaleY(0);transform:rotate(45deg) scaleY(0);width:4px;-webkit-transition:-webkit-transform .15s cubic-bezier(.71,-.46,.88,.6) .05s;transition:-webkit-transform .15s cubic-bezier(.71,-.46,.88,.6) .05s;-o-transition:transform .15s cubic-bezier(.71,-.46,.88,.6) .05s;transition:transform .15s cubic-bezier(.71,-.46,.88,.6) .05s;transition:transform .15s cubic-bezier(.71,-.46,.88,.6) .05s, -webkit-transform .15s cubic-bezier(.71,-.46,.88,.6) .05s;-webkit-transform-origin:center;transform-origin:center}.vjs-checkbox .vjs-checkbox__original{opacity:0;outline:none;position:absolute;z-index:-1;top:0;left:0;right:0;bottom:0;margin:0}.vjs-radio{position:absolute;left:-30px;color:#1f2d3d;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vjs-radio.is-checked .vjs-radio__inner{background-color:#1890ff;border-color:#0076e4}.vjs-radio.is-checked .vjs-radio__inner:after{-webkit-transform:translate(-50%,-50%) scale(1);transform:translate(-50%,-50%) scale(1)}.vjs-radio .vjs-radio__inner{border:1px solid #bfcbd9;border-radius:100%;width:16px;height:16px;vertical-align:middle;background-color:#fff;position:relative;cursor:pointer;display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box}.vjs-radio .vjs-radio__inner:after{width:4px;height:4px;border-radius:100%;background-color:#fff;content:"";position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%) scale(0);transform:translate(-50%,-50%) scale(0);-webkit-transition:-webkit-transform .15s ease-in;transition:-webkit-transform .15s ease-in;-o-transition:transform .15s ease-in;transition:transform .15s ease-in;transition:transform .15s ease-in, -webkit-transform .15s ease-in}.vjs-radio .vjs-radio__original{opacity:0;outline:none;position:absolute;z-index:-1;top:0;left:0;right:0;bottom:0;margin:0}.vjs-tree{font-family:Monaco,Menlo,Consolas,Bitstream Vera Sans Mono,monospace;font-size:14px}.vjs-tree.is-root{position:relative}.vjs-tree.is-root.has-selectable-control{margin-left:30px}.vjs-tree.is-mouseover{background-color:#e6f7ff}.vjs-tree.is-highlight-selected{background-color:#ccefff}.vjs-tree .vjs-tree__content{padding-left:1em}.vjs-tree .vjs-tree__content.has-line{border-left:1px dotted #bfcbd9}.vjs-tree .vjs-tree__brackets{cursor:pointer}.vjs-tree .vjs-tree__brackets:hover{color:#1890ff}.vjs-tree .vjs-comment{color:#bfcbd9}.vjs-tree .vjs-value__null{color:#ff4949}.vjs-tree .vjs-value__boolean,.vjs-tree .vjs-value__number{color:#1d8ce0}.vjs-tree .vjs-value__string{color:#13ce66}',""]);const i=r},89297:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var a=n(23645),r=n.n(a)()((function(t){return t[1]}));r.push([t.id,".vjs-tree>div{max-width:100%;overflow:hidden;text-overflow:ellipsis;word-break:break-all}",""]);const i=r},32501:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var a=n(23645),r=n.n(a)()((function(t){return t[1]}));r.push([t.id,"@media(max-width:768px){.shadow_lastTrans{box-shadow:1px -1px 2px 3px var(--app-border-color)!important;width:90%!important}}",""]);const i=r},42542:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var a=n(23645),r=n.n(a)()((function(t){return t[1]}));r.push([t.id,"@media(max-width:768px){.shadow_lastTrans{box-shadow:1px -1px 2px 3px var(--app-border-color)!important;width:90%!important}}",""]);const i=r},970:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var a=n(23645),r=n.n(a)()((function(t){return t[1]}));r.push([t.id,"@media(max-width:768px){.shadow_lastTrans{box-shadow:1px -1px 2px 3px var(--app-border-color)!important;width:90%!important}}",""]);const i=r},49328:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var a=n(23645),r=n.n(a)()((function(t){return t[1]}));r.push([t.id,".app-nick-theme .slider-text-shadow .ui-slider-handle{width:3em;height:1.6em;top:50%;margin-top:-.8em;text-align:center;line-height:1.6em}",""]);const i=r},23645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,a){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(a)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(r[s]=!0)}for(var o=0;o<t.length;o++){var c=[].concat(t[o]);a&&r[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},82702:function(t,e,n){var a=n(34155);t.exports=function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function e(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,s=void 0,o=void 0,c=function(t,e){C[i]=t,C[i+1]=e,2===(i+=2)&&(o?o(w):x())};function l(t){o=t}function u(t){c=t}var d="undefined"!=typeof window?window:void 0,f=d||{},h=f.MutationObserver||f.WebKitMutationObserver,p="undefined"==typeof self&&void 0!==a&&"[object process]"==={}.toString.call(a),m="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function v(){return function(){return a.nextTick(w)}}function g(){return void 0!==s?function(){s(w)}:b()}function _(){var t=0,e=new h(w),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function y(){var t=new MessageChannel;return t.port1.onmessage=w,function(){return t.port2.postMessage(0)}}function b(){var t=setTimeout;return function(){return t(w,1)}}var C=new Array(1e3);function w(){for(var t=0;t<i;t+=2)(0,C[t])(C[t+1]),C[t]=void 0,C[t+1]=void 0;i=0}function k(){try{var t=Function("return this")().require("vertx");return s=t.runOnLoop||t.runOnContext,g()}catch(t){return b()}}var x=void 0;function S(t,e){var n=this,a=new this.constructor(A);void 0===a[T]&&K(a);var r=n._state;if(r){var i=arguments[r-1];c((function(){return Z(r,a,i,n._result)}))}else V(n,a,t,e);return a}function E(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(A);return j(n,t),n}x=p?v():h?_():m?y():void 0===d?k():b();var T=Math.random().toString(36).substring(2);function A(){}var R=void 0,O=1,$=2;function P(){return new TypeError("You cannot resolve a promise with itself")}function L(){return new TypeError("A promises callback cannot return that same promise.")}function D(t,e,n,a){try{t.call(e,n,a)}catch(t){return t}}function I(t,e,n){c((function(t){var a=!1,r=D(n,e,(function(n){a||(a=!0,e!==n?j(t,n):B(t,n))}),(function(e){a||(a=!0,U(t,e))}),"Settle: "+(t._label||" unknown promise"));!a&&r&&(a=!0,U(t,r))}),t)}function M(t,e){e._state===O?B(t,e._result):e._state===$?U(t,e._result):V(e,void 0,(function(e){return j(t,e)}),(function(e){return U(t,e)}))}function N(t,n,a){n.constructor===t.constructor&&a===S&&n.constructor.resolve===E?M(t,n):void 0===a?B(t,n):e(a)?I(t,n,a):B(t,n)}function j(e,n){if(e===n)U(e,P());else if(t(n)){var a=void 0;try{a=n.then}catch(t){return void U(e,t)}N(e,n,a)}else B(e,n)}function F(t){t._onerror&&t._onerror(t._result),H(t)}function B(t,e){t._state===R&&(t._result=e,t._state=O,0!==t._subscribers.length&&c(H,t))}function U(t,e){t._state===R&&(t._state=$,t._result=e,c(F,t))}function V(t,e,n,a){var r=t._subscribers,i=r.length;t._onerror=null,r[i]=e,r[i+O]=n,r[i+$]=a,0===i&&t._state&&c(H,t)}function H(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var a=void 0,r=void 0,i=t._result,s=0;s<e.length;s+=3)a=e[s],r=e[s+n],a?Z(n,a,r,i):r(i);t._subscribers.length=0}}function Z(t,n,a,r){var i=e(a),s=void 0,o=void 0,c=!0;if(i){try{s=a(r)}catch(t){c=!1,o=t}if(n===s)return void U(n,L())}else s=r;n._state!==R||(i&&c?j(n,s):!1===c?U(n,o):t===O?B(n,s):t===$&&U(n,s))}function G(t,e){try{e((function(e){j(t,e)}),(function(e){U(t,e)}))}catch(e){U(t,e)}}var z=0;function q(){return z++}function K(t){t[T]=z++,t._state=void 0,t._result=void 0,t._subscribers=[]}function W(){return new Error("Array Methods must be provided an Array")}var Y=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(A),this.promise[T]||K(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?B(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&B(this.promise,this._result))):U(this.promise,W())}return t.prototype._enumerate=function(t){for(var e=0;this._state===R&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,a=n.resolve;if(a===E){var r=void 0,i=void 0,s=!1;try{r=t.then}catch(t){s=!0,i=t}if(r===S&&t._state!==R)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(n===nt){var o=new n(A);s?U(o,i):N(o,t,r),this._willSettleAt(o,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(a(t),e)},t.prototype._settledAt=function(t,e,n){var a=this.promise;a._state===R&&(this._remaining--,t===$?U(a,n):this._result[e]=n),0===this._remaining&&B(a,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;V(t,void 0,(function(t){return n._settledAt(O,e,t)}),(function(t){return n._settledAt($,e,t)}))},t}();function X(t){return new Y(this,t).promise}function J(t){var e=this;return r(t)?new e((function(n,a){for(var r=t.length,i=0;i<r;i++)e.resolve(t[i]).then(n,a)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))}function Q(t){var e=new this(A);return U(e,t),e}function tt(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function et(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var nt=function(){function t(e){this[T]=q(),this._result=this._state=void 0,this._subscribers=[],A!==e&&("function"!=typeof e&&tt(),this instanceof t?G(this,e):et())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var n=this,a=n.constructor;return e(t)?n.then((function(e){return a.resolve(t()).then((function(){return e}))}),(function(e){return a.resolve(t()).then((function(){throw e}))})):n.then(t,t)},t}();function at(){var t=void 0;if(void 0!==n.g)t=n.g;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var a=null;try{a=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===a&&!e.cast)return}t.Promise=nt}return nt.prototype.then=S,nt.all=X,nt.race=J,nt.resolve=E,nt.reject=Q,nt._setScheduler=l,nt._setAsap=u,nt._asap=c,nt.polyfill=at,nt.Promise=nt,nt}()},17187:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,a=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function i(){i.init.call(this)}t.exports=i,t.exports.once=function(t,e){return new Promise((function(n,a){function r(n){t.removeListener(e,i),a(n)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",r),n([].slice.call(arguments))}m(t,e,i,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&m(t,"error",e,n)}(t,r,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function o(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function l(t,e,n,a){var r,i,s,l;if(o(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),s=i[e]),void 0===s)s=i[e]=n,++t._eventsCount;else if("function"==typeof s?s=i[e]=a?[n,s]:[s,n]:a?s.unshift(n):s.push(n),(r=c(t))>0&&s.length>r&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,l=u,console&&console.warn&&console.warn(l)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var a={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=u.bind(a);return r.listener=n,a.wrapFn=r,r}function f(t,e,n){var a=t._events;if(void 0===a)return[];var r=a[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):p(r,r.length)}function h(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),a=0;a<e;++a)n[a]=t[a];return n}function m(t,e,n,a){if("function"==typeof t.on)a.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(i){a.once&&t.removeEventListener(e,r),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var c=i[t];if(void 0===c)return!1;if("function"==typeof c)a(c,this,e);else{var l=c.length,u=p(c,l);for(n=0;n<l;++n)a(u[n],this,e)}return!0},i.prototype.addListener=function(t,e){return l(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return l(this,t,e,!0)},i.prototype.once=function(t,e){return o(e),this.on(t,d(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){return o(e),this.prependListener(t,d(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,a,r,i,s;if(o(e),void 0===(a=this._events))return this;if(void 0===(n=a[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){s=n[i].listener,r=i;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(a[t]=n[0]),void 0!==a.removeListener&&this.emit("removeListener",t,s||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,n,a;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,i=Object.keys(n);for(a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(a=e.length-1;a>=0;a--)this.removeListener(t,e[a]);return this},i.prototype.listeners=function(t){return f(this,t,!0)},i.prototype.rawListeners=function(t){return f(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):h.call(t,e)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},67631:function(t){var e;"undefined"!=typeof window&&(e=function(){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(t,e,n){"use strict";var a=Object.prototype.hasOwnProperty,r="~";function i(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,n,a,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new s(n,a||t,i),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],o]:t._events[c].push(o):(t._events[c]=o,t._eventsCount++),t}function c(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),l.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)a.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},l.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,i=n.length,s=new Array(i);a<i;a++)s[a]=n[a].fn;return s},l.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},l.prototype.emit=function(t,e,n,a,i,s){var o=r?r+t:t;if(!this._events[o])return!1;var c,l,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,a),!0;case 5:return u.fn.call(u.context,e,n,a,i),!0;case 6:return u.fn.call(u.context,e,n,a,i,s),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var f,h=u.length;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,n);break;case 4:u[l].fn.call(u[l].context,e,n,a);break;default:if(!c)for(f=1,c=new Array(d-1);f<d;f++)c[f-1]=arguments[f];u[l].fn.apply(u[l].context,c)}}return!0},l.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,n,a){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return c(this,i),this;var s=this._events[i];if(s.fn)s.fn!==e||a&&!s.once||n&&s.context!==n||c(this,i);else{for(var o=0,l=[],u=s.length;o<u;o++)(s[o].fn!==e||a&&!s[o].once||n&&s[o].context!==n)&&l.push(s[o]);l.length?this._events[i]=1===l.length?l[0]:l:c(this,i)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&c(this,e)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l},"./node_modules/url-toolkit/src/url-toolkit.js":function(t,e,n){var a,r,i,s,o;a=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,r=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");return a.path=o.normalizePath(a.path),o.buildURLFromParts(a)}var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=o.normalizePath(i.path),o.buildURLFromParts(i)):e;var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var c=r.exec(s.path);s.netLoc=c[1],s.path=c[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(l.netLoc=s.netLoc,"/"!==i.path[0]))if(i.path){var u=s.path,d=u.substring(0,u.lastIndexOf("/")+1)+i.path;l.path=o.normalizePath(d)}else l.path=s.path,i.params||(l.params=s.params,i.query||(l.query=s.query));return null===l.path&&(l.path=n.alwaysNormalize?o.normalizePath(i.path):i.path),o.buildURLFromParts(l)},parseURL:function(t){var e=a.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(s,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=o},"./node_modules/webworkify-webpack/index.js":function(t,e,n){function a(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var a=n(n.s=ENTRY_MODULE);return a.default||a}var r="[\\.|\\-|\\+|\\w|/|@]+",i="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function s(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(t,e,a){var o={};o[a]=[];var c=e.toString(),l=c.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return o;for(var u,d=l[1],f=new RegExp("(\\\\n|\\W)"+s(d)+i,"g");u=f.exec(c);)"dll-reference"!==u[3]&&o[a].push(u[3]);for(f=new RegExp("\\("+s(d)+'\\("(dll-reference\\s('+r+'))"\\)\\)'+i,"g");u=f.exec(c);)t[u[2]]||(o[a].push(u[1]),t[u[2]]=n(u[1]).m),o[u[2]]=o[u[2]]||[],o[u[2]].push(u[4]);for(var h,p=Object.keys(o),m=0;m<p.length;m++)for(var v=0;v<o[p[m]].length;v++)h=o[p[m]][v],isNaN(1*h)||(o[p[m]][v]=1*o[p[m]][v]);return o}function c(t){return Object.keys(t).reduce((function(e,n){return e||t[n].length>0}),!1)}t.exports=function(t,e){e=e||{};var r={main:n.m},i=e.all?{main:Object.keys(r.main)}:function(t,e){for(var n={main:[e]},a={main:[]},r={main:{}};c(n);)for(var i=Object.keys(n),s=0;s<i.length;s++){var l=i[s],u=n[l].pop();if(r[l]=r[l]||{},!r[l][u]&&t[l][u]){r[l][u]=!0,a[l]=a[l]||[],a[l].push(u);for(var d=o(t,t[l][u],l),f=Object.keys(d),h=0;h<f.length;h++)n[f[h]]=n[f[h]]||[],n[f[h]]=n[f[h]].concat(d[f[h]])}}return a}(r,t),s="";Object.keys(i).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;i[t][e];)e++;i[t].push(e),r[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",s=s+"var "+t+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i[t].map((function(e){return JSON.stringify(e)+": "+r[t][e].toString()})).join(",")+"});\n"})),s=s+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i.main.map((function(t){return JSON.stringify(t)+": "+r.main[t].toString()})).join(",")+"}))(self);";var l=new window.Blob([s],{type:"text/javascript"});if(e.bare)return l;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),d=new window.Worker(u);return d.objectURL=u,d}},"./src/crypt/decrypter.js":function(t,e,n){"use strict";n.r(e);var a=function(){function t(t,e){this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),r=function(){function t(t,e){this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),i=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),n=new Uint32Array(4),a=0;a<4;a++)n[a]=e.getUint32(4*a);return n},e.initTable=function(){var t=this.sBox,e=this.invSBox,n=this.subMix,a=n[0],r=n[1],i=n[2],s=n[3],o=this.invSubMix,c=o[0],l=o[1],u=o[2],d=o[3],f=new Uint32Array(256),h=0,p=0,m=0;for(m=0;m<256;m++)f[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99,t[h]=v,e[v]=h;var g=f[h],_=f[g],y=f[_],b=257*f[v]^16843008*v;a[h]=b<<24|b>>>8,r[h]=b<<16|b>>>16,i[h]=b<<8|b>>>24,s[h]=b,b=16843009*y^65537*_^257*g^16843008*h,c[v]=b<<24|b>>>8,l[v]=b<<16|b>>>16,u[v]=b<<8|b>>>24,d[v]=b,h?(h=g^f[f[f[y^g]]],p^=f[f[p]]):h=p=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),n=!0,a=0;a<e.length&&n;)n=e[a]===this.key[a],a++;if(!n){this.key=e;var r=this.keySize=e.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var i,s,o,c,l=this.ksRows=4*(r+6+1),u=this.keySchedule=new Uint32Array(l),d=this.invKeySchedule=new Uint32Array(l),f=this.sBox,h=this.rcon,p=this.invSubMix,m=p[0],v=p[1],g=p[2],_=p[3];for(i=0;i<l;i++)i<r?o=u[i]=e[i]:(c=o,i%r==0?(c=f[(c=c<<8|c>>>24)>>>24]<<24|f[c>>>16&255]<<16|f[c>>>8&255]<<8|f[255&c],c^=h[i/r|0]<<24):r>6&&i%r==4&&(c=f[c>>>24]<<24|f[c>>>16&255]<<16|f[c>>>8&255]<<8|f[255&c]),u[i]=o=(u[i-r]^c)>>>0);for(s=0;s<l;s++)i=l-s,c=3&s?u[i]:u[i-4],d[s]=s<4||i<=4?c:m[f[c>>>24]]^v[f[c>>>16&255]]^g[f[c>>>8&255]]^_[f[255&c]],d[s]=d[s]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,n,a){for(var r,i,s,o,c,l,u,d,f,h,p,m,v,g,_,y,b,C=this.keySize+6,w=this.invKeySchedule,k=this.invSBox,x=this.invSubMix,S=x[0],E=x[1],T=x[2],A=x[3],R=this.uint8ArrayToUint32Array_(n),O=R[0],$=R[1],P=R[2],L=R[3],D=new Int32Array(t),I=new Int32Array(D.length),M=this.networkToHostOrderSwap;e<D.length;){for(f=M(D[e]),h=M(D[e+1]),p=M(D[e+2]),m=M(D[e+3]),c=f^w[0],l=m^w[1],u=p^w[2],d=h^w[3],v=4,g=1;g<C;g++)r=S[c>>>24]^E[l>>16&255]^T[u>>8&255]^A[255&d]^w[v],i=S[l>>>24]^E[u>>16&255]^T[d>>8&255]^A[255&c]^w[v+1],s=S[u>>>24]^E[d>>16&255]^T[c>>8&255]^A[255&l]^w[v+2],o=S[d>>>24]^E[c>>16&255]^T[l>>8&255]^A[255&u]^w[v+3],c=r,l=i,u=s,d=o,v+=4;r=k[c>>>24]<<24^k[l>>16&255]<<16^k[u>>8&255]<<8^k[255&d]^w[v],i=k[l>>>24]<<24^k[u>>16&255]<<16^k[d>>8&255]<<8^k[255&c]^w[v+1],s=k[u>>>24]<<24^k[d>>16&255]<<16^k[c>>8&255]<<8^k[255&l]^w[v+2],o=k[d>>>24]<<24^k[c>>16&255]<<16^k[l>>8&255]<<8^k[255&u]^w[v+3],v+=3,I[e]=M(r^O),I[e+1]=M(o^$),I[e+2]=M(s^P),I[e+3]=M(i^L),O=f,$=h,P=p,L=m,e+=4}return a?(_=I.buffer,y=_.byteLength,(b=y&&new DataView(_).getUint8(y-1))?_.slice(0,y-b):_):I.buffer},e.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),s=n("./src/errors.ts"),o=n("./src/utils/logger.js"),c=n("./src/events.js"),l=n("./src/utils/get-self-scope.js"),u=Object(l.getSelfScope)(),d=function(){function t(t,e,n){var a=(void 0===n?{}:n).removePKCS7Padding,r=void 0===a||a;if(this.logEnabled=!0,this.observer=t,this.config=e,this.removePKCS7Padding=r,r)try{var i=u.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}var e=t.prototype;return e.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.decrypt=function(t,e,n,s){var c=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(o.logger.log("JS AES decrypt"),this.logEnabled=!1);var l=this.decryptor;l||(this.decryptor=l=new i),l.expandKey(e),s(l.decrypt(t,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(o.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var u=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new r(u,e)),this.fastAesKey.expandKey().then((function(r){new a(u,n).decrypt(t,r).catch((function(a){c.onWebCryptoError(a,t,e,n,s)})).then((function(t){s(t)}))})).catch((function(a){c.onWebCryptoError(a,t,e,n,s)}))}},e.onWebCryptoError=function(t,e,n,a,r){this.config.enableSoftwareAES?(o.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,n,a,r)):(o.logger.error("decrypting error : "+t.message),this.observer.trigger(c.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},e.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.default=d},"./src/demux/demuxer-inline.js":function(t,e,n){"use strict";n.r(e);var a=n("./src/events.js"),r=n("./src/errors.ts"),i=n("./src/crypt/decrypter.js"),s=n("./src/polyfills/number.js"),o=n("./src/utils/logger.js"),c=n("./src/utils/get-self-scope.js");function l(t,e){return 255===t[e]&&240==(246&t[e+1])}function u(t,e){return 1&t[e+1]?7:9}function d(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function f(t,e){return!!(e+1<t.length&&l(t,e))}function h(t,e){if(f(t,e)){var n=u(t,e);if(e+n>=t.length)return!1;var a=d(t,e);if(a<=n)return!1;var r=e+a;if(r===t.length||r+1<t.length&&l(t,r))return!0}return!1}function p(t,e,n,i,s){if(!t.samplerate){var c=function(t,e,n,i){var s,c,l,u,d,f=navigator.userAgent.toLowerCase(),h=i,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(s=1+((192&e[n+2])>>>6),!((c=(60&e[n+2])>>>2)>p.length-1))return u=(1&e[n+2])<<2,u|=(192&e[n+3])>>>6,o.logger.log("manifest codec:"+i+",ADTS data:type:"+s+",sampleingIndex:"+c+"["+p[c]+"Hz],channelConfig:"+u),/firefox/i.test(f)?c>=6?(s=5,d=new Array(4),l=c-3):(s=2,d=new Array(2),l=c):-1!==f.indexOf("android")?(s=2,d=new Array(2),l=c):(s=5,d=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&c>=6?l=c-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(c>=6&&1===u||/vivaldi/i.test(f))||!i&&1===u)&&(s=2,d=new Array(2)),l=c)),d[0]=s<<3,d[0]|=(14&c)>>1,d[1]|=(1&c)<<7,d[1]|=u<<3,5===s&&(d[1]|=(14&l)>>1,d[2]=(1&l)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:p[c],channelCount:u,codec:"mp4a.40."+s,manifestCodec:h};t.trigger(a.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+c})}(e,n,i,s);t.config=c.config,t.samplerate=c.samplerate,t.channelCount=c.channelCount,t.codec=c.codec,t.manifestCodec=c.manifestCodec,o.logger.log("parsed codec:"+t.codec+",rate:"+c.samplerate+",nb channel:"+c.channelCount)}}function m(t){return 9216e4/t}function v(t,e,n,a,r){var i=function(t,e,n,a,r){var i,s,o=t.length;if(i=u(t,e),s=d(t,e),(s-=i)>0&&e+i+s<=o)return{headerLength:i,frameLength:s,stamp:n+a*r}}(e,n,a,r,m(t.samplerate));if(i){var s=i.stamp,o=i.headerLength,c=i.frameLength,l={unit:e.subarray(n+o,n+o+c),pts:s,dts:s};return t.samples.push(l),{sample:l,length:c+o}}}var g=n("./src/demux/id3.js"),_=function(){function t(t,e,n){this.observer=t,this.config=n,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,n,a){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:a,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=(g.default.getID3Data(t,0)||[]).length,n=t.length;e<n;e++)if(h(t,e))return o.logger.log("ADTS sync word found !"),!0;return!1},e.append=function(t,e,n,a){for(var r=this._audioTrack,i=g.default.getID3Data(t,0)||[],c=g.default.getTimeStamp(i),l=Object(s.isFiniteNumber)(c)?90*c:9e4*e,u=0,d=l,h=t.length,m=i.length,_=[{pts:d,dts:d,data:i}];m<h-1;)if(f(t,m)&&m+5<h){p(r,this.observer,t,m,r.manifestCodec);var y=v(r,t,m,l,u);if(!y){o.logger.log("Unable to parse AAC frame");break}m+=y.length,d=y.sample.pts,u++}else g.default.isHeader(t,m)?(i=g.default.getID3Data(t,m),_.push({pts:d,dts:d,data:i}),m+=i.length):m++;this.remuxer.remux(r,{samples:[]},{samples:_,inputTimeScale:9e4},{samples:[]},e,n,a)},e.destroy=function(){},t}(),y=n("./src/demux/mp4demuxer.js"),b={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,n,a,r){if(!(n+24>e.length)){var i=this.parseHeader(e,n);if(i&&n+i.frameLength<=e.length){var s=a+r*(9e4*i.samplesPerFrame/i.sampleRate),o={unit:e.subarray(n,n+i.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=i.channelCount,t.samplerate=i.sampleRate,t.samples.push(o),{sample:o,length:i.frameLength}}}},parseHeader:function(t,e){var n=t[e+1]>>3&3,a=t[e+1]>>1&3,r=t[e+2]>>4&15,i=t[e+2]>>2&3,s=t[e+2]>>1&1;if(1!==n&&0!==r&&15!==r&&3!==i){var o=3===n?3-a:3===a?3:4,c=1e3*b.BitratesMap[14*o+r-1],l=3===n?0:2===n?1:2,u=b.SamplingRateMap[3*l+i],d=t[e+3]>>6==3?1:2,f=b.SamplesCoefficients[n][a],h=b.BytesInSlot[a],p=8*f*h;return{sampleRate:u,channelCount:d,frameLength:parseInt(f*c/u+s,10)*h,samplesPerFrame:p}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var n=this.parseHeader(t,e),a=4;n&&n.frameLength&&(a=n.frameLength);var r=e+a;if(r===t.length||r+1<t.length&&this.isHeaderPattern(t,r))return!0}return!1}},C=b,w=function(){function t(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,n=t.byteLength-e,a=new Uint8Array(4),r=Math.min(4,e);if(0===r)throw new Error("no bytes available");a.set(t.subarray(n,n+r)),this.word=new DataView(a.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return t>32&&o.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?n<<e|this.readBits(e):n},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){var e,n=8,a=8;for(e=0;e<t;e++)0!==a&&(a=(n+this.readEG()+256)%256),n=0===a?n:a},e.readSPS=function(){var t,e,n,a,r,i,s,o=0,c=0,l=0,u=0,d=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),m=this.skipBits.bind(this),v=this.skipEG.bind(this),g=this.skipUEG.bind(this),_=this.skipScalingList.bind(this);if(d(),t=d(),f(5),m(3),d(),g(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var y=h();if(3===y&&m(1),g(),g(),m(1),p())for(i=3!==y?8:12,s=0;s<i;s++)p()&&_(s<6?16:64)}g();var b=h();if(0===b)h();else if(1===b)for(m(1),v(),v(),e=h(),s=0;s<e;s++)v();g(),m(1),n=h(),a=h(),0===(r=f(1))&&m(1),m(1),p()&&(o=h(),c=h(),l=h(),u=h());var C=[1,1];if(p()&&p())switch(d()){case 1:C=[1,1];break;case 2:C=[12,11];break;case 3:C=[10,11];break;case 4:C=[16,11];break;case 5:C=[40,33];break;case 6:C=[24,11];break;case 7:C=[20,11];break;case 8:C=[32,11];break;case 9:C=[80,33];break;case 10:C=[18,11];break;case 11:C=[15,11];break;case 12:C=[64,33];break;case 13:C=[160,99];break;case 14:C=[4,3];break;case 15:C=[3,2];break;case 16:C=[2,1];break;case 255:C=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(n+1)-2*o-2*c),height:(2-r)*(a+1)*16-(r?2:4)*(l+u),pixelRatio:C}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),k=function(){function t(t,e,n,a){this.decryptdata=n,this.discardEPB=a,this.decrypter=new i.default(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},e.decryptAacSample=function(t,e,n,a){var r=t[e].unit,i=r.subarray(16,r.length-r.length%16),s=i.buffer.slice(i.byteOffset,i.byteOffset+i.length),o=this;this.decryptBuffer(s,(function(i){i=new Uint8Array(i),r.set(i,16),a||o.decryptAacSamples(t,e+1,n)}))},e.decryptAacSamples=function(t,e,n){for(;;e++){if(e>=t.length)return void n();if(!(t[e].unit.length<32)){var a=this.decrypter.isSync();if(this.decryptAacSample(t,e,n,a),!a)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,n=new Int8Array(e),a=0,r=32;r<=t.length-16;r+=160,a+=16)n.set(t.subarray(r,r+16),a);return n},e.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var n=0,a=32;a<=t.length-16;a+=160,n+=16)t.set(e.subarray(n,n+16),a);return t},e.decryptAvcSample=function(t,e,n,a,r,i){var s=this.discardEPB(r.data),o=this.getAvcEncryptedData(s),c=this;this.decryptBuffer(o.buffer,(function(o){r.data=c.getAvcDecryptedUnit(s,o),i||c.decryptAvcSamples(t,e,n+1,a)}))},e.decryptAvcSamples=function(t,e,n,a){for(;;e++,n=0){if(e>=t.length)return void a();for(var r=t[e].units;!(n>=r.length);n++){var i=r[n];if(!(i.data.length<=48||1!==i.type&&5!==i.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(t,e,n,a,i,s),!s)return}}}},t}(),x={video:1,audio:2,id3:3,text:4},S=function(){function t(t,e,n,a){this.observer=t,this.config=n,this.typeSupported=a,this.remuxer=e,this.sampleAes=null,this.pmtUnknownTypes={}}var e=t.prototype;return e.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new k(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var n=t._syncOffset(e);return!(n<0||(n&&o.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),0))},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),n=0;n<e;){if(71===t[n]&&71===t[n+188]&&71===t[n+376])return n;n++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:x[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},e.resetInitSegment=function(e,n,a,r){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=t.createTrack("video",r),this._audioTrack=t.createTrack("audio",r),this._id3Track=t.createTrack("id3",r),this._txtTrack=t.createTrack("text",r),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=a,this._duration=r},e.resetTimeStamp=function(){},e.append=function(e,n,i,s){var c,l,u,d,f,h=e.length,p=!1;this.pmtUnknownTypes={},this.contiguous=i;var m=this.pmtParsed,v=this._avcTrack,g=this._audioTrack,_=this._id3Track,y=v.pid,b=g.pid,C=_.pid,w=this._pmtId,k=v.pesData,x=g.pesData,S=_.pesData,E=this._parsePAT,T=this._parsePMT.bind(this),A=this._parsePES,R=this._parseAVCPES.bind(this),O=this._parseAACPES.bind(this),$=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this),L=t._syncOffset(e);for(h-=(h+L)%188,c=L;c<h;c+=188)if(71===e[c]){if(l=!!(64&e[c+1]),u=((31&e[c+1])<<8)+e[c+2],(48&e[c+3])>>4>1){if((d=c+5+e[c+4])===c+188)continue}else d=c+4;switch(u){case y:l&&(k&&(f=A(k))&&R(f,!1),k={data:[],size:0}),k&&(k.data.push(e.subarray(d,c+188)),k.size+=c+188-d);break;case b:l&&(x&&(f=A(x))&&(g.isAAC?O(f):$(f)),x={data:[],size:0}),x&&(x.data.push(e.subarray(d,c+188)),x.size+=c+188-d);break;case C:l&&(S&&(f=A(S))&&P(f),S={data:[],size:0}),S&&(S.data.push(e.subarray(d,c+188)),S.size+=c+188-d);break;case 0:l&&(d+=e[d]+1),w=this._pmtId=E(e,d);break;case w:l&&(d+=e[d]+1);var D=T(e,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(y=D.avc)>0&&(v.pid=y),(b=D.audio)>0&&(g.pid=b,g.isAAC=D.isAAC),(C=D.id3)>0&&(_.pid=C),p&&!m&&(o.logger.log("reparse from beginning"),p=!1,c=L-188),m=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(a.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});k&&(f=A(k))?(R(f,!0),v.pesData=null):v.pesData=k,x&&(f=A(x))?(g.isAAC?O(f):$(f),g.pesData=null):(x&&x.size&&o.logger.log("last AAC PES packet truncated,might overlap between fragments"),g.pesData=x),S&&(f=A(S))?(P(f),_.pesData=null):_.pesData=S,null==this.sampleAes?this.remuxer.remux(g,v,_,this._txtTrack,n,i,s):this.decryptAndRemux(g,v,_,this._txtTrack,n,i,s)},e.decryptAndRemux=function(t,e,n,a,r,i,s){if(t.samples&&t.isAAC){var o=this;this.sampleAes.decryptAacSamples(t.samples,0,(function(){o.decryptAndRemuxAvc(t,e,n,a,r,i,s)}))}else this.decryptAndRemuxAvc(t,e,n,a,r,i,s)},e.decryptAndRemuxAvc=function(t,e,n,a,r,i,s){if(e.samples){var o=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,(function(){o.remuxer.remux(t,e,n,a,r,i,s)}))}else this.remuxer.remux(t,e,n,a,r,i,s)},e.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},e._trackUnknownPmt=function(t,e,n){var a=this.pmtUnknownTypes[t]||0;return 0===a&&(this.pmtUnknownTypes[t]=0,e.call(o.logger,n)),this.pmtUnknownTypes[t]++,a},e._parsePMT=function(t,e,n,a){var r,i,s={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=e+3+((15&t[e+1])<<8|t[e+2])-4,e+=12+((15&t[e+10])<<8|t[e+11]);e<r;){switch(i=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!a){this._trackUnknownPmt(t[e],o.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===s.audio&&(s.audio=i);break;case 21:-1===s.id3&&(s.id3=i);break;case 219:if(!a){this._trackUnknownPmt(t[e],o.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===s.avc&&(s.avc=i);break;case 3:case 4:n?-1===s.audio&&(s.audio=i,s.isAAC=!1):this._trackUnknownPmt(t[e],o.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(t[e],o.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(t[e],o.logger.log,"Unknown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return s},e._parsePES=function(t){var e,n,a,r,i,s,c,l,u=0,d=t.data;if(!t||0===t.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(1===((e=d[0])[0]<<16)+(e[1]<<8)+e[2]){if((a=(e[4]<<8)+e[5])&&a>t.size-6)return null;if(192&(n=e[7])&&(s=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&n?s-(c=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(o.logger.warn(Math.round((s-c)/9e4)+"s delta between PTS and DTS, align them"),s=c):c=s),l=(r=e[8])+9,t.size<=l)return null;t.size-=l,i=new Uint8Array(t.size);for(var h=0,p=d.length;h<p;h++){var m=(e=d[h]).byteLength;if(l){if(l>m){l-=m;continue}e=e.subarray(l),m-=l,l=0}i.set(e,u),u+=m}return a&&(a-=r+3),{data:i,pts:s,dts:c,len:a}}return null},e.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var n=e.samples,a=n.length;if(isNaN(t.pts)){if(!a)return void e.dropped++;var r=n[a-1];t.pts=r.pts,t.dts=r.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(a||this.contiguous)?(t.id=a,n.push(t)):e.dropped++}t.debug.length&&o.logger.log(t.pts+"/"+t.dts+":"+t.debug)},e._parseAVCPES=function(t,e){var n,a,r,i=this,s=this._avcTrack,o=this._parseAVCNALu(t.data),c=this.avcSample,l=!1,u=this.pushAccesUnit.bind(this),d=function(t,e,n,a){return{key:t,pts:e,dts:n,units:[],debug:a}};t.data=null,c&&o.length&&!s.audFound&&(u(c,s),c=this.avcSample=d(!1,t.pts,t.dts,"")),o.forEach((function(e){switch(e.type){case 1:a=!0,c||(c=i.avcSample=d(!0,t.pts,t.dts,"")),c.frame=!0;var o=e.data;if(l&&o.length>4){var f=new w(o).readSliceType();2!==f&&4!==f&&7!==f&&9!==f||(c.key=!0)}break;case 5:a=!0,c||(c=i.avcSample=d(!0,t.pts,t.dts,"")),c.key=!0,c.frame=!0;break;case 6:a=!0,(n=new w(i.discardEPB(e.data))).readUByte();for(var h=0,p=0,m=!1,v=0;!m&&n.bytesAvailable>1;){h=0;do{h+=v=n.readUByte()}while(255===v);p=0;do{p+=v=n.readUByte()}while(255===v);if(4===h&&0!==n.bytesAvailable){if(m=!0,181===n.readUByte()&&49===n.readUShort()&&1195456820===n.readUInt()&&3===n.readUByte()){var _=n.readUByte(),y=31&_,b=[_,n.readUByte()];for(r=0;r<y;r++)b.push(n.readUByte()),b.push(n.readUByte()),b.push(n.readUByte());i._insertSampleInOrder(i._txtTrack.samples,{type:3,pts:t.pts,bytes:b})}}else if(5===h&&0!==n.bytesAvailable){if(m=!0,p>16){var C=[];for(r=0;r<16;r++)C.push(n.readUByte().toString(16)),3!==r&&5!==r&&7!==r&&9!==r||C.push("-");var k=p-16,x=new Uint8Array(k);for(r=0;r<k;r++)x[r]=n.readUByte();i._insertSampleInOrder(i._txtTrack.samples,{pts:t.pts,payloadType:h,uuid:C.join(""),userDataBytes:x,userData:Object(g.utf8ArrayToStr)(x.buffer)})}}else if(p<n.bytesAvailable)for(r=0;r<p;r++)n.readUByte()}break;case 7:if(a=!0,l=!0,!s.sps){var S=(n=new w(e.data)).readSPS();s.width=S.width,s.height=S.height,s.pixelRatio=S.pixelRatio,s.sps=[e.data],s.duration=i._duration;var E=e.data.subarray(1,4),T="avc1.";for(r=0;r<3;r++){var A=E[r].toString(16);A.length<2&&(A="0"+A),T+=A}s.codec=T}break;case 8:a=!0,s.pps||(s.pps=[e.data]);break;case 9:a=!1,s.audFound=!0,c&&u(c,s),c=i.avcSample=d(!1,t.pts,t.dts,"");break;case 12:a=!1;break;default:a=!1,c&&(c.debug+="unknown NAL "+e.type+" ")}c&&a&&c.units.push(e)})),e&&c&&(u(c,s),this.avcSample=null)},e._insertSampleInOrder=function(t,e){var n=t.length;if(n>0){if(e.pts>=t[n-1].pts)t.push(e);else for(var a=n-1;a>=0;a--)if(e.pts<t[a].pts){t.splice(a,0,e);break}}else t.push(e)},e._getLastNalUnit=function(){var t,e=this.avcSample;if(!e||0===e.units.length){var n=this._avcTrack.samples;e=n[n.length-1]}if(e){var a=e.units;t=a[a.length-1]}return t},e._parseAVCNALu=function(t){var e,n,a,r,i=0,s=t.byteLength,o=this._avcTrack,c=o.naluState||0,l=c,u=[],d=-1;for(-1===c&&(d=0,r=31&t[0],c=0,i=1);i<s;)if(e=t[i++],c)if(1!==c)if(e)if(1===e){if(d>=0)a={data:t.subarray(d,i-c-1),type:r},u.push(a);else{var f=this._getLastNalUnit();if(f&&(l&&i<=4-l&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-l)),(n=i-c-1)>0)){var h=new Uint8Array(f.data.byteLength+n);h.set(f.data,0),h.set(t.subarray(0,n),f.data.byteLength),f.data=h}}i<s?(d=i,r=31&t[i],c=0):c=-1}else c=0;else c=3;else c=e?0:2;else c=e?0:1;if(d>=0&&c>=0&&(a={data:t.subarray(d,s),type:r,state:c},u.push(a)),0===u.length){var p=this._getLastNalUnit();if(p){var m=new Uint8Array(p.data.byteLength+t.byteLength);m.set(p.data,0),m.set(t,p.data.byteLength),p.data=m}}return o.naluState=c,u},e.discardEPB=function(t){for(var e,n,a=t.byteLength,r=[],i=1;i<a-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return t;e=a-r.length,n=new Uint8Array(e);var s=0;for(i=0;i<e;s++,i++)s===r[0]&&(s++,r.shift()),n[i]=t[s];return n},e._parseAACPES=function(t){var e,n,i,s,c,l,u,d=this._audioTrack,h=t.data,g=t.pts,_=this.aacOverFlow,y=this.aacLastPTS;if(_){var b=new Uint8Array(_.byteLength+h.byteLength);b.set(_,0),b.set(h,_.byteLength),h=b}for(i=0,c=h.length;i<c-1&&!f(h,i);i++);if(!i||(i<c-1?(l="AAC PES did not start with ADTS header,offset:"+i,u=!1):(l="no ADTS header found in AAC PES",u=!0),o.logger.warn("parsing error:"+l),this.observer.trigger(a.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:u,reason:l}),!u)){if(p(d,this.observer,h,i,this.audioCodec),n=0,e=m(d.samplerate),_&&y){var C=y+e;Math.abs(C-g)>1&&(o.logger.log("AAC: align PTS for overlapping frames by "+Math.round((C-g)/90)),g=C)}for(;i<c;){if(f(h,i)){if(i+5<c){var w=v(d,h,i,g,n);if(w){i+=w.length,s=w.sample.pts,n++;continue}}break}i++}_=i<c?h.subarray(i,c):null,this.aacOverFlow=_,this.aacLastPTS=s}},e._parseMPEGPES=function(t){for(var e=t.data,n=e.length,a=0,r=0,i=t.pts;r<n;)if(C.isHeader(e,r)){var s=C.appendFrame(this._audioTrack,e,r,i,a);if(!s)break;r+=s.length,a++}else r++},e._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),E=function(){function t(t,e,n){this.observer=t,this.config=n,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,n,a){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:a,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){var e,n,a=g.default.getID3Data(t,0);if(a&&void 0!==g.default.getTimeStamp(a))for(e=a.length,n=Math.min(t.length-1,e+100);e<n;e++)if(C.probe(t,e))return o.logger.log("MPEG Audio sync word found !"),!0;return!1},e.append=function(t,e,n,a){for(var r=g.default.getID3Data(t,0)||[],i=g.default.getTimeStamp(r),s=void 0!==i?90*i:9e4*e,o=r.length,c=t.length,l=0,u=0,d=this._audioTrack,f=[{pts:s,dts:s,data:r}];o<c;)if(C.isHeader(t,o)){var h=C.appendFrame(d,t,o,s,l);if(!h)break;o+=h.length,u=h.sample.pts,l++}else g.default.isHeader(t,o)?(r=g.default.getID3Data(t,o),f.push({pts:u,dts:u,data:r}),o+=r.length):o++;this.remuxer.remux(d,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},e,n,a)},e.destroy=function(){},t}(),T=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),A=Math.pow(2,32)-1,R=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),a=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:a};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=i,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),c=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,s,c,s,o),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,r))},t.box=function(t){for(var e,n=Array.prototype.slice.call(arguments,1),a=8,r=n.length,i=r;r--;)a+=n[r].byteLength;for((e=new Uint8Array(a))[0]=a>>24&255,e[1]=a>>16&255,e[2]=a>>8&255,e[3]=255&a,e.set(t,4),r=0,a=8;r<i;r++)e.set(n[r],a),a+=n[r].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,n){n*=e;var a=Math.floor(n/(A+1)),r=Math.floor(n%(A+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,a>>24,a>>16&255,a>>8&255,255&a,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,n,a){return t.box(t.types.moof,t.mfhd(e),t.traf(a,n))},t.moov=function(e){for(var n=e.length,a=[];n--;)a[n]=t.trak(e[n]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(a).concat(t.mvex(e)))},t.mvex=function(e){for(var n=e.length,a=[];n--;)a[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(a))},t.mvhd=function(e,n){n*=e;var a=Math.floor(n/(A+1)),r=Math.floor(n%(A+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,a>>24,a>>16&255,a>>8&255,255&a,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,i)},t.sdtp=function(e){var n,a,r=e.samples||[],i=new Uint8Array(4+r.length);for(a=0;a<r.length;a++)n=r[a].flags,i[a+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t.box(t.types.sdtp,i)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var n,a,r,i=[],s=[];for(n=0;n<e.sps.length;n++)r=(a=e.sps[n]).byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(a));for(n=0;n<e.pps.length;n++)r=(a=e.pps[n]).byteLength,s.push(r>>>8&255),s.push(255&r),s=s.concat(Array.prototype.slice.call(a));var o=t.box(t.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(s))),c=e.width,l=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,255&c,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var n=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var n=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var n=e.id,a=e.duration*e.timescale,r=e.width,i=e.height,s=Math.floor(a/(A+1)),o=Math.floor(a%(A+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))},t.traf=function(e,n){var a=t.sdtp(e),r=e.id,i=Math.floor(n/(A+1)),s=Math.floor(n%(A+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s])),t.trun(e,a.length+16+20+8+16+8+8),a)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,n){var a,r,i,s,o,c,l=e.samples||[],u=l.length,d=12+16*u,f=new Uint8Array(d);for(n+=8+d,f.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),a=0;a<u;a++)i=(r=l[a]).duration,s=r.size,o=r.flags,c=r.cts,f.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,c>>>24&255,c>>>16&255,c>>>8&255,255&c],12+16*a);return t.box(t.types.trun,f)},t.initSegment=function(e){t.types||t.init();var n,a=t.moov(e);return(n=new Uint8Array(t.FTYP.byteLength+a.byteLength)).set(t.FTYP),n.set(a,t.FTYP.byteLength),n},t}();function O(t,e,n,a){void 0===n&&(n=1),void 0===a&&(a=!1);var r=t*e*n;return a?Math.round(r):r}function $(t,e){return void 0===e&&(e=!1),O(t,1e3,1/9e4,e)}function P(t,e){return void 0===e&&(e=1),O(t,9e4,1/e)}var L=P(10),D=P(.2),I=null;function M(t,e){var n;if(void 0===e)return t;for(n=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}var N,j=function(){function t(t,e,n,a){if(this.observer=t,this.config=e,this.typeSupported=n,this.ISGenerated=!1,null===I){var r=navigator.userAgent.match(/Chrome\/(\d+)/i);I=r?parseInt(r[1]):0}}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},e.resetInitSegment=function(){this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,n=t.reduce((function(t,n){var a=n.pts-t;return a<-4294967296?(e=!0,M(t,n.pts)):a>0?t:n.pts}),t[0].pts);return e&&o.logger.debug("PTS rollover detected"),n},e.remux=function(t,e,n,r,i,s,c){if(this.ISGenerated||this.generateIS(t,e,i),this.ISGenerated){var l=t.samples.length,u=e.samples.length,d=i,f=i;if(l&&u){var h=this.getVideoStartPts(e.samples),p=(M(t.samples[0].pts,h)-h)/e.inputTimeScale;d+=Math.max(0,p),f+=Math.max(0,-p)}if(l){t.timescale||(o.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,i));var m,v=this.remuxAudio(t,d,s,c);u&&(v&&(m=v.endPTS-v.startPTS),e.timescale||(o.logger.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,i)),this.remuxVideo(e,f,s,m))}else if(u){var g=this.remuxVideo(e,f,s,0,c);g&&t.codec&&this.remuxEmptyAudio(t,d,s,g)}}n.samples.length&&this.remuxID3(n,i),r.samples.length&&this.remuxText(r,i),this.observer.trigger(a.default.FRAG_PARSED)},e.generateIS=function(t,e,n){var i,s,c=this.observer,l=t.samples,u=e.samples,d=this.typeSupported,f="audio/mp4",h={},p={tracks:h},m=void 0===this._initPTS;if(m&&(i=s=1/0),t.config&&l.length&&(t.timescale=t.samplerate,o.logger.log("audio sampling rate : "+t.samplerate),t.isAAC||(d.mpeg?(f="audio/mpeg",t.codec=""):d.mp3&&(t.codec="mp3")),h.audio={container:f,codec:t.codec,initSegment:!t.isAAC&&d.mpeg?new Uint8Array:R.initSegment([t]),metadata:{channelCount:t.channelCount}},m&&(i=s=l[0].pts-Math.round(t.inputTimeScale*n))),e.sps&&e.pps&&u.length){var v=e.inputTimeScale;if(e.timescale=v,h.video={container:"video/mp4",codec:e.codec,initSegment:R.initSegment([e]),metadata:{width:e.width,height:e.height}},m){var g=this.getVideoStartPts(u),_=Math.round(v*n);s=Math.min(s,M(u[0].dts,g)-_),i=Math.min(i,g-_),this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:i})}}else m&&h.audio&&this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:i});Object.keys(h).length?(c.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,m&&(this._initPTS=i,this._initDTS=s)):c.trigger(a.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.remuxVideo=function(t,e,n,i){var s,c,l,u,d,f=t.timescale,h=t.samples,p=[],m=h.length,v=this._initPTS,g=8,_=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,b=0,C=!1,w=this.nextAvcDts;if(0!==m){n||(w=e*f-(h[0].pts-M(h[0].dts,h[0].pts)));for(var k=0;k<m;k++){var x=h[k];x.pts=M(x.pts-v,w),x.dts=M(x.dts-v,w),x.dts>x.pts&&(b=Math.max(Math.min(b,x.pts-x.dts),-1*D)),x.dts<h[k>0?k-1:k].dts&&(C=!0)}C&&h.sort((function(t,e){var n=t.dts-e.dts,a=t.pts-e.pts;return n||a||t.id-e.id})),u=h[0].dts,d=h[m-1].dts;var S=Math.round((d-u)/(m-1));if(b<0){if(b<-2*S){o.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+$(-S,!0)+" ms");for(var E=b,T=0;T<m;T++)h[T].dts=E=Math.max(E,h[T].pts-S),h[T].pts=Math.max(E,h[T].pts)}else{o.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+$(b,!0)+" ms to overcome this issue");for(var A=0;A<m;A++)h[A].dts=h[A].dts+b}u=h[0].dts,d=h[m-1].dts}if(n){var O=u-w,P=O>S;if(P||O<-1){P?o.logger.warn("AVC: "+$(O,!0)+" ms ("+O+"dts) hole between fragments detected, filling it"):o.logger.warn("AVC: "+$(-O,!0)+" ms ("+O+"dts) overlapping between fragments detected"),u=w;var L=h[0].pts-O;h[0].dts=u,h[0].pts=L,o.logger.log("Video: First PTS/DTS adjusted: "+$(L,!0)+"/"+$(u,!0)+", delta: "+$(O,!0)+" ms")}}I&&I<75&&(u=Math.max(0,u));for(var N=0,j=0,F=0;F<m;F++){for(var B=h[F],U=B.units,V=U.length,H=0,Z=0;Z<V;Z++)H+=U[Z].data.length;j+=H,N+=V,B.length=H,B.dts=Math.max(B.dts,u),B.pts=Math.max(B.pts,B.dts,0),_=Math.min(B.pts,_),y=Math.max(B.pts,y)}d=h[m-1].dts;var G=j+4*N+8;try{c=new Uint8Array(G)}catch(t){return void this.observer.trigger(a.default.ERROR,{type:r.ErrorTypes.MUX_ERROR,details:r.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating video mdat "+G})}var z=new DataView(c.buffer);z.setUint32(0,G),c.set(R.types.mdat,4);for(var q=0;q<m;q++){for(var K,W=h[q],Y=W.units,X=0,J=0,Q=Y.length;J<Q;J++){var tt=Y[J],et=tt.data,nt=tt.data.byteLength;z.setUint32(g,nt),g+=4,c.set(et,g),g+=nt,X+=4+nt}if(q<m-1)s=h[q+1].dts-W.dts;else{var at=this.config,rt=W.dts-h[q>0?q-1:q].dts;if(at.stretchShortVideoTrack){var it=at.maxBufferHole,st=Math.floor(it*f),ot=(i?_+i*f:this.nextAudioPts)-W.pts;ot>st?((s=ot-rt)<0&&(s=rt),o.logger.log("It is approximately "+$(ot,!1)+" ms to the next segment; using duration "+$(s,!1)+" ms for the last video frame.")):s=rt}else s=rt}K=Math.round(W.pts-W.dts),p.push({size:X,duration:s,cts:K,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:W.key?2:1,isNonSync:W.key?0:1}})}this.nextAvcDts=d+s;var ct=t.dropped;if(t.nbNalu=0,t.dropped=0,p.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var lt=p[0].flags;lt.dependsOn=2,lt.isNonSync=0}t.samples=p,l=R.moof(t.sequenceNumber++,u,t),t.samples=[];var ut={data1:l,data2:c,startPTS:_/f,endPTS:(y+s)/f,startDTS:u/f,endDTS:this.nextAvcDts/f,type:"video",hasAudio:!1,hasVideo:!0,nb:p.length,dropped:ct};return this.observer.trigger(a.default.FRAG_PARSING_DATA,ut),ut}},e.remuxAudio=function(t,e,n,i){var s,c,l,u,d,f,h=t.inputTimeScale,p=t.timescale,m=h/p,v=(t.isAAC?1024:1152)*m,g=this._initPTS,_=!t.isAAC&&this.typeSupported.mpeg,y=_?0:8,b=t.samples,C=[],w=this.nextAudioPts;if(n|=b.length&&w&&(i&&Math.abs(e-w/h)<.1||Math.abs(b[0].pts-w-g)<20*v),b.forEach((function(t){t.pts=t.dts=M(t.pts-g,e*h)})),0!==(b=b.filter((function(t){return t.pts>=0}))).length){if(n||(w=i?Math.max(0,e*h):b[0].pts),t.isAAC)for(var k=this.config.maxAudioFramesDrift,x=0,S=w;x<b.length;){var E=b[x],A=E.pts,O=A-S;if(O<=-k*v)n||x>0?(o.logger.warn("Dropping 1 audio frame @ "+$(S,!0)/1e3+"s due to "+$(O,!0)+" ms overlap."),b.splice(x,1)):(o.logger.warn("Audio frame @ "+$(A,!0)/1e3+"s overlaps nextAudioPts by "+$(O,!0)+" ms."),S=A+v,x++);else if(O>=k*v&&O<L&&S){var P=Math.round(O/v);o.logger.warn("Injecting "+P+" audio frames @ "+$(S,!0)/1e3+"s due to "+$(O,!0)+" ms gap.");for(var D=0;D<P;D++){var I=Math.max(S,0);(c=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),c=E.unit.subarray()),b.splice(x,0,{unit:c,pts:I,dts:I}),S+=v,x++}E.pts=E.dts=S,S+=v,x++}else Math.abs(O),E.pts=E.dts=S,S+=v,x++}for(var N=b.length,j=0;N--;)j+=b[N].unit.byteLength;for(var F=0,B=b.length;F<B;F++){var U=b[F],V=U.unit,H=U.pts;if(void 0!==f&&s)s.duration=Math.round((H-f)/m);else{var Z=H-w,G=0;if(n&&t.isAAC&&Z){if(Z>0&&Z<L)G=Math.round((H-w)/v),o.logger.log($(Z,!0)+" ms hole between AAC samples detected,filling it"),G>0&&((c=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(c=V.subarray()),j+=G*c.length);else if(Z<-12){o.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+$(w,!0)+" ms / "+$(H,!0)+" ms / "+$(-Z,!0)+" ms"),j-=V.byteLength;continue}H=w}if(d=H,!(j>0))return;j+=y;try{l=new Uint8Array(j)}catch(t){return void this.observer.trigger(a.default.ERROR,{type:r.ErrorTypes.MUX_ERROR,details:r.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating audio mdat "+j})}_||(new DataView(l.buffer).setUint32(0,j),l.set(R.types.mdat,4));for(var z=0;z<G;z++)(c=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),c=V.subarray()),l.set(c,y),y+=c.byteLength,s={size:c.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},C.push(s)}l.set(V,y);var q=V.byteLength;y+=q,s={size:q,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},C.push(s),f=H}var K=0;if((N=C.length)>=2&&(K=C[N-2].duration,s.duration=K),N){this.nextAudioPts=w=f+m*K,t.samples=C,u=_?new Uint8Array:R.moof(t.sequenceNumber++,d/m,t),t.samples=[];var W=d/h,Y=w/h,X={data1:u,data2:l,startPTS:W,endPTS:Y,startDTS:W,endDTS:Y,type:"audio",hasAudio:!0,hasVideo:!1,nb:N};return this.observer.trigger(a.default.FRAG_PARSING_DATA,X),X}return null}},e.remuxEmptyAudio=function(t,e,n,a){var r=t.inputTimeScale,i=r/(t.samplerate?t.samplerate:r),s=this.nextAudioPts,c=(void 0!==s?s:a.startDTS*r)+this._initDTS,l=a.endDTS*r+this._initDTS,u=1024*i,d=Math.ceil((l-c)/u),f=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(o.logger.warn("remux empty Audio"),f){for(var h=[],p=0;p<d;p++){var m=c+p*u;h.push({unit:f,pts:m,dts:m})}t.samples=h,this.remuxAudio(t,e,n)}else o.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.remuxID3=function(t,e){var n=t.samples.length;if(n){for(var r=t.inputTimeScale,i=this._initPTS,s=this._initDTS,o=0;o<n;o++){var c=t.samples[o];c.pts=M(c.pts-i,e*r)/r,c.dts=M(c.dts-s,e*r)/r}this.observer.trigger(a.default.FRAG_PARSING_METADATA,{samples:t.samples}),t.samples=[]}},e.remuxText=function(t,e){var n=t.samples.length,r=t.inputTimeScale,i=this._initPTS;if(n){for(var s=0;s<n;s++){var o=t.samples[s];o.pts=M(o.pts-i,e*r)/r}t.samples.sort((function(t,e){return t.pts-e.pts})),this.observer.trigger(a.default.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},t}(),F=function(){function t(t){this.observer=t}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.remux=function(t,e,n,r,i,s,o,c){var l=this.observer,u="";t&&(u+="audio"),e&&(u+="video"),l.trigger(a.default.FRAG_PARSING_DATA,{data1:c,startPTS:i,startDTS:i,type:u,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),l.trigger(a.default.FRAG_PARSED)},t}(),B=Object(c.getSelfScope)();try{N=B.performance.now.bind(B.performance)}catch(t){o.logger.debug("Unable to use Performance API on this environment"),N=B.Date.now}var U=function(){function t(t,e,n,a){this.observer=t,this.typeSupported=e,this.config=n,this.vendor=a}var e=t.prototype;return e.destroy=function(){var t=this.demuxer;t&&t.destroy()},e.push=function(t,e,n,r,s,o,c,l,u,d,f,h){var p=this;if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var m=this.decrypter;null==m&&(m=this.decrypter=new i.default(this.observer,this.config));var v=N();m.decrypt(t,e.key.buffer,e.iv.buffer,(function(t){var i=N();p.observer.trigger(a.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:i}}),p.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),r,s,o,c,l,u,d,f,h)}))}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),r,s,o,c,l,u,d,f,h)},e.pushDecrypted=function(t,e,n,i,s,o,c,l,u,d,f,h){var p=this.demuxer,m=this.remuxer;if(!p||c||l){for(var v,g=this.observer,b=this.typeSupported,C=this.config,w=[{demux:S,remux:j},{demux:y.default,remux:F},{demux:_,remux:j},{demux:E,remux:j}],k=0,x=w.length;k<x&&!(v=w[k]).demux.probe(t);k++);if(!v)return void g.trigger(a.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});m&&m instanceof v.remux||(m=new v.remux(g,C,b,this.vendor)),p&&p instanceof v.demux||(p=new v.demux(g,m,C,b),this.probe=v.demux.probe),this.demuxer=p,this.remuxer=m}(c||l)&&(p.resetInitSegment(n,i,s,d),m.resetInitSegment()),c&&(p.resetTimeStamp(h),m.resetTimeStamp(h)),"function"==typeof p.setDecryptData&&p.setDecryptData(e),p.append(t,o,u,f)},t}();e.default=U},"./src/demux/demuxer-worker.js":function(t,e,n){"use strict";n.r(e);var a=n("./src/demux/demuxer-inline.js"),r=n("./src/events.js"),i=n("./src/utils/logger.js"),s=n("./node_modules/eventemitter3/index.js");e.default=function(t){var e=new s.EventEmitter;e.trigger=function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];e.emit.apply(e,[t,t].concat(a))},e.off=function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];e.removeListener.apply(e,[t].concat(a))};var n=function(e,n){t.postMessage({event:e,data:n})};t.addEventListener("message",(function(r){var s=r.data;switch(s.cmd){case"init":var o=JSON.parse(s.config);t.demuxer=new a.default(e,s.typeSupported,o,s.vendor),Object(i.enableLogs)(o.debug),n("init",null);break;case"demux":t.demuxer.push(s.data,s.decryptdata,s.initSegment,s.audioCodec,s.videoCodec,s.timeOffset,s.discontinuity,s.trackSwitch,s.contiguous,s.duration,s.accurateTimeOffset,s.defaultInitPTS)}})),e.on(r.default.FRAG_DECRYPTED,n),e.on(r.default.FRAG_PARSING_INIT_SEGMENT,n),e.on(r.default.FRAG_PARSED,n),e.on(r.default.ERROR,n),e.on(r.default.FRAG_PARSING_METADATA,n),e.on(r.default.FRAG_PARSING_USERDATA,n),e.on(r.default.INIT_PTS_FOUND,n),e.on(r.default.FRAG_PARSING_DATA,(function(e,n){var a=[],r={event:e,data:n};n.data1&&(r.data1=n.data1.buffer,a.push(n.data1.buffer),delete n.data1),n.data2&&(r.data2=n.data2.buffer,a.push(n.data2.buffer),delete n.data2),t.postMessage(r,a)}))}},"./src/demux/id3.js":function(t,e,n){"use strict";n.r(e),n.d(e,"utf8ArrayToStr",(function(){return o}));var a,r=n("./src/utils/get-self-scope.js"),i=function(){function t(){}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,n){for(var a=n,r=0;t.isHeader(e,n);)r+=10,r+=t._readSize(e,n+6),t.isFooter(e,n+10)&&(r+=10),n+=r;if(r>0)return e.subarray(a,a+r)},t._readSize=function(t,e){var n=0;return n=(127&t[e])<<21,n|=(127&t[e+1])<<14,n|=(127&t[e+2])<<7,n|=127&t[e+3]},t.getTimeStamp=function(e){for(var n=t.getID3Frames(e),a=0;a<n.length;a++){var r=n[a];if(t.isTimeStampFrame(r))return t._readTimeStamp(r)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var n=String.fromCharCode(e[0],e[1],e[2],e[3]),a=t._readSize(e,4);return{type:n,size:a,data:e.subarray(10,10+a)}},t.getID3Frames=function(e){for(var n=0,a=[];t.isHeader(e,n);){for(var r=t._readSize(e,n+6),i=(n+=10)+r;n+8<i;){var s=t._getFrameData(e.subarray(n)),o=t._decodeFrame(s);o&&a.push(o),n+=s.size+10}t.isFooter(e,n)&&(n+=10)}return a},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):t._decodeTextFrame(e)},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),n=1&e[3],a=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return a/=45,n&&(a+=47721858.84),Math.round(a)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var n=t._utf8ArrayToStr(e.data,!0),a=new Uint8Array(e.data.subarray(n.length+1));return{key:e.type,info:n,data:a.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var n=1,a=t._utf8ArrayToStr(e.data.subarray(n),!0);n+=a.length+1;var r=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:a,data:r}}var i=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:i}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var n=1,a=t._utf8ArrayToStr(e.data.subarray(n),!0);n+=a.length+1;var r=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:a,data:r}}var i=t._utf8ArrayToStr(e.data);return{key:e.type,data:i}},t._utf8ArrayToStr=function(t,e){void 0===e&&(e=!1);var n=s();if(n){var a=n.decode(t);if(e){var r=a.indexOf("\0");return-1!==r?a.substring(0,r):a}return a.replace(/\0/g,"")}for(var i,o,c,l=t.length,u="",d=0;d<l;){if(0===(i=t[d++])&&e)return u;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(i);break;case 12:case 13:o=t[d++],u+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=t[d++],c=t[d++],u+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&c)<<0)}}return u},t}();function s(){var t=Object(r.getSelfScope)();return a||void 0===t.TextDecoder||(a=new t.TextDecoder("utf-8")),a}var o=i._utf8ArrayToStr;e.default=i},"./src/demux/mp4demuxer.js":function(t,e,n){"use strict";n.r(e);var a=n("./src/utils/logger.js"),r=n("./src/events.js"),i=Math.pow(2,32)-1,s=function(){function t(t,e){this.observer=t,this.remuxer=e}var e=t.prototype;return e.resetTimeStamp=function(t){this.initPTS=t},e.resetInitSegment=function(e,n,a,i){if(e&&e.byteLength){var s=this.initData=t.parseInitSegment(e);null==n&&(n="mp4a.40.5"),null==a&&(a="avc1.42e01e");var o={};s.audio&&s.video?o.audiovideo={container:"video/mp4",codec:n+","+a,initSegment:i?e:null}:(s.audio&&(o.audio={container:"audio/mp4",codec:n,initSegment:i?e:null}),s.video&&(o.video={container:"video/mp4",codec:a,initSegment:i?e:null})),this.observer.trigger(r.default.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}else n&&(this.audioCodec=n),a&&(this.videoCodec=a)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<8|t[e+1];return n<0?65536+n:n},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return n<0?4294967296+n:n},t.writeUint32=function(t,e,n){t.data&&(e+=t.start,t=t.data),t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},t.findBox=function(e,n){var a,r,i,s,o,c,l=[];if(e.data?(o=e.start,i=e.end,e=e.data):(o=0,i=e.byteLength),!n.length)return null;for(a=o;a<i;)c=(r=t.readUint32(e,a))>1?a+r:i,t.bin2str(e.subarray(a+4,a+8))===n[0]&&(1===n.length?l.push({data:e,start:a+8,end:c}):(s=t.findBox({data:e,start:a+8,end:c},n.slice(1))).length&&(l=l.concat(s))),a=c;return l},t.parseSegmentIndex=function(e){var n,a=t.findBox(e,["moov"])[0],r=a?a.end:null,i=0,s=t.findBox(e,["sidx"]);if(!s||!s[0])return null;n=[];var o=(s=s[0]).data[0];i=0===o?8:16;var c=t.readUint32(s,i);i+=4,i+=0===o?8:16,i+=2;var l=s.end+0,u=t.readUint16(s,i);i+=2;for(var d=0;d<u;d++){var f=i,h=t.readUint32(s,f);f+=4;var p=2147483647&h;if(1==(2147483648&h)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var m=t.readUint32(s,f);f+=4,n.push({referenceSize:p,subsegmentDuration:m,info:{duration:m/c,start:l,end:l+p-1}}),l+=p,i=f+=4}return{earliestPresentationTime:0,timescale:c,version:o,referencesCount:u,references:n,moovEndOffset:r}},t.parseInitSegment=function(e){var n=[];return t.findBox(e,["moov","trak"]).forEach((function(e){var r=t.findBox(e,["tkhd"])[0];if(r){var i=r.data[r.start],s=0===i?12:20,o=t.readUint32(r,s),c=t.findBox(e,["mdia","mdhd"])[0];if(c){s=0===(i=c.data[c.start])?12:20;var l=t.readUint32(c,s),u=t.findBox(e,["mdia","hdlr"])[0];if(u){var d={soun:"audio",vide:"video"}[t.bin2str(u.data.subarray(u.start+8,u.start+12))];if(d){var f=t.findBox(e,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var h=t.bin2str(f.data.subarray(f.start+12,f.start+16));a.logger.log("MP4Demuxer:"+d+":"+h+" found")}n[o]={timescale:l,type:d},n[d]={timescale:l,id:o}}}}}})),n},t.getStartDTS=function(e,n){var a,r,i;return a=t.findBox(n,["moof","traf"]),r=[].concat.apply([],a.map((function(n){return t.findBox(n,["tfhd"]).map((function(a){var r,i;return r=t.readUint32(a,4),i=e[r].timescale||9e4,t.findBox(n,["tfdt"]).map((function(e){var n,a;return n=e.data[e.start],a=t.readUint32(e,4),1===n&&(a*=Math.pow(2,32),a+=t.readUint32(e,8)),a}))[0]/i}))}))),i=Math.min.apply(null,r),isFinite(i)?i:0},t.offsetStartDTS=function(e,n,a){t.findBox(n,["moof","traf"]).map((function(n){return t.findBox(n,["tfhd"]).map((function(r){var s=t.readUint32(r,4),o=e[s].timescale||9e4;t.findBox(n,["tfdt"]).map((function(e){var n=e.data[e.start],r=t.readUint32(e,4);if(0===n)t.writeUint32(e,4,r-a*o);else{r*=Math.pow(2,32),r+=t.readUint32(e,8),r-=a*o,r=Math.max(r,0);var s=Math.floor(r/(i+1)),c=Math.floor(r%(i+1));t.writeUint32(e,4,s),t.writeUint32(e,8,c)}}))}))}))},e.append=function(e,n,a,i){var s=this.initData;s||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),s=this.initData);var o,c=this.initPTS;if(void 0===c){var l=t.getStartDTS(s,e);this.initPTS=c=l-n,this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:c})}t.offsetStartDTS(s,e,c),o=t.getStartDTS(s,e),this.remuxer.remux(s.audio,s.video,null,null,o,a,i,e)},e.destroy=function(){},t}();e.default=s},"./src/errors.ts":function(t,e,n){"use strict";var a,r;n.r(e),n.d(e,"ErrorTypes",(function(){return a})),n.d(e,"ErrorDetails",(function(){return r})),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(a||(a={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException"}(r||(r={}))},"./src/events.js":function(t,e,n){"use strict";n.r(e),e.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return cn}));var a={};n.r(a),n.d(a,"newCue",(function(){return he}));var r,i,s=n("./node_modules/url-toolkit/src/url-toolkit.js"),o=n("./src/errors.ts"),c=n("./src/polyfills/number.js"),l=n("./src/events.js"),u=n("./src/utils/logger.js"),d={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},f=function(){function t(t){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=t,this.onEvent=this.onEvent.bind(this);for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){},e.onHandlerDestroyed=function(){},e.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(t){if(d[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)}),this)},e.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(t){this.hls.off(t,this.onEvent)}),this)},e.onEvent=function(t,e){this.onEventGeneric(t,e)},e.onEventGeneric=function(t,e){try{(function(t,e){var n="on"+t.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,e)}).call(this,t,e).call()}catch(e){u.logger.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}();!function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(r||(r={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(i||(i={}));var h=n("./src/demux/mp4demuxer.js");function p(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var m,v=function(){function t(t,e){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=t,this.reluri=e}var e,n,a;return e=t,(n=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(s.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&p(e.prototype,n),a&&p(e,a),t}();function g(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}!function(t){t.AUDIO="audio",t.VIDEO="video"}(m||(m={}));var _=function(){function t(){var t;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((t={})[m.AUDIO]=!1,t[m.VIDEO]=!1,t),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var e,n,a,r=t.prototype;return r.setByteRange=function(t,e){var n=t.split("@",2),a=[];1===n.length?a[0]=e?e.byteRangeEndOffset:0:a[0]=parseInt(n[1]),a[1]=parseInt(n[0])+a[0],this._byteRange=a},r.addElementaryStream=function(t){this._elementaryStreams[t]=!0},r.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},r.createInitializationVector=function(t){for(var e=new Uint8Array(16),n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e},r.setDecryptDataFromLevelKey=function(t,e){var n=t;return(null==t?void 0:t.method)&&t.uri&&!t.iv&&((n=new v(t.baseuri,t.reluri)).method=t.method,n.iv=this.createInitializationVector(e)),n},e=t,(n=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(s.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&u.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(c.isFiniteNumber)(this.programDateTime))return null;var t=Object(c.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&g(e.prototype,n),a&&g(e,a),t}();function y(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var b=function(){function t(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}var e,n,a;return e=t,(n=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(c.isFiniteNumber)(this.fragments[0].programDateTime))}}])&&y(e.prototype,n),a&&y(e,a),t}(),C=/^(\d+)x(\d+)$/,w=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,k=function(){function t(e){for(var n in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(n)&&(this[n]=e[n])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),a=0;a<e.length/2;a++)n[a]=parseInt(e.slice(2*a,2*a+2),16);return n}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.enumeratedString=function(t){return this[t]},e.decimalResolution=function(t){var e=C.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,n={};for(w.lastIndex=0;null!==(e=w.exec(t));){var a=e[2];0===a.indexOf('"')&&a.lastIndexOf('"')===a.length-1&&(a=a.slice(1,-1)),n[e[1]]=a}return n},t}(),x={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function S(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var E=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,T=/#EXT-X-MEDIA:(.*)/g,A=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),R=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,O=/\.(mp4|m4s|m4v|m4a)$/i,$=function(){function t(){}return t.findGroup=function(t,e){for(var n=0;n<t.length;n++){var a=t[n];if(a.id===e)return a}},t.convertAVC1ToAVCOTI=function(t){var e,n=t.split(".");return n.length>2?(e=n.shift()+".",e+=parseInt(n.shift()).toString(16),e+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):e=t,e},t.resolve=function(t,e){return s.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,n){var a,r=[],i={},s=!1;function o(t,e){["video","audio"].forEach((function(n){var a=t.filter((function(t){return function(t,e){var n=x[e];return!!n&&!0===n[t.slice(0,4)]}(t,n)}));if(a.length){var r=a.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[n+"Codec"]=r.length>0?r[0]:a[0],t=t.filter((function(t){return-1===a.indexOf(t)}))}})),e.unknownCodecs=t}for(E.lastIndex=0;null!=(a=E.exec(e));)if(a[1]){var c={},l=c.attrs=new k(a[1]);c.url=t.resolve(a[2],n);var u=l.decimalResolution("RESOLUTION");u&&(c.width=u.width,c.height=u.height),c.bitrate=l.decimalInteger("AVERAGE-BANDWIDTH")||l.decimalInteger("BANDWIDTH"),c.name=l.NAME,o([].concat((l.CODECS||"").split(/[ ,]+/)),c),c.videoCodec&&-1!==c.videoCodec.indexOf("avc1")&&(c.videoCodec=t.convertAVC1ToAVCOTI(c.videoCodec)),r.push(c)}else if(a[3]){var d=new k(a[3]);d["DATA-ID"]&&(s=!0,i[d["DATA-ID"]]=d)}return{levels:r,sessionData:s?i:null}},t.parseMasterPlaylistMedia=function(e,n,a,r){var i;void 0===r&&(r=[]);var s=[],o=0;for(T.lastIndex=0;null!==(i=T.exec(e));){var c=new k(i[1]);if(c.TYPE===a){var l={attrs:c,id:o++,groupId:c["GROUP-ID"],instreamId:c["INSTREAM-ID"],name:c.NAME||c.LANGUAGE,type:a,default:"YES"===c.DEFAULT,autoselect:"YES"===c.AUTOSELECT,forced:"YES"===c.FORCED,lang:c.LANGUAGE};if(c.URI&&(l.url=t.resolve(c.URI,n)),r.length){var u=t.findGroup(r,l.groupId);l.audioCodec=u?u.codec:r[0].codec}s.push(l)}}return s},t.parseLevelPlaylist=function(t,e,n,a,r){var i,s,o,l=0,d=0,f=new b(e),h=0,p=null,m=new _,g=null;for(A.lastIndex=0;null!==(i=A.exec(t));){var y=i[1];if(y){m.duration=parseFloat(y);var C=(" "+i[2]).slice(1);m.title=C||null,m.tagList.push(C?["INF",y,C]:["INF",y])}else if(i[3]){if(Object(c.isFiniteNumber)(m.duration)){var w=l++;m.type=a,m.start=d,o&&(m.levelkey=o),m.sn=w,m.level=n,m.cc=h,m.urlId=r,m.baseurl=e,m.relurl=(" "+i[3]).slice(1),P(m,p),f.fragments.push(m),p=m,d+=m.duration,m=new _}}else if(i[4]){var x=(" "+i[4]).slice(1);p?m.setByteRange(x,p):m.setByteRange(x)}else if(i[5])m.rawProgramDateTime=(" "+i[5]).slice(1),m.tagList.push(["PROGRAM-DATE-TIME",m.rawProgramDateTime]),null===g&&(g=f.fragments.length);else{if(!(i=i[0].match(R))){u.logger.warn("No matches on slow regex match for level playlist!");continue}for(s=1;s<i.length&&void 0===i[s];s++);var S=(" "+i[s+1]).slice(1),E=(" "+i[s+2]).slice(1);switch(i[s]){case"#":m.tagList.push(E?[S,E]:[S]);break;case"PLAYLIST-TYPE":f.type=S.toUpperCase();break;case"MEDIA-SEQUENCE":l=f.startSN=parseInt(S);break;case"TARGETDURATION":f.targetduration=parseFloat(S);break;case"VERSION":f.version=parseInt(S);break;case"EXTM3U":break;case"ENDLIST":f.live=!1;break;case"DIS":h++,m.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":h=parseInt(S);break;case"KEY":var T=new k(S),$=T.enumeratedString("METHOD"),L=T.URI,D=T.hexadecimalInteger("IV");if("com.apple.streamingkeydelivery"===(T.KEYFORMAT||"identity")){u.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}$&&(o=new v(e,L),L&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf($)>=0&&(o.method=$,o.key=null,o.iv=D));break;case"START":var I=new k(S).decimalFloatingPoint("TIME-OFFSET");Object(c.isFiniteNumber)(I)&&(f.startTimeOffset=I);break;case"MAP":var M=new k(S);m.relurl=M.URI,M.BYTERANGE&&m.setByteRange(M.BYTERANGE),m.baseurl=e,m.level=n,m.type=a,m.sn="initSegment",f.initSegment=m,(m=new _).rawProgramDateTime=f.initSegment.rawProgramDateTime;break;default:u.logger.warn("line parsed but not handled: "+i)}}}return(m=p)&&!m.relurl&&(f.fragments.pop(),d-=m.duration),f.totalduration=d,f.averagetargetduration=d/f.fragments.length,f.endSN=l-1,f.startCC=f.fragments[0]?f.fragments[0].cc:0,f.endCC=h,!f.initSegment&&f.fragments.length&&f.fragments.every((function(t){return O.test(t.relurl)}))&&(u.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(m=new _).relurl=f.fragments[0].relurl,m.baseurl=e,m.level=n,m.type=a,m.sn="initSegment",f.initSegment=m,f.needSidxRanges=!0),g&&function(t,e){for(var n=t[e],a=e-1;a>=0;a--){var r=t[a];r.programDateTime=n.programDateTime-1e3*r.duration,n=r}}(f.fragments,g),f},t}();function P(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):(null==e?void 0:e.programDateTime)&&(t.programDateTime=e.endProgramDateTime),Object(c.isFiniteNumber)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var L=window.performance,D=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,l.default.MANIFEST_LOADING,l.default.LEVEL_LOADING,l.default.AUDIO_TRACK_LOADING,l.default.SUBTITLE_TRACK_LOADING)||this).loaders={},n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,a.canHaveQualityLevels=function(t){return t!==r.AUDIO_TRACK&&t!==r.SUBTITLE_TRACK},a.mapContextToLevelType=function(t){switch(t.type){case r.AUDIO_TRACK:return i.AUDIO;case r.SUBTITLE_TRACK:return i.SUBTITLE;default:return i.MAIN}},a.getResponseUrl=function(t,e){var n=t.url;return void 0!==n&&0!==n.indexOf("data:")||(n=e.url),n};var s=a.prototype;return s.createInternalLoader=function(t){var e=this.hls.config,n=e.pLoader,a=e.loader,r=new(n||a)(e);return t.loader=r,this.loaders[t.type]=r,r},s.getInternalLoader=function(t){return this.loaders[t.type]},s.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},s.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},s.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},s.onManifestLoading=function(t){this.load({url:t.url,type:r.MANIFEST,level:0,id:null,responseType:"text"})},s.onLevelLoading=function(t){this.load({url:t.url,type:r.LEVEL,level:t.level,id:t.id,responseType:"text"})},s.onAudioTrackLoading=function(t){this.load({url:t.url,type:r.AUDIO_TRACK,level:null,id:t.id,responseType:"text"})},s.onSubtitleTrackLoading=function(t){this.load({url:t.url,type:r.SUBTITLE_TRACK,level:null,id:t.id,responseType:"text"})},s.load=function(t){var e=this.hls.config;u.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var n,a,i,s,o=this.getInternalLoader(t);if(o){var c=o.context;if(c&&c.url===t.url)return u.logger.trace("playlist request ongoing"),!1;u.logger.warn("aborting previous loader for type: "+t.type),o.abort()}switch(t.type){case r.MANIFEST:n=e.manifestLoadingMaxRetry,a=e.manifestLoadingTimeOut,i=e.manifestLoadingRetryDelay,s=e.manifestLoadingMaxRetryTimeout;break;case r.LEVEL:n=0,s=0,i=0,a=e.levelLoadingTimeOut;break;default:n=e.levelLoadingMaxRetry,a=e.levelLoadingTimeOut,i=e.levelLoadingRetryDelay,s=e.levelLoadingMaxRetryTimeout}o=this.createInternalLoader(t);var l={timeout:a,maxRetry:n,retryDelay:i,maxRetryDelay:s},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return u.logger.debug("Calling internal loader delegate for URL: "+t.url),o.load(t,l,d),!0},s.loadsuccess=function(t,e,n,a){if(void 0===a&&(a=null),n.isSidxRequest)return this._handleSidxRequest(t,n),void this._handlePlaylistLoaded(t,e,n,a);if(this.resetInternalLoader(n.type),"string"!=typeof t.data)throw new Error('expected responseType of "text" for PlaylistLoader');var r=t.data;e.tload=L.now(),0===r.indexOf("#EXTM3U")?r.indexOf("#EXTINF:")>0||r.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(t,e,n,a):this._handleMasterPlaylist(t,e,n,a):this._handleManifestParsingError(t,n,"no EXTM3U delimiter",a)},s.loaderror=function(t,e,n){void 0===n&&(n=null),this._handleNetworkError(e,n,!1,t)},s.loadtimeout=function(t,e,n){void 0===n&&(n=null),this._handleNetworkError(e,n,!0)},s._handleMasterPlaylist=function(t,e,n,r){var i=this.hls,s=t.data,o=a.getResponseUrl(t,n),c=$.parseMasterPlaylist(s,o),d=c.levels,f=c.sessionData;if(d.length){var h=d.map((function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}})),p=$.parseMasterPlaylistMedia(s,o,"AUDIO",h),m=$.parseMasterPlaylistMedia(s,o,"SUBTITLES"),v=$.parseMasterPlaylistMedia(s,o,"CLOSED-CAPTIONS");if(p.length){var g=!1;p.forEach((function(t){t.url||(g=!0)})),!1===g&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(u.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}i.trigger(l.default.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:m,captions:v,url:o,stats:e,networkDetails:r,sessionData:f})}else this._handleManifestParsingError(t,n,"no level found in manifest",r)},s._handleTrackOrLevelPlaylist=function(t,e,n,i){var s=this.hls,u=n.id,d=n.level,f=n.type,h=a.getResponseUrl(t,n),p=Object(c.isFiniteNumber)(u)?u:0,m=Object(c.isFiniteNumber)(d)?d:p,v=a.mapContextToLevelType(n),g=$.parseLevelPlaylist(t.data,h,m,v,p);if(g.tload=e.tload,g.fragments.length){if(f===r.MANIFEST){var _={url:h,details:g};s.trigger(l.default.MANIFEST_LOADED,{levels:[_],audioTracks:[],url:h,stats:e,networkDetails:i,sessionData:null})}if(e.tparsed=L.now(),g.needSidxRanges){var y=g.initSegment.url;this.load({url:y,isSidxRequest:!0,type:f,level:d,levelDetails:g,id:u,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=g,this._handlePlaylistLoaded(t,e,n,i)}else s.trigger(l.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:h,reason:"no fragments found in level",level:"number"==typeof n.level?n.level:void 0})},s._handleSidxRequest=function(t,e){if("string"==typeof t.data)throw new Error("sidx request must be made with responseType of array buffer");var n=h.default.parseSegmentIndex(new Uint8Array(t.data));if(n){var a=n.references,r=e.levelDetails;a.forEach((function(t,e){var n=t.info;if(r){var a=r.fragments[e];0===a.byteRange.length&&a.setByteRange(String(1+n.end-n.start)+"@"+String(n.start))}})),r&&r.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}},s._handleManifestParsingError=function(t,e,n,a){this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:n,networkDetails:a})},s._handleNetworkError=function(t,e,n,a){var i,s;void 0===n&&(n=!1),void 0===a&&(a=null),u.logger.info("A network error occured while loading a "+t.type+"-type playlist");var c=this.getInternalLoader(t);switch(t.type){case r.MANIFEST:i=n?o.ErrorDetails.MANIFEST_LOAD_TIMEOUT:o.ErrorDetails.MANIFEST_LOAD_ERROR,s=!0;break;case r.LEVEL:i=n?o.ErrorDetails.LEVEL_LOAD_TIMEOUT:o.ErrorDetails.LEVEL_LOAD_ERROR,s=!1;break;case r.AUDIO_TRACK:i=n?o.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,s=!1;break;default:s=!1}c&&(c.abort(),this.resetInternalLoader(t.type));var d={type:o.ErrorTypes.NETWORK_ERROR,details:i,fatal:s,url:t.url,loader:c,context:t,networkDetails:e};a&&(d.response=a),this.hls.trigger(l.default.ERROR,d)},s._handlePlaylistLoaded=function(t,e,n,i){var s=n.type,o=n.level,c=n.id,u=n.levelDetails;if(u&&u.targetduration)if(a.canHaveQualityLevels(n.type))this.hls.trigger(l.default.LEVEL_LOADED,{details:u,level:o||0,id:c||0,stats:e,networkDetails:i});else switch(s){case r.AUDIO_TRACK:this.hls.trigger(l.default.AUDIO_TRACK_LOADED,{details:u,id:c,stats:e,networkDetails:i});break;case r.SUBTITLE_TRACK:this.hls.trigger(l.default.SUBTITLE_TRACK_LOADED,{details:u,id:c,stats:e,networkDetails:i})}else this._handleManifestParsingError(t,n,"invalid target duration",i)},a}(f),I=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,l.default.FRAG_LOADING)||this).loaders={},n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r=a.prototype;return r.destroy=function(){var e=this.loaders;for(var n in e){var a=e[n];a&&a.destroy()}this.loaders={},t.prototype.destroy.call(this)},r.onFragLoading=function(t){var e=t.frag,n=e.type,a=this.loaders,r=this.hls.config,i=r.fLoader,s=r.loader;e.loaded=0;var o,l,d,f=a[n];f&&(u.logger.warn("abort previous fragment loader for type: "+n),f.abort()),f=a[n]=e.loader=r.fLoader?new i(r):new s(r),o={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var h=e.byteRangeStartOffset,p=e.byteRangeEndOffset;Object(c.isFiniteNumber)(h)&&Object(c.isFiniteNumber)(p)&&(o.rangeStart=h,o.rangeEnd=p),l={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},f.load(o,l,d)},r.loadsuccess=function(t,e,n,a){void 0===a&&(a=null);var r=t.data,i=n.frag;i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(l.default.FRAG_LOADED,{payload:r,frag:i,stats:e,networkDetails:a})},r.loaderror=function(t,e,n){void 0===n&&(n=null);var a=e.frag,r=a.loader;r&&r.abort(),this.loaders[a.type]=void 0,this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:n})},r.loadtimeout=function(t,e,n){void 0===n&&(n=null);var a=e.frag,r=a.loader;r&&r.abort(),this.loaders[a.type]=void 0,this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:n})},r.loadprogress=function(t,e,n,a){void 0===a&&(a=null);var r=e.frag;r.loaded=t.loaded,this.hls.trigger(l.default.FRAG_LOAD_PROGRESS,{frag:r,stats:t,networkDetails:a})},a}(f),M=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,l.default.KEY_LOADING)||this).loaders={},n.decryptkey=null,n.decrypturl=null,n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r=a.prototype;return r.destroy=function(){for(var e in this.loaders){var n=this.loaders[e];n&&n.destroy()}this.loaders={},t.prototype.destroy.call(this)},r.onKeyLoading=function(t){var e=t.frag,n=e.type,a=this.loaders[n];if(e.decryptdata){var r=e.decryptdata.uri;if(r!==this.decrypturl||null===this.decryptkey){var i=this.hls.config;if(a&&(u.logger.warn("abort previous key loader for type:"+n),a.abort()),!r)return void u.logger.warn("key uri is falsy");e.loader=this.loaders[n]=new i.loader(i),this.decrypturl=r,this.decryptkey=null;var s={url:r,frag:e,responseType:"arraybuffer"},o={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:i.fragLoadingRetryDelay,maxRetryDelay:i.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};e.loader.load(s,o,c)}else this.decryptkey&&(e.decryptdata.key=this.decryptkey,this.hls.trigger(l.default.KEY_LOADED,{frag:e}))}else u.logger.warn("Missing decryption data on fragment in onKeyLoading")},r.loadsuccess=function(t,e,n){var a=n.frag;a.decryptdata?(this.decryptkey=a.decryptdata.key=new Uint8Array(t.data),a.loader=void 0,delete this.loaders[a.type],this.hls.trigger(l.default.KEY_LOADED,{frag:a})):u.logger.error("after key load, decryptdata unset")},r.loaderror=function(t,e){var n=e.frag,a=n.loader;a&&a.abort(),delete this.loaders[n.type],this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})},r.loadtimeout=function(t,e){var n=e.frag,a=n.loader;a&&a.abort(),delete this.loaders[n.type],this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},a}(f),N="NOT_LOADED",j="APPENDING",F="PARTIAL",B="OK",U=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,l.default.BUFFER_APPENDED,l.default.FRAG_BUFFERED,l.default.FRAG_LOADED)||this).bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=e.config,n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r=a.prototype;return r.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,f.prototype.destroy.call(this),t.prototype.destroy.call(this)},r.getBufferedFrag=function(t,e){var n=this.fragments,a=Object.keys(n).filter((function(a){var r=n[a];if(r.body.type!==e)return!1;if(!r.buffered)return!1;var i=r.body;return i.startPTS<=t&&t<=i.endPTS}));if(0===a.length)return null;var r=a.pop();return n[r].body},r.detectEvictedFragments=function(t,e){var n=this;Object.keys(this.fragments).forEach((function(a){var r=n.fragments[a];if(r&&r.buffered){var i=r.range[t];if(i)for(var s=i.time,o=0;o<s.length;o++){var c=s[o];if(!n.isTimeBuffered(c.startPTS,c.endPTS,e)){n.removeFragment(r.body);break}}}}))},r.detectPartialFragments=function(t){var e=this,n=this.getFragmentKey(t),a=this.fragments[n];a&&(a.buffered=!0,Object.keys(this.timeRanges).forEach((function(n){if(t.hasElementaryStream(n)){var r=e.timeRanges[n];a.range[n]=e.getBufferedTimes(t.startPTS,t.endPTS,r)}})))},r.getBufferedTimes=function(t,e,n){for(var a,r,i=[],s=!1,o=0;o<n.length;o++){if(a=n.start(o)-this.bufferPadding,r=n.end(o)+this.bufferPadding,t>=a&&e<=r){i.push({startPTS:Math.max(t,n.start(o)),endPTS:Math.min(e,n.end(o))});break}if(t<r&&e>a)i.push({startPTS:Math.max(t,n.start(o)),endPTS:Math.min(e,n.end(o))}),s=!0;else if(e<=a)break}return{time:i,partial:s}},r.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},r.getPartialFragment=function(t){var e,n,a,r=this,i=null,s=0;return Object.keys(this.fragments).forEach((function(o){var c=r.fragments[o];r.isPartial(c)&&(n=c.body.startPTS-r.bufferPadding,a=c.body.endPTS+r.bufferPadding,t>=n&&t<=a&&(e=Math.min(t-n,a-t),s<=e&&(i=c.body,s=e)))})),i},r.getState=function(t){var e=this.getFragmentKey(t),n=this.fragments[e],a=N;return void 0!==n&&(a=n.buffered?!0===this.isPartial(n)?F:B:j),a},r.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},r.isTimeBuffered=function(t,e,n){for(var a,r,i=0;i<n.length;i++){if(a=n.start(i)-this.bufferPadding,r=n.end(i)+this.bufferPadding,t>=a&&e<=r)return!0;if(e<=a)return!1}return!1},r.onFragLoaded=function(t){var e=t.frag;Object(c.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.fragments[this.getFragmentKey(e)]={body:e,range:Object.create(null),buffered:!1})},r.onBufferAppended=function(t){var e=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach((function(t){var n=e.timeRanges[t];e.detectEvictedFragments(t,n)}))},r.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},r.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},r.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},r.removeAllFragments=function(){this.fragments=Object.create(null)},a}(f),V={search:function(t,e){for(var n=0,a=t.length-1,r=null,i=null;n<=a;){var s=e(i=t[r=(n+a)/2|0]);if(s>0)n=r+1;else{if(!(s<0))return i;a=r-1}}return null}},H=function(){function t(){}return t.isBuffered=function(t,e){try{if(t)for(var n=t.buffered,a=0;a<n.length;a++)if(e>=n.start(a)&&e<=n.end(a))return!0}catch(t){}return!1},t.bufferInfo=function(t,e,n){try{if(t){var a,r=t.buffered,i=[];for(a=0;a<r.length;a++)i.push({start:r.start(a),end:r.end(a)});return this.bufferedInfo(i,e,n)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,n){t.sort((function(t,e){var n=t.start-e.start;return n||e.end-t.end}));var a=[];if(n)for(var r=0;r<t.length;r++){var i=a.length;if(i){var s=a[i-1].end;t[r].start-s<n?t[r].end>s&&(a[i-1].end=t[r].end):a.push(t[r])}else a.push(t[r])}else a=t;for(var o,c=0,l=e,u=e,d=0;d<a.length;d++){var f=a[d].start,h=a[d].end;if(e+n>=f&&e<h)l=f,c=(u=h)-e;else if(e+n<f){o=f;break}}return{len:c,start:l,end:u,nextStart:o}},t}(),Z=n("./node_modules/eventemitter3/index.js"),G=n("./node_modules/webworkify-webpack/index.js"),z=n("./src/demux/demuxer-inline.js");function q(){return window.MediaSource||window.WebKitMediaSource}var K=n("./src/utils/get-self-scope.js"),W=function(t){var e,n;function a(){return t.apply(this,arguments)||this}return n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,a.prototype.trigger=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];this.emit.apply(this,[t,t].concat(n))},a}(Z.EventEmitter),Y=Object(K.getSelfScope)(),X=q()||{isTypeSupported:function(){return!1}},J=function(){function t(t,e){var n=this;this.hls=t,this.id=e;var a=this.observer=new W,r=t.config,i=function(e,a){(a=a||{}).frag=n.frag,a.id=n.id,t.trigger(e,a)};a.on(l.default.FRAG_DECRYPTED,i),a.on(l.default.FRAG_PARSING_INIT_SEGMENT,i),a.on(l.default.FRAG_PARSING_DATA,i),a.on(l.default.FRAG_PARSED,i),a.on(l.default.ERROR,i),a.on(l.default.FRAG_PARSING_METADATA,i),a.on(l.default.FRAG_PARSING_USERDATA,i),a.on(l.default.INIT_PTS_FOUND,i);var s={mp4:X.isTypeSupported("video/mp4"),mpeg:X.isTypeSupported("audio/mpeg"),mp3:X.isTypeSupported('audio/mp4; codecs="mp3"')},c=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){var d;u.logger.log("demuxing in webworker");try{d=this.w=G("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(e){t.trigger(l.default.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:s,vendor:c,id:e,config:JSON.stringify(r)})}catch(t){u.logger.warn("Error in worker:",t),u.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&Y.URL.revokeObjectURL(d.objectURL),this.demuxer=new z.default(a,s,r,c),this.w=void 0}}else this.demuxer=new z.default(a,s,r,c)}var e=t.prototype;return e.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},e.push=function(t,e,n,a,r,i,s,o){var l=this.w,d=Object(c.isFiniteNumber)(r.startPTS)?r.startPTS:r.start,f=r.decryptdata,h=this.frag,p=!(h&&r.cc===h.cc),m=!(h&&r.level===h.level),v=h&&r.sn===h.sn+1,g=!m&&v;if(p&&u.logger.log(this.id+":discontinuity detected"),m&&u.logger.log(this.id+":switch detected"),this.frag=r,l)l.postMessage({cmd:"demux",data:t,decryptdata:f,initSegment:e,audioCodec:n,videoCodec:a,timeOffset:d,discontinuity:p,trackSwitch:m,contiguous:g,duration:i,accurateTimeOffset:s,defaultInitPTS:o},t instanceof ArrayBuffer?[t]:[]);else{var _=this.demuxer;_&&_.push(t,f,e,n,a,d,p,m,g,i,s,o)}},e.onWorkerMessage=function(t){var e=t.data,n=this.hls;switch(e.event){case"init":Y.URL.revokeObjectURL(this.w.objectURL);break;case l.default.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,n.trigger(e.event,e.data)}},t}();function Q(t,e,n){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(n);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(n)}}function tt(t,e,n){var a=t[e],r=t[n],i=r.startPTS;if(Object(c.isFiniteNumber)(i))n>e?(a.duration=i-a.start,a.duration<0&&u.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):(r.duration=a.start-i,r.duration<0&&u.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"));else if(n>e){var s=a.cc===r.cc;r.start=a.start+(s&&a.minEndPTS?a.minEndPTS-a.start:a.duration)}else r.start=Math.max(a.start-r.duration,0)}function et(t,e,n,a,r,i){var s=n,o=a;if(Object(c.isFiniteNumber)(e.startPTS)){var l=Math.abs(e.startPTS-n);Object(c.isFiniteNumber)(e.deltaPTS)?e.deltaPTS=Math.max(l,e.deltaPTS):e.deltaPTS=l,s=Math.max(n,e.startPTS),n=Math.min(n,e.startPTS),o=Math.min(a,e.endPTS),a=Math.max(a,e.endPTS),r=Math.min(r,e.startDTS),i=Math.max(i,e.endDTS)}var u=n-e.start;e.start=e.startPTS=n,e.maxStartPTS=s,e.endPTS=a,e.minEndPTS=o,e.startDTS=r,e.endDTS=i,e.duration=a-n;var d,f,h,p=e.sn;if(!t||p<t.startSN||p>t.endSN)return 0;for(d=p-t.startSN,(f=t.fragments)[d]=e,h=d;h>0;h--)tt(f,h,h-1);for(h=d;h<f.length-1;h++)tt(f,h,h+1);return t.PTSKnown=!0,u}function nt(t,e){e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment);var n,a=0;if(at(t,e,(function(t,r){a=t.cc-r.cc,Object(c.isFiniteNumber)(t.startPTS)&&(r.start=r.startPTS=t.startPTS,r.endPTS=t.endPTS,r.duration=t.duration,r.backtracked=t.backtracked,r.dropped=t.dropped,n=r),e.PTSKnown=!0})),e.PTSKnown){if(a){u.logger.log("discontinuity sliding from playlist, take drift into account");for(var r=e.fragments,i=0;i<r.length;i++)r[i].cc+=a}n?et(e,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):function(t,e){var n=e.startSN-t.startSN,a=t.fragments,r=e.fragments;if(!(n<0||n>a.length))for(var i=0;i<r.length;i++)r[i].start+=a[n].start}(t,e),e.PTSKnown=t.PTSKnown}}function at(t,e,n){if(t&&e)for(var a=Math.max(t.startSN,e.startSN)-e.startSN,r=Math.min(t.endSN,e.endSN)-e.startSN,i=e.startSN-t.startSN,s=a;s<=r;s++){var o=t.fragments[i+s],c=e.fragments[s];if(!o||!c)break;n(o,c,s)}}function rt(t,e,n){var a=1e3*(e.averagetargetduration?e.averagetargetduration:e.targetduration),r=a/2;return t&&e.endSN===t.endSN&&(a=r),n&&(a=Math.max(r,a-(window.performance.now()-n))),Math.round(a)}var it={toString:function(t){for(var e="",n=t.length,a=0;a<n;a++)e+="["+t.start(a).toFixed(3)+","+t.end(a).toFixed(3)+"]";return e}};function st(t,e){e.fragments.forEach((function(e){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}})),e.PTSKnown=!0}function ot(t,e,n){!function(t,e,n){if(function(t,e,n){var a=!1;return e&&e.details&&n&&(n.endCC>n.startCC||t&&t.cc<n.startCC)&&(a=!0),a}(t,n,e)){var a=function(t,e){var n=t.fragments,a=e.fragments;if(a.length&&n.length){var r=function(t,e){for(var n=null,a=0;a<t.length;a+=1){var r=t[a];if(r&&r.cc===e){n=r;break}}return n}(n,a[0].cc);if(r&&(!r||r.startPTS))return r;u.logger.log("No frag in previous level to align on")}else u.logger.log("No fragments to align")}(n.details,e);a&&(u.logger.log("Adjusting PTS using last level due to CC increase within current level"),st(a.start,e))}}(t,n,e),!n.PTSKnown&&e&&function(t,e){if(e&&e.fragments.length){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;var n=e.fragments[0].programDateTime,a=(t.fragments[0].programDateTime-n)/1e3+e.fragments[0].start;Object(c.isFiniteNumber)(a)&&(u.logger.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),st(a,t))}}(n,e.details)}function ct(t,e,n){if(null===e||!Array.isArray(t)||!t.length||!Object(c.isFiniteNumber)(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;n=n||0;for(var a=0;a<t.length;++a){var r=t[a];if(dt(e,n,r))return r}return null}function lt(t,e,n,a){void 0===n&&(n=0),void 0===a&&(a=0);var r=null;if(t?r=e[t.sn-e[0].sn+1]:0===n&&0===e[0].start&&(r=e[0]),r&&0===ut(n,a,r))return r;var i=V.search(e,ut.bind(null,n,a));return i||r}function ut(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0);var a=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-a<=t?1:n.start-a>t&&n.start?-1:0}function dt(t,e,n){var a=1e3*Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-a>t}var ft=function(){function t(t,e,n,a){this.config=t,this.media=e,this.fragmentTracker=n,this.hls=a,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var e=t.prototype;return e.poll=function(t){var e=this.config,n=this.media,a=this.stalled,r=n.currentTime,i=n.seeking,s=this.seeking&&!i,o=!this.seeking&&i;if(this.seeking=i,r===t){if((o||s)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&n.buffered.length){var c=H.bufferInfo(n,r,0),l=c.len>0,d=c.nextStart||0;if(l||d){if(i){var f=c.len>2,h=!d||d-r>2&&!this.fragmentTracker.getPartialFragment(r);if(f||h)return;this.moved=!1}if(!this.moved&&this.stalled){var p=Math.max(d,c.start||0)-r;if(p>0&&p<=2)return void this._trySkipBufferHole(null)}var m=self.performance.now();if(null!==a){var v=m-a;!i&&v>=250&&this._reportStall(c.len);var g=H.bufferInfo(n,r,e.maxBufferHole);this._tryFixBufferStall(g,v)}else this.stalled=m}}}else if(this.moved=!0,null!==a){if(this.stallReported){var _=self.performance.now()-a;u.logger.warn("playback not stuck anymore @"+r+", after "+Math.round(_)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},e._tryFixBufferStall=function(t,e){var n=this.config,a=this.fragmentTracker,r=this.media.currentTime,i=a.getPartialFragment(r);i&&this._trySkipBufferHole(i)||t.len>n.maxBufferHole&&e>1e3*n.highBufferWatchdogPeriod&&(u.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,u.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+t+")"),e.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.config,n=this.hls,a=this.media,r=a.currentTime,i=0,s=0;s<a.buffered.length;s++){var c=a.buffered.start(s);if(r+e.maxBufferHole>=i&&r<c){var d=Math.max(c+.05,a.currentTime+.1);return u.logger.warn("skipping hole, adjusting currentTime from "+r+" to "+d),this.moved=!0,this.stalled=null,a.currentTime=d,t&&n.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+d,frag:t}),d}i=a.buffered.end(s)}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,n=this.media,a=n.currentTime,r=(this.nudgeRetry||0)+1;if(this.nudgeRetry=r,r<t.nudgeMaxRetry){var i=a+r*t.nudgeOffset;u.logger.warn("Nudging 'currentTime' from "+a+" to "+i),n.currentTime=i,e.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else u.logger.error("Playhead still not moving while enough data buffered @"+a+" after "+t.nudgeMaxRetry+" nudges"),e.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},t}();function ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var pt=function(t){var e,n;function a(e){for(var n,a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];return(n=t.call.apply(t,[this,e].concat(r))||this)._boundTick=void 0,n._tickTimer=null,n._tickInterval=null,n._tickCallCount=0,n._boundTick=n.tick.bind(ht(n)),n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r=a.prototype;return r.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},r.hasInterval=function(){return!!this._tickInterval},r.hasNextTick=function(){return!!this._tickTimer},r.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},r.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},r.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},r.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},r.doTick=function(){},a}(f),mt="STOPPED",vt="STARTING",gt="IDLE",_t="PAUSED",yt="KEY_LOADING",bt="FRAG_LOADING",Ct="FRAG_LOADING_WAITING_RETRY",wt="WAITING_TRACK",kt="PARSING",xt="PARSED",St="BUFFER_FLUSHING",Et="ENDED",Tt="ERROR",At="WAITING_INIT_PTS",Rt="WAITING_LEVEL",Ot=function(t){var e,n;function a(){return t.apply(this,arguments)||this}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r=a.prototype;return r.doTick=function(){},r.startLoad=function(){},r.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=mt},r._streamEnded=function(t,e){var n=this.fragCurrent,a=this.fragmentTracker;if(!e.live&&n&&!n.backtracked&&n.sn===e.endSN&&!t.nextStart){var r=a.getState(n);return r===F||r===B}return!1},r.onMediaSeeking=function(){var t=this.config,e=this.media,n=this.mediaBuffer,a=this.state,r=e?e.currentTime:null,i=H.bufferInfo(n||e,r,this.config.maxBufferHole);if(u.logger.log("media seeking to "+(Object(c.isFiniteNumber)(r)?r.toFixed(3):r)),a===bt){var s=this.fragCurrent;if(0===i.len&&s){var o=t.maxFragLookUpTolerance,l=s.start-o,d=s.start+s.duration+o;r<l||r>d?(s.loader&&(u.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),s.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=gt):u.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else a===Et&&(0===i.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=gt);e&&(this.lastCurrentTime=r),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=r),this.tick()},r.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},r.onHandlerDestroyed=function(){this.state=mt,this.fragmentTracker=null},r.computeLivePosition=function(t,e){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-n)},a}(pt);function $t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Pt,Lt=function(t){var e,n;function a(e,n){var a;return(a=t.call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.MANIFEST_LOADING,l.default.MANIFEST_PARSED,l.default.LEVEL_LOADED,l.default.LEVELS_UPDATED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_LOAD_EMERGENCY_ABORTED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_SWITCHED,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED)||this).fragmentTracker=n,a.config=e.config,a.audioCodecSwap=!1,a._state=mt,a.stallReported=!1,a.gapController=null,a.altAudio=!1,a.audioOnly=!1,a.bitrateTest=!1,a}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r,s,d,f=a.prototype;return f.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var a=n.startLevel;-1===a&&(n.config.testBandwidth?(a=0,this.bitrateTest=!0):a=n.nextAutoLevel),this.level=n.nextLoadLevel=a,this.loadedmetadata=!1}e>0&&-1===t&&(u.logger.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=gt,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=mt},f.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},f.doTick=function(){switch(this.state){case St:this.fragLoadError=0;break;case gt:this._doTickIdle();break;case Rt:var t=this.levels[this.level];t&&t.details&&(this.state=gt);break;case Ct:var e=window.performance.now(),n=this.retryDate;(!n||e>=n||this.media&&this.media.seeking)&&(u.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=gt)}this._checkBuffer(),this._checkFragmentChanged()},f._doTickIdle=function(){var t=this.hls,e=t.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&e.startFragPrefetch))if(this.altAudio&&this.audioOnly)this.demuxer.frag=null;else{var a;a=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var r=t.nextLoadLevel,i=this.levels[r];if(i){var s,o=i.bitrate;s=o?Math.max(8*e.maxBufferSize/o,e.maxBufferLength):e.maxBufferLength,s=Math.min(s,e.maxMaxBufferLength);var c=a<e.maxBufferHole?Math.max(2,e.maxBufferHole):e.maxBufferHole,d=H.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,a,c),f=d.len;if(!(f>=s)){u.logger.trace("buffer length of "+f.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=r;var h=i.details;if(!h||h.live&&this.levelLastLoaded!==r)this.state=Rt;else{if(this._streamEnded(d,h)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(l.default.BUFFER_EOS,p),void(this.state=Et)}this._fetchPayloadOrEos(a,d,h)}}}}},f._fetchPayloadOrEos=function(t,e,n){var a=this.fragPrevious,r=(this.level,n.fragments),i=r.length;if(0!==i){var s,o=r[0].start,c=r[i-1].start+r[i-1].duration,l=e.end;if(n.initSegment&&!n.initSegment.data)s=n.initSegment;else if(n.live){var d=this.config.initialLiveManifestSize;if(i<d)return void u.logger.warn("Can not start playback of a level, reason: not enough fragments "+i+" < "+d);if(null===(s=this._ensureFragmentAtLivePoint(n,l,o,c,a,r)))return}else l<o&&(s=r[0]);s||(s=this._findFragment(o,a,i,r,l,c,n)),s&&(s.encrypted?this._loadKey(s,n):this._loadFragment(s,n,t,l))}},f._ensureFragmentAtLivePoint=function(t,e,n,a,r,i){var s,o=this.hls.config,l=this.media,d=1/0;if(void 0!==o.liveMaxLatencyDuration?d=o.liveMaxLatencyDuration:Object(c.isFiniteNumber)(o.liveMaxLatencyDurationCount)&&(d=o.liveMaxLatencyDurationCount*t.targetduration),e<Math.max(n-o.maxFragLookUpTolerance,a-d)){var f=this.liveSyncPosition=this.computeLivePosition(n,t);e=f,l&&!l.paused&&l.readyState&&l.duration>f&&f>l.currentTime&&(u.logger.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),l.currentTime=f),this.nextLoadPosition=f}if(t.PTSKnown&&e>a&&l&&l.readyState)return null;if(this.startFragRequested&&!t.PTSKnown&&r)if(t.hasProgramDateTime)u.logger.log("live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),s=ct(i,r.endProgramDateTime,o.maxFragLookUpTolerance);else{var h=r.sn+1;if(h>=t.startSN&&h<=t.endSN){var p=i[h-t.startSN];r.cc===p.cc&&(s=p,u.logger.log("live playlist, switching playlist, load frag with next SN: "+s.sn))}s||(s=V.search(i,(function(t){return r.cc-t.cc})))&&u.logger.log("live playlist, switching playlist, load frag with same CC: "+s.sn)}return s},f._findFragment=function(t,e,n,a,r,i,s){var o,c=this.hls.config;if(o=r<i?lt(e,a,r,r>i-c.maxFragLookUpTolerance?0:c.maxFragLookUpTolerance):a[n-1]){var l=o.sn-s.startSN,d=e&&o.level===e.level,f=a[l-1],h=a[l+1];if(e&&o.sn===e.sn)if(d&&!o.backtracked)if(o.sn<s.endSN){var p=e.deltaPTS;p&&p>c.maxBufferHole&&e.dropped&&l?(o=f,u.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(o=h,this.fragmentTracker.getState(o)!==B&&u.logger.log("Re-loading fragment with SN: "+o.sn))}else o=null;else o.backtracked&&(h&&h.backtracked?(u.logger.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+o.sn+". Loading fragment "+h.sn),o=h):(u.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),o.dropped=0,f?(o=f).backtracked=!0:l&&(o=null)))}return o},f._loadKey=function(t,e){u.logger.log("Loading key for "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], level "+this.level),this.state=yt,this.hls.trigger(l.default.KEY_LOADING,{frag:t})},f._loadFragment=function(t,e,n,a){var r=this.fragmentTracker.getState(t);this.fragCurrent=t,"initSegment"!==t.sn&&(this.startFragRequested=!0),Object(c.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||r===N||r===F?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,u.logger.log("Loading "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(n.toFixed(3))+", bufferEnd: "+parseFloat(a.toFixed(3))),this.hls.trigger(l.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new J(this.hls,"main")),this.state=bt):r===j&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},f.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,i.MAIN)},f.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},f._checkFragmentChanged=function(){var t,e,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((e=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=e),H.isBuffered(n,e)?t=this.getBufferedFrag(e):H.isBuffered(n,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var a=t;if(a!==this.fragPlaying){this.hls.trigger(l.default.FRAG_CHANGED,{frag:a});var r=a.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(l.default.LEVEL_SWITCHED,{level:r}),this.fragPlaying=a}}},f.immediateLevelSwitch=function(){if(u.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t,e=this.media;e?(t=e.paused)||e.pause():t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},f.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,t.currentTime>0&&H.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},f.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e,n=this.getBufferedFrag(t.currentTime);if(n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),t.paused)e=0;else{var a=this.hls.nextLoadLevel,r=this.levels[a],i=this.fragLastKbps;e=i&&this.fragCurrent?this.fragCurrent.duration*r.bitrate/(1e3*i)+1:0}var s=this.getBufferedFrag(t.currentTime+e);if(s){var o=this.followingBufferedFrag(s);if(o){var c=this.fragCurrent;c&&c.loader&&c.loader.abort(),this.fragCurrent=null;var l=Math.max(s.endPTS,o.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,o.duration));this.flushMainBuffer(l,Number.POSITIVE_INFINITY)}}}},f.flushMainBuffer=function(t,e){this.state=St;var n={startOffset:t,endOffset:e};this.altAudio&&(n.type="video"),this.hls.trigger(l.default.BUFFER_FLUSHING,n)},f.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new ft(n,e,this.fragmentTracker,this.hls)},f.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(u.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach((function(t){t.details&&t.details.fragments.forEach((function(t){t.backtracked=void 0}))})),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},f.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;Object(c.isFiniteNumber)(e)&&u.logger.log("media seeked to "+e.toFixed(3)),this.tick()},f.onManifestLoading=function(){u.logger.log("trigger BUFFER_RESET"),this.hls.trigger(l.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},f.onManifestParsed=function(t){var e,n=!1,a=!1;t.levels.forEach((function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(n=!0),-1!==e.indexOf("mp4a.40.5")&&(a=!0))})),this.audioCodecSwitch=n&&a,this.audioCodecSwitch&&u.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=t.altAudio,this.levels=t.levels,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},f.onLevelLoaded=function(t){var e=t.details,n=t.level,a=this.levels[this.levelLastLoaded],r=this.levels[n],i=e.totalduration,s=0;if(u.logger.log("level "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+i),e.live||r.details&&r.details.live){var o=r.details;o&&e.fragments.length>0?(nt(o,e),s=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,o),e.PTSKnown&&Object(c.isFiniteNumber)(s)?u.logger.log("live playlist sliding:"+s.toFixed(3)):(u.logger.log("live playlist - outdated PTS, unknown sliding"),ot(this.fragPrevious,a,e))):(u.logger.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,ot(this.fragPrevious,a,e))}else e.PTSKnown=!1;if(r.details=e,this.levelLastLoaded=n,this.hls.trigger(l.default.LEVEL_UPDATED,{details:e,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var d=e.startTimeOffset;Object(c.isFiniteNumber)(d)?(d<0&&(u.logger.log("negative start time offset "+d+", count from end of last fragment"),d=s+i+d),u.logger.log("start time offset found in playlist, adjust startPosition to "+d),this.startPosition=d):e.live?(this.startPosition=this.computeLivePosition(s,e),u.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===Rt&&(this.state=gt),this.tick()},f.onKeyLoaded=function(){this.state===yt&&(this.state=gt,this.tick())},f.onFragLoaded=function(t){var e=this.fragCurrent,n=this.hls,a=this.levels,r=this.media,i=t.frag;if(this.state===bt&&e&&"main"===i.type&&i.level===e.level&&i.sn===e.sn){var s=t.stats,o=a[e.level],c=o.details;if(this.bitrateTest=!1,this.stats=s,u.logger.log("Loaded "+e.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+e.level),i.bitrateTest&&n.nextLoadLevel)this.state=gt,this.startFragRequested=!1,s.tparsed=s.tbuffered=window.performance.now(),n.trigger(l.default.FRAG_BUFFERED,{stats:s,frag:e,id:"main"}),this.tick();else if("initSegment"===i.sn)this.state=gt,s.tparsed=s.tbuffered=window.performance.now(),c.initSegment.data=t.payload,n.trigger(l.default.FRAG_BUFFERED,{stats:s,frag:e,id:"main"}),this.tick();else{u.logger.log("Parsing "+e.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+e.level+", cc "+e.cc),this.state=kt,this.pendingBuffering=!0,this.appended=!1,i.bitrateTest&&(i.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:i}));var d=!(r&&r.seeking)&&(c.PTSKnown||!c.live),f=c.initSegment?c.initSegment.data:[],h=this._getAudioCodec(o);(this.demuxer=this.demuxer||new J(this.hls,"main")).push(t.payload,f,h,o.videoCodec,e,c.totalduration,d)}}this.fragLoadError=0},f.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===kt){var a,r,i=t.tracks;if(this.audioOnly=i.audio&&!i.video,this.altAudio&&!this.audioOnly&&delete i.audio,r=i.audio){var s=this.levels[this.level].audioCodec,o=navigator.userAgent.toLowerCase();s&&this.audioCodecSwap&&(u.logger.log("swapping playlist audio codec"),s=-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===o.indexOf("firefox")&&(s="mp4a.40.5"),-1!==o.indexOf("android")&&"audio/mpeg"!==r.container&&(s="mp4a.40.2",u.logger.log("Android: force audio codec to "+s)),r.levelCodec=s,r.id=t.id}for(a in(r=i.video)&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=t.id),this.hls.trigger(l.default.BUFFER_CODECS,i),i){r=i[a],u.logger.log("main track:"+a+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var c=r.initSegment;c&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,{type:a,data:c,parent:"main",content:"initSegment"}))}this.tick()}},f.onFragParsingData=function(t){var e=this,n=this.fragCurrent,a=t.frag;if(n&&"main"===t.id&&a.sn===n.sn&&a.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===kt){var r=this.levels[this.level],i=n;if(Object(c.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),!0===t.hasAudio&&i.addElementaryStream(m.AUDIO),!0===t.hasVideo&&i.addElementaryStream(m.VIDEO),u.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(i.dropped=t.dropped,i.dropped)if(i.backtracked)u.logger.warn("Already backtracked on this fragment, appending with the gap",i.sn);else{var s=r.details;if(!s||i.sn!==s.startSN)return u.logger.warn("missing video frame(s), backtracking fragment",i.sn),this.fragmentTracker.removeFragment(i),i.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=gt,this.fragPrevious=i,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();u.logger.warn("missing video frame(s) on first frag, appending with gap",i.sn)}else i.backtracked=!1;var o=et(r.details,i,t.startPTS,t.endPTS,t.startDTS,t.endDTS),d=this.hls;d.trigger(l.default.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:o,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach((function(n){n&&n.length&&e.state===kt&&(e.appended=!0,e.pendingBuffering=!0,d.trigger(l.default.BUFFER_APPENDING,{type:t.type,data:n,parent:"main",content:"data"}))})),this.tick()}},f.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===kt&&(this.stats.tparsed=window.performance.now(),this.state=xt,this._checkAppendedParsed())},f.onAudioTrackSwitching=function(t){var e=this.altAudio,n=!!t.url,a=t.id;if(!n){if(this.mediaBuffer!==this.media){u.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(u.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=gt}var i=this.hls;e&&i.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:a})}},f.onAudioTrackSwitched=function(t){var e=t.id,n=!!this.hls.audioTracks[e].url;if(n){var a=this.videoBuffer;a&&this.mediaBuffer!==a&&(u.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=a)}this.altAudio=n,this.tick()},f.onBufferCreated=function(t){var e,n,a=t.tracks,r=!1;for(var i in a){var s=a[i];"main"===s.id?(n=i,e=s,"video"===i&&(this.videoBuffer=a[i].buffer)):r=!0}r&&e?(u.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=e.buffer):this.mediaBuffer=this.media},f.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==kt&&e!==xt||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},f._checkAppendedParsed=function(){if(!(this.state!==xt||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;u.logger.log("main buffered : "+it.toString(e.buffered)),this.fragPrevious=t;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(l.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=gt}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},f.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var n=!!this.media&&H.isBuffered(this.media,this.media.currentTime)&&H.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:case o.ErrorDetails.KEY_LOAD_ERROR:case o.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var a=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);u.logger.warn("mediaController: frag loading failed, retry in "+a+" ms"),this.retryDate=window.performance.now()+a,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=Ct}else u.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=Tt;break;case o.ErrorDetails.LEVEL_LOAD_ERROR:case o.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==Tt&&(t.fatal?(this.state=Tt,u.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==Rt||(this.state=gt));break;case o.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==kt&&this.state!==xt||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=gt):(u.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},f._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,u.logger.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},f._checkBuffer=function(){var t=this.media;if(t&&0!==t.readyState){var e=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,e)}},f.onFragLoadEmergencyAborted=function(){this.state=gt,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},f.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;if(t){var e=this.audioOnly?m.AUDIO:m.VIDEO;this.fragmentTracker.detectEvictedFragments(e,t.buffered)}this.state=gt,this.fragPrevious=null},f.onLevelsUpdated=function(t){this.levels=t.levels},f.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},f._seekToStartPos=function(){var t=this.media,e=t.currentTime,n=this.startPosition;if(e!==n&&n>=0){if(t.seeking)return void u.logger.log("could not seek to "+n+", already seeking at "+e);var a=(t.buffered.length?t.buffered.start(0):0)-n;a>0&&a<this.config.maxBufferHole&&(u.logger.log("adjusting start position by "+a+" to match buffer start"),n+=a,this.startPosition=n),u.logger.log("seek to target start position "+n+" from current time "+e+". ready state "+t.readyState),t.currentTime=n}},f._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(u.logger.log("swapping playlist audio codec"),e&&(e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e},r=a,(s=[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,u.logger.log("main stream-controller: "+e+"->"+t),this.hls.trigger(l.default.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}])&&$t(r.prototype,s),d&&$t(r,d),a}(Ot);function Dt(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var It=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,l.default.MANIFEST_LOADED,l.default.LEVEL_LOADED,l.default.AUDIO_TRACK_SWITCHED,l.default.FRAG_LOADED,l.default.ERROR)||this).canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,Pt=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r,i,s,c=a.prototype;return c.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},c.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},c.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach((function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)})),null!==this.timer&&this.loadLevel()},c.stopLoad=function(){this.canload=!1},c.onManifestLoaded=function(t){var e,n=[],a=[],r={},i=null,s=!1,c=!1;if(t.levels.forEach((function(t){var e=t.attrs;t.loadError=0,t.fragmentError=!1,s=s||!!t.videoCodec,c=c||!!t.audioCodec,Pt&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(i=r[t.bitrate])?i.url.push(t.url):(t.url=[t.url],t.urlId=0,r[t.bitrate]=t,n.push(t)),e&&(e.AUDIO&&Q(i||t,"audio",e.AUDIO),e.SUBTITLES&&Q(i||t,"text",e.SUBTITLES))})),s&&c&&(n=n.filter((function(t){return!!t.videoCodec}))),n=n.filter((function(t){var e=t.audioCodec,n=t.videoCodec;return(!e||S(e,"audio"))&&(!n||S(n,"video"))})),t.audioTracks&&(a=t.audioTracks.filter((function(t){return!t.audioCodec||S(t.audioCodec,"audio")}))).forEach((function(t,e){t.id=e})),n.length>0){e=n[0].bitrate,n.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=n;for(var d=0;d<n.length;d++)if(n[d].bitrate===e){this._firstLevel=d,u.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+e);break}var f=c&&!s;this.hls.trigger(l.default.MANIFEST_PARSED,{levels:n,audioTracks:a,firstLevel:this._firstLevel,stats:t.stats,audio:c,video:s,altAudio:!f&&a.some((function(t){return!!t.url}))})}else this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},c.setLevelInternal=function(t){var e=this._levels,n=this.hls;if(t>=0&&t<e.length){if(this.clearTimer(),this.currentLevelIndex!==t){u.logger.log("switching to level "+t),this.currentLevelIndex=t;var a=e[t];a.level=t,n.trigger(l.default.LEVEL_SWITCHING,a)}var r=e[t],i=r.details;if(!i||i.live){var s=r.urlId;n.trigger(l.default.LEVEL_LOADING,{url:r.url[s],level:t,id:s})}}else n.trigger(l.default.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},c.onError=function(t){if(t.fatal)t.type===o.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var e,n=!1,a=!1;switch(t.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:case o.ErrorDetails.KEY_LOAD_ERROR:case o.ErrorDetails.KEY_LOAD_TIMEOUT:e=t.frag.level,a=!0;break;case o.ErrorDetails.LEVEL_LOAD_ERROR:case o.ErrorDetails.LEVEL_LOAD_TIMEOUT:e=t.context.level,n=!0;break;case o.ErrorDetails.REMUX_ALLOC_ERROR:e=t.level,n=!0}void 0!==e&&this.recoverLevel(t,e,n,a)}},c.recoverLevel=function(t,e,n,a){var r,i,s,o=this,c=this.hls.config,l=t.details,d=this._levels[e];if(d.loadError++,d.fragmentError=a,n){if(!(this.levelRetryCount+1<=c.levelLoadingMaxRetry))return u.logger.error("level controller, cannot recover from "+l+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);i=Math.min(Math.pow(2,this.levelRetryCount)*c.levelLoadingRetryDelay,c.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return o.loadLevel()}),i),t.levelRetry=!0,this.levelRetryCount++,u.logger.warn("level controller, "+l+", retry in "+i+" ms, current retry count is "+this.levelRetryCount)}(n||a)&&((r=d.url.length)>1&&d.loadError<r?(d.urlId=(d.urlId+1)%r,d.details=void 0,u.logger.warn("level controller, "+l+" for level "+e+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(s=0===e?this._levels.length-1:e-1,u.logger.warn("level controller, "+l+": switch to "+s),this.hls.nextAutoLevel=this.currentLevelIndex=s):a&&(u.logger.warn("level controller, "+l+": reload a fragment"),this.currentLevelIndex=null))},c.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var n=this._levels[e.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},c.onLevelLoaded=function(t){var e=this,n=t.level,a=t.details;if(n===this.currentLevelIndex){var r=this._levels[n];if(r.fragmentError||(r.loadError=0,this.levelRetryCount=0),a.live){var i=rt(r.details,a,t.stats.trequest);u.logger.log("live playlist, reload in "+Math.round(i)+" ms"),this.timer=setTimeout((function(){return e.loadLevel()}),i)}else this.clearTimer()}},c.onAudioTrackSwitched=function(t){var e=this.hls.audioTracks[t.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var a=-1,r=0;r<n.audioGroupIds.length;r++)if(n.audioGroupIds[r]===e){a=r;break}a!==n.urlId&&(n.urlId=a,this.startLoad())}},c.loadLevel=function(){if(u.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._levels[this.currentLevelIndex];if("object"==typeof t&&t.url.length>0){var e=this.currentLevelIndex,n=t.urlId,a=t.url[n];u.logger.log("Attempt loading level index "+e+" with URL-id "+n),this.hls.trigger(l.default.LEVEL_LOADING,{url:a,level:e,id:n})}}},c.removeLevel=function(t,e){var n=this.levels.filter((function(n,a){return a!==t||n.url.length>1&&void 0!==e&&(n.url=n.url.filter((function(t,n){return n!==e})),n.urlId=0,!0)})).map((function(t,e){var n=t.details;return n&&n.fragments&&n.fragments.forEach((function(t){t.level=e})),t}));this._levels=n,this.hls.trigger(l.default.LEVELS_UPDATED,{levels:n})},r=a,(i=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&Dt(r.prototype,i),s&&Dt(r,s),a}(f),Mt=n("./src/demux/id3.js");function Nt(t,e){var n;try{n=new Event("addtrack")}catch(t){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function jt(t){if(null==t?void 0:t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}var Ft=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_METADATA,l.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,n.media=void 0,n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r=a.prototype;return r.destroy=function(){f.prototype.destroy.call(this)},r.onMediaAttached=function(t){this.media=t.media,this.media},r.onMediaDetaching=function(){jt(this.id3Track),this.id3Track=void 0,this.media=void 0},r.getID3Track=function(t){for(var e=0;e<t.length;e++){var n=t[e];if("metadata"===n.kind&&"id3"===n.label)return Nt(n,this.media),n}return this.media.addTextTrack("metadata","id3")},r.onFragParsingMetadata=function(t){var e=t.frag,n=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var a=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<n.length;r++){var i=Mt.default.getID3Frames(n[r].data);if(i){var s=Math.max(n[r].pts,0),o=r<n.length-1?n[r+1].pts:e.endPTS;o||(o=e.start+e.duration),o-s<=0&&(o=s+.25);for(var c=0;c<i.length;c++){var l=i[c];if(!Mt.default.isTimeStampFrame(l)){var u=new a(s,o,"");u.value=l,this.id3Track.addCue(u)}}}}},r.onLiveBackBufferReached=function(t){var e=t.bufferEnd,n=this.id3Track;if(n&&n.cues&&n.cues.length){var a=function(t,e){if(e<t[0].endTime)return t[0];if(e>t[t.length-1].endTime)return t[t.length-1];for(var n=0,a=t.length-1;n<=a;){var r=Math.floor((a+n)/2);if(e<t[r].endTime)a=r-1;else{if(!(e>t[r].endTime))return t[r];n=r+1}}return t[n].endTime-e<e-t[a].endTime?t[n]:t[a]}(n.cues,e);if(a)for(;n.cues[0]!==a;)n.removeCue(n.cues[0])}},a}(f),Bt=function(){function t(t){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}var e=t.prototype;return e.sample=function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),Ut=function(){function t(t,e,n,a){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=t,this.defaultEstimate_=a,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Bt(e),this.fast_=new Bt(n)}var e=t.prototype;return e.sample=function(t,e){var n=(t=Math.max(t,this.minDelayMs_))/1e3,a=8*e/n;this.fast_.sample(n,a),this.slow_.sample(n,a)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}();function Vt(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Ht=window.performance,Zt=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,l.default.FRAG_LOADING,l.default.FRAG_LOADED,l.default.FRAG_BUFFERED,l.default.ERROR)||this).lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=e,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r,i,s,d=a.prototype;return d.destroy=function(){this.clearTimer(),f.prototype.destroy.call(this)},d.onFragLoading=function(t){var e=t.frag;if("main"===e.type&&(this.timer||(this.fragCurrent=e,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n,a,r=this.hls,i=r.config,s=e.level;r.levels[s].details.live?(n=i.abrEwmaFastLive,a=i.abrEwmaSlowLive):(n=i.abrEwmaFastVoD,a=i.abrEwmaSlowVoD),this._bwEstimator=new Ut(r,a,n,i.abrEwmaDefaultEstimate)}},d._abandonRulesCheck=function(){var t=this.hls,e=t.media,n=this.fragCurrent;if(n){var a=n.loader;if(!a||a.stats&&a.stats.aborted)return u.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var r=a.stats;if(e&&r&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&n.autoLevel&&n.level){var i=Ht.now()-r.trequest,s=Math.abs(e.playbackRate);if(i>500*n.duration/s){var o=t.levels,c=Math.max(1,r.bw?r.bw/8:1e3*r.loaded/i),d=o[n.level];if(!d)return;var f=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,h=r.total?r.total:Math.max(r.loaded,Math.round(n.duration*f/8)),p=e.currentTime,m=(h-r.loaded)/c,v=(H.bufferInfo(e,p,t.config.maxBufferHole).end-p)/s;if(v<2*n.duration/s&&m>v){var g,_,y=t.minAutoLevel;for(_=n.level-1;_>y;_--){var b=o[_].realBitrate?Math.max(o[_].realBitrate,o[_].bitrate):o[_].bitrate;if(n.duration*b/(6.4*c)<v)break}g<m&&(u.logger.warn("loading too slow, abort fragment loading and switch to level "+_+":fragLoadedDelay["+_+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+g.toFixed(1)+"<"+m.toFixed(1)+":"+v.toFixed(1)),t.nextLoadLevel=_,this._bwEstimator.sample(i,r.loaded),a.abort(),this.clearTimer(),t.trigger(l.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:r}))}}}}},d.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&Object(c.isFiniteNumber)(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[e.level],a=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,r=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:a,duration:r},n.realBitrate=Math.round(8*a/r)}if(t.frag.bitrateTest){var i=t.stats;i.tparsed=i.tbuffered=i.tload,this.onFragBuffered(t)}}},d.onFragBuffered=function(t){var e=t.stats,n=t.frag;if(!0!==e.aborted&&"main"===n.type&&Object(c.isFiniteNumber)(n.sn)&&(!n.bitrateTest||e.tload===e.tbuffered)){var a=e.tparsed-e.trequest;u.logger.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(a,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},d.onError=function(t){switch(t.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},d.clearTimer=function(){clearInterval(this.timer),this.timer=null},d._findBestLevel=function(t,e,n,a,r,i,s,o,c){for(var l=r;l>=a;l--){var d=c[l];if(d){var f=d.details,h=f?f.totalduration/f.fragments.length:e,p=!!f&&f.live,m=void 0;m=l<=t?s*n:o*n;var v=c[l].realBitrate?Math.max(c[l].realBitrate,c[l].bitrate):c[l].bitrate,g=v*h/m;if(u.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(m)+"/"+v+"/"+h+"/"+i+"/"+g),m>v&&(!g||p&&!this.bitrateTestDelay||g<i))return l}}return-1},r=a,(i=[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var n=this._nextABRAutoLevel;return-1!==t&&(n=Math.min(t,n)),n},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,n=t.levels,a=t.config,r=t.minAutoLevel,i=t.media,s=this.lastLoadedFragLevel,o=this.fragCurrent?this.fragCurrent.duration:0,c=i?i.currentTime:0,l=i&&0!==i.playbackRate?Math.abs(i.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():a.abrEwmaDefaultEstimate,f=(H.bufferInfo(i,c,a.maxBufferHole).end-c)/l,h=this._findBestLevel(s,o,d,r,e,f,a.abrBandWidthFactor,a.abrBandWidthUpFactor,n);if(h>=0)return h;u.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=o?Math.min(o,a.maxStarvationDelay):a.maxStarvationDelay,m=a.abrBandWidthFactor,v=a.abrBandWidthUpFactor;if(0===f){var g=this.bitrateTestDelay;g&&(p=(o?Math.min(o,a.maxLoadingDelay):a.maxLoadingDelay)-g,u.logger.trace("bitrate test took "+Math.round(1e3*g)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),m=v=1)}return h=this._findBestLevel(s,o,d,r,e,f+p,m,v,n),Math.max(h,0)}}])&&Vt(r.prototype,i),s&&Vt(r,s),a}(f),Gt=q(),zt=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.MANIFEST_PARSED,l.default.BUFFER_RESET,l.default.BUFFER_APPENDING,l.default.BUFFER_CODECS,l.default.BUFFER_EOS,l.default.BUFFER_FLUSHING,l.default.LEVEL_PTS_UPDATED,l.default.LEVEL_UPDATED)||this)._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n._needsFlush=!1,n._needsEos=!1,n.config=void 0,n.audioTimestampOffset=void 0,n.bufferCodecEventsExpected=0,n._bufferCodecEventsTotal=0,n.media=null,n.mediaSource=null,n.segments=[],n.parent=void 0,n.appending=!1,n.appended=0,n.appendError=0,n.flushBufferCounter=0,n.tracks={},n.pendingTracks={},n.sourceBuffer={},n.flushRange=[],n._onMediaSourceOpen=function(){u.logger.log("media source opened"),n.hls.trigger(l.default.MEDIA_ATTACHED,{media:n.media});var t=n.mediaSource;t&&t.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},n._onMediaSourceClose=function(){u.logger.log("media source closed")},n._onMediaSourceEnded=function(){u.logger.log("media source ended")},n._onSBUpdateEnd=function(){if(n.audioTimestampOffset&&n.sourceBuffer.audio){var t=n.sourceBuffer.audio;u.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+n.audioTimestampOffset),t.timestampOffset=n.audioTimestampOffset,delete n.audioTimestampOffset}n._needsFlush&&n.doFlush(),n._needsEos&&n.checkEos(),n.appending=!1;var e=n.parent,a=n.segments.reduce((function(t,n){return n.parent===e?t+1:t}),0),r={},i=n.sourceBuffer;for(var s in i){var o=i[s];if(!o)throw Error("handling source buffer update end error: source buffer for "+s+" uninitilized and unable to update buffered TimeRanges.");r[s]=o.buffered}n.hls.trigger(l.default.BUFFER_APPENDED,{parent:e,pending:a,timeRanges:r}),n._needsFlush||n.doAppending(),n.updateMediaElementDuration(),0===a&&n.flushLiveBackBuffer()},n._onSBUpdateError=function(t){u.logger.error("sourceBuffer error:",t),n.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.config=e.config,n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r=a.prototype;return r.destroy=function(){f.prototype.destroy.call(this)},r.onLevelPtsUpdated=function(t){var e=t.type,n=this.tracks.audio;if("audio"===e&&n&&"audio/mpeg"===n.container){var a=this.sourceBuffer.audio;if(!a)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(a.timestampOffset-t.start)>.1){var r=a.updating;try{a.abort()}catch(t){u.logger.warn("can not abort audio buffer: "+t)}r?this.audioTimestampOffset=t.start:(u.logger.warn("change mpeg audio timestamp offset from "+a.timestampOffset+" to "+t.start),a.timestampOffset=t.start)}}},r.onManifestParsed=function(t){var e=2;(t.audio&&!t.video||!t.altAudio)&&(e=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=e,u.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.onMediaAttaching=function(t){var e=this.media=t.media;if(e&&Gt){var n=this.mediaSource=new Gt;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),e.src=window.URL.createObjectURL(n),this._objectUrl=e.src}},r.onMediaDetaching=function(){u.logger.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){u.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):u.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(l.default.MEDIA_DETACHED)},r.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.pendingTracks,n=Object.keys(e).length;(n&&!t||2===n)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},r.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var n=t[e];try{n&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this._onSBUpdateEnd),n.removeEventListener("error",this._onSBUpdateError))}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.onBufferCodecs=function(t){var e=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach((function(n){e.pendingTracks[n]=t[n]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},r.createSourceBuffers=function(t){var e=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(var a in t)if(!e[a]){var r=t[a];if(!r)throw Error("source buffer exists for track "+a+", however track does not");var i=r.levelCodec||r.codec,s=r.container+";codecs="+i;u.logger.log("creating sourceBuffer("+s+")");try{var c=e[a]=n.addSourceBuffer(s);c.addEventListener("updateend",this._onSBUpdateEnd),c.addEventListener("error",this._onSBUpdateError),this.tracks[a]={buffer:c,codec:i,id:r.id,container:r.container,levelCodec:r.levelCodec}}catch(t){u.logger.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:s})}}this.hls.trigger(l.default.BUFFER_CREATED,{tracks:this.tracks})},r.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},r.onBufferEos=function(t){for(var e in this.sourceBuffer)if(!t.type||t.type===e){var n=this.sourceBuffer[e];n&&!n.ended&&(n.ended=!0,u.logger.log(e+" sourceBuffer now EOS"))}this.checkEos()},r.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var n in t){var a=t[n];if(a){if(!a.ended)return;if(a.updating)return void(this._needsEos=!0)}}u.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){u.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},r.onBufferFlushing=function(t){t.type?this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}):(this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"video"}),this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},r.flushLiveBackBuffer=function(){if(this._live){var t=this.config.liveBackBufferLength;if(isFinite(t)&&!(t<0))if(this.media)for(var e=this.media.currentTime,n=this.sourceBuffer,a=Object.keys(n),r=e-Math.max(t,this._levelTargetDuration),i=a.length-1;i>=0;i--){var s=a[i],o=n[s];if(o){var c=o.buffered;c.length>0&&r>c.start(0)&&this.removeBufferRange(s,o,0,r)&&this.hls.trigger(l.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r})}}else u.logger.error("flushLiveBackBuffer called without attaching media")}},r.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._levelTargetDuration=e.averagetargetduration||e.targetduration||10,this._live=e.live,this.updateMediaElementDuration())},r.updateMediaElementDuration=function(){var t,e=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer){var a=this.sourceBuffer[n];if(a&&!0===a.updating)return}t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===e.liveDurationInfinity?(u.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!Object(c.isFiniteNumber)(t))&&(u.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,n=this.sourceBuffer;try{for(var a in n){var r=n[a];r&&(e+=r.buffered.length)}}catch(t){u.logger.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(l.default.BUFFER_FLUSHED)}},r.doAppending=function(){var t=this.config,e=this.hls,n=this.segments,a=this.sourceBuffer;if(Object.keys(a).length){if(!this.media||this.media.error)return this.segments=[],void u.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var r=n.shift();if(r)try{var i=a[r.type];if(!i)return void this._onSBUpdateEnd();if(i.updating)return void n.unshift(r);i.ended=!1,this.parent=r.parent,i.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0}catch(a){u.logger.error("error while trying to append buffer:"+a.message),n.unshift(r);var s={type:o.ErrorTypes.MEDIA_ERROR,parent:r.parent,details:"",fatal:!1};22===a.code?(this.segments=[],s.details=o.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,s.details=o.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.appendErrorMaxRetry&&(u.logger.log("fail "+t.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],s.fatal=!0)),e.trigger(l.default.ERROR,s)}}}},r.flushBuffer=function(t,e,n){var a=this.sourceBuffer;if(!Object.keys(a).length)return!0;var r="null";if(this.media&&(r=this.media.currentTime.toFixed(3)),u.logger.log("flushBuffer,pos/start/end: "+r+"/"+t+"/"+e),this.flushBufferCounter>=this.appended)return u.logger.warn("abort flushing too many retries"),!0;var i=a[n];if(i){if(i.ended=!1,i.updating)return u.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,i,t,e))return this.flushBufferCounter++,!1}return u.logger.log("buffer flushed"),!0},r.removeBufferRange=function(t,e,n,a){try{for(var r=0;r<e.buffered.length;r++){var i=e.buffered.start(r),s=e.buffered.end(r),o=Math.max(i,n),c=Math.min(s,a);if(Math.min(c,s)-o>.5){var l="null";return this.media&&(l=this.media.currentTime.toString()),u.logger.log("sb remove "+t+" ["+o+","+c+"], of ["+i+","+s+"], pos:"+l),e.remove(o,c),!0}}}catch(t){u.logger.warn("removeBufferRange failed",t)}return!1},a}(f);function qt(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Kt=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,l.default.FPS_DROP_LEVEL_CAPPING,l.default.MEDIA_ATTACHING,l.default.MANIFEST_PARSED,l.default.LEVELS_UPDATED,l.default.BUFFER_CODECS,l.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n.clientRect=null,n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r,i,s,o=a.prototype;return o.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},o.onFpsDropLevelCapping=function(t){a.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},o.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},o.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,e.config.capLevelToPlayerSize&&t.video&&this.startCapping()},o.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},o.onLevelsUpdated=function(t){this.levels=t.levels},o.onMediaDetaching=function(){this.stopCapping()},o.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},o.getMaxLevel=function(t){var e=this;if(!this.levels)return-1;var n=this.levels.filter((function(n,r){return a.isLevelAllowed(r,e.restrictedLevels)&&r<=t}));return this.clientRect=null,a.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},o.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},o.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},o.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var n=t.getBoundingClientRect();e.width=n.width,e.height=n.height,e.width||e.height||(e.width=n.right-n.left||t.width||0,e.height=n.bottom-n.top||t.height||0)}return this.clientRect=e,e},a.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},a.getMaxLevelByMediaSize=function(t,e,n){if(!t||t&&!t.length)return-1;for(var a,r,i=t.length-1,s=0;s<t.length;s+=1){var o=t[s];if((o.width>=e||o.height>=n)&&(a=o,!(r=t[s+1])||a.width!==r.width||a.height!==r.height)){i=s;break}}return i},r=a,s=[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}],(i=[{key:"mediaWidth",get:function(){return this.getDimensions().width*a.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*a.contentScaleFactor}}])&&qt(r.prototype,i),s&&qt(r,s),a}(f),Wt=window.performance,Yt=function(t){var e,n;function a(e){return t.call(this,e,l.default.MEDIA_ATTACHING)||this}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r=a.prototype;return r.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},r.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof window.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},r.checkFPS=function(t,e,n){var a=Wt.now();if(e){if(this.lastTime){var r=a-this.lastTime,i=n-this.lastDroppedFrames,s=e-this.lastDecodedFrames,o=1e3*i/r,c=this.hls;if(c.trigger(l.default.FPS_DROP,{currentDropped:i,currentDecoded:s,totalDroppedFrames:n}),o>0&&i>c.config.fpsDroppedMonitoringThreshold*s){var d=c.currentLevel;u.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=d)&&(d-=1,c.trigger(l.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,c.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=n,this.lastDecodedFrames=e}},r.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},a}(f),Xt=function(){function t(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}var e=t.prototype;return e.destroy=function(){this.abort(),this.loader=null},e.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.load=function(t,e,n){this.context=t,this.config=e,this.callbacks=n,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t,e=this.context;t=this.loader=new window.XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var a=this.xhrSetup;try{if(a)try{a(t,e.url)}catch(n){t.open("GET",e.url,!0),a(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(n){return void this.callbacks.onError({code:t.status,text:n.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},e.readystatechange=function(t){var e=t.currentTarget,n=e.readyState,a=this.stats,r=this.context,i=this.config;if(!a.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===a.tfirst&&(a.tfirst=Math.max(window.performance.now(),a.trequest)),4===n){var s=e.status;if(s>=200&&s<300){var o,c;a.tload=Math.max(a.tfirst,window.performance.now()),c="arraybuffer"===r.responseType?(o=e.response).byteLength:(o=e.responseText).length,a.loaded=a.total=c;var l={url:e.responseURL,data:o};this.callbacks.onSuccess(l,a,r,e)}else a.retry>=i.maxRetry||s>=400&&s<499?(u.logger.error(s+" while loading "+r.url),this.callbacks.onError({code:s,text:e.statusText},r,e)):(u.logger.warn(s+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,i.maxRetryDelay),a.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),i.timeout)},e.loadtimeout=function(){u.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.loadprogress=function(t){var e=t.currentTarget,n=this.stats;n.loaded=t.loaded,t.lengthComputable&&(n.total=t.total);var a=this.callbacks.onProgress;a&&a(n,this.context,null,e)},t}();function Jt(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Qt=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,l.default.MANIFEST_LOADING,l.default.MANIFEST_PARSED,l.default.AUDIO_TRACK_LOADED,l.default.AUDIO_TRACK_SWITCHED,l.default.LEVEL_LOADED,l.default.ERROR)||this)._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r,i,s,c=a.prototype;return c.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},c.onManifestParsed=function(t){var e=this.tracks=t.audioTracks||[];this.hls.trigger(l.default.AUDIO_TRACKS_UPDATED,{audioTracks:e}),this._selectAudioGroup(this.hls.nextLoadLevel)},c.onAudioTrackLoaded=function(t){if(t.id>=this.tracks.length)u.logger.warn("Invalid audio track id:",t.id);else{if(u.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()){var e=1e3*t.details.targetduration;this.setInterval(e)}!t.details.live&&this.hasInterval()&&this.clearInterval()}},c.onAudioTrackSwitched=function(t){var e=this.tracks[t.id].groupId;e&&this.audioGroupId!==e&&(this.audioGroupId=e)},c.onLevelLoaded=function(t){this._selectAudioGroup(t.level)},c.onError=function(t){t.type===o.ErrorTypes.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(u.logger.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError()))},c._setAudioTrack=function(t){if(this._trackId===t&&this.tracks[this._trackId].details)u.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(t<0||t>=this.tracks.length)u.logger.warn("Invalid id passed to audio-track controller");else{var e=this.tracks[t];u.logger.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t;var n=e.url,a=e.type,r=e.id;this.hls.trigger(l.default.AUDIO_TRACK_SWITCHING,{id:r,type:a,url:n}),this._loadTrackDetailsIfNeeded(e)}},c.doTick=function(){this._updateTrack(this._trackId)},c._selectAudioGroup=function(t){var e=this.hls.levels[t];if(e&&e.audioGroupIds){var n=e.audioGroupIds[e.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},c._selectInitialAudioTrack=function(){var t=this,e=this.tracks;if(e.length){var n=this.tracks[this._trackId],a=null;if(n&&(a=n.name),this._selectDefaultTrack){var r=e.filter((function(t){return t.default}));r.length?e=r:u.logger.warn("No default audio tracks defined")}var i=!1,s=function(){e.forEach((function(e){i||t.audioGroupId&&e.groupId!==t.audioGroupId||a&&a!==e.name||(t._setAudioTrack(e.id),i=!0)}))};s(),i||(a=null,s()),i||(u.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},c._needsTrackLoading=function(t){var e=t.details,n=t.url;return!(e&&!e.live||!n)},c._loadTrackDetailsIfNeeded=function(t){if(this._needsTrackLoading(t)){var e=t.url,n=t.id;u.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(l.default.AUDIO_TRACK_LOADING,{url:e,id:n})}},c._updateTrack=function(t){if(!(t<0||t>=this.tracks.length)){this.clearInterval(),this._trackId=t,u.logger.log("trying to update audio-track "+t);var e=this.tracks[t];this._loadTrackDetailsIfNeeded(e)}},c._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,e=this.tracks[t],n=e.name,a=e.language,r=e.groupId;u.logger.warn("Loading failed on audio track id: "+t+", group-id: "+r+', name/language: "'+n+'" / "'+a+'"');for(var i=t,s=0;s<this.tracks.length;s++)if(!this.trackIdBlacklist[s]&&this.tracks[s].name===n){i=s;break}i!==t?(u.logger.log("Attempting audio-track fallback id:",i,"group-id:",this.tracks[i].groupId),this._setAudioTrack(i)):u.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+a+'"')},r=a,(i=[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(t){this._setAudioTrack(t),this._selectDefaultTrack=!1}}])&&Jt(r.prototype,i),s&&Jt(r,s),a}(pt);function te(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var ee=window.performance,ne=function(t){var e,n;function a(e,n){var a;return(a=t.call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.AUDIO_TRACKS_UPDATED,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.BUFFER_RESET,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED,l.default.INIT_PTS_FOUND)||this).fragmentTracker=n,a.config=e.config,a.audioCodecSwap=!1,a._state=mt,a.initPTS=[],a.waitingFragment=null,a.videoTrackCC=null,a.waitingVideoCC=null,a}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r,i,s,d=a.prototype;return d.onInitPtsFound=function(t){var e=t.id,n=t.frag.cc,a=t.initPTS;"main"===e&&(this.initPTS[n]=a,this.videoTrackCC=n,u.logger.log("InitPTS for cc: "+n+" found from main: "+a),this.state===At&&this.tick())},d.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(u.logger.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=gt):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=vt),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=mt},d.doTick=function(){var t,e,n,a=this.hls,r=a.config;switch(this.state){case Tt:case _t:case St:break;case vt:this.state=wt,this.loadedmetadata=!1;break;case gt:var i=this.tracks;if(!i)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var s=this.mediaBuffer?this.mediaBuffer:this.media,o=this.videoBuffer?this.videoBuffer:this.media,d=t<r.maxBufferHole?Math.max(2,r.maxBufferHole):r.maxBufferHole,f=H.bufferInfo(s,t,d),h=H.bufferInfo(o,t,d),p=f.len,m=f.end,v=this.fragPrevious,g=Math.min(r.maxBufferLength,r.maxMaxBufferLength),_=Math.max(g,h.len),y=this.audioSwitch,b=this.trackId;if((p<_||y)&&b<i.length){if(void 0===(n=i[b].details)){this.state=wt;break}if(!y&&this._streamEnded(f,n))return this.hls.trigger(l.default.BUFFER_EOS,{type:"audio"}),void(this.state=Et);var C,w=n.fragments,k=w.length,x=w[0].start,S=w[k-1].start+w[k-1].duration;if(y)if(n.live&&!n.PTSKnown)u.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),m=0;else if(m=t,n.PTSKnown&&t<x){if(!(f.end>x||f.nextStart))return;u.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=x+.05}if(n.initSegment&&!n.initSegment.data)C=n.initSegment;else if(m<=x){if(C=w[0],null!==this.videoTrackCC&&C.cc!==this.videoTrackCC&&(C=function(t,e){return V.search(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}(w,this.videoTrackCC)),n.live&&C.loadIdx&&C.loadIdx===this.fragLoadIdx){var E=f.nextStart?f.nextStart:x;return u.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(E+.05)),void(this.media.currentTime=E+.05)}}else{var T,A=r.maxFragLookUpTolerance,R=v?w[v.sn-w[0].sn+1]:void 0;m<S?(m>S-A&&(A=0),T=R&&!ut(m,A,R)?R:V.search(w,(function(t){return ut(m,A,t)}))):T=w[k-1],T&&(C=T,x=T.start,v&&C.level===v.level&&C.sn===v.sn&&(C.sn<n.endSN?(C=w[C.sn+1-n.startSN],this.fragmentTracker.getState(C)!==B&&u.logger.log("SN just loaded, load next one: "+C.sn)):C=null))}C&&(C.encrypted?(u.logger.log("Loading key for "+C.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+b),this.state=yt,a.trigger(l.default.KEY_LOADING,{frag:C})):(this.fragCurrent=C,(y||this.fragmentTracker.getState(C)===N)&&(u.logger.log("Loading "+C.sn+", cc: "+C.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+b+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+t+", bufferEnd: "+m.toFixed(3)),"initSegment"!==C.sn&&(this.startFragRequested=!0),Object(c.isFiniteNumber)(C.sn)&&(this.nextLoadPosition=C.start+C.duration),a.trigger(l.default.FRAG_LOADING,{frag:C}),this.state=bt)))}break;case wt:(e=this.tracks[this.trackId])&&e.details&&(this.state=gt);break;case Ct:var O=ee.now(),$=this.retryDate,P=(s=this.media)&&s.seeking;(!$||O>=$||P)&&(u.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=gt);break;case At:var L=this.waitingFragment;if(L){var D=L.frag.cc;if(void 0!==this.initPTS[D])this.waitingFragment=null,this.state=bt,this.onFragLoaded(L);else if(this.videoTrackCC!==this.waitingVideoCC)u.logger.log("Waiting fragment cc ("+D+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var I=H.bufferInfo(this.mediaBuffer,this.media.currentTime,r.maxBufferHole);ut(I.end,r.maxFragLookUpTolerance,L.frag)<0&&(u.logger.log("Waiting fragment cc ("+D+") @ "+L.frag.start+" cancelled because another fragment at "+I.end+" is needed"),this.clearWaitingFragment())}}else this.state=gt}},d.clearWaitingFragment=function(){var t=this.waitingFragment;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=gt)},d.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},d.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(u.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},d.onAudioTracksUpdated=function(t){u.logger.log("audio tracks updated"),this.tracks=t.audioTracks},d.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=_t,e?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=gt),this.tick()},d.onAudioTrackLoaded=function(t){var e=t.details,n=t.id,a=this.tracks[n],r=a.details,i=e.totalduration,s=0;if(u.logger.log("track "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+i),e.live||r&&r.live?r&&e.fragments.length>0?(nt(r,e),s=e.fragments[0].start,e.PTSKnown?u.logger.log("live audio playlist sliding:"+s.toFixed(3)):u.logger.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,u.logger.log("live audio playlist - first load, unknown sliding")):e.PTSKnown=!1,a.details=e,!this.startFragRequested){if(-1===this.startPosition){var o=e.startTimeOffset;Object(c.isFiniteNumber)(o)?(u.logger.log("start time offset found in playlist, adjust startPosition to "+o),this.startPosition=o):e.live?(this.startPosition=this.computeLivePosition(s,e),u.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===wt&&(this.state=gt),this.tick()},d.onKeyLoaded=function(){this.state===yt&&(this.state=gt,this.tick())},d.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag;if(this.state===bt&&e&&"audio"===n.type&&n.level===e.level&&n.sn===e.sn){var a=this.tracks[this.trackId],r=a.details,i=r.totalduration,s=e.level,o=e.sn,c=e.cc,d=this.config.defaultAudioCodec||a.audioCodec||"mp4a.40.2",f=this.stats=t.stats;if("initSegment"===o)this.state=gt,f.tparsed=f.tbuffered=ee.now(),r.initSegment.data=t.payload,this.hls.trigger(l.default.FRAG_BUFFERED,{stats:f,frag:e,id:"audio"}),this.tick();else{this.state=kt,this.appended=!1,this.demuxer||(this.demuxer=new J(this.hls,"audio"));var h=this.initPTS[c],p=r.initSegment?r.initSegment.data:[];void 0!==h?(this.pendingBuffering=!0,u.logger.log("Demuxing "+o+" of ["+r.startSN+" ,"+r.endSN+"],track "+s),this.demuxer.push(t.payload,p,d,null,e,i,!1,h)):(u.logger.log("Unknown video PTS for cc "+c+", waiting for video PTS before demuxing audio frag "+o+" of ["+r.startSN+" ,"+r.endSN+"],track "+s),this.waitingFragment=t,this.waitingVideoCC=this.videoTrackCC,this.state=At)}}this.fragLoadError=0},d.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===kt){var a,r=t.tracks;if(r.video&&delete r.video,a=r.audio){a.levelCodec=a.codec,a.id=t.id,this.hls.trigger(l.default.BUFFER_CODECS,r),u.logger.log("audio track:audio,container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var i=a.initSegment;if(i){var s={type:"audio",data:i,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[s]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,s))}this.tick()}}},d.onFragParsingData=function(t){var e=this,n=this.fragCurrent,a=t.frag;if(n&&"audio"===t.id&&"audio"===t.type&&a.sn===n.sn&&a.level===n.level&&this.state===kt){var r=this.trackId,i=this.tracks[r],s=this.hls;Object(c.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),n.addElementaryStream(m.AUDIO),u.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),et(i.details,n,t.startPTS,t.endPTS);var d=this.media,f=!1;if(this.audioSwitch)if(d&&d.readyState){var h=d.currentTime;u.logger.log("switching audio track : currentTime:"+h),h>=t.startPTS&&(u.logger.log("switching audio track : flushing all audio"),this.state=St,s.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),f=!0,this.audioSwitch=!1,s.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,s.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:r});var p=this.pendingData;if(!p)return u.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void s.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach((function(e){e&&e.length&&p.push({type:t.type,data:e,parent:"audio",content:"data"})})),!f&&p.length&&(p.forEach((function(t){e.state===kt&&(e.pendingBuffering=!0,e.hls.trigger(l.default.BUFFER_APPENDING,t))})),this.pendingData=[],this.appended=!0)),this.tick()}},d.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===kt&&(this.stats.tparsed=ee.now(),this.state=xt,this._checkAppendedParsed())},d.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},d.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},d.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==kt&&e!==xt||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},d._checkAppendedParsed=function(){if(!(this.state!==xt||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,n=this.hls;if(t){this.fragPrevious=t,e.tbuffered=ee.now(),n.trigger(l.default.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var a=this.mediaBuffer?this.mediaBuffer:this.media;a&&u.logger.log("audio buffered : "+it.toString(a.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=gt}this.tick()}},d.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=t.frag;if(n&&"audio"!==n.type)break;if(!t.fatal){var a=this.fragLoadError;a?a++:a=1;var r=this.config;if(a<=r.fragLoadingMaxRetry){this.fragLoadError=a;var i=Math.min(Math.pow(2,a-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);u.logger.warn("AudioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=ee.now()+i,this.state=Ct}else u.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=Tt}break;case o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case o.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case o.ErrorDetails.KEY_LOAD_ERROR:case o.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==Tt&&(this.state=t.fatal?Tt:gt,u.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case o.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===kt||this.state===xt)){var s=this.mediaBuffer,c=this.media.currentTime;if(s&&H.isBuffered(s,c)&&H.isBuffered(s,c+.5)){var d=this.config;d.maxMaxBufferLength>=d.maxBufferLength&&(d.maxMaxBufferLength/=2,u.logger.warn("AudioStreamController: reduce max buffer length to "+d.maxMaxBufferLength+"s")),this.state=gt}else u.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=St,this.hls.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},d.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(u.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),e.forEach((function(e){t.hls.trigger(l.default.BUFFER_APPENDING,e)})),this.appended=!0,this.pendingData=[],this.state=xt):(this.state=gt,this.fragPrevious=null,this.tick())},r=a,(i=[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,u.logger.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}])&&te(r.prototype,i),s&&te(r,s),a}(Ot),ae=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var t={"":!0,lr:!0,rl:!0},e={start:!0,middle:!0,end:!0,left:!0,right:!0};function n(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}function a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)t[a]=n[a]}return t}function r(e,r,i){var s=this,o={enumerable:!0};s.hasBeenReset=!1;var c="",l=!1,u=e,d=r,f=i,h=null,p="",m=!0,v="auto",g="start",_=50,y="middle",b=50,C="middle";Object.defineProperty(s,"id",a({},o,{get:function(){return c},set:function(t){c=""+t}})),Object.defineProperty(s,"pauseOnExit",a({},o,{get:function(){return l},set:function(t){l=!!t}})),Object.defineProperty(s,"startTime",a({},o,{get:function(){return u},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");u=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",a({},o,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",a({},o,{get:function(){return f},set:function(t){f=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",a({},o,{get:function(){return h},set:function(t){h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",a({},o,{get:function(){return p},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");p=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",a({},o,{get:function(){return m},set:function(t){m=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",a({},o,{get:function(){return v},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",a({},o,{get:function(){return g},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",a({},o,{get:function(){return _},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",a({},o,{get:function(){return y},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",a({},o,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",a({},o,{get:function(){return C},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");C=e,this.hasBeenReset=!0}})),s.displayState=void 0}return r.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},r}(),re=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};function ie(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new re,this.regionList=[]}function se(){this.values=Object.create(null)}function oe(t,e,n,a){var r=a?t.split(a):[t];for(var i in r)if("string"==typeof r[i]){var s=r[i].split(n);2===s.length&&e(s[0],s[1])}}se.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var a=0;a<n.length;++a)if(e===n[a]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var ce=new ae(0,0,0),le="middle"===ce.align?"middle":"center";function ue(t,e,n){var a=t;function r(){var e=function(t){function e(t,e,n,a){return 3600*(0|t)+60*(0|e)+(0|n)+(0|a)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}(t);if(null===e)throw new Error("Malformed timestamp: "+a);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function i(){t=t.replace(/^\s+/,"")}if(i(),e.startTime=r(),i(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);t=t.substr(3),i(),e.endTime=r(),i(),function(t,e){var a=new se;oe(t,(function(t,e){switch(t){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===e){a.set(t,n[r].region);break}break;case"vertical":a.alt(t,e,["rl","lr"]);break;case"line":var i=e.split(","),s=i[0];a.integer(t,s),a.percent(t,s)&&a.set("snapToLines",!1),a.alt(t,s,["auto"]),2===i.length&&a.alt("lineAlign",i[1],["start",le,"end"]);break;case"position":i=e.split(","),a.percent(t,i[0]),2===i.length&&a.alt("positionAlign",i[1],["start",le,"end","line-left","line-right","auto"]);break;case"size":a.percent(t,e);break;case"align":a.alt(t,e,["start",le,"end","left","right"])}}),/:/,/\s/),e.region=a.get("region",null),e.vertical=a.get("vertical","");var r=a.get("line","auto");"auto"===r&&-1===ce.line&&(r=-1),e.line=r,e.lineAlign=a.get("lineAlign","start"),e.snapToLines=a.get("snapToLines",!0),e.size=a.get("size",100),e.align=a.get("align",le);var i=a.get("position","auto");"auto"===i&&50===ce.position&&(i="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=i}(t,e)}function de(t){return t.replace(/<br(?: \/)?>/gi,"\n")}ie.prototype={parse:function(t){var e=this;function n(){var t=e.buffer,n=0;for(t=de(t);n<t.length&&"\r"!==t[n]&&"\n"!==t[n];)++n;var a=t.substr(0,n);return"\r"===t[n]&&++n,"\n"===t[n]&&++n,e.buffer=t.substr(n),a}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var a;if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var r=(a=n()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var i=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(i?i=!1:a=n(),e.state){case"HEADER":/:/.test(a)?oe(a,(function(t,e){}),/:/):a||(e.state="ID");continue;case"NOTE":a||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){e.state="NOTE";break}if(!a)continue;if(e.cue=new ae(0,0,""),e.state="CUE",-1===a.indexOf("--\x3e")){e.cue.id=a;continue}case"CUE":try{ue(a,e.cue,e.regionList)}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var s=-1!==a.indexOf("--\x3e");if(!a||s&&(i=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+="\n"),e.cue.text+=a;continue;case"BADCUE":a||(e.state="ID");continue}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}};var fe=ie;function he(t,e,n,a){for(var r,i,s,o,c,l=[],u=window.VTTCue||TextTrackCue,d=0;d<a.rows.length;d++)if(s=!0,o=0,c="",!(r=a.rows[d]).isEmpty()){for(var f=0;f<r.chars.length;f++)r.chars[f].uchar.match(/\s/)&&s?o++:(c+=r.chars[f].uchar,s=!1);r.cueStartTime=e,e===n&&(n+=1e-4),i=new u(e,n,de(c.trim())),o>=16?o--:o++,navigator.userAgent.match(/Firefox\//)?i.line=d+1:i.line=d>7?d-2:d+1,i.align="left",i.position=Math.max(0,Math.min(100,o/32*100)),l.push(i),t&&t.addCue(i)}return l}var pe,me={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},ve=function(t){var e=t;return me.hasOwnProperty(t)&&(e=me[t]),String.fromCharCode(e)},ge=15,_e=100,ye={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},be={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Ce={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},we={25:2,26:4,29:6,30:8,31:10,27:13,28:15},ke=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(t){t[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA"}(pe||(pe={}));var xe=function(){function t(){this.time=null,this.verboseLevel=pe.ERROR}return t.prototype.log=function(t,e){this.verboseLevel>=t&&u.logger.log(this.time+" ["+t+"] "+e)},t}(),Se=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},Ee=function(){function t(t,e,n,a,r){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=n||!1,this.background=a||"black",this.flash=r||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var a=e[n];t.hasOwnProperty(a)&&(this[a]=t[a])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),Te=function(){function t(t,e,n,a,r,i){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new Ee(e,n,a,r,i)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),Ae=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<_e;e++)this.chars.push(new Te);this.logger=t,this.pos=0,this.currPenState=new Ee}var e=t.prototype;return e.equals=function(t){for(var e=!0,n=0;n<_e;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<_e;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<_e;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(pe.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>_e&&(this.logger.log(pe.DEBUG,"Too large cursor position "+this.pos),this.pos=_e)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){t>=144&&this.backSpace();var e=ve(t);this.pos>=_e?this.logger.log(pe.ERROR,"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<_e;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,n=0;n<_e;n++){var a=this.chars[n].uchar;" "!==a&&(e=!1),t.push(a)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),Re=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<ge;e++)this.rows.push(new Ae(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<ge;t++)this.rows[t].clear();this.currRow=14},e.equals=function(t){for(var e=!0,n=0;n<ge;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<ge;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<ge;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){this.logger.log(pe.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){this.logger.log(pe.INFO,"pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var n=0;n<ge;n++)this.rows[n].clear();var a=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var i=r.rows[a].cueStartTime,s=this.logger.time;if(i&&null!==s&&i<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[e-this.nrRollUpRows+o+1].copy(r.rows[a+o])}}this.currRow=e;var c=this.rows[this.currRow];if(null!==t.indent){var l=t.indent,u=Math.max(l-1,0);c.setCursor(t.indent),t.color=c.chars[u].penState.foreground}var d={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(d)},e.setBkgData=function(t){this.logger.log(pe.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(pe.TEXT,this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(pe.INFO,"Rolling up")}else this.logger.log(pe.DEBUG,"roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],n="",a=-1,r=0;r<ge;r++){var i=this.rows[r].getTextString();i&&(a=r+1,t?e.push("Row "+a+": '"+i+"'"):e.push(i.trim()))}return e.length>0&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},e.getTextAndFormat=function(){return this.rows},t}(),Oe=function(){function t(t,e,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new Re(n),this.nonDisplayedMemory=new Re(n),this.lastOutputScreen=new Re(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(pe.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(pe.INFO,n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(pe.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(pe.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(pe.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(pe.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(pe.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(pe.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(pe.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(pe.INFO,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(pe.INFO,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(pe.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(pe.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(pe.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){if(this.logger.log(pe.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(pe.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(pe.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}this.logger.log(pe.INFO,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}();function $e(t,e,n){n.a=t,n.b=e}function Pe(t,e,n){return n.a===t&&n.b===e}var Le=function(){function t(t,e,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var a=new xe;this.channels=[null,new Oe(t,e,a),new Oe(t+1,n,a)],this.cmdHistory={a:null,b:null},this.logger=a}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var n,a,r,i=!1;this.logger.time=t;for(var s=0;s<e.length;s+=2)if(a=127&e[s],r=127&e[s+1],0!==a||0!==r){if(this.logger.log(pe.DATA,"["+Se([e[s],e[s+1]])+"] -> ("+Se([a,r])+")"),(n=this.parseCmd(a,r))||(n=this.parseMidrow(a,r)),n||(n=this.parsePAC(a,r)),n||(n=this.parseBackgroundAttributes(a,r)),!n&&(i=this.parseChars(a,r))){var o=this.currentChannel;o&&o>0?this.channels[o].insertChars(i):this.logger.log(pe.WARNING,"No channel found yet. TEXT-MODE?")}n||i||this.logger.log(pe.WARNING,"Couldn't parse cleaned data "+Se([a,r])+" orig: "+Se([e[s],e[s+1]]))}},e.parseCmd=function(t,e){var n=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=33&&e<=35))return!1;if(Pe(t,e,n))return $e(null,null,n),this.logger.log(pe.DEBUG,"Repeated command ("+Se([t,e])+") is dropped"),!0;var a=20===t||21===t||23===t?1:2,r=this.channels[a];return 20===t||21===t||28===t||29===t?32===e?r.ccRCL():33===e?r.ccBS():34===e?r.ccAOF():35===e?r.ccAON():36===e?r.ccDER():37===e?r.ccRU(2):38===e?r.ccRU(3):39===e?r.ccRU(4):40===e?r.ccFON():41===e?r.ccRDC():42===e?r.ccTR():43===e?r.ccRTD():44===e?r.ccEDM():45===e?r.ccCR():46===e?r.ccENM():47===e&&r.ccEOC():r.ccTO(e-32),$e(t,e,n),this.currentChannel=a,!0},e.parseMidrow=function(t,e){var n=0;if((17===t||25===t)&&e>=32&&e<=47){if((n=17===t?1:2)!==this.currentChannel)return this.logger.log(pe.ERROR,"Mismatch channel in midrow parsing"),!1;var a=this.channels[n];return!!a&&(a.ccMIDROW(e),this.logger.log(pe.DEBUG,"MIDROW ("+Se([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var n,a=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;if(Pe(t,e,a))return $e(null,null,a),!0;var r=t<=23?1:2;n=e>=64&&e<=95?1===r?ye[t]:Ce[t]:1===r?be[t]:we[t];var i=this.channels[r];return!!i&&(i.setPAC(this.interpretPAC(n,e)),$e(t,e,a),this.currentChannel=r,!0)},e.interpretPAC=function(t,e){var n=e,a={color:null,italics:!1,indent:null,underline:!1,row:t};return n=e>95?e-96:e-64,a.underline=1==(1&n),n<=13?a.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(a.italics=!0,a.color="white"):a.indent=4*Math.floor((n-16)/2),a},e.parseChars=function(t,e){var n,a=null,r=null;if(t>=25?(n=2,r=t-8):(n=1,r=t),r>=17&&r<=19){var i=e;i=17===r?e+80:18===r?e+112:e+144,this.logger.log(pe.INFO,"Special char '"+ve(i)+"' in channel "+n),a=[i]}else t>=32&&t<=127&&(a=0===e?[t]:[t,e]);if(a){var s=Se(a);this.logger.log(pe.DEBUG,"Char codes =  "+s.join(",")),$e(t,e,this.cmdHistory)}return a},e.parseBackgroundAttributes=function(t,e){var n;if(!((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47))return!1;var a={};16===t||24===t?(n=Math.floor((e-32)/2),a.background=ke[n],e%2==1&&(a.background=a.background+"_semi")):45===e?a.background="transparent":(a.foreground="black",47===e&&(a.underline=!0));var r=t<=23?1:2;return this.channels[r].setBkgData(a),$e(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var n=this.channels[e];n&&n.cueSplitAtTime(t)}},t}(),De=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,n){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[]},t}(),Ie=function(t,e,n){return t.substr(n||0,e.length)===e},Me=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString()},Ne={parse:function(t,e,n,a,r,i){var s,o=Object(Mt.utf8ArrayToStr)(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),l="00:00.000",u=0,d=0,f=0,h=[],p=!0,m=!1,v=new fe;v.oncue=function(t){var e=n[a],r=n.ccOffset;e&&e.new&&(void 0!==d?r=n.ccOffset=e.start:function(t,e,n){var a=t[e],r=t[a.prevCC];if(!r||!r.new&&a.new)return t.ccOffset=t.presentationOffset=a.start,void(a.new=!1);for(;r&&r.new;)t.ccOffset+=a.start-r.start,a.new=!1,r=t[(a=r).prevCC];t.presentationOffset=n}(n,a,f)),f&&(r=f-n.presentationOffset),m&&(t.startTime+=r-d,t.endTime+=r-d),t.id=Me(t.startTime.toString())+Me(t.endTime.toString())+Me(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&h.push(t)},v.onparsingerror=function(t){s=t},v.onflush=function(){s&&i?i(s):r(h)},o.forEach((function(t){if(p){if(Ie(t,"X-TIMESTAMP-MAP=")){p=!1,m=!0,t.substr(16).split(",").forEach((function(t){Ie(t,"LOCAL:")?l=t.substr(6):Ie(t,"MPEGTS:")&&(u=parseInt(t.substr(7)))}));try{e+(9e4*n[a].start||0)<0&&(e+=8589934592),u-=e,d=function(t){var e=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),a=parseInt(t.substr(-9,2)),r=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(c.isFiniteNumber)(e)&&Object(c.isFiniteNumber)(n)&&Object(c.isFiniteNumber)(a)&&Object(c.isFiniteNumber)(r)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*n,(e+=6e4*a)+36e5*r}(l)/1e3,f=u/9e4}catch(t){m=!1,s=t}return}""===t&&(p=!1)}v.parse(t+"\n")})),v.flush()}};function je(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fe(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}var Be=function(t){var e,n;function a(e){var n;if((n=t.call(this,e,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_USERDATA,l.default.FRAG_DECRYPTED,l.default.MANIFEST_LOADING,l.default.MANIFEST_LOADED,l.default.FRAG_LOADED,l.default.INIT_PTS_FOUND)||this).media=null,n.config=void 0,n.enabled=!0,n.Cues=void 0,n.textTracks=[],n.tracks=[],n.initPTS=[],n.unparsedVttFrags=[],n.captionsTracks={},n.nonNativeCaptionsTracks={},n.captionsProperties=void 0,n.cea608Parser1=void 0,n.cea608Parser2=void 0,n.lastSn=-1,n.prevCC=-1,n.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},n.hls=e,n.config=e.config,n.Cues=e.config.cueHandler,n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode},textTrack3:{label:n.config.captionsTextTrack3Label,languageCode:n.config.captionsTextTrack3LanguageCode},textTrack4:{label:n.config.captionsTextTrack4Label,languageCode:n.config.captionsTextTrack4LanguageCode}},n.config.enableCEA708Captions){var a=new De(je(n),"textTrack1"),r=new De(je(n),"textTrack2"),i=new De(je(n),"textTrack3"),s=new De(je(n),"textTrack4");n.cea608Parser1=new Le(1,a,r),n.cea608Parser2=new Le(3,i,s)}return n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r=a.prototype;return r.addCues=function(t,e,n,a,r){for(var i,s,o,c,u=!1,d=r.length;d--;){var f=r[d],h=(i=f[0],s=f[1],o=e,c=n,Math.min(s,c)-Math.max(i,o));if(h>=0&&(f[0]=Math.min(f[0],e),f[1]=Math.max(f[1],n),u=!0,h/(n-e)>.5))return}if(u||r.push([e,n]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[t],e,n,a);else{var p=this.Cues.newCue(null,e,n,a);this.hls.trigger(l.default.CUES_PARSED,{type:"captions",cues:p,track:t})}},r.onInitPtsFound=function(t){var e=this,n=t.frag,a=t.id,r=t.initPTS,i=this.unparsedVttFrags;"main"===a&&(this.initPTS[n.cc]=r),i.length&&(this.unparsedVttFrags=[],i.forEach((function(t){e.onFragLoaded(t)})))},r.getExistingTrack=function(t){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var a=e.textTracks[n];if(a[t])return a}return null},r.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},r.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsProperties,n=this.captionsTracks,a=this.media,r=e[t],i=r.label,s=r.languageCode,o=this.getExistingTrack(t);if(o)n[t]=o,jt(n[t]),Nt(n[t],a);else{var c=this.createTextTrack("captions",i,s);c&&(c[t]=!0,n[t]=c)}}},r.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var n={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=n,this.hls.trigger(l.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},r.createTextTrack=function(t,e,n){var a=this.media;if(a)return a.addTextTrack(t,e,n)},r.destroy=function(){t.prototype.destroy.call(this)},r.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},r.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){jt(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}},r.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},r._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var n=0;n<e.length;n++)jt(e[n])}},r.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var n=t.subtitles||[],a=this.tracks&&n&&this.tracks.length===n.length;if(this.tracks=t.subtitles||[],this.config.renderTextTracksNatively){var r=this.media?this.media.textTracks:[];this.tracks.forEach((function(t,n){var a;if(n<r.length){for(var i=null,s=0;s<r.length;s++)if(Fe(r[s],t)){i=r[s];break}i&&(a=i)}a||(a=e.createTextTrack("subtitles",t.name,t.lang)),t.default?a.mode=e.hls.subtitleDisplay?"showing":"hidden":a.mode="disabled",e.textTracks.push(a)}))}else if(!a&&this.tracks&&this.tracks.length){var i=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}}));this.hls.trigger(l.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:i})}}this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(t){var n=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(n){var a="textTrack"+n[1],r=e.captionsProperties[a];r&&(r.label=t.name,t.lang&&(r.languageCode=t.lang),r.media=t)}}))},r.onFragLoaded=function(t){var e=t.frag,n=t.payload,a=this.cea608Parser1,r=this.cea608Parser2,i=this.initPTS,s=this.lastSn,o=this.unparsedVttFrags;if("main"===e.type){var u=e.sn;e.sn!==s+1&&a&&r&&(a.reset(),r.reset()),this.lastSn=u}else if("subtitle"===e.type)if(n.byteLength){if(!Object(c.isFiniteNumber)(i[e.cc]))return o.push(t),void(i.length&&this.hls.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e}));var d=e.decryptdata;null!=d&&null!=d.key&&"AES-128"===d.method||this._parseVTTs(e,n)}else this.hls.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},r._parseVTTs=function(t,e){var n=this,a=this.hls,r=this.prevCC,i=this.textTracks,s=this.vttCCs;s[t.cc]||(s[t.cc]={start:t.start,prevCC:r,new:!0},this.prevCC=t.cc),Ne.parse(e,this.initPTS[t.cc],s,t.cc,(function(e){if(n.config.renderTextTracksNatively){var r=i[t.level];if("disabled"===r.mode)return void a.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t});e.forEach((function(t){if(!r.cues.getCueById(t.id))try{if(r.addCue(t),!r.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(n){u.logger.debug("Failed occurred on adding cues: "+n);var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,r.addCue(e)}}))}else{var s=n.tracks[t.level].default?"default":"subtitles"+t.level;a.trigger(l.default.CUES_PARSED,{type:"subtitles",cues:e,track:s})}a.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){u.logger.log("Failed to parse VTT cue: "+e),a.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}))},r.onFragDecrypted=function(t){var e=t.frag,n=t.payload;if("subtitle"===e.type){if(!Object(c.isFiniteNumber)(this.initPTS[e.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(e,n)}},r.onFragParsingUserdata=function(t){var e=this.cea608Parser1,n=this.cea608Parser2;if(this.enabled&&e&&n)for(var a=0;a<t.samples.length;a++){var r=t.samples[a].bytes;if(r){var i=this.extractCea608Data(r);e.addData(t.samples[a].pts,i[0]),n.addData(t.samples[a].pts,i[1])}}},r.extractCea608Data=function(t){for(var e=31&t[0],n=2,a=[[],[]],r=0;r<e;r++){var i=t[n++],s=127&t[n++],o=127&t[n++],c=3&i;0===s&&0===o||0!=(4&i)&&(0!==c&&1!==c||(a[c].push(s),a[c].push(o)))}return a},a}(f);function Ue(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Ve(t){for(var e=[],n=0;n<t.length;n++){var a=t[n];"subtitles"===a.kind&&a.label&&e.push(t[n])}return e}var He,Ze=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.MANIFEST_LOADED,l.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n.queuedDefaultTrack=null,n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r,i,s,o=a.prototype;return o.destroy=function(){f.prototype.destroy.call(this)},o.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(Object(c.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){e.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},o.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(c.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),Ve(this.media.textTracks).forEach((function(t){jt(t)})),this.subtitleTrack=-1,this.media=null)},o.onManifestLoaded=function(t){var e=this,n=t.subtitles||[];this.tracks=n,this.hls.trigger(l.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach((function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)}))},o.onSubtitleTrackLoaded=function(t){var e=this,n=t.id,a=t.details,r=this.trackId,i=this.tracks,s=i[r];if(n>=i.length||n!==r||!s||this.stopped)this._clearReloadTimer();else if(u.logger.log("subtitle track "+n+" loaded"),a.live){var o=rt(s.details,a,t.stats.trequest);u.logger.log("Reloading live subtitle playlist in "+o+"ms"),this.timer=setTimeout((function(){e._loadCurrentTrack()}),o)}else this._clearReloadTimer()},o.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},o.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},o._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},o._loadCurrentTrack=function(){var t=this.trackId,e=this.tracks,n=this.hls,a=e[t];t<0||!a||a.details&&!a.details.live||(u.logger.log("Loading subtitle track "+t),n.trigger(l.default.SUBTITLE_TRACK_LOADING,{url:a.url,id:t}))},o._toggleTrackModes=function(t){var e=this.media,n=this.subtitleDisplay,a=this.trackId;if(e){var r=Ve(e.textTracks);if(-1===t)[].slice.call(r).forEach((function(t){t.mode="disabled"}));else{var i=r[a];i&&(i.mode="disabled")}var s=r[t];s&&(s.mode=n?"showing":"hidden")}},o._setSubtitleTrackInternal=function(t){var e=this.hls,n=this.tracks;!Object(c.isFiniteNumber)(t)||t<-1||t>=n.length||(this.trackId=t,u.logger.log("Switching to subtitle track "+t),e.trigger(l.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},o._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=Ve(this.media.textTracks),n=0;n<e.length;n++)if("hidden"===e[n].mode)t=n;else if("showing"===e[n].mode){t=n;break}this.subtitleTrack=t}},r=a,(i=[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&(this._toggleTrackModes(t),this._setSubtitleTrackInternal(t))}}])&&Ue(r.prototype,i),s&&Ue(r,s),a}(f),Ge=n("./src/crypt/decrypter.js"),ze=window.performance,qe=function(t){var e,n;function a(e,n){var a;return(a=t.call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.ERROR,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.SUBTITLE_TRACKS_UPDATED,l.default.SUBTITLE_TRACK_SWITCH,l.default.SUBTITLE_TRACK_LOADED,l.default.SUBTITLE_FRAG_PROCESSED,l.default.LEVEL_UPDATED)||this).fragmentTracker=n,a.config=e.config,a.state=mt,a.tracks=[],a.tracksBuffered=[],a.currentTrackId=-1,a.decrypter=new Ge.default(e,e.config),a.lastAVStart=0,a._onMediaSeeking=a.onMediaSeeking.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a)),a}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r=a.prototype;return r.startLoad=function(){this.stopLoad(),this.state=gt;var t=this.tracks[this.currentTrackId];t&&t.details&&(this.setInterval(500),this.tick())},r.onSubtitleFragProcessed=function(t){var e=t.frag,n=t.success;if(this.fragPrevious=e,this.state=gt,n){var a=this.tracksBuffered[this.currentTrackId];if(a){for(var r,i=e.start,s=0;s<a.length;s++)if(i>=a[s].start&&i<=a[s].end){r=a[s];break}var o=e.start+e.duration;r?r.end=o:(r={start:i,end:o},a.push(r))}}},r.onMediaAttached=function(t){var e=t.media;this.media=e,e.addEventListener("seeking",this._onMediaSeeking),this.state=gt},r.onMediaDetaching=function(){var t=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]})),this.media=null,this.state=mt)},r.onError=function(t){var e=t.frag;e&&"subtitle"===e.type&&(this.fragCurrent&&this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.state=gt)},r.onSubtitleTracksUpdated=function(t){var e=this;u.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=t.subtitleTracks,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]}))},r.onSubtitleTrackSwitch=function(t){if(this.currentTrackId=t.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var e=this.tracks[this.currentTrackId];e&&e.details&&this.setInterval(500)}else this.clearInterval()},r.onSubtitleTrackLoaded=function(t){var e=t.id,n=t.details,a=this.currentTrackId,r=this.tracks,i=r[a];e>=r.length||e!==a||!i||(n.live&&function(t,e,n){void 0===n&&(n=0);var a=-1;at(t,e,(function(t,e,n){e.start=t.start,a=n}));var r=e.fragments;if(a<0)r.forEach((function(t){t.start+=n}));else for(var i=a+1;i<r.length;i++)r[i].start=r[i-1].start+r[i-1].duration}(i.details,n,this.lastAVStart),i.details=n,this.setInterval(500))},r.onKeyLoaded=function(){this.state===yt&&(this.state=gt)},r.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag.decryptdata,a=t.frag,r=this.hls;if(this.state===bt&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&n&&n.key&&"AES-128"===n.method){var i=ze.now();this.decrypter.decrypt(t.payload,n.key.buffer,n.iv.buffer,(function(t){var e=ze.now();r.trigger(l.default.FRAG_DECRYPTED,{frag:a,payload:t,stats:{tstart:i,tdecrypt:e}})}))}},r.onLevelUpdated=function(t){var e=t.details.fragments;this.lastAVStart=e.length?e[0].start:0},r.doTick=function(){if(this.media)switch(this.state){case gt:var t=this.config,e=this.currentTrackId,n=this.fragmentTracker,a=this.media,r=this.tracks;if(!r||!r[e]||!r[e].details)break;var i,s=t.maxBufferHole,o=t.maxFragLookUpTolerance,c=Math.min(t.maxBufferLength,t.maxMaxBufferLength),d=H.bufferedInfo(this._getBuffered(),a.currentTime,s),f=d.end,h=d.len,p=r[e].details,m=p.fragments,v=m.length,g=m[v-1].start+m[v-1].duration;if(h>c)return;var _=this.fragPrevious;f<g?(_&&p.hasProgramDateTime&&(i=ct(m,_.endProgramDateTime,o)),i||(i=lt(_,m,f,o))):i=m[v-1],i&&i.encrypted?(u.logger.log("Loading key for "+i.sn),this.state=yt,this.hls.trigger(l.default.KEY_LOADING,{frag:i})):i&&n.getState(i)===N&&(this.fragCurrent=i,this.state=bt,this.hls.trigger(l.default.FRAG_LOADING,{frag:i}))}else this.state=gt},r.stopLoad=function(){this.lastAVStart=0,this.fragPrevious=null,t.prototype.stopLoad.call(this)},r._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},r.onMediaSeeking=function(){if(this.fragCurrent){var t=this.media?this.media.currentTime:0,e=this.config.maxFragLookUpTolerance,n=this.fragCurrent.start-e,a=this.fragCurrent.start+this.fragCurrent.duration+e;(t<n||t>a)&&(this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.fragmentTracker.removeFragment(this.fragCurrent),this.fragCurrent=null,this.fragPrevious=null,this.state=gt,this.tick())}},a}(Ot);!function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(He||(He={}));var Ke="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function We(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Ye=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHED,l.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._drmSystemOptions=void 0,n._config=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n.mediaKeysPromise=null,n._onMediaEncrypted=function(t){if(u.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),!n.mediaKeysPromise)return u.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void n.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var e=function(e){n._media&&(n._attemptSetMediaKeys(e),n._generateRequestWithPreferredKeySession(t.initDataType,t.initData))};n.mediaKeysPromise.then(e).catch(e)},n._config=e.config,n._widevineLicenseUrl=n._config.widevineLicenseUrl,n._licenseXhrSetup=n._config.licenseXhrSetup,n._emeEnabled=n._config.emeEnabled,n._requestMediaKeySystemAccess=n._config.requestMediaKeySystemAccessFunc,n._drmSystemOptions=e.config.drmSystemOptions,n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r,i,s,c=a.prototype;return c.getLicenseServerUrl=function(t){switch(t){case He.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},c._attemptKeySystemAccess=function(t,e,n){var a=this,r=function(t,e,n,a){switch(t){case He.WIDEVINE:return function(t,e,n){var a={audioCapabilities:[],videoCapabilities:[]};return t.forEach((function(t){a.audioCapabilities.push({contentType:'audio/mp4; codecs="'+t+'"',robustness:n.audioRobustness||""})})),e.forEach((function(t){a.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"',robustness:n.videoRobustness||""})})),[a]}(e,n,a);default:throw new Error("Unknown key-system: "+t)}}(t,e,n,this._drmSystemOptions);u.logger.log("Requesting encrypted media key-system access");var i=this.requestMediaKeySystemAccess(t,r);this.mediaKeysPromise=i.then((function(e){return a._onMediaKeySystemAccessObtained(t,e)})),i.catch((function(e){u.logger.error('Failed to obtain key-system "'+t+'" access:',e)}))},c._onMediaKeySystemAccessObtained=function(t,e){var n=this;u.logger.log('Access for key-system "'+t+'" obtained');var a={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(a);var r=Promise.resolve().then((function(){return e.createMediaKeys()})).then((function(e){return a.mediaKeys=e,u.logger.log('Media-keys created for key-system "'+t+'"'),n._onMediaKeysCreated(),e}));return r.catch((function(t){u.logger.error("Failed to create media-keys:",t)})),r},c._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach((function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))}))},c._onNewMediaKeySession=function(t){var e=this;u.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(n){e._onKeySessionMessage(t,n.message)}),!1)},c._onKeySessionMessage=function(t,e){u.logger.log("Got EME message event, creating license request"),this._requestLicense(e,(function(e){u.logger.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e)}))},c._attemptSetMediaKeys=function(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return u.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});u.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},c._generateRequestWithPreferredKeySession=function(t,e){var n=this,a=this._mediaKeysList[0];if(!a)return u.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(a.mediaKeysSessionInitialized)u.logger.warn("Key-Session already initialized but requested again");else{var r=a.mediaKeysSession;if(!r)return u.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!e)return u.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});u.logger.log('Generating key-session request for "'+t+'" init data type'),a.mediaKeysSessionInitialized=!0,r.generateRequest(t,e).then((function(){u.logger.debug("Key-session generation succeeded")})).catch((function(t){u.logger.error("Error generating key-session request:",t),n.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},c._createLicenseXhr=function(t,e,n){var a=new XMLHttpRequest,r=this._licenseXhrSetup;try{if(r)try{r(a,t)}catch(e){a.open("POST",t,!0),r(a,t)}a.readyState||a.open("POST",t,!0)}catch(t){throw new Error("issue setting up KeySystem license XHR "+t)}return a.responseType="arraybuffer",a.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,a,t,e,n),a},c._onLicenseRequestReadyStageChange=function(t,e,n,a){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,u.logger.log("License request succeeded"),"arraybuffer"!==t.responseType&&u.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),a(t.response);else{if(u.logger.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var r=3-this._requestLicenseFailureCount+1;u.logger.warn("Retrying license request, "+r+" attempts left"),this._requestLicense(n,a)}}},c._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case He.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},c._requestLicense=function(t,e){u.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return u.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var a=this.getLicenseServerUrl(n.mediaKeySystemDomain),r=this._createLicenseXhr(a,t,e);u.logger.log("Sending license request to URL: "+a);var i=this._generateLicenseRequestChallenge(n,t);r.send(i)}catch(t){u.logger.error("Failure requesting DRM license: "+t),this.hls.trigger(l.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},c.onMediaAttached=function(t){if(this._emeEnabled){var e=t.media;this._media=e,e.addEventListener("encrypted",this._onMediaEncrypted)}},c.onMediaDetached=function(){var t=this._media,e=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(e.map((function(t){if(t.mediaKeysSession)return t.mediaKeysSession.close().catch((function(){}))}))).then((function(){return t.setMediaKeys(null)})).catch((function(){})))},c.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map((function(t){return t.audioCodec})),n=t.levels.map((function(t){return t.videoCodec}));this._attemptKeySystemAccess(He.WIDEVINE,e,n)}},r=a,(i=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&We(r.prototype,i),s&&We(r,s),a}(f);function Xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Je(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(n),!0).forEach((function(e){Qe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tn=Je(Je({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Xt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Zt,bufferController:zt,capLevelController:Kt,fpsController:Yt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:Ke,testBandwidth:!0},{cueHandler:a,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:qe,subtitleTrackController:Ze,timelineController:Be,audioStreamController:ne,audioTrackController:Qt,emeController:Ye});function en(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function nn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?en(Object(n),!0).forEach((function(e){an(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function an(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sn(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function on(t,e,n){return e&&sn(t.prototype,e),n&&sn(t,n),t}var cn=function(t){var e,n;function a(e){var n;void 0===e&&(e={}),(n=t.call(this)||this).config=void 0,n._autoLevelCapping=void 0,n.abrController=void 0,n.capLevelController=void 0,n.levelController=void 0,n.streamController=void 0,n.networkControllers=void 0,n.audioTrackController=void 0,n.subtitleTrackController=void 0,n.emeController=void 0,n.coreComponents=void 0,n.media=null,n.url=null;var r=a.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");n.config=nn(nn({},r),e);var i=rn(n).config;if(void 0!==i.liveMaxLatencyDurationCount&&i.liveMaxLatencyDurationCount<=i.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==i.liveMaxLatencyDuration&&(void 0===i.liveSyncDuration||i.liveMaxLatencyDuration<=i.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(u.enableLogs)(i.debug),n._autoLevelCapping=-1;var s=n.abrController=new i.abrController(rn(n)),o=new i.bufferController(rn(n)),c=n.capLevelController=new i.capLevelController(rn(n)),l=new i.fpsController(rn(n)),d=new D(rn(n)),f=new I(rn(n)),h=new M(rn(n)),p=new Ft(rn(n)),m=n.levelController=new It(rn(n)),v=new U(rn(n)),g=[m,n.streamController=new Lt(rn(n),v)],_=i.audioStreamController;_&&g.push(new _(rn(n),v)),n.networkControllers=g;var y=[d,f,h,s,o,c,l,p,v];if(_=i.audioTrackController){var b=new _(rn(n));n.audioTrackController=b,y.push(b)}if(_=i.subtitleTrackController){var C=new _(rn(n));n.subtitleTrackController=C,g.push(C)}if(_=i.emeController){var w=new _(rn(n));n.emeController=w,y.push(w)}return(_=i.subtitleStreamController)&&g.push(new _(rn(n),v)),(_=i.timelineController)&&y.push(new _(rn(n))),n.coreComponents=y,n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,a.isSupported=function(){return function(){var t=q();if(!t)return!1;var e=self.SourceBuffer||self.WebKitSourceBuffer,n=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),a=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!n&&!!a}()},on(a,null,[{key:"version",get:function(){return"0.14.17"}},{key:"Events",get:function(){return l.default}},{key:"ErrorTypes",get:function(){return o.ErrorTypes}},{key:"ErrorDetails",get:function(){return o.ErrorDetails}},{key:"DefaultConfig",get:function(){return a.defaultConfig?a.defaultConfig:tn},set:function(t){a.defaultConfig=t}}]);var r=a.prototype;return r.destroy=function(){u.logger.log("destroy"),this.trigger(l.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(t){t.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},r.attachMedia=function(t){u.logger.log("attachMedia"),this.media=t,this.trigger(l.default.MEDIA_ATTACHING,{media:t})},r.detachMedia=function(){u.logger.log("detachMedia"),this.trigger(l.default.MEDIA_DETACHING),this.media=null},r.loadSource=function(t){t=s.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),u.logger.log("loadSource:"+t),this.url=t,this.trigger(l.default.MANIFEST_LOADING,{url:t})},r.startLoad=function(t){void 0===t&&(t=-1),u.logger.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},r.stopLoad=function(){u.logger.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},r.swapAudioCodec=function(){u.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},r.recoverMediaError=function(){u.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),t&&this.attachMedia(t)},r.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},on(a,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){u.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){u.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){u.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){u.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){u.logger.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){u.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"bandwidthEstimate",get:function(){var t=this.abrController._bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,e=this.config.minAutoBitrate,n=t?t.length:0,a=0;a<n;a++)if((t[a].realBitrate?Math.max(t[a].realBitrate,t[a].bitrate):t[a].bitrate)>e)return a;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),a}(W);cn.defaultConfig=void 0},"./src/polyfills/number.js":function(t,e,n){"use strict";n.r(e),n.d(e,"isFiniteNumber",(function(){return a})),n.d(e,"MAX_SAFE_INTEGER",(function(){return r}));var a=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},r=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":function(t,e,n){"use strict";function a(){return"undefined"==typeof window?self:window}n.r(e),n.d(e,"getSelfScope",(function(){return a}))},"./src/utils/logger.js":function(t,e,n){"use strict";n.r(e),n.d(e,"enableLogs",(function(){return u})),n.d(e,"logger",(function(){return d}));var a=n("./src/utils/get-self-scope.js");function r(){}var i={trace:r,debug:r,log:r,warn:r,info:r,error:r},s=i;function o(t,e){return e="["+t+"] > "+e}var c=Object(a.getSelfScope)();function l(t){var e=c.console[t];return e?function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];a[0]&&(a[0]=o(t,a[0])),e.apply(c.console,a)}:r}var u=function(t){if(c.console&&!0===t||"object"==typeof t){!function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];n.forEach((function(e){s[e]=t[e]?t[e].bind(t):l(e)}))}(t,"debug","log","info","warn","error");try{s.log()}catch(t){s=i}}else s=i},d=s}}).default},t.exports=e())},66830:()=>{},87636:()=>{},21029:()=>{},2130:()=>{},77332:()=>{},90900:()=>{},34155:t=>{var e,n,a=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:r}catch(t){e=r}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(t){n=i}}();var o,c=[],l=!1,u=-1;function d(){l&&o&&(l=!1,o.length?c=o.concat(c):u=-1,c.length&&f())}function f(){if(!l){var t=s(d);l=!0;for(var e=c.length;e;){for(o=c,c=[];++u<e;)o&&o[u].run();u=-1,e=c.length}o=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function p(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new h(t,e)),1!==c.length||l||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=p,a.addListener=p,a.once=p,a.off=p,a.removeListener=p,a.removeAllListeners=p,a.emit=p,a.prependListener=p,a.prependOnceListener=p,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},57539:t=>{"use strict";const e={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split("\n").map((t=>t.trim()))},e.splitSections=function(t){return t.split("\nm=").map(((t,e)=>(e>0?"m="+t:t).trim()+"\r\n"))},e.getDescription=function(t){const n=e.splitSections(t);return n&&n[0]},e.getMediaSections=function(t){const n=e.splitSections(t);return n.shift(),n},e.matchPrefix=function(t,n){return e.splitLines(t).filter((t=>0===t.indexOf(n)))},e.parseCandidate=function(t){let e;e=0===t.indexOf("a=candidate:")?t.substring(12).split(" "):t.substring(10).split(" ");const n={foundation:e[0],component:{1:"rtp",2:"rtcp"}[e[1]]||e[1],protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]};for(let t=8;t<e.length;t+=2)switch(e[t]){case"raddr":n.relatedAddress=e[t+1];break;case"rport":n.relatedPort=parseInt(e[t+1],10);break;case"tcptype":n.tcpType=e[t+1];break;case"ufrag":n.ufrag=e[t+1],n.usernameFragment=e[t+1];break;default:void 0===n[e[t]]&&(n[e[t]]=e[t+1])}return n},e.writeCandidate=function(t){const e=[];e.push(t.foundation);const n=t.component;"rtp"===n?e.push(1):"rtcp"===n?e.push(2):e.push(n),e.push(t.protocol.toUpperCase()),e.push(t.priority),e.push(t.address||t.ip),e.push(t.port);const a=t.type;return e.push("typ"),e.push(a),"host"!==a&&t.relatedAddress&&t.relatedPort&&(e.push("raddr"),e.push(t.relatedAddress),e.push("rport"),e.push(t.relatedPort)),t.tcpType&&"tcp"===t.protocol.toLowerCase()&&(e.push("tcptype"),e.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(e.push("ufrag"),e.push(t.usernameFragment||t.ufrag)),"candidate:"+e.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let e=t.substring(9).split(" ");const n={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),n.name=e[0],n.clockRate=parseInt(e[1],10),n.channels=3===e.length?parseInt(e[2],10):1,n.numChannels=n.channels,n},e.writeRtpMap=function(t){let e=t.payloadType;void 0!==t.preferredPayloadType&&(e=t.preferredPayloadType);const n=t.channels||t.numChannels||1;return"a=rtpmap:"+e+" "+t.name+"/"+t.clockRate+(1!==n?"/"+n:"")+"\r\n"},e.parseExtmap=function(t){const e=t.substring(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1],attributes:e.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&"sendrecv"!==t.direction?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+"\r\n"},e.parseFmtp=function(t){const e={};let n;const a=t.substring(t.indexOf(" ")+1).split(";");for(let t=0;t<a.length;t++)n=a[t].trim().split("="),e[n[0].trim()]=n[1];return e},e.writeFmtp=function(t){let e="",n=t.payloadType;if(void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const a=[];Object.keys(t.parameters).forEach((e=>{void 0!==t.parameters[e]?a.push(e+"="+t.parameters[e]):a.push(e)})),e+="a=fmtp:"+n+" "+a.join(";")+"\r\n"}return e},e.parseRtcpFb=function(t){const e=t.substring(t.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},e.writeRtcpFb=function(t){let e="",n=t.payloadType;return void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach((t=>{e+="a=rtcp-fb:"+n+" "+t.type+(t.parameter&&t.parameter.length?" "+t.parameter:"")+"\r\n"})),e},e.parseSsrcMedia=function(t){const e=t.indexOf(" "),n={ssrc:parseInt(t.substring(7,e),10)},a=t.indexOf(":",e);return a>-1?(n.attribute=t.substring(e+1,a),n.value=t.substring(a+1)):n.attribute=t.substring(e+1),n},e.parseSsrcGroup=function(t){const e=t.substring(13).split(" ");return{semantics:e.shift(),ssrcs:e.map((t=>parseInt(t,10)))}},e.getMid=function(t){const n=e.matchPrefix(t,"a=mid:")[0];if(n)return n.substring(6)},e.parseFingerprint=function(t){const e=t.substring(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1].toUpperCase()}},e.getDtlsParameters=function(t,n){return{role:"auto",fingerprints:e.matchPrefix(t+n,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,e){let n="a=setup:"+e+"\r\n";return t.fingerprints.forEach((t=>{n+="a=fingerprint:"+t.algorithm+" "+t.value+"\r\n"})),n},e.parseCryptoLine=function(t){const e=t.substring(9).split(" ");return{tag:parseInt(e[0],10),cryptoSuite:e[1],keyParams:e[2],sessionParams:e.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+("object"==typeof t.keyParams?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+"\r\n"},e.parseCryptoKeyParams=function(t){if(0!==t.indexOf("inline:"))return null;const e=t.substring(7).split("|");return{keyMethod:"inline",keySalt:e[0],lifeTime:e[1],mkiValue:e[2]?e[2].split(":")[0]:void 0,mkiLength:e[2]?e[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,n){return e.matchPrefix(t+n,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,n){const a=e.matchPrefix(t+n,"a=ice-ufrag:")[0],r=e.matchPrefix(t+n,"a=ice-pwd:")[0];return a&&r?{usernameFragment:a.substring(12),password:r.substring(10)}:null},e.writeIceParameters=function(t){let e="a=ice-ufrag:"+t.usernameFragment+"\r\na=ice-pwd:"+t.password+"\r\n";return t.iceLite&&(e+="a=ice-lite\r\n"),e},e.parseRtpParameters=function(t){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(t)[0].split(" ");n.profile=a[2];for(let r=3;r<a.length;r++){const i=a[r],s=e.matchPrefix(t,"a=rtpmap:"+i+" ")[0];if(s){const a=e.parseRtpMap(s),r=e.matchPrefix(t,"a=fmtp:"+i+" ");switch(a.parameters=r.length?e.parseFmtp(r[0]):{},a.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+i+" ").map(e.parseRtcpFb),n.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(a.name.toUpperCase())}}}e.matchPrefix(t,"a=extmap:").forEach((t=>{n.headerExtensions.push(e.parseExtmap(t))}));const r=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return n.codecs.forEach((t=>{r.forEach((e=>{t.rtcpFeedback.find((t=>t.type===e.type&&t.parameter===e.parameter))||t.rtcpFeedback.push(e)}))})),n},e.writeRtpDescription=function(t,n){let a="";a+="m="+t+" ",a+=n.codecs.length>0?"9":"0",a+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=n.codecs.map((t=>void 0!==t.preferredPayloadType?t.preferredPayloadType:t.payloadType)).join(" ")+"\r\n",a+="c=IN IP4 0.0.0.0\r\n",a+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((t=>{a+=e.writeRtpMap(t),a+=e.writeFmtp(t),a+=e.writeRtcpFb(t)}));let r=0;return n.codecs.forEach((t=>{t.maxptime>r&&(r=t.maxptime)})),r>0&&(a+="a=maxptime:"+r+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((t=>{a+=e.writeExtmap(t)})),a},e.parseRtpEncodingParameters=function(t){const n=[],a=e.parseRtpParameters(t),r=-1!==a.fecMechanisms.indexOf("RED"),i=-1!==a.fecMechanisms.indexOf("ULPFEC"),s=e.matchPrefix(t,"a=ssrc:").map((t=>e.parseSsrcMedia(t))).filter((t=>"cname"===t.attribute)),o=s.length>0&&s[0].ssrc;let c;const l=e.matchPrefix(t,"a=ssrc-group:FID").map((t=>t.substring(17).split(" ").map((t=>parseInt(t,10)))));l.length>0&&l[0].length>1&&l[0][0]===o&&(c=l[0][1]),a.codecs.forEach((t=>{if("RTX"===t.name.toUpperCase()&&t.parameters.apt){let e={ssrc:o,codecPayloadType:parseInt(t.parameters.apt,10)};o&&c&&(e.rtx={ssrc:c}),n.push(e),r&&(e=JSON.parse(JSON.stringify(e)),e.fec={ssrc:o,mechanism:i?"red+ulpfec":"red"},n.push(e))}})),0===n.length&&o&&n.push({ssrc:o});let u=e.matchPrefix(t,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substring(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substring(5),10)*.95-16e3:void 0,n.forEach((t=>{t.maxBitrate=u}))),n},e.parseRtcpParameters=function(t){const n={},a=e.matchPrefix(t,"a=ssrc:").map((t=>e.parseSsrcMedia(t))).filter((t=>"cname"===t.attribute))[0];a&&(n.cname=a.value,n.ssrc=a.ssrc);const r=e.matchPrefix(t,"a=rtcp-rsize");n.reducedSize=r.length>0,n.compound=0===r.length;const i=e.matchPrefix(t,"a=rtcp-mux");return n.mux=i.length>0,n},e.writeRtcpParameters=function(t){let e="";return t.reducedSize&&(e+="a=rtcp-rsize\r\n"),t.mux&&(e+="a=rtcp-mux\r\n"),void 0!==t.ssrc&&t.cname&&(e+="a=ssrc:"+t.ssrc+" cname:"+t.cname+"\r\n"),e},e.parseMsid=function(t){let n;const a=e.matchPrefix(t,"a=msid:");if(1===a.length)return n=a[0].substring(7).split(" "),{stream:n[0],track:n[1]};const r=e.matchPrefix(t,"a=ssrc:").map((t=>e.parseSsrcMedia(t))).filter((t=>"msid"===t.attribute));return r.length>0?(n=r[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},e.parseSctpDescription=function(t){const n=e.parseMLine(t),a=e.matchPrefix(t,"a=max-message-size:");let r;a.length>0&&(r=parseInt(a[0].substring(19),10)),isNaN(r)&&(r=65536);const i=e.matchPrefix(t,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substring(12),10),protocol:n.fmt,maxMessageSize:r};const s=e.matchPrefix(t,"a=sctpmap:");if(s.length>0){const t=s[0].substring(10).split(" ");return{port:parseInt(t[0],10),protocol:t[1],maxMessageSize:r}}},e.writeSctpDescription=function(t,e){let n=[];return n="DTLS/SCTP"!==t.protocol?["m="+t.kind+" 9 "+t.protocol+" "+e.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+e.port+"\r\n"]:["m="+t.kind+" 9 "+t.protocol+" "+e.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+e.port+" "+e.protocol+" 65535\r\n"],void 0!==e.maxMessageSize&&n.push("a=max-message-size:"+e.maxMessageSize+"\r\n"),n.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,n,a){let r;const i=void 0!==n?n:2;r=t||e.generateSessionId();return"v=0\r\no="+(a||"thisisadapterortc")+" "+r+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},e.getDirection=function(t,n){const a=e.splitLines(t);for(let t=0;t<a.length;t++)switch(a[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[t].substring(2)}return n?e.getDirection(n):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return"0"===t.split(" ",2)[1]},e.parseMLine=function(t){const n=e.splitLines(t)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},e.parseOLine=function(t){const n=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},e.isValidSDP=function(t){if("string"!=typeof t||0===t.length)return!1;const n=e.splitLines(t);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},t.exports=e},93379:(t,e,n)=>{"use strict";var a,r=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function o(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},a=[],r=0;r<t.length;r++){var i=t[r],c=e.base?i[0]+e.base:i[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var d=o(u),f={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(s[d].references++,s[d].updater(f)):s.push({identifier:u,updater:v(f,e),references:1}),a.push(u)}return a}function l(t){var e=document.createElement("style"),a=t.attributes||{};if(void 0===a.nonce){var r=n.nc;r&&(a.nonce=r)}if(Object.keys(a).forEach((function(t){e.setAttribute(t,a[t])})),"function"==typeof t.insert)t.insert(e);else{var s=i(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function f(t,e,n,a){var r=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(t.styleSheet)t.styleSheet.cssText=d(e,r);else{var i=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function h(t,e,n){var a=n.css,r=n.media,i=n.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var p=null,m=0;function v(t,e){var n,a,r;if(e.singleton){var i=m++;n=p||(p=l(e)),a=f.bind(null,n,i,!1),r=f.bind(null,n,i,!0)}else n=l(e),a=h.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var a=0;a<n.length;a++){var r=o(n[a]);s[r].references--}for(var i=c(t,e),l=0;l<n.length;l++){var u=o(n[l]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}n=i}}}},4837:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a={name:"reset_form",props:{value:{type:Object}},data:function(){return{ok:!1}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("forma",{attrs:{action:"/api/resetPassSend"},on:{success:function(e){t.ok=!0}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.ok,expression:"!ok"}],staticClass:"form-group"},[n("div",{},[n("label",[t._v("Введите Логин (E-mail)")]),t._v(" "),n("input",{staticClass:"form-control",attrs:{id:"login",disabled:t.ok,type:"email",placeholder:"E-MAIL",name:"login",value:"",required:"",autofocus:""}})])]),t._v(" "),n("captcha"),t._v(" "),t._t("default"),t._v(" "),n("div",{staticClass:"d-flex justify-content-between"},[n("button",{staticClass:"btn btn-secondary",attrs:{typeof:"submit",type:"button"},on:{click:function(e){t.value.currentComp="login"}}},[n("i",{staticClass:"fa fa-arrow-left",attrs:{"aria-hidden":"true"}}),t._v(" Обратно")]),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:!t.ok,expression:"!ok"}],staticClass:"btn btn-success",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-unlock-alt",attrs:{"aria-hidden":"true"}}),t._v(" Выслать пароль")])])],2)}),[],!1,null,null,null).exports},16929:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(2799);const r={name:"record",props:{data:{type:String},onlyaudio:{}},data:function(){return{showVideo:!1}},created:function(){this.onlyaudio&&(this.player=this.make(a.Z,{propsData:{autoplay:!1,background:!0,src:this.data}}).$mount())},mounted:function(){},methods:{play:function(){this.onlyaudio?this.player.toggle():this.showVideo=!0}}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showVideo?n("video",{staticClass:"w-100",attrs:{src:t.data,preload:"metadata",controls:"",loop:""}}):n("button",{staticClass:"btn btn-light btn-sm",on:{click:function(e){return t.play()}}},[n("i",{staticClass:"fa fa-file-video-o",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.onlyaudio?"аудиозапись":"видеозапись")+"\n")])}),[],!1,null,null,null).exports},77655:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(2799);const r={name:"speech",props:{data:{type:String}},data:function(){return{player:null}},created:function(){this.player=this.make(a.Z,{propsData:{autoplay:!1,background:!0,src:this.data}}).$mount()},mounted:function(){},methods:{}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-light btn-sm",on:{click:function(e){return t.player.play()}}},[n("i",{staticClass:"em em-loud_sound",attrs:{"aria-role":"presentation","aria-label":"SPEAKER WITH THREE SOUND WAVES"}})])}),[],!1,null,null,null).exports},62386:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a={name:"room_links",props:{links:Array}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row gap-3 g-0"},t._l(t.links,(function(e){return e.name?n("div",{staticClass:"col-auto"},[e.icon?n("img",{staticStyle:{height:"24px"},attrs:{src:e.icon}}):n("i",{staticClass:"fa fa-external-link"}),t._v(" "),n("a",{staticClass:"app-url-parsed",attrs:{target:"_blank",href:e.url}},[t._v(t._s(e.name))])]):t._e()})),0)])}),[],!1,null,null,null).exports},75690:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a={props:{config:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[t.global.admin?n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.$root.contentEditOpen(t.config.rulesAlias,t.config.rulesPage)}}},[n("i",{staticClass:"fa fa-pencil"}),t._v("\n            "+t._s(t.config.rulesPage?"Редактировать":"Создать страницу")+"\n        ")]):t._e(),t._v(" "),t.config.rulesPage?n("div",{domProps:{innerHTML:t._s(t.config.rulesPage.html)}}):t._e()])])}),[],!1,null,null,null).exports},89256:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var a=n(87421),r=n(75690);const i={props:{config:{type:Object}},components:{tasks:a.Z,rules:r.Z},data:function(){return{step:1}},created:function(){},mounted:function(){},methods:{next:function(){this.step++,this.$nextTick((function(){window.scrollTo(0,0)}))},back:function(){this.step--},regSuccess:function(){this.$router.push(this.$parent.link("member"))},complete:function(){window.scrollTo(0,0),this.$nextTick((function(){window.scrollTo(0,0)}))}}};const s=(0,n(51900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.config.isRegPreviewEnabled?n("forma",{attrs:{action:"/contest/register",once:!0},on:{complete:t.complete,success:t.regSuccess}},[n("input",{attrs:{type:"hidden",name:"cname"},domProps:{value:t.$parent.name}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step === 1"}]},[n("h4",{staticClass:"text-center"},[t._v("Правила участия")]),t._v(" "),n("rules",{attrs:{config:t.config}}),t._v(" "),n("div",{staticClass:"text-end"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.next}},[n("i",{staticClass:"fa fa-check"}),t._v(" Прочитал и принял")])])],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}]},[n("label",[t._v("Обращение к зрителям и спонсорам:")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"text",required:""}}),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("небольшой рассказ о себе и о вашем предстоящим выступлении")]),t._v(" "),n("div",{staticClass:"my-3"},[t._v("Выберите задание для конкурса")]),t._v(" "),n("tasks",{attrs:{config:t.config,radio:"task"}}),t._v(" "),n("div",{staticClass:"text-end"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-check"}),t._v(" Зарегистрироваться")])])],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}]})]):n("div",{staticClass:"alert alert-danger text-center"},[n("strong",[t._v("Регистрация окончена")])])],1)}),[],!1,null,null,null).exports},63720:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var a=n(87421),r=n(3972);const i={props:{config:{type:Object}},data:function(){return this.config.isMember?{task:this.config.isMember.task,editTask:!1,uploadType:null,uploadedVideo:this.config.isMember.video,videoInfo:null,videoError:null}:{}},components:{tasks:a.Z,recorder:r.Z},created:function(){},mounted:function(){},methods:{leaved:function(){this.$router.push(this.$parent.link())},taskComplete:function(){window.scrollTo(0,0)},taskSuccess:function(t){this.task=t.task,this.editTask=!1},uploadShow:function(){},uploadSuccess:function(t){this.uploadedVideo=t._orig,this.uploadType=null},videoEvent:function(t){"error"===t.type&&(error("video error",t.target.error),this.videoError=t.target.error.message),"loadedmetadata"===t.type&&(this.videoInfo={w:t.target.videoWidth,h:t.target.videoHeight})},removedVideo:function(){this.uploadedVideo=null,this.uploadType=null}}};const s=(0,n(51900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.config.isMember?n("div",[t._v("\n    Ваш номер: "),n("strong",[t._v(t._s(t.config.memberIndex))]),n("br"),t._v("\n    Ваше задание: "),n("strong",[t._v(t._s(t.task.name))]),t._v(" "),t.editTask||t.config.isMember.ready_at?t._e():n("span",{staticClass:"app-link",on:{click:function(e){t.editTask=!0}}},[t._v("изменить задание")]),t._v(" "),t.config.isMember.comment?n("div",{staticClass:"alert alert-danger my-3 text-center"},[n("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" "),n("strong",[t._v(t._s(t.config.isMember.comment))])]):t._e(),t._v(" "),t.editTask?n("forma",{attrs:{action:"/contest/changeTask",once:!0},on:{complete:t.taskComplete,success:t.taskSuccess}},[n("input",{attrs:{type:"hidden",name:"cname"},domProps:{value:t.$parent.name}}),t._v(" "),n("tasks",{attrs:{config:t.config,radio:"task"}}),t._v(" "),n("div",{staticClass:"text-end"},[n("button",{staticClass:"btn btn-danger",on:{click:function(e){t.editTask=!1}}},[n("i",{staticClass:"fa fa-remove"}),t._v("\n                Отмена\n            ")]),t._v(" "),n("button",{staticClass:"btn btn-secondary"},[n("i",{staticClass:"fa fa-pencil"}),t._v("\n                Изменить\n            ")])])],1):t._e(),t._v(" "),t.uploadedVideo?n("div",{staticClass:"my-3"},[n("div",[t._v("\n            Ваше видео с заданием\n            "),t.videoInfo?n("span",[t._v("(разрешение: "+t._s(t.videoInfo.w)+"x"+t._s(t.videoInfo.h)+")")]):t._e()]),t._v(" "),n("video",{staticClass:"w-100",attrs:{preload:"metadata",src:t.uploadedVideo,controls:""},on:{error:t.videoEvent,loadedmetadata:t.videoEvent}}),t._v(" "),t.videoError?n("div",{staticClass:"text-danger lh-1 mb-2"},[t._v("\n            Ошибка загрузки видео:"),n("br"),t._v(" "),n("strong",[t._v(t._s(t.videoError))])]):t._e(),t._v(" "),n("div",{staticClass:"text-end"},[t.config.isMember.ready_at?t._e():n("action",{staticClass:"btn btn-danger btn-sm",attrs:{confirm:"Вы уверены? Точно удалить видео?",action:"/contest/removeVideo",data:{cname:t.$parent.name}},on:{success:t.removedVideo}},[n("i",{staticClass:"fa fa-remove"}),t._v(" удалить\n            ")])],1)]):n("div",{staticClass:"my-3 d-flex justify-content-between"},[n("button",{staticClass:"btn btn-primary",on:{click:function(e){t.uploadType=null===t.uploadType?-1:null}}},[n("i",{staticClass:"fa fa-upload"}),t._v("\n            "+t._s(t.uploadType?"Отмена":"Загрузить видео")+"\n        ")])]),t._v(" "),t.uploadType?n("div",{staticClass:"mb-3"},[n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.uploadType,expression:"uploadType"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1"},domProps:{checked:t._q(t.uploadType,"1")},on:{change:function(e){t.uploadType="1"}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Записать через сайт")])]),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.uploadType,expression:"uploadType"}],staticClass:"form-check-input",attrs:{type:"radio",value:"2"},domProps:{checked:t._q(t.uploadType,"2")},on:{change:function(e){t.uploadType="2"}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Загрузить готовое видео с компьютера")])])]):t._e(),t._v(" "),1==t.uploadType?n("recorder",t._b({attrs:{type:"video",obj:t.config.isMember._c,"max-sec":t.config.uploadMaxSec,"obj-id":t.config.isMember.id,alias:"record","as-statis":!0},on:{success:t.uploadSuccess}},"recorder",t.config.videoUploadConfig,!1)):t._e(),t._v(" "),2==t.uploadType?n("uploader",t._b({attrs:{label:"Выберите видео",mime:["video/webp","video/mp4"],obj:t.config.isMember._c,"obj-id":t.config.isMember.id,alias:"record"},on:{upload:t.uploadSuccess}},"uploader",t.config.videoUploadConfig,!1)):t._e(),t._v(" "),n("div",{staticClass:"my-4"},[n("action",{staticClass:"btn btn-secondary",attrs:{confirm:"Вы уверены, что желаете покинуть конкурс?",action:"/contest/leave",data:{cname:t.$parent.name}},on:{success:t.leaved}},[n("i",{staticClass:"em em-no_entry_sign",attrs:{"aria-role":"presentation","aria-label":"NO ENTRY SIGN"}}),t._v("\n            Отказаться от участия\n        ")])],1)],1):n("div",[t._m(0)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert alert-danger text-center"},[n("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" "),n("strong",[t._v("Вы не являетесь участником")])])}],!1,null,null,null).exports},7188:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>p});const a={name:"donate_popover",props:{prop:{type:String}},data:function(){return{gain:this.$options.propsData}},created:function(){},mounted:function(){},methods:{}};var r=n(51900);const i=(0,r.Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("div",{staticClass:"mb-1"},[n("user",{attrs:{user:t.gain.user}})],1),t._v(" "),t.gain.gain>0?n("span",[n("i",{staticClass:"em em-man-lifting-weights"}),t._v(" Поднял\n    ")]):n("span",[n("i",{staticClass:"em em-hankey",attrs:{"aria-role":"presentation"}}),t._v("\n        Опустил\n    ")]),t._v("\n\n    на "),n("strong",{class:{"text-danger":t.gain.gain<0,"text-success":t.gain.gain>0}},[t._v(t._s(t.gain.gain))]),t._v(" лайков\n\n    "),n("div",{staticClass:"mt-2 text-center"},[n("small",{staticClass:"text-muted"},[t._v(t._s(t.gain.dateDiff))])])])}),[],!1,null,null,null).exports;var s=n(2471);const o={props:{config:{type:Object},member:{type:Object},cname:String},data:function(){return{member$:this.member}},created:function(){},watch:{member$:{deep:!0,handler:function(){this.$emit("member",this.member$)}}},mounted:function(){},methods:{chooseFrame:function(t){this.$root.render(s.Z,{url:t.video,obj:t._c,objId:t.id,alias:"frame"})},uploadSuccess:function(t){this.member$.video=t._orig,this.member$.hasVideo=!0}}};const c=(0,r.Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:t.member$.user?t.member$.user.name:"Аноним",save:"Сохранить"}},[n("forma",{attrs:{action:"/contest/memeberEdit"},on:{success:function(e){t.member$=e.member}}},[n("input",{attrs:{type:"hidden",name:"cname"},domProps:{value:t.cname}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"id"},domProps:{value:t.member$.id}}),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Комментарий:")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"item[comment_adm]"},domProps:{innerHTML:t._s(t.member$.comment)}})])]),t._v(" "),n("div",{staticClass:"d-flex",staticStyle:{gap:"3px"}},[t.global.admin?n("action",{staticClass:"btn btn-sm",class:{"btn-danger":!t.member$.deactivate,"btn-success":t.member$.deactivate},attrs:{type:"button",confirm:"Уверен?",action:"/contest/deactivate",data:{cname:t.cname,id:t.member$.id},"data-title":"Деактивировать \\ Восстановить"},model:{value:t.member$.deactivate,callback:function(e){t.$set(t.member$,"deactivate",e)},expression:"member$.deactivate"}},[n("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),t.global.admin?n("action",{staticClass:"btn btn-sm",class:{"btn-danger":!t.member$.ready_at,"btn-success":t.member$.ready_at},attrs:{type:"button",confirm:"Уверен?",action:"/contest/ready",data:{cname:t.cname,id:t.member$.id},"data-title":"Готов\\Не готов к участию"},model:{value:t.member$.ready_at,callback:function(e){t.$set(t.member$,"ready_at",e)},expression:"member$.ready_at"}},[n("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),t.global.admin&&t.member$.video?n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{"data-title":"Выбрать кадр"},on:{click:function(e){return t.chooseFrame(t.member$)}}},[n("i",{staticClass:"fa fa-video-camera"})]):t._e(),t._v(" "),n("uploader",t._b({attrs:{label:"Загрузить видео",obj:t.member._c,"obj-id":t.member.id,alias:"record"},on:{upload:t.uploadSuccess}},"uploader",t.config.videoUploadConfig,!1))],1)],1)}),[],!1,null,null,null).exports;function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const d={props:{member:{type:Object}},data:function(){return{form:null}},created:function(){},mounted:function(){},methods:{submit:function(t){var e={};if(this.$refs.form){var n,a=l(new window.FormData(this.$refs.form).entries());try{for(a.s();!(n=a.n()).done;){var r=n.value;e[r[0]]=r[1]}}catch(t){a.e(t)}finally{a.f()}error(e),this.$emit("success",e)}}}};const f=(0,r.Z)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Редактирование участника",save:"Удалить"},on:{save:t.submit}},[n("form",{ref:"form",on:{submit:t.submit}},[n("div",{staticClass:"form-group"},[n("label",[t._v("Комментарий:")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"comment_member"}})])])])}),[],!1,null,null,null).exports,h={props:{config:{type:Object},showUploaded:Boolean},data:function(){return{step:1,PopoverGainUser:i,ModalMemberRemoveVideo:f,members:this.config.members}},created:function(){},mounted:function(){},computed:{membersList:function(){return this.members.map((function(t){var e=0,n=0;return t.gains.forEach((function(t){t.gain>0?e+=t.gain:n+=Math.abs(t.gain)})),Object.assign(t,{_gainSummPositive:e,_gainSummNegative:n})}))}},methods:{next:function(){this.step++,window.scrollTo(0,0)},back:function(){this.step--},complete:function(){window.scrollTo(0,0)},gainSuccess:function(t,e){this.config.like_gain=0,this.editMemeber(t.id,{positive:e.positive})},editMemeber:function(t,e){for(var n=0;n<this.members.length;n++)if(this.members[n].id===t){Object.assign(this.members[n],e);break}},memberAdmin:function(t){var e=this,n=this.$root.render(c,{config:this.config,member:t,cname:this.$parent.name});n.$on("member",(function(t){e.editMemeber(t.id,t),n.$destroy()}))}}};const p=(0,r.Z)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table"},[t._m(0),t._v(" "),n("tbody",t._l(t.membersList,(function(e,a){return!t.showUploaded||t.showUploaded&&e.hasVideo?n("tr",{key:e.id},[n("td",{staticClass:"text-center",class:{"bg-success":a<=9},staticStyle:{width:"10px"}},[t._v(t._s(a+1))]),t._v(" "),n("td",[n("user",{attrs:{nickname:"Аноним",user:e.user}}),t._v(" "),n("div",[n("small",{staticClass:"text-muted",attrs:{"data-title":"Дата регистрации участника"}},[t._v(t._s(e.date))]),t._v(" "),t.global.admin?n("span",{staticClass:"app-link",on:{click:function(n){return t.memberAdmin(e)}}},[t._v("Изменить")]):t._e()])],1),t._v(" "),n("td",{staticClass:"text-nowrap"},[t.config.isVotedPreviewEnabled&&t.config.like_gain?n("div",{},[n("div",[n("i",{staticClass:"em em-man-lifting-weights"}),t._v(" "),n("action",{staticClass:"btn btn-sm btn-success",staticStyle:{width:"70px"},attrs:{confirm:"Вы уверены?",action:"/contest/gain",data:{id:e.id,up:1,cname:t.$parent.name},"data-title":"Поднять на "+t.config.like_gain+" лайка"},on:{success:function(n){return t.gainSuccess(e,n)}}},[t._v("+ "+t._s(t.config.like_gain))])],1),t._v(" "),e.positive>0?n("div",[n("i",{staticClass:"em em-hankey",attrs:{"aria-role":"presentation"}}),t._v(" "),n("action",{staticClass:"btn btn-sm btn-danger",staticStyle:{width:"70px"},attrs:{confirm:"Вы уверены?",action:"/contest/gain",data:{id:e.id,down:1,cname:t.$parent.name},"data-title":"Опустить на "+t.config.like_gain+" лайка"},on:{success:function(n){return t.gainSuccess(e,n)}}},[t._v("- "+t._s(t.config.like_gain))])],1):t._e()]):t.config.isVotedPreviewEnabled&&t.config.isRegPreviewEnabled?n("div",[n("router-link",{staticClass:"d-block badge bg-success",attrs:{"data-title":"Подтянуть",to:t.$parent.link("sponsors")}},[n("i",{staticClass:"fa fa-arrow-up"})]),t._v(" "),n("router-link",{staticClass:"d-block badge bg-danger",attrs:{"data-title":"Опустить",to:t.$parent.link("sponsors")}},[n("i",{staticClass:"fa fa-arrow-down"})])],1):t._e()]),t._v(" "),n("td",{staticClass:"text-nowrap"},[t.config.isVotedLikePreviewEnabled?n("likeMe",{attrs:{"btn-cls":"btn-secondary btn-sm",obj:"konkurs",negative:e.negative,positive:e.positive,"obj-id":e.id}}):n("div",[n("span",{staticClass:"bg-success badge"},[t._v(t._s(e.positive))])]),t._v(" "),e._gainSummPositive||e._gainSummNegative?n("div",{staticClass:"mt-2"},[n("span",{staticClass:"cursor-pointer",attrs:{"data-bs-toggle":"collapse",href:"#gainsHistory_"+e.id}},[e._gainSummPositive?n("strong",{staticClass:"text-success"},[t._v("+"+t._s(e._gainSummPositive))]):t._e(),t._v(" "),e._gainSummNegative?n("strong",{staticClass:"text-danger"},[t._v("-"+t._s(e._gainSummNegative))]):t._e()]),t._v(" "),n("div",{staticClass:"text-nowrap collapse",attrs:{id:"gainsHistory_"+e.id}},t._l(e.gains,(function(e){return n("small",{directives:[{name:"popover",rawName:"v-popover:[gain]",value:t.PopoverGainUser,expression:"PopoverGainUser",arg:e}],key:e.id,staticClass:"badge me-1 cursor-help",class:{"bg-secondary":e.gain>0,"bg-warning text-dark":e.gain<0}},[t._v("\n                                    "+t._s(e.gain>0?"+":"")+t._s(e.gain)+"\n                                ")])})),0)]):t._e()],1),t._v(" "),n("td",[n("div",{staticClass:"text-nowrap mb-1"},[e.hasVideo?n(e.video?"a":"span",{tag:"component",attrs:{href:e.video||!1}},[n("i",{staticClass:"fa fa-check text-primary",attrs:{"data-title":"Видео залито"}})]):n("i",{staticClass:"fa fa-hourglass-o",attrs:{"data-title":"Ожидаем загрузки видео..."}}),t._v(" "),n("strong",[t._v(t._s(e.task.name))])],1),t._v(" "),e.text?n("div",[n("em",[t._v("«"+t._s(e.text)+"»")])]):t._e(),t._v(" "),e.comment?n("div",{staticClass:"mt-2 lh-1"},[t._v("\n                            Комментарий администратора:"),n("br"),t._v(" "),n("strong",{staticClass:"text-danger",domProps:{innerHTML:t._s(e.comment.replace(/\n+/g,"<br/>"))}})]):t._e()]),t._v(" "),n("td",[e.deactivate?n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Участник выбыд"}}):t._e(),t._v(" "),e.ready_at?n("button",{staticClass:"btn btn-success",attrs:{"data-title":"Готов к участию. Дальнейшие изменения не принимаются",readonly:""}},[n("i",{staticClass:"fa fa-check"})]):t._e()])]):t._e()})),0)])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("№")]),t._v(" "),n("th"),t._v(" "),n("th"),t._v(" "),n("th",[t._v("голосов")]),t._v(" "),n("th",[t._v("задание")]),t._v(" "),n("th")])])}],!1,null,null,null).exports},23684:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});n(87421),n(75690);const a={props:{config:{type:Object}},components:{},data:function(){return{}},created:function(){this.$root.header("Результаты конкурса")},computed:{results:function(){return this.config.members.filter((function(t){return t.video}))}},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.config.vote?n("vote",{staticClass:"my-3",attrs:{vote:t.config.vote}}):t._e(),t._v(" "),t.results.length>0?n("div",t._l(t.results,(function(e){return n("div",{staticClass:"mb-3"},[n("h3",[n("user",{attrs:{user:e.user}}),t._v(" "),n("span",{staticClass:"d-inline-block text-nowrap"},[e.positive?n("span",[t._v("+"+t._s(e.positive))]):t._e(),t._v(" "),e.negative?n("span",[t._v("/ -"+t._s(e.negative))]):t._e()])],1),t._v(" "),n("video-player",{staticClass:"mw-100",attrs:{src:e.video,controls:"",preload:""}})],1)})),0):n("div",{staticClass:"alert alert-secondary text-center"},[t._v("\n        результатов пока нет\n    ")])],1)}),[],!1,null,null,null).exports},13657:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(75690);const r={props:{config:{type:Object}},components:{rules:a.Z},data:function(){return{step:1}},created:function(){},mounted:function(){},methods:{}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("rules",{attrs:{config:t.config}})],1)}),[],!1,null,null,null).exports},80445:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={props:{config:{type:Object}},components:{},data:function(){return{}},created:function(){},mounted:function(){},methods:{paySuccess:function(t){this.$parent.load()}}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",{staticClass:"text-center mb-3",staticStyle:{"line-height":"3rem"}},[n("user",{attrs:{user:t.config.owner}}),n("br"),t._v("\n        Я собираю пожертвования на призы ребятишкам, дайте кто сколько может!"),n("br"),t._v("\n        В комментариях к платежу пишите любой текст, он будет выведен на этой странице"),n("br"),t._v(" "),n("strong",[t._v("Все, кто задонатит будет участвовать в жюри "),n("router-link",{attrs:{to:t.$parent.link("")}},[t._v("конкурса")]),n("br")],1),t._v(" "),n("div",{staticClass:"text-center"},[n("pay-button",{staticClass:"btn-lg",attrs:{owner:t.config.owner,donate:t.config.donate,scope:"konkurs"},on:{orderPayed:t.paySuccess}},[n("i",{staticClass:"em em-male-detective"}),t._v("\n                Стать спонсором и жюри\n            ")])],1)],1),t._v(" "),t._m(0),t._v(" "),t.config.sponsorsByVotes.length>0?n("div",{staticClass:"table-responsive my-3"},[n("div",{staticClass:"row justify-content-center g-0"},[n("div",{staticClass:"col-12 col-md-9 col-lg-6"},[t._m(1),t._v("\n                пользователи, которые будут определять победителя\n                "),n("table",{staticClass:"table"},[t._m(2),t._v(" "),n("tbody",t._l(t.config.sponsorsByVotes,(function(e,a){return n("tr",{key:e.id,staticClass:"text-nowrap"},[n("td",{staticClass:"text-center",class:{"bg-primary":0===a,"bg-success":1===a,"bg-secondary":2===a},staticStyle:{width:"10px"}},[t._v(t._s(a+1))]),t._v(" "),n("td",[n("user",{attrs:{user:e.user}})],1),t._v(" "),n("td",[n("rub",{attrs:{money:e._summ_total}})],1),t._v(" "),n("td",[n("span",{class:{"fw-bolder":0===a}},[t._v(t._s(e.votes))])])])})),0)])])])]):t._e(),t._v(" "),t.config.transactions.length>0?n("div",[n("strong",[t._v("\n\n            великолепные, гениальные, изумительные, щедрые, мудрые красавцы и красавицы\n        ")]),t._v(" "),n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table"},[t._m(3),t._v(" "),n("tbody",t._l(t.config.transactions,(function(e,a){return n("tr",{key:e.id},[n("td",[t._v("\n                            "+t._s(t.config.transactions.length-a)+"\n                        ")]),t._v(" "),n("td",{staticClass:"text-nowrap"},[n("user",{attrs:{user:e.user}})],1),t._v(" "),n("td",[e.comment?n("span",[n("em",[t._v("«"+t._s(e.comment)+"»")])]):t._e()]),t._v(" "),n("td",{staticClass:"text-nowrap"},[n("div",{staticClass:"text-center py-1 px-4",class:{"progress-bar progress-bar-striped progress-bar-animated ":e.summ>=1e3,"bg-success":e.summ>=500&&e.summ<1e3,"bg-secondary":e.summ<500}},[n("strong",[n("rub",{attrs:{money:e.summ}})],1)])]),t._v(" "),n("td",{staticClass:"text-nowrap"},[n("small",{staticClass:"text-muted"},[t._v(t._s(e.dateDiff))])])])})),0)])])]):n("div",{staticClass:"alerft alert-secondary text-center"},[n("strong",[t._v("Ещё нет спонсоров, стань первым!")])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row g-0 justify-content-center"},[n("div",{staticClass:"alert alert-success col-auto py-1"},[n("i",{staticClass:"fa fa-info-circle"}),t._v(" "),n("strong",{},[t._v("Голоса пропорциональны донатам.")]),n("br"),t._v("\n            50 ливачей — 1 голос, 1000 ливачей — 20 голосов, и т.д.\n        ")]),t._v(" "),n("div",{staticClass:"alert alert-info col-auto py-1"},[n("i",{staticClass:"fa fa-info-circle"}),t._v(" "),n("strong",{},[t._v("Донатеры могут усиливать или убирать лайки.")]),n("br"),t._v("\n            20 ливачей +1 лайк усиления или ослабления. 1000 ливачей - добавят или уберут 50 лайков\n        ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{},[n("i",{staticClass:"fa fa-fire text-danger"}),t._v(" "),n("strong",[t._v("ТОП-донатеры")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("№")]),t._v(" "),n("th"),t._v(" "),n("th",[t._v("Сумма донатов")]),t._v(" "),n("th",[t._v("Голосов")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("№")]),t._v(" "),n("th"),t._v(" "),n("th",[t._v("коммент")]),t._v(" "),n("th"),t._v(" "),n("th")])])}],!1,null,null,null).exports},73509:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(87421);const r={props:{config:{type:Object}},components:{tasks:a.Z},data:function(){return{step:1}},created:function(){},mounted:function(){},methods:{}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("tasks",{attrs:{config:t.config}})],1)}),[],!1,null,null,null).exports},87421:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a={props:{config:{type:Object},radio:String},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",t._l(t.config.tasks,(function(e){return n("div",{staticClass:"mb-3"},[n("h4",{staticClass:"text-end"},[n("strong",[t._v(t._s(e.group))])]),t._v(" "),t._l(e.items,(function(e){return n("div",[n("div",[t.radio?n("label",{staticClass:"form-check form-check-inline m-0"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:t.radio,required:""},domProps:{value:e.id}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v(t._s(e.name))])]):n("span",[t._v(t._s(e.name))]),t._v(" "),e.link?[n("i",{staticClass:"fa fa-external-link"}),t._v(" "),n("a",{attrs:{target:"_blank",href:e.link}},[t._v("\n                        пример\n                    ")])]:t._e()],2),t._v(" "),e.desc?n("div",{staticClass:"p-1 mt-1 alert alert-secondary"},[t._v(t._s(e.desc))]):t._e()])}))],2)})),0)])}),[],!1,null,null,null).exports},93711:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a={props:{config:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[t.global.admin?n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.$root.contentEditOpen(t.config.rulesAlias,t.config.rulesPage)}}},[n("i",{staticClass:"fa fa-pencil"}),t._v("\n            "+t._s(t.config.rulesPage?"Редактировать":"Создать страницу")+"\n        ")]):t._e(),t._v(" "),t.config.rulesPage?n("div",{domProps:{innerHTML:t._s(t.config.rulesPage.html)}}):t._e()])])}),[],!1,null,null,null).exports},94094:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var a=n(39065),r=n(93711);const i={props:{config:{type:Object}},components:{tasks:a.Z,rules:r.Z},data:function(){return{step:1}},created:function(){},mounted:function(){},methods:{next:function(){this.step++,this.$nextTick((function(){window.scrollTo(0,0)}))},back:function(){this.step--},regSuccess:function(){this.$router.push(this.$parent.link("member"))},complete:function(){window.scrollTo(0,0),this.$nextTick((function(){window.scrollTo(0,0)}))}}};const s=(0,n(51900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.config.isRegPreviewEnabled?n("forma",{attrs:{action:"/contest/register",once:!0},on:{complete:t.complete,success:t.regSuccess}},[n("input",{attrs:{type:"hidden",name:"cname"},domProps:{value:t.$parent.name}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step === 1"}]},[n("h4",{staticClass:"text-center"},[t._v("Правила участия")]),t._v(" "),n("rules",{attrs:{config:t.config}}),t._v(" "),n("div",{staticClass:"text-end"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.next}},[n("i",{staticClass:"fa fa-check"}),t._v(" Прочитал и принял")])])],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}]},[n("label",[t._v("Обращение к зрителям и спонсорам:")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"text",required:""}}),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("небольшой рассказ о себе и о вашем предстоящим выступлении")]),t._v(" "),n("div",{staticClass:"my-3"},[t._v("Выберите задание для конкурса")]),t._v(" "),n("tasks",{attrs:{config:t.config,radio:"task"}}),t._v(" "),n("div",{staticClass:"text-end"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-check"}),t._v(" Зарегистрироваться")])])],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}]})]):n("div",{staticClass:"alert alert-danger text-center"},[n("strong",[t._v("Регистрация окончена")])])],1)}),[],!1,null,null,null).exports},81656:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var a=n(39065),r=n(3972);const i={props:{config:{type:Object}},data:function(){return this.config.isMember?{task:this.config.isMember.task,editTask:!1,uploadType:null,uploadedVideo:this.config.isMember.video,videoInfo:null,videoError:null}:{}},components:{tasks:a.Z,recorder:r.Z},created:function(){},mounted:function(){},methods:{leaved:function(){this.$router.push(this.$parent.link())},taskComplete:function(){window.scrollTo(0,0)},taskSuccess:function(t){this.task=t.task,this.editTask=!1},uploadShow:function(){},uploadSuccess:function(t){this.uploadedVideo=t._orig,this.uploadType=null},videoEvent:function(t){"error"===t.type&&(error("video error",t.target.error),this.videoError=t.target.error.message),"loadedmetadata"===t.type&&(this.videoInfo={w:t.target.videoWidth,h:t.target.videoHeight})},removedVideo:function(){this.uploadedVideo=null,this.uploadType=null}}};const s=(0,n(51900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.config.isMember?n("div",[t._v("\n    Ваш номер: "),n("strong",[t._v(t._s(t.config.memberIndex))]),n("br"),t._v("\n    Ваше задание: "),n("strong",[t._v(t._s(t.task.name))]),t._v(" "),t.editTask||t.config.isMember.ready_at?t._e():n("span",{staticClass:"app-link",on:{click:function(e){t.editTask=!0}}},[t._v("изменить задание")]),t._v(" "),t.config.isMember.comment?n("div",{staticClass:"alert alert-danger my-3 text-center"},[n("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" "),n("strong",[t._v(t._s(t.config.isMember.comment))])]):t._e(),t._v(" "),t.editTask?n("forma",{attrs:{action:"/contest/changeTask",once:!0},on:{complete:t.taskComplete,success:t.taskSuccess}},[n("input",{attrs:{type:"hidden",name:"cname"},domProps:{value:t.$parent.name}}),t._v(" "),n("tasks",{attrs:{config:t.config,radio:"task"}}),t._v(" "),n("div",{staticClass:"text-end"},[n("button",{staticClass:"btn btn-danger",on:{click:function(e){t.editTask=!1}}},[n("i",{staticClass:"fa fa-remove"}),t._v("\n                Отмена\n            ")]),t._v(" "),n("button",{staticClass:"btn btn-secondary"},[n("i",{staticClass:"fa fa-pencil"}),t._v("\n                Изменить\n            ")])])],1):t._e(),t._v(" "),t.uploadedVideo?n("div",{staticClass:"my-3"},[n("div",[t._v("\n            Ваше видео с заданием\n            "),t.videoInfo?n("span",[t._v("(разрешение: "+t._s(t.videoInfo.w)+"x"+t._s(t.videoInfo.h)+")")]):t._e()]),t._v(" "),n("video",{staticClass:"w-100",attrs:{preload:"metadata",src:t.uploadedVideo,controls:""},on:{error:t.videoEvent,loadedmetadata:t.videoEvent}}),t._v(" "),t.videoError?n("div",{staticClass:"text-danger lh-1 mb-2"},[t._v("\n            Ошибка загрузки видео:"),n("br"),t._v(" "),n("strong",[t._v(t._s(t.videoError))])]):t._e(),t._v(" "),n("div",{staticClass:"text-end"},[t.config.isMember.ready_at?t._e():n("action",{staticClass:"btn btn-danger btn-sm",attrs:{confirm:"Вы уверены? Точно удалить видео?",action:"/contest/removeVideo",data:{cname:t.$parent.name}},on:{success:t.removedVideo}},[n("i",{staticClass:"fa fa-remove"}),t._v(" удалить\n            ")])],1)]):n("div",{staticClass:"my-3 d-flex justify-content-between"},[n("button",{staticClass:"btn btn-primary",on:{click:function(e){t.uploadType=null===t.uploadType?-1:null}}},[n("i",{staticClass:"fa fa-upload"}),t._v("\n            "+t._s(t.uploadType?"Отмена":"Загрузить видео")+"\n        ")])]),t._v(" "),t.uploadType?n("div",{staticClass:"mb-3"},[n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.uploadType,expression:"uploadType"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1"},domProps:{checked:t._q(t.uploadType,"1")},on:{change:function(e){t.uploadType="1"}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Записать через сайт")])]),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.uploadType,expression:"uploadType"}],staticClass:"form-check-input",attrs:{type:"radio",value:"2"},domProps:{checked:t._q(t.uploadType,"2")},on:{change:function(e){t.uploadType="2"}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Загрузить готовое видео с компьютера")])])]):t._e(),t._v(" "),1==t.uploadType?n("recorder",t._b({attrs:{type:"video",obj:t.config.isMember._c,"max-sec":t.config.uploadMaxSec,"obj-id":t.config.isMember.id,alias:"record","as-statis":!0},on:{success:t.uploadSuccess}},"recorder",t.config.videoUploadConfig,!1)):t._e(),t._v(" "),2==t.uploadType?n("uploader",t._b({attrs:{label:"Выберите видео",mime:["video/webp","video/mp4"],obj:t.config.isMember._c,"obj-id":t.config.isMember.id,alias:"record"},on:{upload:t.uploadSuccess}},"uploader",t.config.videoUploadConfig,!1)):t._e(),t._v(" "),n("div",{staticClass:"my-4"},[n("action",{staticClass:"btn btn-secondary",attrs:{confirm:"Вы уверены, что желаете покинуть конкурс?",action:"/contest/leave",data:{cname:t.$parent.name}},on:{success:t.leaved}},[n("i",{staticClass:"em em-no_entry_sign",attrs:{"aria-role":"presentation","aria-label":"NO ENTRY SIGN"}}),t._v("\n            Отказаться от участия\n        ")])],1)],1):n("div",[t._m(0)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert alert-danger text-center"},[n("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" "),n("strong",[t._v("Вы не являетесь участником")])])}],!1,null,null,null).exports},36859:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>p});const a={name:"donate_popover",props:{prop:{type:String}},data:function(){return{gain:this.$options.propsData}},created:function(){},mounted:function(){},methods:{}};var r=n(51900);const i=(0,r.Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("div",{staticClass:"mb-1"},[n("user",{attrs:{user:t.gain.user}})],1),t._v(" "),t.gain.gain>0?n("span",[n("i",{staticClass:"em em-man-lifting-weights"}),t._v(" Поднял\n    ")]):n("span",[n("i",{staticClass:"em em-hankey",attrs:{"aria-role":"presentation"}}),t._v("\n        Опустил\n    ")]),t._v("\n\n    на "),n("strong",{class:{"text-danger":t.gain.gain<0,"text-success":t.gain.gain>0}},[t._v(t._s(t.gain.gain))]),t._v(" лайков\n\n    "),n("div",{staticClass:"mt-2 text-center"},[n("small",{staticClass:"text-muted"},[t._v(t._s(t.gain.dateDiff))])])])}),[],!1,null,null,null).exports;var s=n(2471);const o={props:{config:{type:Object},member:{type:Object},cname:String},data:function(){return{member$:this.member}},created:function(){},watch:{member$:{deep:!0,handler:function(){this.$emit("member",this.member$)}}},mounted:function(){},methods:{chooseFrame:function(t){this.$root.render(s.Z,{url:t.video,obj:t._c,objId:t.id,alias:"frame"})},uploadSuccess:function(t){this.member$.video=t._orig,this.member$.hasVideo=!0}}};const c=(0,r.Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:t.member$.user?t.member$.user.name:"Аноним",save:"Сохранить"}},[n("forma",{attrs:{action:"/contest/memeberEdit"},on:{success:function(e){t.member$=e.member}}},[n("input",{attrs:{type:"hidden",name:"cname"},domProps:{value:t.cname}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"id"},domProps:{value:t.member$.id}}),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Комментарий:")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"item[comment_adm]"},domProps:{innerHTML:t._s(t.member$.comment)}})])]),t._v(" "),n("div",{staticClass:"d-flex",staticStyle:{gap:"3px"}},[t.global.admin?n("action",{staticClass:"btn btn-sm",class:{"btn-danger":!t.member$.deactivate,"btn-success":t.member$.deactivate},attrs:{type:"button",confirm:"Уверен?",action:"/contest/deactivate",data:{cname:t.cname,id:t.member$.id},"data-title":"Деактивировать \\ Восстановить"},model:{value:t.member$.deactivate,callback:function(e){t.$set(t.member$,"deactivate",e)},expression:"member$.deactivate"}},[n("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),t.global.admin?n("action",{staticClass:"btn btn-sm",class:{"btn-danger":!t.member$.ready_at,"btn-success":t.member$.ready_at},attrs:{type:"button",confirm:"Уверен?",action:"/contest/ready",data:{cname:t.cname,id:t.member$.id},"data-title":"Готов\\Не готов к участию"},model:{value:t.member$.ready_at,callback:function(e){t.$set(t.member$,"ready_at",e)},expression:"member$.ready_at"}},[n("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),t.global.admin&&t.member$.video?n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{"data-title":"Выбрать кадр"},on:{click:function(e){return t.chooseFrame(t.member$)}}},[n("i",{staticClass:"fa fa-video-camera"})]):t._e(),t._v(" "),n("uploader",t._b({attrs:{label:"Загрузить видео",obj:t.member._c,"obj-id":t.member.id,alias:"record"},on:{upload:t.uploadSuccess}},"uploader",t.config.videoUploadConfig,!1))],1)],1)}),[],!1,null,null,null).exports;function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const d={props:{member:{type:Object}},data:function(){return{form:null}},created:function(){},mounted:function(){},methods:{submit:function(t){var e={};if(this.$refs.form){var n,a=l(new window.FormData(this.$refs.form).entries());try{for(a.s();!(n=a.n()).done;){var r=n.value;e[r[0]]=r[1]}}catch(t){a.e(t)}finally{a.f()}error(e),this.$emit("success",e)}}}};const f=(0,r.Z)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Редактирование участника",save:"Удалить"},on:{save:t.submit}},[n("form",{ref:"form",on:{submit:t.submit}},[n("div",{staticClass:"form-group"},[n("label",[t._v("Комментарий:")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"comment_member"}})])])])}),[],!1,null,null,null).exports,h={props:{config:{type:Object},showUploaded:Boolean},data:function(){return{step:1,PopoverGainUser:i,ModalMemberRemoveVideo:f,members:this.config.members}},created:function(){},mounted:function(){},computed:{membersList:function(){return this.members.map((function(t){var e=0,n=0;return t.gains.forEach((function(t){t.gain>0?e+=t.gain:n+=Math.abs(t.gain)})),Object.assign(t,{_gainSummPositive:e,_gainSummNegative:n})}))}},methods:{next:function(){this.step++,window.scrollTo(0,0)},back:function(){this.step--},complete:function(){window.scrollTo(0,0)},gainSuccess:function(t,e){this.config.like_gain=0,this.editMemeber(t.id,{positive:e.positive})},editMemeber:function(t,e){for(var n=0;n<this.members.length;n++)if(this.members[n].id===t){Object.assign(this.members[n],e);break}},memberAdmin:function(t){var e=this,n=this.$root.render(c,{config:this.config,member:t,cname:this.$parent.name});n.$on("member",(function(t){e.editMemeber(t.id,t),n.$destroy()}))}}};const p=(0,r.Z)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table"},[t._m(0),t._v(" "),n("tbody",t._l(t.membersList,(function(e,a){return!t.showUploaded||t.showUploaded&&e.hasVideo?n("tr",{key:e.id},[n("td",{staticClass:"text-center",class:{"bg-success":a<=9},staticStyle:{width:"10px"}},[t._v(t._s(a+1))]),t._v(" "),n("td",[n("user",{attrs:{nickname:"Аноним",user:e.user}}),t._v(" "),n("div",[n("small",{staticClass:"text-muted",attrs:{"data-title":"Дата регистрации участника"}},[t._v(t._s(e.date))]),t._v(" "),t.global.admin?n("span",{staticClass:"app-link",on:{click:function(n){return t.memberAdmin(e)}}},[t._v("Изменить")]):t._e()])],1),t._v(" "),n("td",{staticClass:"text-nowrap"},[t.config.isVotedPreviewEnabled&&t.config.like_gain?n("div",{},[n("div",[n("i",{staticClass:"em em-man-lifting-weights"}),t._v(" "),n("action",{staticClass:"btn btn-sm btn-success",staticStyle:{width:"70px"},attrs:{confirm:"Вы уверены?",action:"/contest/gain",data:{id:e.id,up:1,cname:t.$parent.name},"data-title":"Поднять на "+t.config.like_gain+" лайка"},on:{success:function(n){return t.gainSuccess(e,n)}}},[t._v("+ "+t._s(t.config.like_gain))])],1),t._v(" "),e.positive>0?n("div",[n("i",{staticClass:"em em-hankey",attrs:{"aria-role":"presentation"}}),t._v(" "),n("action",{staticClass:"btn btn-sm btn-danger",staticStyle:{width:"70px"},attrs:{confirm:"Вы уверены?",action:"/contest/gain",data:{id:e.id,down:1,cname:t.$parent.name},"data-title":"Опустить на "+t.config.like_gain+" лайка"},on:{success:function(n){return t.gainSuccess(e,n)}}},[t._v("- "+t._s(t.config.like_gain))])],1):t._e()]):t.config.isVotedPreviewEnabled&&t.config.isRegPreviewEnabled?n("div",[n("router-link",{staticClass:"d-block badge bg-success",attrs:{"data-title":"Подтянуть",to:t.$parent.link("sponsors")}},[n("i",{staticClass:"fa fa-arrow-up"})]),t._v(" "),n("router-link",{staticClass:"d-block badge bg-danger",attrs:{"data-title":"Опустить",to:t.$parent.link("sponsors")}},[n("i",{staticClass:"fa fa-arrow-down"})])],1):t._e()]),t._v(" "),n("td",{staticClass:"text-nowrap"},[t.config.isVotedLikePreviewEnabled?n("likeMe",{attrs:{"btn-cls":"btn-secondary btn-sm",obj:"konkurs",negative:e.negative,positive:e.positive,"obj-id":e.id}}):n("div",[n("span",{staticClass:"bg-success badge"},[t._v(t._s(e.positive))])]),t._v(" "),e._gainSummPositive||e._gainSummNegative?n("div",{staticClass:"mt-2"},[n("span",{staticClass:"cursor-pointer",attrs:{"data-bs-toggle":"collapse",href:"#gainsHistory_"+e.id}},[e._gainSummPositive?n("strong",{staticClass:"text-success"},[t._v("+"+t._s(e._gainSummPositive))]):t._e(),t._v(" "),e._gainSummNegative?n("strong",{staticClass:"text-danger"},[t._v("-"+t._s(e._gainSummNegative))]):t._e()]),t._v(" "),n("div",{staticClass:"text-nowrap collapse",attrs:{id:"gainsHistory_"+e.id}},t._l(e.gains,(function(e){return n("small",{directives:[{name:"popover",rawName:"v-popover:[gain]",value:t.PopoverGainUser,expression:"PopoverGainUser",arg:e}],key:e.id,staticClass:"badge me-1 cursor-help",class:{"bg-secondary":e.gain>0,"bg-warning text-dark":e.gain<0}},[t._v("\n                                    "+t._s(e.gain>0?"+":"")+t._s(e.gain)+"\n                                ")])})),0)]):t._e()],1),t._v(" "),n("td",[n("div",{staticClass:"text-nowrap mb-1"},[e.hasVideo?n(e.video?"a":"span",{tag:"component",attrs:{href:e.video||!1}},[n("i",{staticClass:"fa fa-check text-primary",attrs:{"data-title":"Видео залито"}})]):n("i",{staticClass:"fa fa-hourglass-o",attrs:{"data-title":"Ожидаем загрузки видео..."}}),t._v(" "),n("strong",[t._v(t._s(e.task.name))])],1),t._v(" "),e.text?n("div",[n("em",[t._v("«"+t._s(e.text)+"»")])]):t._e(),t._v(" "),e.comment?n("div",{staticClass:"mt-2 lh-1"},[t._v("\n                            Комментарий администратора:"),n("br"),t._v(" "),n("strong",{staticClass:"text-danger",domProps:{innerHTML:t._s(e.comment.replace(/\n+/g,"<br/>"))}})]):t._e()]),t._v(" "),n("td",[e.deactivate?n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Участник выбыд"}}):t._e(),t._v(" "),e.ready_at?n("button",{staticClass:"btn btn-success",attrs:{"data-title":"Готов к участию. Дальнейшие изменения не принимаются",readonly:""}},[n("i",{staticClass:"fa fa-check"})]):t._e()])]):t._e()})),0)])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("№")]),t._v(" "),n("th"),t._v(" "),n("th"),t._v(" "),n("th",[t._v("голосов")]),t._v(" "),n("th",[t._v("задание")]),t._v(" "),n("th")])])}],!1,null,null,null).exports},46914:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});n(39065),n(93711);const a={props:{config:{type:Object}},components:{},data:function(){return{}},created:function(){this.$root.header("Результаты конкурса")},computed:{results:function(){return this.config.members.filter((function(t){return t.video}))}},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.config.vote?n("vote",{staticClass:"my-3",attrs:{vote:t.config.vote}}):t._e(),t._v(" "),t.results.length>0?n("div",t._l(t.results,(function(e){return n("div",{staticClass:"mb-3"},[n("h3",[n("user",{attrs:{user:e.user}}),t._v(" "),n("span",{staticClass:"d-inline-block text-nowrap"},[e.positive?n("span",[t._v("+"+t._s(e.positive))]):t._e(),t._v(" "),e.negative?n("span",[t._v("/ -"+t._s(e.negative))]):t._e()])],1),t._v(" "),n("video-player",{staticClass:"mw-100",attrs:{src:e.video,controls:"",preload:""}})],1)})),0):n("div",{staticClass:"alert alert-secondary text-center"},[t._v("\n        результатов пока нет\n    ")])],1)}),[],!1,null,null,null).exports},28137:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(93711);const r={props:{config:{type:Object}},components:{rules:a.Z},data:function(){return{step:1}},created:function(){},mounted:function(){},methods:{}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("rules",{attrs:{config:t.config}})],1)}),[],!1,null,null,null).exports},23948:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={props:{config:{type:Object}},components:{},data:function(){return{}},created:function(){},mounted:function(){},methods:{paySuccess:function(t){this.$parent.load()}}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",{staticClass:"text-center mb-3",staticStyle:{"line-height":"3rem"}},[n("user",{attrs:{user:t.config.owner}}),n("br"),t._v("\n        Я собираю пожертвования на призы ребятишкам, дайте кто сколько может!"),n("br"),t._v("\n        В комментариях к платежу пишите любой текст, он будет выведен на этой странице"),n("br"),t._v(" "),n("strong",[t._v("Все, кто задонатит будет участвовать в жюри "),n("router-link",{attrs:{to:t.$parent.link("")}},[t._v("конкурса")]),n("br")],1),t._v(" "),n("div",{staticClass:"text-center"},[n("pay-button",{staticClass:"btn-lg",attrs:{owner:t.config.owner,donate:t.config.donate,scope:"konkurs"},on:{orderPayed:t.paySuccess}},[n("i",{staticClass:"em em-male-detective"}),t._v("\n                Стать спонсором и жюри\n            ")])],1)],1),t._v(" "),t._m(0),t._v(" "),t.config.sponsorsByVotes.length>0?n("div",{staticClass:"table-responsive my-3"},[n("div",{staticClass:"row justify-content-center g-0"},[n("div",{staticClass:"col-12 col-md-9 col-lg-6"},[t._m(1),t._v("\n                пользователи, которые будут определять победителя\n                "),n("table",{staticClass:"table"},[t._m(2),t._v(" "),n("tbody",t._l(t.config.sponsorsByVotes,(function(e,a){return n("tr",{key:e.id,staticClass:"text-nowrap"},[n("td",{staticClass:"text-center",class:{"bg-primary":0===a,"bg-success":1===a,"bg-secondary":2===a},staticStyle:{width:"10px"}},[t._v(t._s(a+1))]),t._v(" "),n("td",[n("user",{attrs:{user:e.user}})],1),t._v(" "),n("td",[n("rub",{attrs:{money:e._summ_total}})],1),t._v(" "),n("td",[n("span",{class:{"fw-bolder":0===a}},[t._v(t._s(e.votes))])])])})),0)])])])]):t._e(),t._v(" "),t.config.transactions.length>0?n("div",[n("strong",[t._v("\n\n            великолепные, гениальные, изумительные, щедрые, мудрые красавцы и красавицы\n        ")]),t._v(" "),n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table"},[t._m(3),t._v(" "),n("tbody",t._l(t.config.transactions,(function(e,a){return n("tr",{key:e.id},[n("td",[t._v("\n                            "+t._s(t.config.transactions.length-a)+"\n                        ")]),t._v(" "),n("td",{staticClass:"text-nowrap"},[n("user",{attrs:{user:e.user}})],1),t._v(" "),n("td",[e.comment?n("span",[n("em",[t._v("«"+t._s(e.comment)+"»")])]):t._e()]),t._v(" "),n("td",{staticClass:"text-nowrap"},[n("div",{staticClass:"text-center py-1 px-4",class:{"progress-bar progress-bar-striped progress-bar-animated ":e.summ>=1e3,"bg-success":e.summ>=500&&e.summ<1e3,"bg-secondary":e.summ<500}},[n("strong",[n("rub",{attrs:{money:e.summ}})],1)])]),t._v(" "),n("td",{staticClass:"text-nowrap"},[n("small",{staticClass:"text-muted"},[t._v(t._s(e.dateDiff))])])])})),0)])])]):n("div",{staticClass:"alerft alert-secondary text-center"},[n("strong",[t._v("Ещё нет спонсоров, стань первым!")])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row g-0 justify-content-center"},[n("div",{staticClass:"alert alert-success col-auto py-1"},[n("i",{staticClass:"fa fa-info-circle"}),t._v(" "),n("strong",{},[t._v("Голоса пропорциональны донатам.")]),n("br"),t._v("\n            50 ливачей — 1 голос, 1000 ливачей — 20 голосов, и т.д.\n        ")]),t._v(" "),n("div",{staticClass:"alert alert-info col-auto py-1"},[n("i",{staticClass:"fa fa-info-circle"}),t._v(" "),n("strong",{},[t._v("Донатеры могут усиливать или убирать лайки.")]),n("br"),t._v("\n            20 ливачей +1 лайк усиления или ослабления. 1000 ливачей - добавят или уберут 50 лайков\n        ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{},[n("i",{staticClass:"fa fa-fire text-danger"}),t._v(" "),n("strong",[t._v("ТОП-донатеры")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("№")]),t._v(" "),n("th"),t._v(" "),n("th",[t._v("Сумма донатов")]),t._v(" "),n("th",[t._v("Голосов")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("№")]),t._v(" "),n("th"),t._v(" "),n("th",[t._v("коммент")]),t._v(" "),n("th"),t._v(" "),n("th")])])}],!1,null,null,null).exports},13886:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(39065);const r={props:{config:{type:Object}},components:{tasks:a.Z},data:function(){return{step:1}},created:function(){},mounted:function(){},methods:{}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("tasks",{attrs:{config:t.config}})],1)}),[],!1,null,null,null).exports},39065:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a={props:{config:{type:Object},radio:String},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",t._l(t.config.tasks,(function(e){return n("div",{staticClass:"mb-3"},[n("h4",{staticClass:"text-end"},[n("strong",[t._v(t._s(e.group))])]),t._v(" "),t._l(e.items,(function(e){return n("div",[n("div",[t.radio?n("label",{staticClass:"form-check form-check-inline m-0"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:t.radio,required:""},domProps:{value:e.id}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v(t._s(e.name))])]):n("span",[t._v(t._s(e.name))]),t._v(" "),e.link?[n("i",{staticClass:"fa fa-external-link"}),t._v(" "),n("a",{attrs:{target:"_blank",href:e.link}},[t._v("\n                        пример\n                    ")])]:t._e()],2),t._v(" "),e.desc?n("div",{staticClass:"p-1 mt-1 alert alert-secondary"},[t._v("\n                    "+t._s(e.desc)+"\n                    "),e.desc_raw?n("pre",[t._v(t._s(e.desc_raw))]):t._e()]):t._e(),t._v(" "),e.image?n("div",{staticClass:"p-1 mt-1"},[n("a",{attrs:{"data-fancybox":"",href:e.image}},[n("img",{staticStyle:{"max-width":"200px"},attrs:{src:e.image}})])]):t._e()])}))],2)})),0)])}),[],!1,null,null,null).exports},8869:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a={props:{config:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[t.global.admin?n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.$root.contentEditOpen(t.config.rulesAlias,t.config.rulesPage)}}},[n("i",{staticClass:"fa fa-pencil"}),t._v("\n            "+t._s(t.config.rulesPage?"Редактировать":"Создать страницу")+"\n        ")]):t._e(),t._v(" "),t.config.rulesPage?n("div",{domProps:{innerHTML:t._s(t.config.rulesPage.html)}}):t._e()])])}),[],!1,null,null,null).exports},37042:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var a=n(26415),r=n(8869);const i={props:{config:{type:Object}},components:{tasks:a.Z,rules:r.Z},data:function(){return{step:1}},created:function(){},mounted:function(){},methods:{next:function(){this.step++,this.$nextTick((function(){window.scrollTo(0,0)}))},back:function(){this.step--},regSuccess:function(){this.$router.push(this.$parent.link("member"))},complete:function(){window.scrollTo(0,0),this.$nextTick((function(){window.scrollTo(0,0)}))}}};const s=(0,n(51900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.config.isRegPreviewEnabled?n("forma",{attrs:{action:"/contest/register",once:!0},on:{complete:t.complete,success:t.regSuccess}},[n("input",{attrs:{type:"hidden",name:"cname"},domProps:{value:t.$parent.name}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step === 1"}]},[n("h4",{staticClass:"text-center"},[t._v("Правила участия")]),t._v(" "),n("rules",{attrs:{config:t.config}}),t._v(" "),n("div",{staticClass:"text-end"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.next}},[n("i",{staticClass:"fa fa-check"}),t._v(" Прочитал и принял")])])],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}]},[n("label",[t._v("Обращение к зрителям и спонсорам:")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"text",required:""}}),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("небольшой рассказ о себе и о вашем предстоящим выступлении")]),t._v(" "),n("div",{staticClass:"my-3"},[t._v("Выберите задание для конкурса")]),t._v(" "),n("tasks",{attrs:{config:t.config,radio:"task"}}),t._v(" "),n("div",{staticClass:"text-end"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-check"}),t._v(" Зарегистрироваться")])])],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}]})]):n("div",{staticClass:"alert alert-danger text-center"},[n("strong",[t._v("Регистрация окончена")])])],1)}),[],!1,null,null,null).exports},51517:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var a=n(26415),r=n(3972);const i={props:{config:{type:Object}},data:function(){return this.config.isMember?{task:this.config.isMember.task,editTask:!1,uploadType:null,uploadedVideo:this.config.isMember.video,videoInfo:null,videoError:null}:{}},components:{tasks:a.Z,recorder:r.Z},created:function(){},mounted:function(){},methods:{leaved:function(){this.$router.push(this.$parent.link())},taskComplete:function(){window.scrollTo(0,0)},taskSuccess:function(t){this.task=t.task,this.editTask=!1},uploadShow:function(){},uploadSuccess:function(t){this.uploadedVideo=t._orig,this.uploadType=null},videoEvent:function(t){"error"===t.type&&(error("video error",t.target.error),this.videoError=t.target.error.message),"loadedmetadata"===t.type&&(this.videoInfo={w:t.target.videoWidth,h:t.target.videoHeight})},removedVideo:function(){this.uploadedVideo=null,this.uploadType=null}}};const s=(0,n(51900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.config.isMember?n("div",[t._v("\n    Ваш номер: "),n("strong",[t._v(t._s(t.config.memberIndex))]),n("br"),t._v("\n    Ваше задание: "),n("strong",[t._v(t._s(t.task.name))]),t._v(" "),t.editTask||t.config.isMember.ready_at?t._e():n("span",{staticClass:"app-link",on:{click:function(e){t.editTask=!0}}},[t._v("изменить задание")]),t._v(" "),t.config.isMember.comment?n("div",{staticClass:"alert alert-danger my-3 text-center"},[n("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" "),n("strong",[t._v(t._s(t.config.isMember.comment))])]):t._e(),t._v(" "),t.editTask?n("forma",{attrs:{action:"/contest/changeTask",once:!0},on:{complete:t.taskComplete,success:t.taskSuccess}},[n("input",{attrs:{type:"hidden",name:"cname"},domProps:{value:t.$parent.name}}),t._v(" "),n("tasks",{attrs:{config:t.config,radio:"task"}}),t._v(" "),n("div",{staticClass:"text-end"},[n("button",{staticClass:"btn btn-danger",on:{click:function(e){t.editTask=!1}}},[n("i",{staticClass:"fa fa-remove"}),t._v("\n                Отмена\n            ")]),t._v(" "),n("button",{staticClass:"btn btn-secondary"},[n("i",{staticClass:"fa fa-pencil"}),t._v("\n                Изменить\n            ")])])],1):t._e(),t._v(" "),t.uploadedVideo?n("div",{staticClass:"my-3"},[n("div",[t._v("\n            Ваше видео с заданием\n            "),t.videoInfo?n("span",[t._v("(разрешение: "+t._s(t.videoInfo.w)+"x"+t._s(t.videoInfo.h)+")")]):t._e()]),t._v(" "),n("video",{staticClass:"w-100",attrs:{preload:"metadata",src:t.uploadedVideo,controls:""},on:{error:t.videoEvent,loadedmetadata:t.videoEvent}}),t._v(" "),t.videoError?n("div",{staticClass:"text-danger lh-1 mb-2"},[t._v("\n            Ошибка загрузки видео:"),n("br"),t._v(" "),n("strong",[t._v(t._s(t.videoError))])]):t._e(),t._v(" "),n("div",{staticClass:"text-end"},[t.config.isMember.ready_at?t._e():n("action",{staticClass:"btn btn-danger btn-sm",attrs:{confirm:"Вы уверены? Точно удалить видео?",action:"/contest/removeVideo",data:{cname:t.$parent.name}},on:{success:t.removedVideo}},[n("i",{staticClass:"fa fa-remove"}),t._v(" удалить\n            ")])],1)]):n("div",{staticClass:"my-3 d-flex justify-content-between"},[n("button",{staticClass:"btn btn-primary",on:{click:function(e){t.uploadType=null===t.uploadType?-1:null}}},[n("i",{staticClass:"fa fa-upload"}),t._v("\n            "+t._s(t.uploadType?"Отмена":"Загрузить видео")+"\n        ")])]),t._v(" "),t.uploadType?n("div",{staticClass:"mb-3"},[n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.uploadType,expression:"uploadType"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1"},domProps:{checked:t._q(t.uploadType,"1")},on:{change:function(e){t.uploadType="1"}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Записать через сайт")])]),t._v(" "),n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.uploadType,expression:"uploadType"}],staticClass:"form-check-input",attrs:{type:"radio",value:"2"},domProps:{checked:t._q(t.uploadType,"2")},on:{change:function(e){t.uploadType="2"}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Загрузить готовое видео с компьютера")])])]):t._e(),t._v(" "),1==t.uploadType?n("recorder",t._b({attrs:{type:"video",obj:t.config.isMember._c,"max-sec":t.config.uploadMaxSec,"obj-id":t.config.isMember.id,alias:"record","as-statis":!0},on:{success:t.uploadSuccess}},"recorder",t.config.videoUploadConfig,!1)):t._e(),t._v(" "),2==t.uploadType?n("uploader",t._b({attrs:{label:"Выберите видео",mime:["video/webp","video/mp4"],obj:t.config.isMember._c,"obj-id":t.config.isMember.id,alias:"record"},on:{upload:t.uploadSuccess}},"uploader",t.config.videoUploadConfig,!1)):t._e(),t._v(" "),n("div",{staticClass:"my-4"},[n("action",{staticClass:"btn btn-secondary",attrs:{confirm:"Вы уверены, что желаете покинуть конкурс?",action:"/contest/leave",data:{cname:t.$parent.name}},on:{success:t.leaved}},[n("i",{staticClass:"em em-no_entry_sign",attrs:{"aria-role":"presentation","aria-label":"NO ENTRY SIGN"}}),t._v("\n            Отказаться от участия\n        ")])],1)],1):n("div",[t._m(0)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert alert-danger text-center"},[n("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" "),n("strong",[t._v("Вы не являетесь участником")])])}],!1,null,null,null).exports},57789:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>p});const a={name:"donate_popover",props:{prop:{type:String}},data:function(){return{gain:this.$options.propsData}},created:function(){},mounted:function(){},methods:{}};var r=n(51900);const i=(0,r.Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("div",{staticClass:"mb-1"},[n("user",{attrs:{user:t.gain.user}})],1),t._v(" "),t.gain.gain>0?n("span",[n("i",{staticClass:"em em-man-lifting-weights"}),t._v(" Поднял\n    ")]):n("span",[n("i",{staticClass:"em em-hankey",attrs:{"aria-role":"presentation"}}),t._v("\n        Опустил\n    ")]),t._v("\n\n    на "),n("strong",{class:{"text-danger":t.gain.gain<0,"text-success":t.gain.gain>0}},[t._v(t._s(t.gain.gain))]),t._v(" лайков\n\n    "),n("div",{staticClass:"mt-2 text-center"},[n("small",{staticClass:"text-muted"},[t._v(t._s(t.gain.dateDiff))])])])}),[],!1,null,null,null).exports;var s=n(2471);const o={props:{config:{type:Object},member:{type:Object},cname:String},data:function(){return{member$:this.member}},created:function(){},watch:{member$:{deep:!0,handler:function(){this.$emit("member",this.member$)}}},mounted:function(){},methods:{chooseFrame:function(t){this.$root.render(s.Z,{url:t.video,obj:t._c,objId:t.id,alias:"frame"})},uploadSuccess:function(t){this.member$.video=t._orig,this.member$.hasVideo=!0}}};const c=(0,r.Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:t.member$.user?t.member$.user.name:"Аноним",save:"Сохранить"}},[n("forma",{attrs:{action:"/contest/memeberEdit"},on:{success:function(e){t.member$=e.member}}},[n("input",{attrs:{type:"hidden",name:"cname"},domProps:{value:t.cname}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"id"},domProps:{value:t.member$.id}}),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Комментарий:")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"item[comment_adm]"},domProps:{innerHTML:t._s(t.member$.comment)}})])]),t._v(" "),n("div",{staticClass:"d-flex",staticStyle:{gap:"3px"}},[t.global.admin?n("action",{staticClass:"btn btn-sm",class:{"btn-danger":!t.member$.deactivate,"btn-success":t.member$.deactivate},attrs:{type:"button",confirm:"Уверен?",action:"/contest/deactivate",data:{cname:t.cname,id:t.member$.id},"data-title":"Деактивировать \\ Восстановить"},model:{value:t.member$.deactivate,callback:function(e){t.$set(t.member$,"deactivate",e)},expression:"member$.deactivate"}},[n("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),t.global.admin?n("action",{staticClass:"btn btn-sm",class:{"btn-danger":!t.member$.ready_at,"btn-success":t.member$.ready_at},attrs:{type:"button",confirm:"Уверен?",action:"/contest/ready",data:{cname:t.cname,id:t.member$.id},"data-title":"Готов\\Не готов к участию"},model:{value:t.member$.ready_at,callback:function(e){t.$set(t.member$,"ready_at",e)},expression:"member$.ready_at"}},[n("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),t.global.admin&&t.member$.video?n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{"data-title":"Выбрать кадр"},on:{click:function(e){return t.chooseFrame(t.member$)}}},[n("i",{staticClass:"fa fa-video-camera"})]):t._e(),t._v(" "),n("uploader",t._b({attrs:{label:"Загрузить видео",obj:t.member._c,"obj-id":t.member.id,alias:"record"},on:{upload:t.uploadSuccess}},"uploader",t.config.videoUploadConfig,!1))],1)],1)}),[],!1,null,null,null).exports;function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const d={props:{member:{type:Object}},data:function(){return{form:null}},created:function(){},mounted:function(){},methods:{submit:function(t){var e={};if(this.$refs.form){var n,a=l(new window.FormData(this.$refs.form).entries());try{for(a.s();!(n=a.n()).done;){var r=n.value;e[r[0]]=r[1]}}catch(t){a.e(t)}finally{a.f()}error(e),this.$emit("success",e)}}}};const f=(0,r.Z)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Редактирование участника",save:"Удалить"},on:{save:t.submit}},[n("form",{ref:"form",on:{submit:t.submit}},[n("div",{staticClass:"form-group"},[n("label",[t._v("Комментарий:")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"comment_member"}})])])])}),[],!1,null,null,null).exports,h={props:{config:{type:Object},showUploaded:Boolean},data:function(){return{step:1,PopoverGainUser:i,ModalMemberRemoveVideo:f,members:this.config.members}},created:function(){},mounted:function(){},computed:{membersList:function(){return this.members.map((function(t){var e=0,n=0;return t.gains.forEach((function(t){t.gain>0?e+=t.gain:n+=Math.abs(t.gain)})),Object.assign(t,{_gainSummPositive:e,_gainSummNegative:n})}))}},methods:{next:function(){this.step++,window.scrollTo(0,0)},back:function(){this.step--},complete:function(){window.scrollTo(0,0)},gainSuccess:function(t,e){this.config.like_gain=0,this.editMemeber(t.id,{positive:e.positive})},editMemeber:function(t,e){for(var n=0;n<this.members.length;n++)if(this.members[n].id===t){Object.assign(this.members[n],e);break}},memberAdmin:function(t){var e=this,n=this.$root.render(c,{config:this.config,member:t,cname:this.$parent.name});n.$on("member",(function(t){e.editMemeber(t.id,t),n.$destroy()}))}}};const p=(0,r.Z)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table"},[t._m(0),t._v(" "),n("tbody",t._l(t.membersList,(function(e,a){return!t.showUploaded||t.showUploaded&&e.hasVideo?n("tr",{key:e.id},[n("td",{staticClass:"text-center",class:{"bg-success":a<=9},staticStyle:{width:"10px"}},[t._v(t._s(a+1))]),t._v(" "),n("td",[n("user",{attrs:{nickname:"Аноним",user:e.user}}),t._v(" "),n("div",[n("small",{staticClass:"text-muted",attrs:{"data-title":"Дата регистрации участника"}},[t._v(t._s(e.date))]),t._v(" "),t.global.admin?n("span",{staticClass:"app-link",on:{click:function(n){return t.memberAdmin(e)}}},[t._v("Изменить")]):t._e()])],1),t._v(" "),n("td",{staticClass:"text-nowrap"},[t.config.isVotedPreviewEnabled&&t.config.like_gain?n("div",{},[n("div",[n("i",{staticClass:"em em-man-lifting-weights"}),t._v(" "),n("action",{staticClass:"btn btn-sm btn-success",staticStyle:{width:"70px"},attrs:{confirm:"Вы уверены?",action:"/contest/gain",data:{id:e.id,up:1,cname:t.$parent.name},"data-title":"Поднять на "+t.config.like_gain+" лайка"},on:{success:function(n){return t.gainSuccess(e,n)}}},[t._v("+ "+t._s(t.config.like_gain))])],1),t._v(" "),e.positive>0?n("div",[n("i",{staticClass:"em em-hankey",attrs:{"aria-role":"presentation"}}),t._v(" "),n("action",{staticClass:"btn btn-sm btn-danger",staticStyle:{width:"70px"},attrs:{confirm:"Вы уверены?",action:"/contest/gain",data:{id:e.id,down:1,cname:t.$parent.name},"data-title":"Опустить на "+t.config.like_gain+" лайка"},on:{success:function(n){return t.gainSuccess(e,n)}}},[t._v("- "+t._s(t.config.like_gain))])],1):t._e()]):t.config.isVotedPreviewEnabled&&t.config.isRegPreviewEnabled?n("div",[n("router-link",{staticClass:"d-block badge bg-success",attrs:{"data-title":"Подтянуть",to:t.$parent.link("sponsors")}},[n("i",{staticClass:"fa fa-arrow-up"})]),t._v(" "),n("router-link",{staticClass:"d-block badge bg-danger",attrs:{"data-title":"Опустить",to:t.$parent.link("sponsors")}},[n("i",{staticClass:"fa fa-arrow-down"})])],1):t._e()]),t._v(" "),n("td",{staticClass:"text-nowrap"},[t.config.isVotedLikePreviewEnabled?n("likeMe",{attrs:{"btn-cls":"btn-secondary btn-sm",obj:"konkurs",negative:e.negative,positive:e.positive,"obj-id":e.id}}):n("div",[n("span",{staticClass:"bg-success badge"},[t._v(t._s(e.positive))])]),t._v(" "),e._gainSummPositive||e._gainSummNegative?n("div",{staticClass:"mt-2"},[n("span",{staticClass:"cursor-pointer",attrs:{"data-bs-toggle":"collapse",href:"#gainsHistory_"+e.id}},[e._gainSummPositive?n("strong",{staticClass:"text-success"},[t._v("+"+t._s(e._gainSummPositive))]):t._e(),t._v(" "),e._gainSummNegative?n("strong",{staticClass:"text-danger"},[t._v("-"+t._s(e._gainSummNegative))]):t._e()]),t._v(" "),n("div",{staticClass:"text-nowrap collapse",attrs:{id:"gainsHistory_"+e.id}},t._l(e.gains,(function(e){return n("small",{directives:[{name:"popover",rawName:"v-popover:[gain]",value:t.PopoverGainUser,expression:"PopoverGainUser",arg:e}],key:e.id,staticClass:"badge me-1 cursor-help",class:{"bg-secondary":e.gain>0,"bg-warning text-dark":e.gain<0}},[t._v("\n                                    "+t._s(e.gain>0?"+":"")+t._s(e.gain)+"\n                                ")])})),0)]):t._e()],1),t._v(" "),n("td",[n("div",{staticClass:"text-nowrap mb-1"},[e.hasVideo?n(e.video?"a":"span",{tag:"component",attrs:{href:e.video||!1}},[n("i",{staticClass:"fa fa-check text-primary",attrs:{"data-title":"Видео залито"}})]):n("i",{staticClass:"fa fa-hourglass-o",attrs:{"data-title":"Ожидаем загрузки видео..."}}),t._v(" "),n("strong",[t._v(t._s(e.task.name))])],1),t._v(" "),e.text?n("div",[n("em",[t._v("«"+t._s(e.text)+"»")])]):t._e(),t._v(" "),e.comment?n("div",{staticClass:"mt-2 lh-1"},[t._v("\n                            Комментарий администратора:"),n("br"),t._v(" "),n("strong",{staticClass:"text-danger",domProps:{innerHTML:t._s(e.comment.replace(/\n+/g,"<br/>"))}})]):t._e()]),t._v(" "),n("td",[e.deactivate?n("i",{staticClass:"fa fa-remove text-danger",attrs:{"data-title":"Участник выбыд"}}):t._e(),t._v(" "),e.ready_at?n("button",{staticClass:"btn btn-success",attrs:{"data-title":"Готов к участию. Дальнейшие изменения не принимаются",readonly:""}},[n("i",{staticClass:"fa fa-check"})]):t._e()])]):t._e()})),0)])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("№")]),t._v(" "),n("th"),t._v(" "),n("th"),t._v(" "),n("th",[t._v("голосов")]),t._v(" "),n("th",[t._v("задание")]),t._v(" "),n("th")])])}],!1,null,null,null).exports},13569:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});n(26415),n(8869);const a={props:{config:{type:Object}},components:{},data:function(){return{}},created:function(){this.$root.header("Результаты конкурса")},computed:{results:function(){return this.config.members.filter((function(t){return t.video}))}},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.config.vote?n("vote",{staticClass:"my-3",attrs:{vote:t.config.vote}}):t._e(),t._v(" "),t.results.length>0?n("div",t._l(t.results,(function(e){return n("div",{staticClass:"mb-3"},[n("h3",[n("user",{attrs:{user:e.user}}),t._v(" "),n("span",{staticClass:"d-inline-block text-nowrap"},[e.positive?n("span",[t._v("+"+t._s(e.positive))]):t._e(),t._v(" "),e.negative?n("span",[t._v("/ -"+t._s(e.negative))]):t._e()])],1),t._v(" "),n("video-player",{staticClass:"mw-100",attrs:{src:e.video,controls:"",preload:""}})],1)})),0):n("div",{staticClass:"alert alert-secondary text-center"},[t._v("\n        результатов пока нет\n    ")])],1)}),[],!1,null,null,null).exports},78725:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(8869);const r={props:{config:{type:Object}},components:{rules:a.Z},data:function(){return{step:1}},created:function(){},mounted:function(){},methods:{}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("rules",{attrs:{config:t.config}})],1)}),[],!1,null,null,null).exports},9933:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={props:{config:{type:Object}},components:{},data:function(){return{}},created:function(){},mounted:function(){},methods:{paySuccess:function(t){this.$parent.load()}}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",{staticClass:"text-center mb-3",staticStyle:{"line-height":"3rem"}},[n("user",{attrs:{user:t.config.owner}}),n("br"),t._v("\n        Здравствуйте!"),n("br"),t._v("\n        Я собираю пожертвования на подарки ребятишкам, дайте кто сколько может!"),n("br"),t._v("\n        В комментариях к платежу пишите любой текст, он будет выведен на этой странице"),n("br"),t._v(" "),n("strong",[t._v("Все, кто задонатит любую сумму, будет участвовать в жюри "),n("router-link",{attrs:{to:t.$parent.link("")}},[t._v("конкурса")]),n("br")],1),t._v(" "),n("div",{staticClass:"text-center"},[n("pay-button",{staticClass:"btn-lg",attrs:{owner:t.config.owner,donate:t.config.donate,scope:"konkurs"},on:{orderPayed:t.paySuccess}},[n("i",{staticClass:"em em-male-detective"}),t._v("\n                Стать спонсором и жюри\n            ")]),t._v(" "),n("br"),t._v(" "),n("a",{staticClass:"btn btn-secondary",attrs:{href:"/sos"}},[t._v("€  Евро \\ $ Доллары \\ PayPal")]),t._v(" "),n("br"),t._v(" при оплате в валюте пожалуйста напишите "),n("a",{attrs:{href:"/user/kozlik"}},[t._v("сообщение")])],1)],1),t._v(" "),t._m(0),t._v(" "),t.config.sponsorsByVotes.length>=3?n("div",{staticClass:"row g-0 gap-2 justify-content-center"},t._l(t.config.sponsorsByVotes.slice(0,3),(function(e,a){return n("div",{key:e.id,staticClass:"col-auto"},[n("img",{attrs:{src:e.user&&e.user.cover.avaiable&&e.user.cover.small||"/i/blank_200.png"}}),t._v(" "),n("div",{staticClass:"my-2",staticStyle:{"max-width":"200px"}},[n("user",{attrs:{user:e.user}})],1),t._v(" "),n("rub",{attrs:{money:e._summ_total}})],1)})),0):t._e(),t._v(" "),t.config.sponsorsByVotes.length>0?n("div",{staticClass:"table-responsive my-3"},[n("div",{staticClass:"row justify-content-center g-0"},[n("div",{staticClass:"col-12 col-md-9 col-lg-6"},[t._m(1),t._v("\n                пользователи, которые будут определять победителя\n                "),n("table",{staticClass:"table"},[t._m(2),t._v(" "),n("tbody",t._l(t.config.sponsorsByVotes,(function(e,a){return n("tr",{key:e.id,staticClass:"text-nowrap"},[n("td",{staticClass:"text-center",class:{"bg-primary":0===a,"bg-success":1===a,"bg-secondary":2===a},staticStyle:{width:"10px"}},[t._v(t._s(a+1))]),t._v(" "),n("td",[n("user",{attrs:{user:e.user}})],1),t._v(" "),n("td",[n("rub",{attrs:{money:e._summ_total}})],1),t._v(" "),n("td",[n("span",{class:{"fw-bolder":0===a}},[t._v(t._s(e.votes))])])])})),0)])])])]):t._e(),t._v(" "),t.config.transactions.length>0?n("div",[n("strong",[t._v("\n\n            великолепные, гениальные, изумительные, щедрые, мудрые красавцы и красавицы\n        ")]),t._v(" "),n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table"},[t._m(3),t._v(" "),n("tbody",t._l(t.config.transactions,(function(e,a){return n("tr",{key:e.id},[n("td",[t._v("\n                            "+t._s(t.config.transactions.length-a)+"\n                        ")]),t._v(" "),n("td",{staticClass:"text-nowrap"},[n("user",{attrs:{user:e.user}})],1),t._v(" "),n("td",[e.comment?n("span",[n("em",[t._v("«"+t._s(e.comment)+"»")])]):t._e()]),t._v(" "),n("td",{staticClass:"text-nowrap"},[n("div",{staticClass:"text-center py-1 px-4",class:{"progress-bar progress-bar-striped progress-bar-animated ":e.summ>=1e3,"bg-success":e.summ>=500&&e.summ<1e3,"bg-secondary":e.summ<500}},[n("strong",[n("rub",{attrs:{money:e.summ}})],1)])]),t._v(" "),n("td",{staticClass:"text-nowrap"},[n("small",{staticClass:"text-muted"},[t._v(t._s(e.dateDiff))])])])})),0)])])]):n("div",{staticClass:"alerft alert-secondary text-center"},[n("strong",[t._v("Ещё нет спонсоров, стань первым!")])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row g-0 justify-content-center"},[n("div",{staticClass:"alert alert-success col-auto py-1"},[n("img",{staticStyle:{height:"2rem"},attrs:{src:"/i/new.gif"}}),t._v("\n            1 участник жюри имеет 1 голос, "),n("strong",[t._v("вне зависимости от суммы донатов")])]),t._v(" "),n("div",{staticClass:"alert alert-info col-auto py-1"},[n("i",{staticClass:"fa fa-info-circle"}),t._v(" "),n("strong",{},[t._v("Донатеры могут усиливать или убирать лайки.")]),n("br"),t._v("\n            20 ливачей +1 лайк усиления или ослабления. 1000 ливачей - добавят или уберут 50 лайков\n        ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{},[n("i",{staticClass:"fa fa-fire text-danger"}),t._v(" "),n("strong",[t._v("ТОП-донатеры")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("№")]),t._v(" "),n("th"),t._v(" "),n("th",[t._v("Сумма донатов")]),t._v(" "),n("th",[t._v("Голосов")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("№")]),t._v(" "),n("th"),t._v(" "),n("th",[t._v("коммент")]),t._v(" "),n("th"),t._v(" "),n("th")])])}],!1,null,null,null).exports},79975:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(26415);const r={props:{config:{type:Object}},components:{tasks:a.Z},data:function(){return{step:1}},created:function(){},mounted:function(){},methods:{}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("tasks",{attrs:{config:t.config}})],1)}),[],!1,null,null,null).exports},26415:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a={props:{config:{type:Object},radio:String},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",t._l(t.config.tasks,(function(e){return n("div",{staticClass:"mb-3"},[n("h4",{staticClass:"text-end"},[n("strong",[t._v(t._s(e.group))])]),t._v(" "),e.desc?n("div",{staticClass:"text-end p-1 mt-1 alert alert-secondary"},[t._v(t._s(e.desc))]):t._e(),t._v(" "),t._l(e.items,(function(e){return n("div",[n("div",[t.radio?n("label",{staticClass:"form-check form-check-inline m-0"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:t.radio,required:""},domProps:{value:e.id}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v(t._s(e.name))])]):n("span",[t._v(t._s(e.name))]),t._v(" "),e.link?[n("i",{staticClass:"fa fa-external-link"}),t._v(" "),n("a",{attrs:{target:"_blank",href:e.link}},[t._v("\n                        пример\n                    ")])]:t._e()],2),t._v(" "),e.desc?n("div",{staticClass:"p-1 mt-1 alert alert-secondary"},[t._v("\n                    "+t._s(e.desc)+"\n                    "),e.desc_raw?n("pre",[t._v(t._s(e.desc_raw))]):t._e()]):t._e(),t._v(" "),e.image?n("div",{staticClass:"p-1 mt-1"},[n("a",{attrs:{"data-fancybox":"",href:e.image}},[n("img",{staticStyle:{"max-width":"200px"},attrs:{src:e.image}})])]):t._e(),t._v(" "),n("div",{staticStyle:{height:"2rem"}})])}))],2)})),0)])}),[],!1,null,null,null).exports},2799:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a={name:"play_audio",props:{src:{type:String},background:{type:Boolean,default:!1},autoplay:{type:Boolean,default:!0}},data:function(){return{url:this.src}},created:function(){this.playedTryCount=0,this.setUrl(this.src)},mounted:function(){var t=this;this.audio=this.$el,this.audio.addEventListener("loadeddata",(function(){t.audio.readyState>=2&&t.playedTryCount>0&&!t.played&&t.play()})),this.autoplay&&this.play()},methods:{setUrl:function(t){t&&(/^[0-9a-z]+$/.test(t)?this.url="/i/beeps/"+t+".ogg":this.url=t)},play:function(t){var e=this;if(this.$root.theme.soundOff)return log("sound disabled by global settings");this.playedTryCount++,t&&this.setUrl(t),log("try play",this.url),this.audio.play().then((function(){e.played=!0,log("play audio normally")})).catch((function(t){e.playedTryCount<=1&&$(document).one("click",(function(){e.played||e.play()})),log("play audio error",e.url,t)}))},toggle:function(){this.audio.paused?this.play():this.audio.pause()}}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("audio",{attrs:{src:t.url,controls:!t.background,preload:t.autoplay?"auto":"none"}})}),[],!1,null,null,null).exports},3972:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var a=n(89279),r=n(5465);function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const o={draggable:{},autoFloating:!1,name:"recorder",props:{type:{type:String,default:"video"},captureOptions:{type:Object},maxSec:{type:Number,default:10},maxFileSize:{type:Number,default:__app_settings.uploadMaxSize},autoFloating:{type:Boolean,default:!1},obj:{},objId:{},alias:{},asStatis:{type:Boolean,default:!0}},data:function(){return{supported:!1,recording:!1,screening:!1,result:null,preview:null,screenPreview:null,loading:!1,sec:0,size:0,sizeHumman:0,videoSource:null,showRoot:!0}},computed:{showOutput:function(){return!this.recording||"display"!==this.videoSource}},created:function(){this.stopwatchTm=null,this.blob=null,this.supported="function"==typeof window.MediaRecorder&&"function"==typeof window.Blob&&MediaRecorder.isTypeSupported("video/webm")},watch:{videoSource:function(){this.inDisplayRecordMode("display"===this.videoSource)}},destroyed:function(){this.stop(),this.stopwatchTm&&clearInterval(this.stopwatchTm),this.inDisplayRecordMode(!1)},mounted:function(){var t=this;this.stream=null,this.mediaRecorder=null,this.chunks=[],this.capture=this.$refs.capture,this.videoEl=this.capture.video,this.videoSource=this.capture.cameraSelected,this.capture.init(),this.capture.$on("error",(function(e){t.$root.alert(e,{title:"Ошибка камеры или микрофона"})})),this.capture.$on("ready",(function(){})),this.capture.$on("deviceChange",(function(){t.videoSource=t.capture.cameraSelected})),this.capture.$on("stream",(function(e){t.videoSource=t.capture.cameraSelected,t.stream=e})),this.asStatis||(this.$root.$el.appendChild(this.$el),!r.Z.isTouch()&&window.innerWidth>1e3&&this.floating())},methods:{inDisplayRecordMode:function(t){t?document.body.classList.add("record-display"):document.body.classList.remove("record-display")},getCodec:function(){var t=[];"video"===this.type&&(t=['video/mp4; codecs="avc1.640028, mp4a.40.2']);for(var e=0,n=t;e<n.length;e++){var a=n[e];if(MediaRecorder.isTypeSupported(a))return a;error("codec not supported",a)}return this.$root.popupFixErr("Не найден ни один поддерживаемый кодек"),!1},createBlobFromChunks:function(){var t,e="",n=i(this.chunks);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.size>0&&a.type&&(e=a.type)}}catch(t){n.e(t)}finally{n.f()}return new Blob(this.chunks,{type:e})},makePreview:function(){if(!this._isDestroyed){var t=this.createBlobFromChunks();try{this.preview=window.URL.createObjectURL(t)}catch(t){this.$root.popupFixErr(t),error(t)}}},store:function(){var t=this;if(!this._isDestroyed){var e=this.blob||this.chunks.length>0&&this.createBlobFromChunks();if(!e)return this.$root.popupFixErr("Нет данных к загрузке");var n=new FormData;n.append("obj",this.obj),this.objId&&n.append("obj_id",this.objId),this.alias&&n.append("alias",this.alias),n.append("file",e),this.loading=!0,a.V.make("uploadFile",n).then((function(e){t.result=e,t.$emit("success",e),t.close()})).catch((function(e){t.$root.popupFixErr(e)})).always((function(){t.loading=!1}))}},stop:function(){this.mediaRecorder&&"recording"===this.mediaRecorder.state&&this.mediaRecorder.stop(),this.stopwatchTm&&(clearInterval(this.stopwatchTm),this.stopwatchTm=null)},record:function(){var t=this;if(this.recording)this.stop();else{if(!this.stream)return this.$root.popupFixErr("Стрим не получен");var e;this.chunks=[],this.blob=null,this.stopwatchTm&&clearInterval(this.stopwatchTm),this.sec=0,this.size=0,this.sizeHumman="";try{e=new MediaRecorder(this.stream,{})}catch(t){return error(t),void this.$root.popupFixErr("Ваше устройство не поддерживает запрашиваемый формат записи: "+t.message)}e.ondataavailable=function(e){var n=t.size+e.data.size;if(t.maxFileSize>0&&n>=t.maxFileSize)return info("record excellent max filesize",n,t.size),void t.stop();t.size=n,t.chunks.push(e.data)},e.onstop=function(){t.recording=!1,t.makePreview()},e.start(300),this.mediaRecorder=e,this.recording=!0,this.stopwatchTm=setInterval((function(){log("update record (sec, size): ",t.sec,t.size),t.sec+=1,t.sizeHumman=t.size>0?r.Z.bytes(t.size):0,t.sec>=t.maxSec&&t.stop()}),1e3)}},screen:function(){var t=this;if(!this.stream)return this.$root.popupFixErr("Стрим не получен");var e=this.stream.getVideoTracks();if(!e.length)return this.$root.popupFixErr("Вы не дали доступ к камере или экрану");this.blob=null,this.chunks=[],window.ImageCapture&&window.ImageCapture.prototype.grabFrame?this.doScreen().then((function(){t.screening=!0;var n=new ImageCapture(e[0]),a=t.$refs.canvas;t.screenPreview=!0,n.grabFrame().then((function(e){a.getBoundingClientRect();a.width=e.width,a.height=e.height;var n=Math.min(a.width/e.width,a.height/e.height),r=(a.width-e.width*n)/2,i=(a.height-e.height*n)/2;a.getContext("2d").clearRect(0,0,a.width,a.height),a.getContext("2d").drawImage(e,0,0,e.width,e.height,r,i,e.width*n,e.height*n),a.toBlob((function(e){t.screening=!1,t.blob=e}))})).catch((function(e){error(e),t.$root.popupFixErr("Ошибка получения скриншота"),t.screening=!1})).finally((function(){t.showRoot=!0}))})):this.$root.popupFixErr("Ваше устройство не поддерживает скринов (ImageCapture)")},doScreen:function(){var t=this;return new Promise((function(e,n){if("display"!==t.videoSource)return e();t.showRoot=!1,document.body.animate("fadeIn",.7).then((function(){e()}))}))},close:function(){this.$el.remove(),this.$destroy()},videoEventHandler:function(t){this.$root.popupFixErr("Не удалось воспроизвести запись"),error("preview error",t,t.target.error)},openPreview:function(t){if(this.blob){t.target;$.fancybox.open({src:window.URL.createObjectURL(this.blob)})}}}};const c=(0,n(51900).Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showRoot,expression:"showRoot"}],staticClass:"app-recorder border",attrs:{"data-static":!0===t.asStatis,"data-output-hidden":!t.showOutput}},[n("div",{staticClass:"border position-relative",class:{"app-playable":t.showOutput,"animate__animated animate__flash":!t.showOutput}},[n("header",{staticClass:"bg-light text-end d-block p-2 static"},[t.showOutput?t._e():n("strong",{staticClass:"animate__animated animate__flash animate__infinite"},[t._v("\n                идет запись...\n            ")]),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:!t.asStatis,expression:"!asStatis"}],staticClass:"btn-close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.close()}}})]),t._v(" "),n("main",{directives:[{name:"show",rawName:"v-show",value:t.showOutput,expression:"showOutput"}],staticClass:"border",class:{"playable-abs":t.showOutput}},[t.recording?n("i",{staticClass:"fa fa-circle text-danger position-absolute end-0 top-0 m-1 animate__animated animate__flash animate__infinite",staticStyle:{"z-index":"1"}}):t._e(),t._v(" "),n("video-capture",t._b({directives:[{name:"show",rawName:"v-show",value:!t.preview&&!t.screenPreview,expression:"!preview && !screenPreview"}],ref:"capture",staticClass:"videoElement",attrs:{"save-devs":!1,"audio-only":"audio"===t.type}},"video-capture",t.captureOptions||{},!1)),t._v(" "),t.preview?n("video",{staticClass:"abs-stretch bg-dark",attrs:{src:t.preview,controls:"",preload:"auto",loop:""},on:{error:t.videoEventHandler}}):t._e(),t._v(" "),n("canvas",{directives:[{name:"show",rawName:"v-show",value:t.screenPreview,expression:"screenPreview"}],ref:"canvas",staticClass:"abs-stretch cursor-pointer",on:{click:t.openPreview}})],1),t._v(" "),n("footer",{directives:[{name:"show",rawName:"v-show",value:t.supported,expression:"supported"}],staticClass:"static bg-light text-end"},[t.preview||t.screenPreview&&!t.screening?[t.loading?[t._m(0)]:[n("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.preview=null,t.screenPreview=null}}},[n("i",{staticClass:"fa fa-repeat"}),t._v("\n                        ещё раз\n                    ")]),t._v(" "),n("button",{staticClass:"btn btn-success",on:{click:function(e){return t.store()}}},[n("i",{staticClass:"fa fa-upload"}),t._v("\n                        Загрузить\n                    ")])]]:["audio"!==t.type?n("button",{directives:[{name:"show",rawName:"v-show",value:!t.recording,expression:"!recording"}],staticClass:"btn btn-secondary",attrs:{disabled:t.screening},on:{click:function(e){return t.screen()}}},[t.screening?n("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):n("i",{staticClass:"fa fa-image"}),t._v("\n                    Скриншот\n                ")]):t._e(),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:!t.screening,expression:"!screening"}],staticClass:"btn",class:{"btn-secondary":!t.recording,"btn-danger":t.recording,"w-100":t.recording&&!t.showOutput},attrs:{disabled:t.loading},on:{click:function(e){return t.record()}}},[n("i",{staticClass:"fa",class:{"text-danger fa-circle":!t.recording,"fa-stop":t.recording}}),t._v("\n                    "+t._s(t.recording?"Стоп":"Записать")+"\n                    "),t.recording&&t.sec>0?n("span",[t._v(" ("+t._s(t.sec)+" c.)")]):t._e(),t._v(" "),t.recording&&t.size>0&&t.sizeHumman?n("span",[t._v(" "+t._s(t.sizeHumman))]):t._e()])]],2)]),t._v(" "),t.supported?t._e():n("div",{staticClass:"alert alert-danger text-center app-centerred-abs m-0"},[t._v("\n        Ваше устройство не поддерживает запись\n    ")])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-secondary",attrs:{disabled:""}},[n("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                        обработка...\n                    ")])}],!1,null,null,null).exports},47121:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});n(33228);const a={props:{data:{type:Object},tab:{type:String}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("forma",{attrs:{action:"/api/roomSave"}},[n("input",{attrs:{type:"hidden",name:"room_id"},domProps:{value:t.data.id}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"__tab"},domProps:{value:t.tab}}),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[n("strong",[n("i",{staticClass:"fa fa-keyboard-o",attrs:{"aria-hidden":"true"}}),t._v(" В чат могут писать:")])]),t._v(" "),n("div",{},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"chat_access",value:"all",required:"required"},domProps:{checked:"all"===t.data.chat_access}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Все")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",checked:"",name:"chat_access",value:"reg",required:"required"},domProps:{checked:"reg"===t.data.chat_access}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Зарегистрированные")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"chat_access",value:"friends",required:"required"},domProps:{checked:"friends"===t.data.chat_access}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Друзья")])])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[n("strong",[n("i",{staticClass:"fa fa-upload",attrs:{"aria-hidden":"true"}}),t._v(" Кто может загружать изображения:")])]),t._v(" "),n("div",{},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"upload_access",value:"all",required:"required"},domProps:{checked:"all"===t.data.upload_access}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Все")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",checked:"",name:"upload_access",value:"reg",required:"required"},domProps:{checked:"reg"===t.data.upload_access}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Зарегистрированные")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"upload_access",value:"friends",required:"required"},domProps:{checked:"friends"===t.data.upload_access}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Друзья")])])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[n("strong",[n("i",{staticClass:"fa fa-youtube",attrs:{"aria-hidden":"true"}}),t._v(" Кто может включать видеоссылки:")])]),t._v(" "),n("div",{},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"video_access",value:"owner",required:"required"},domProps:{checked:"owner"===t.data.video_access}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Автор")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",checked:"",name:"video_access",value:"moders",required:"required"},domProps:{checked:"moders"===t.data.video_access}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Модераторы")])])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[n("strong",[n("i",{staticClass:"fa fa-volume-up",attrs:{"aria-hidden":"true"}}),t._v(" Кто может загружать звуковые сообщения:")])]),t._v(" "),n("div",{},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"voice_access",value:"all",required:"required"},domProps:{checked:"all"===t.data.voice_access}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Все")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",checked:"",name:"voice_access",value:"reg",required:"required"},domProps:{checked:"reg"===t.data.voice_access}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Зарегистрированные")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"voice_access",value:"friends",required:"required"},domProps:{checked:"friends"===t.data.voice_access}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Друзья")])])])]),t._v(" "),t.global.moder||"all"!==t.data.room_access?n("div",{staticClass:"form-group"},[n("label",[n("strong",{staticClass:"text-danger"},[n("i",{staticClass:"fa fa-exclamation-triangle",attrs:{"data-help":"Вашу трансляцию могут не увидеть, подумайте!","aria-hidden":"true"}}),t._v(" Смотреть трансляцию и читать чат могут:")])]),t._v(" "),n("div",{},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"room_access",value:"all",required:"required"},domProps:{checked:"all"===t.data.room_access}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Все")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",checked:"",name:"room_access",value:"reg",required:"required"},domProps:{checked:"reg"===t.data.room_access}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Зарегистрированные")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"room_access",value:"friends",required:"required"},domProps:{checked:"friends"===t.data.room_access}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Друзья")])])])]):t._e(),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[n("strong",[t._v("Пароль:")])]),t._v(" "),n("input",{staticClass:"form-control",attrs:{type:"text",autocomplete:"off",placeholder:"пароль",name:"password"},domProps:{value:t.data.password}}),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("если нужно защитить чат")])])])}),[],!1,null,null,null).exports},30743:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={props:{data:{type:Object},chat:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("bans",{attrs:{"room-id":t.data.id}})}),[],!1,null,null,null).exports},6183:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(33228);const r={props:{data:{type:Object},tab:{type:String}},data:function(){return{}},created:function(){log(this.data)},mounted:function(){},methods:{openCoupon:function(t){var e=this;this.$root.render(a.Z,{coupon:t}).$on("coupon",(function(t){log("changed",t),t&&e.getParent("room_settings").reload()}))}}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",[t._v("Доступ по купону "),t.data.coupon?n("span",[t._v("(включено!)")]):t._e()]),t._v(" "),t.data.coupon?n("div",{staticClass:"border p-3"},[t._m(0),t._v(" "),t._m(1),n("br"),t._v(" "),n("div",{staticClass:"my-2"},[n("strong",[t._v("\n            "+t._s(t.data.coupon.name)+" — "),n("span",{staticClass:"text-danger"},[t._v(t._s(t.data.coupon.price)+" "),n("rub")],1)])]),t._v(" "),n("i",{staticClass:"fa fa-key"}),t._v(" Секретный код:"),n("br"),t._v(" "),n("code",[t._v(t._s(t.data.coupon.coupon))]),t._v(" "),n("br"),t._v(" "),t.data.coupon.text?n("div",{},[n("em",{},[t._v(t._s(t.data.coupon.text))])]):t._e(),t._v(" "),n("div",{staticClass:"text-end"},[n("action",{staticClass:"btn btn-danger",attrs:{action:"/api/chatCash",data:{coupon_id:t.data.coupon.id,room:t.data.alias,remove:1}},on:{success:function(e){t.getParent("room_settings").reload()}}},[n("i",{staticClass:"fa fa-remove"}),t._v(" Убрать купон\n            ")])],1)]):n("div",[t._v("\n\n        Вы можете ограничить доступ в чат по купону."),n("br"),t._v("\n        Пользователи, которые зайдут в ваш чат, должны будут приобрести купон и ввести его код\n\n        "),n("div",{staticClass:"my-2 text-end"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.openCoupon()}}},[t._v("Создать купон "),n("rub")],1)]),t._v(" "),n("div",{staticClass:"row"},t._l(t.data.coupons,(function(e){return n("div",{staticClass:"col-12 col-sm-6 col-md-4 mb-3"},[n("div",{staticClass:"position-relative"},[n("img",{staticClass:"w-100",attrs:{src:e.logo}}),t._v(" "),n("div",{staticClass:"position-absolute top-0 start-0 bg-light p-1 m-2 border"},[n("strong",{staticClass:"text-danger"},[t._v(t._s(e.price)+" "),n("rub")],1)])]),t._v(" "),n("div",[n("action",{staticClass:"btn btn-success w-100",attrs:{action:"/api/chatCash",data:{coupon_id:e.id,room:t.data.alias,accept:1}},on:{success:function(e){t.getParent("room_settings").reload()}}},[n("i",{staticClass:"fa fa-check"}),t._v(" Установить")]),t._v(" "),n("button",{staticClass:"btn btn-secondary w-100",attrs:{type:"button"},on:{click:function(n){return t.openCoupon(e)}}},[n("i",{staticClass:"fa fa-pencil"}),t._v(" Изменить")]),t._v(" "),n("action",{staticClass:"btn btn-danger w-100",attrs:{action:"/api/action/delete",data:{obj:"offer",id:e.id,action:"delete"}},on:{success:function(e){t.getParent("room_settings").reload()}}},[n("i",{staticClass:"fa fa-remove"}),t._v(" Удалить")]),t._v(" "),n("div",{staticClass:"border text-truncate px-2 py-1"},[t._v(t._s(e.name))])],1)])})),0)])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-2"},[n("em",[t._v("Включен режим доступа по купонам. Пользователи должны ввести код купона, прежде чем им будет доступен просмотр трансляици и доступ в чат")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("strong",{staticClass:"text-danger animate__animated animate__flash"},[n("i",{staticClass:"fa fa-exclamation",attrs:{"aria-hidden":"true"}}),t._v("\n            Активный купон\n        ")])}],!1,null,null,null).exports},33228:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a={props:{coupon:{type:Object}},data:function(){return{changed:!1}},created:function(){},mounted:function(){var t=this;this.$refs.modal.$on("close",(function(){t.$emit("coupon",t.changed)}))},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{ref:"modal",attrs:{title:t.coupon?t.coupon.name:"Создать купон",save:t.coupon?"Изменить":"Создать"}},[n("forma",{attrs:{action:"/api/save"},on:{success:function(e){t.changed=!0,t.$refs.modal.close()}}},[n("input",{attrs:{type:"hidden",name:"type",value:"coupon"}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"obj",value:"offer"}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"obj_id"},domProps:{value:t.coupon?t.coupon.id:0}}),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Название купона")]),t._v(" "),n("input",{staticClass:"form-control",attrs:{type:"text",name:"name",autofocus:"",required:"required",placeholder:"Заголовок купона"},domProps:{value:t.coupon?t.coupon.name:""}}),t._v(" "),n("small",{staticClass:"form-text text-muted"},[t._v("Пример: доступ в приватный чат")])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{"data-title":"Выберите дату и время окончания купона, если нужно"}},[n("i",{staticClass:"fa fa-question-circle",attrs:{"aria-hidden":"true"}}),t._v(" Дата окончания")]),t._v(" "),n("input",{staticClass:"app-datepicker form-control",attrs:{type:"text",name:"expire_at",value:"",placeholder:"бессрочный","data-end-date":"","data-start-date":"new Date()",autocomplete:"off"},domProps:{value:t.coupon?t.coupon.expire_at:""}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"row g-1 align-items-center"},[n("div",{staticClass:"col-auto"},[t._v("\n                    Цена\n                ")]),t._v(" "),n("div",{staticClass:"col-4 col-md-3"},[n("input",{staticClass:"form-control",attrs:{type:"number",name:"price",required:""},domProps:{value:t.coupon?t.coupon.price:""}})]),t._v(" "),n("div",{staticClass:"col-auto"},[n("rub")],1)])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Описание")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{type:"text",name:"text",placeholder:"подробное описание для пользователей"}},[t._v(t._s(t.coupon?t.coupon.text:""))]),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("например, что ожидает пользователя, который купит этот купон")])]),t._v(" "),n("uploader",{attrs:{image:t.coupon?t.coupon.logo:"",obj:"offer","obj-id":t.coupon?t.coupon.id:0},on:{upload:function(e){t.changed=!0}}})],1)],1)}),[],!1,null,null,null).exports},58120:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(5465);const r={name:"donate_progress_helper",props:{ownerId:{type:Number},donationSettings:{}},data:function(){return{donationSettings$:this.donationSettings,summ:"",total:0,donatSumm:0,genSum$:0,testing:!1}},created:function(){this.reset(1)},computed:{on:function(){return this.donationSettings$&&this.donationSettings$._showProgress},minSumm:function(){}},watch:{summ:function(){this.genSumm(),this.reset()}},mounted:function(){},methods:{test:function(){this.donatSumm=parseInt(this.genSum$),this.total+=parseInt(this.donatSumm),this.genSumm()},genSumm:function(){this.genSum$=a.Z.percent(this.summ,a.Z.rand(5,30),!0)},reset:function(t){t&&(this.summ=this.donationSettings$&&this.donationSettings$.summ_need_enabled?this.donationSettings$.summ_need:""),this.total=this.global.user?this.global.user.money_total:0,this.donatSumm=0},saved:function(t){this.$emit("change",t.donationsSettings),this.donationSettings$=t.donationsSettings}}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Собрать сумму",footer:!1}},[n("forma",{attrs:{action:"/api/donateProgressToggle"},on:{success:t.saved}},[n("input",{attrs:{type:"hidden",name:"owner_id"},domProps:{value:t.ownerId}}),t._v("\n\n        Вы можете включить сбор необходимой суммы. Пользователи будут видеть требуемую сумму и специальный виджет сбора\n\n        "),n("div",{staticClass:"text-center my-3"},[n("strong",[t._v("Введите требуемую сумму")]),n("br"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.summ,expression:"summ"}],staticClass:"form-control form-control-lg text-center my-1",attrs:{name:"summ",min:t.global.user?t.global.user.money_total:0,type:"number",autocomplete:"off",autofocus:""},domProps:{value:t.summ},on:{input:function(e){e.target.composing||(t.summ=e.target.value)}}})]),t._v(" "),n("donate-progress",{key:t.total+t.summ,ref:"progress",staticClass:"my-3",attrs:{timeout:100,"summ-need":t.summ,"summ-total":t.total,summ:t.donatSumm}}),t._v(" "),n("div",{staticClass:"text-center mb-3"},[n("span",{staticClass:"app-link",on:{click:function(e){t.testing=!t.testing}}},[t._v("протестировать")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.testing,expression:"testing"}],staticClass:"mb-3 mt-1"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-auto"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.genSum$,expression:"genSum$"}],staticClass:"form-control d-inline-block",staticStyle:{width:"100px"},attrs:{type:"number",autocomplete:"off"},domProps:{value:t.genSum$},on:{input:function(e){e.target.composing||(t.genSum$=e.target.value)}}}),t._v(" "),n("rub")],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.total>=t.summ},on:{click:t.test}},[t._v("Тест")]),t._v(" "),n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.reset(1)}}},[n("i",{staticClass:"fa fa-remove"}),t._v("\n                        Сброс\n                    ")])])])]),t._v(" "),n("div",{staticClass:"text-end"},[t.on?n("button",{staticClass:"btn btn-dark",attrs:{type:"submit",name:"off",value:"1"}},[n("i",{staticClass:"fa fa-stop"}),t._v("\n                Остановить\n            ")]):n("button",{staticClass:"btn btn-primary",attrs:{type:"submit",name:"on",value:"1"}},[n("i",{staticClass:"fa fa-play"}),t._v("\n                Запустить\n            ")]),t._v(" "),t.on?n("button",{staticClass:"btn btn-primary",attrs:{type:"submit",name:"save",value:"1"}},[n("i",{staticClass:"fa fa-check"}),t._v("\n                Сохранить\n            ")]):t._e()])],1)],1)}),[],!1,null,null,null).exports},31756:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var a=n(89279),r={},i=n(69247);i.keys().forEach((function(t,e){var n=t.match(/[a-z0-9]+/);n&&(r[n+"_donation"]=i(t).default)}));const s={props:{data:{type:Object},features:{type:Object},tab:{type:String}},data:function(){return{currentTab:null}},components:r,created:function(){this.currentTab=this.features.tab||""},mounted:function(){},methods:{activateDonation:function(t,e){var n=this;a.V.make("/api/action/donationEnable",{opt:{checked:t.target.checked?1:0},type:e.alias,action:"donationEnable",obj:"chat_room"}).then((function(){})).catch((function(e){t.target.checked=!t.target.checked,n.$root.popupFixErr(e)}))}}};const o=(0,n(51900).Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"accordion",attrs:{id:"accordionDonations"}},[t._l(t.data.donationsAll,(function(e){return n("div",{key:e.alias,staticClass:"card border-bottom-0"},[n("div",{staticClass:"card-header pr-0 pl-2 cursor-pointer p-0"},[n("div",{staticClass:"row align-items-center g-0"},[n("div",{staticClass:"col cursor-pointer p-3",attrs:{"data-bs-toggle":"collapse","data-bs-target":"#collapse_"+e.alias}},[n("img",{attrs:{src:e.logo,height:"26px"}}),t._v(" "+t._s(e.name)+"\n                    ")]),t._v(" "),n("div",{staticClass:"col-auto"},[n("div",{staticClass:"checkbox checkbox-slider--b-flat d-inline-block",attrs:{"data-title":"Активировать \\ Деактивировать"}},[n("label",[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.activate&&e.instance},on:{change:function(n){return t.activateDonation(n,e)}}}),t._v(" "),n("span")])])])])]),t._v(" "),n("div",{staticClass:"collapse",class:{show:t.currentTab===e.alias},attrs:{id:"collapse_"+e.alias,"data-bs-parent":"#accordionDonations"}},[n("div",{staticClass:"card-body position-relative"},[n(e.alias+"_donation",{tag:"component",attrs:{donation:e}}),t._v(" "),e.instance?n("div",{staticClass:"text-right",staticStyle:{position:"absolute",right:"0",top:"0"}},[n("action",{staticClass:"btn btn-sm btn-danger",attrs:{action:"/api/action/donationReset",confirm:"Удалить настройки и данные?",data:{action:"donationReset",type:e.alias,obj:"chat_room"},"data-confirm":"Удалить настройки и данные?","data-title":"Сбросить настройки"},on:{success:function(n){t.getParent("room_settings").reload({tab:e.alias})}}},[n("i",{staticClass:"fa fa-remove"})])],1):t._e()],1)])])})),t._v(" "),n("div",{staticClass:"card"},[t._m(0),t._v(" "),n("div",{staticClass:"collapse",attrs:{id:"collapse_settings","data-bs-parent":"#accordionDonations"}},[n("div",{staticClass:"card-body"},[n("forma",{attrs:{action:"/api/donateSettingsSave"}},[n("div",{staticClass:"text-end my-3"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-save"}),t._v(" Сохранить настройки")])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Надпись на кнопке")]),t._v(" "),n("input",{staticClass:"form-control",attrs:{type:"text",name:"button",placeholder:"Название на кнопке"},domProps:{value:t.data.donationSettings.button}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Цель сбора донатов:")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{type:"text",name:"text",placeholder:"подробное описание для пользователей"}},[t._v(t._s(t.data.donationSettings.text))]),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("наприме, на новую машину")])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check form-check-inline",attrs:{"data-title":"Собираемая сумма будет показана зрителям","data-bs-toggle":"collapse",href:"#collapseDonate_summ_need"}},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"summ_need_enabled",value:"1"},domProps:{checked:t.data.donationSettings.summ_need_enabled}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Нужно собрать необходимую сумму")])])]),t._v(" "),n("div",{staticClass:"form-group collapse",class:{show:t.data.donationSettings.summ_need_enabled},attrs:{id:"collapseDonate_summ_need"}},[n("div",{staticClass:"row g-1 align-items-center"},[n("div",{staticClass:"col-auto"},[t._v("\n                                    Необходиммая сумма:\n                                ")]),t._v(" "),n("div",{staticClass:"col-auto"},[n("input",{staticClass:"form-control",staticStyle:{width:"120px"},attrs:{type:"number",name:"summ_need"},domProps:{value:t.data.donationSettings.summ_need}})]),t._v(" "),n("div",{staticClass:"col-auto"},[n("i",{staticClass:"fa fa-rub",attrs:{"aria-hidden":"true"}})])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"row g-1 align-items-center"},[n("div",{staticClass:"col-auto"},[n("i",{staticClass:"fa fa-question-circle",attrs:{"data-help":"сумма, которая будет выводится в окне с донатом по умолчанию. Пользователь может ее увеличить или уменьшить"}}),t._v("\n                                    Сумма по умолчанию\n                                ")]),t._v(" "),n("div",{staticClass:"col-auto"},[n("input",{staticClass:"form-control",staticStyle:{width:"120px"},attrs:{type:"number",name:"price",required:""},domProps:{value:t.data.donationSettings.price}})]),t._v(" "),n("div",{staticClass:"col-auto"},[n("rub")],1)])]),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"row g-1 align-items-center"},[n("div",{staticClass:"col-auto"},[n("i",{staticClass:"fa fa-question-circle",attrs:{"data-help":"установите 0, если не нужно"}}),t._v("\n                                    Минимальная сумма с комментарием:\n                                ")]),t._v(" "),n("div",{staticClass:"col-auto"},[n("input",{staticClass:"form-control",staticStyle:{width:"120px"},attrs:{type:"number",name:"price_min_comment"},domProps:{value:t.data.donationSettings.price_min_comment}})]),t._v(" "),n("div",{staticClass:"col-auto"},[n("i",{staticClass:"fa fa-rub",attrs:{"aria-hidden":"true"}})])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check form-check-inline",attrs:{"data-title":"Комментарий от пользователя будет озвучен","data-bs-toggle":"collapse",href:"#collapseDonate_voice"}},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"donate_voice",value:"1"},domProps:{checked:t.data.donationSettings.donate_voice}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Синтез речи")])])]),t._v(" "),n("div",{staticClass:"form-group collapse",class:{show:t.data.donationSettings.donate_voice},attrs:{id:"collapseDonate_voice"}},[n("div",{staticClass:"row g-1 align-items-center"},[n("div",{staticClass:"col-auto"},[n("i",{staticClass:"fa fa-question-circle",attrs:{"data-help":"установите 0, если не нужно"}}),t._v("\n                                    Минимальная сумма для синтеза:\n                                ")]),t._v(" "),n("div",{staticClass:"col-auto"},[n("input",{staticClass:"form-control",staticStyle:{width:"120px"},attrs:{type:"number",name:"price_min_voice"},domProps:{value:t.data.donationSettings.price_min_voice}})]),t._v(" "),n("div",{staticClass:"col-auto"},[n("i",{staticClass:"fa fa-rub",attrs:{"aria-hidden":"true"}})])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("uploader",{attrs:{alias:"donate_button","preview-size":"medium",label:"Картинка на кнопке","max-width":"200",obj:"user","obj-id":t.global.uid,image:t.data.donationSettings.icon||""}})],1),t._v(" "),n("div",{staticClass:"text-end my-3"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-save"}),t._v(" Сохранить настройки")])])])],1)])])],2)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header pr-0 pl-2 cursor-pointer",attrs:{"data-bs-toggle":"collapse","data-bs-target":"#collapse_settings"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("i",{staticClass:"fa fa-cog"}),t._v(" Общие настройки")])])])}],!1,null,null,null).exports},3509:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={name:"donationsalerts_donation",props:{donation:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{auth:function(){this.getParent("room_settings").reload({tab:this.donation.alias})}}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),t.donation.instance?n("div",{staticClass:"my-3"},[t.donation.avatar?n("img",{attrs:{width:"32px",src:t.donation.avatar}}):t._e(),t._v(" "),n("a",{attrs:{href:"https://www.donationalerts.com/r/"+t.donation.code,target:"_blank"}},[t._v(t._s(t.donation.name))]),t._v(" "),t.donation.code&&t.donation.name?t._e():n("div",{staticClass:"mt-2"},[n("i",{staticClass:"fa fa-exclamation-triangle text-danger"}),t._v(" "),n("span",{staticClass:"text-danger"},[t._v("не удалось узнать ваше имя акаунта в donationalerts")])])]):t._e(),t._v(" "),n("social-auth",{attrs:{callback:"",type:t.donation.alias,service:"donation",label:t.donation.instance?"Обновить":"Интегрировать"},on:{success:t.auth}})],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mb-2"},[n("small",[t._v("Вы можете привязать свой акаунт donationalerts для приема пожертвований. Оповещения будут приходить на вашу страницу с трансляцией")])])}],!1,null,null,null).exports},86864:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={name:"qiwi_donation",props:{donation:{type:Object}},data:function(){return{contractId:this.donation.contractId}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("forma",{attrs:{action:t.donation.setupUrl},on:{success:function(e){t.contractId=e.contractId}}},[t.contractId?n("strong",{staticClass:"text-success"},[n("i",{staticClass:"fa fa-check"}),t._v(" токен введен ("+t._s(t.contractId)+")")]):n("span",[t._v("Введите QIWI-токен")]),t._v(" "),n("div",{staticClass:"input-group"},[n("input",{staticClass:"form-control",attrs:{autocomplete:"off",type:"text",placeholder:"токен",name:"token",value:""}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"submit"}},[t.contractId?n("span",[n("i",{staticClass:"fa fa-refresh"}),t._v(" обновить ")]):n("span",[t._v("ввести")])])])]),t._v(" "),n("captcha")],1)],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ol",[n("li",[n("a",{attrs:{target:"_blank",href:"https://qiwi.com"}},[t._v("Войти в ваш QIWI-кошелек")])]),t._v(" "),n("li",[t._v("\n            Перейти по ссылке\n            "),n("a",{staticClass:"yellow",attrs:{href:"https://qiwi.com/api",target:"_blank"}},[t._v("https://qiwi.com/api")])]),t._v(" "),n("li",[t._v("\n            Нажать кнопку «Выпустить новый токен»\n        ")]),t._v(" "),n("li",[t._v("\n            Далее нужно выбрать следующие разрешения для токена\n            "),n("ul",[n("li",[n("strong",[t._v("Запрос информации о профиле кошелька")])])])]),t._v(" "),n("li",[t._v("\n            Полученный токен нужно вставить в форму и нажать «Далее»\n        ")])])}],!1,null,null,null).exports},40645:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(89279);const r={name:"self_donation",props:{donation:{type:Object}},data:function(){return{moneyOutRequestSended:!1}},computed:{instance:function(){return this.donation.instance&&this.donation},sellerCreated:function(){return this.global.user&&this.global.user.seller}},created:function(){},mounted:function(){},methods:{createDonate:function(){var t=this;a.V.make("save",{type:"donate",obj:"offer",name:"Пожертвование"}).then((function(t){})).catch((function(e){t.$root.popupFixErr(e)}))},update:function(t){var e=this.getParent("room_settings");e&&e.reload({tab:this.donation.alias})}}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.sellerCreated?[t.instance?t.instance.offer&&t.instance.offer.payable?[t._m(0)]:[t._m(1),t._v(" "),n("forma",{attrs:{action:"/api/moneyOutRequest"},on:{success:function(e){t.moneyOutRequestSended=!0}}},[n("input",{attrs:{type:"hidden",name:"seller_id"},domProps:{value:t.global.user.seller.id}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"type",value:""}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"type",value:""}}),t._v(" "),n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{disabled:t.moneyOutRequestSended}},[n("i",{staticClass:"fa fa-send"}),t._v(" Отправить заявку")])])]:[n("forma",{attrs:{action:"/api/save"},on:{success:function(e){return t.update()}}},[n("input",{attrs:{type:"hidden",name:"type",value:"donate"}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"obj",value:"offer"}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"name",value:"Пожертвование"}}),t._v(" "),n("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[n("rub"),t._v(" Создать донат\n                ")],1)])]]:[t._v("\n\n\n        Для того, чтобы принимать пожертвования через сайт вам нужно стать продавцом\n\n\n\n        "),n("forma",{attrs:{action:"/api/seller_create"},on:{success:function(e){return t.update()}}},[n("div",{staticClass:"row align-items-center my-3"},[n("div",{staticClass:"col-auto"},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",checked:"checked",name:"agree",value:"1"}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Я согласен с "),n("a",{attrs:{target:"_blank",href:"/page/rules"}},[t._v("условиями")])])])]),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("\n                        Стать продавцом\n                    ")])])])])]],2)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("strong",{staticClass:"text-success"},[n("i",{staticClass:"fa fa-check"}),t._v(" Прием донатов через сайт включен")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert alert-secondary"},[n("p",[n("i",{staticClass:"fa fa-check"}),t._v(" "),n("strong",[t._v("Почти все готово!")])]),t._v("\n                Для того, чтобы выводить ливачи в реальные рубли вам необходимо создать заявку на вывод."),n("br"),t._v("\n                Как только администратор подтвердит, вы сможете полноценно использовать донаты через сайт\n            ")])}],!1,null,null,null).exports},79459:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(62386);const r={props:{data:{type:Object},chat:{type:Object},tab:{type:String}},data:function(){return{links:this.data.links||[],linksCount:(this.data.links||[]).length}},components:{links:a.Z},created:function(){},mounted:function(){},methods:{remove:function(t){this.links.splice(t,1)},add:function(){this.links.push({id:this.idRand(),_autofocus:!0})}}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("i",{staticClass:"fa fa-info-circle"}),t._v("\n    Вы можете добавить любые ссылки на ваши мессенджеры, соц. сети и другие ваши личные проекты.\n    Ссылки появятся в вашей трансляции, в описании\n\n    "),n("a",{staticClass:"dotted",attrs:{"data-bs-toggle":"collapse",href:"#links_example"}},[t._v("Примеры ссылок")]),t._v(" "),t._m(0),t._v(" "),n("links",{staticClass:"my-3",attrs:{links:t.links}}),t._v(" "),t.linksCount>0?n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{"data-bs-toggle":"collapse",href:"#links_manage"}},[n("i",{staticClass:"fa fa-edit"}),t._v("\n        Изменить\n    ")]):t._e(),t._v(" "),n("forma",{staticClass:"mt-2",class:{collapse:t.linksCount>0},attrs:{id:"links_manage",action:"/api/roomSave"},on:{success:function(e){t.links=e.links,t.$emit("save",e)}}},[n("input",{attrs:{type:"hidden",name:"room_id"},domProps:{value:t.data.id}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"__tab"},domProps:{value:t.tab}}),t._v(" "),t._l(t.links,(function(e,a){return n("div",{key:e.id,staticClass:"my-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.id,expression:"link.id"}],attrs:{type:"hidden",name:"links["+a+"][id]"},domProps:{value:e.id},on:{input:function(n){n.target.composing||t.$set(e,"id",n.target.value)}}}),t._v(" "),n("div",{staticClass:"row align-items-end"},[n("div",{staticClass:"col"},[t._v("\n                    Ссылка (URL)"),n("br"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"link.url"}],staticClass:"form-control",attrs:{autocomplete:"off",autofocus:e._autofocus,name:"links["+a+"][url]"},domProps:{value:e.url},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.add(e))},input:function(n){n.target.composing||t.$set(e,"url",n.target.value)}}})]),t._v(" "),n("div",{staticClass:"col"},[t._v("\n                    Подпись"),n("br"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"link.name"}],staticClass:"form-control",attrs:{autocomplete:"off",name:"links["+a+"][name]"},domProps:{value:e.name},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.add(e))},input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}})]),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-danger",attrs:{type:"button",tabindex:"-1","data-help":"удалить ссылку"},on:{click:function(e){return t.remove(a)}}},[n("i",{staticClass:"fa fa-remove"})])])])])})),t._v(" "),n("div",{staticClass:"text-end my-2"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.add}},[n("i",{staticClass:"fa fa-plus"}),t._v(" добавить ссылку")])])],2)],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"collapse border p-2",attrs:{id:"links_example"}},[n("div",{staticClass:"text-end"},[n("small",[n("i",{staticClass:"fa fa-external-link"}),t._v(" "),n("a",{attrs:{href:"https://msng.link/",target:"_blank"}},[t._v("Генератор ссылок для месенджеров")])])]),t._v(" "),n("div",{staticClass:"mb-2"},[n("img",{staticStyle:{height:"32px"},attrs:{src:"/i/socials/viber.png"}}),t._v(" Viber:"),n("br"),t._v(" "),n("code",[t._v("viber://chat?number=+79500336688")])]),t._v(" "),n("div",{staticClass:"mb-2"},[n("img",{staticStyle:{height:"32px"},attrs:{src:"/i/socials/whatsapp.png"}}),t._v(" Whatsapp:"),n("br"),t._v(" "),n("code",[t._v("whatsapp://send/?phone=79500336688&text&type=phone_number&app_absent=0")])]),t._v(" "),n("div",[n("img",{staticStyle:{height:"24px"},attrs:{src:"/i/socials/telega.png"}}),t._v(" Telegram:"),n("br"),t._v(" "),n("code",[t._v("https://t.me/livacha")])])])}],!1,null,null,null).exports},79346:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={props:{data:{type:Object},tab:{type:String}},data:function(){return{}},created:function(){log(this.data)},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("forma",{attrs:{action:"/api/roomSave"}},[n("input",{attrs:{type:"hidden",name:"room_id"},domProps:{value:t.data.id}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"__tab"},domProps:{value:t.tab}}),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Название трансляции")]),t._v(" "),t.data.name_?n("div",[n("strong",{staticClass:"text-warning"},[n("i",{staticClass:"fa fa-hourglass"}),t._v(" ожидает проверки")]),t._v(": "),n("i",[t._v(t._s(t.data.name_))])]):t._e(),t._v(" "),n("input",{staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Название чата",required:"required"},domProps:{value:t.data.name_||t.data.name}}),t._v(" "),n("small",[n("strong",{staticClass:"text-danger"},[t._v("Запрещены маты, оскорбления.")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Пожалуйста, будьте корректны в подборе названия")])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Подробное описание")]),t._v(" "),t.data.text_?n("div",[n("strong",{staticClass:"text-warning"},[n("i",{staticClass:"fa fa-hourglass"}),t._v(" ожидает проверки")]),t._v(": "),n("i",[t._v(t._s(t.data.text_))])]):t._e(),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"text",placeholder:"подробное описание"}},[t._v(t._s(t.data.text_||t.data.text))]),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("текст внутри трансляции и на вашей странице")])]),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{},[n("div",{staticClass:"form-check form-switch"},[n("input",{staticClass:"form-check-input",attrs:{name:"adult",value:"1",type:"checkbox",id:"flexSwitchCheckDefault"},domProps:{checked:t.data.adult}}),t._v(" "),n("label",{staticClass:"form-check-label",attrs:{for:"flexSwitchCheckDefault"}},[t._v("Трансляция для взрослых")])]),t._v(" "),n("small",{staticClass:"d-none d-md-inline"},[n("span",{staticClass:"text-muted"},[t._v("Если в вашей трансляции будут присутствовать материалы для взрослых (например эротика), установите этот переключатель.")]),t._v(" "),n("strong",[t._v("Порнография, демонстрирование половых органов запрещена")])])])])])}),[],!1,null,null,null).exports},77046:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={props:{data:{type:Object},chat:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("moders",{attrs:{"room-id":t.data.id,chat:t.chat}})}),[],!1,null,null,null).exports},68170:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={props:{data:{type:Object},chat:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{reload:function(t){log(t),this.$refs.dataLoader.update(t)}}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("data-loader",{ref:"dataLoader",attrs:{list:!1,"load-func":"externalSettings","load-params":{room_id:t.data.id}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return[n("table",{staticClass:"table table-bordered table-hover"},[n("tbody",[n("tr",[n("td",[n("strong",[n("i",{staticClass:"bi bi-question-circle",attrs:{"data-title":"Полный URL стрима"}}),t._v("\n                        Url:\n                    ")])]),t._v(" "),n("td",[n("div",{staticClass:"input-group"},[n("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.connection.uri}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("copy",{attrs:{text:a.connection.uri}})],1)])])]),t._v(" "),n("tr",[n("td",[n("strong",[n("i",{staticClass:"bi bi-question-circle",attrs:{"data-title":"Название стрима, ключ потока"}}),t._v("\n                        Stream name(key):\n                    ")])]),t._v(" "),n("td",[n("div",{staticClass:"input-group"},[n("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.connection.name}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("copy",{attrs:{text:a.connection.name}})],1)])])]),t._v(" "),n("tr",[n("td",[n("strong",[n("i",{staticClass:"bi bi-question-circle",attrs:{"data-title":"Секретный ключ для трансляции через windows приложение"}}),t._v("\n                        Windows key:")]),t._v(" "),n("br"),t._v(" "),n("a",{attrs:{href:"/upload/livacha_streamer_win_x86_last.exe"}},[t._v("Скачать программу")])]),t._v(" "),n("td",[n("div",{staticClass:"input-group"},[n("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.key}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("copy",{attrs:{text:a.key}})],1)])])])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"form-row align-items-center"},[n("div",{staticClass:"col-auto"},[t._v("Сервер:")]),t._v(" "),n("div",{staticClass:"col-auto"},[n("select",{staticClass:"server_change",attrs:{name:"server_id"},on:{change:function(e){return t.reload({server_id:e.target.value})}}},[n("option",{attrs:{value:""}},[t._v("Авто")]),t._v(" "),t._l(a.servers,(function(e){return n("option",{key:e.id,domProps:{selected:a.server&&a.server.id===e.id,value:e.id}},[t._v(t._s(e.name))])}))],2)])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("a",{staticClass:"text-primary",attrs:{href:"https://www.livacha.com/obs_profile?server_id="+(a.server?a.server.id:""),target:"_blank"}},[n("i",{staticClass:"fa fa-download",attrs:{"aria-hidden":"true"}}),t._v(" Скачать настройки(профиль) для OBS Studio")]),t._v(" "),n("br"),t._v(" "),n("em",[t._v("Скачайте архив, распакуйте, перейдите в OBS, Профиль -> Импорт, укажите распакованую папку")])])]}}])}),t._v(" "),t._m(0)],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-group"},[t._v("\n        Ссылки на программы для трансляций:"),n("br"),t._v(" "),n("i",{staticClass:"fa fa-check"}),t._v(" "),n("a",{attrs:{href:"https://obsproject.com/ru/download",target:"_blank"}},[n("strong",[t._v("OBS Studio (бесплатно, Windows, Linux, Mac)")])]),n("br"),t._v(" "),n("a",{attrs:{href:"https://www.xsplit.com/ru/",target:"_blank"}},[t._v("XSplit (платно, Windows)")])])}],!1,null,null,null).exports},34523:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={props:{data:{type:Object},tab:{type:String}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("forma",{attrs:{action:"/api/roomSave"}},[n("input",{attrs:{type:"hidden",name:"room_id"},domProps:{value:t.data.id}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"__tab"},domProps:{value:t.tab}}),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"banned_not_read_chat",value:"1"},domProps:{checked:t.data.banned_not_read_chat}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Забаненные не могут читать чат")])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"banned_not_view_stream",value:"1"},domProps:{checked:t.data.banned_not_view_stream}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Забаненные не могут смотреть трансляцию")])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check",attrs:{"data-bs-toggle":"collapse",href:"#collapseNewbie_deny"}},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"newbie_deny",value:"1"},domProps:{checked:t.data.newbie_deny}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Запретить писать новичкам")])]),t._v(" "),n("div",{staticClass:"collapse",class:{show:t.data.newbie_deny},attrs:{id:"collapseNewbie_deny"}},[n("i",[t._v("новый пользователь должен быть зарегестрирован не менее")]),t._v(" "),n("input",{staticClass:"form-control d-inline",staticStyle:{width:"80px"},attrs:{size:"3",min:t.global.newbie_deny_range[0],max:t.global.newbie_deny_range[1],type:"number",autocomplete:"off",name:"newbie_deny_time"},domProps:{value:t.data.newbie_deny}}),t._v(" час(ов)\n        ")])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check collapsed",attrs:{"data-bs-toggle":"collapse",href:"#collapseStop_list","aria-expanded":"false"}},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"stoplist_enable",value:"1"},domProps:{checked:t.data.stoplist_enable}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Стоп-лист")])]),t._v(" "),n("div",{staticClass:"collapse",class:{show:t.data.stoplist_enable},attrs:{id:"collapseStop_list"}},[n("small",{staticClass:"text-muted"},[n("label",[t._v("введите список слов, которые запрещены в вашем чате (через пробел)")])]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"stoplist"}},[t._v(t._s(t.data.stoplist))]),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("\n                * одно слово — от 3 до 20 символов кириллицы или латиницы"),n("br"),t._v("\n                * РеГИсТР "),n("strong",[t._v("НЕ")]),t._v(" учитывается, пишите все в одном регистре"),n("br"),t._v("\n                * Придумывайте емкие слова, не склоняйте, ищите корень"),n("br"),t._v("\n                * "),n("strong",[t._v("Дура")]),t._v("к, "),n("strong",[t._v("дура")]),t._v("ки, "),n("strong",[t._v("дура")]),t._v(",\n                "),n("strong",[t._v("дура")]),t._v("коватый — заменяется одним — "),n("strong",[t._v("дура")])])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check",attrs:{"data-bs-toggle":"collapse",href:"#collapseUnban","aria-expanded":"true"}},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"unban_cancel",value:"1"},domProps:{checked:0===t.data.unban_time}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Запретить авторазбан")])])]),t._v(" "),n("div",{staticClass:"collapse",class:{show:0!==t.data.unban_time},attrs:{id:"collapseUnban"}},[n("label",{staticClass:"form-check collapsed",attrs:{"data-bs-toggle":"collapse",href:"#collapseUnban_time","aria-expanded":"false"}},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"unban_change",value:"1"},domProps:{checked:t.data.unban_change}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Установить время разбана (сейчас "),n("strong",[t._v(t._s(t.data.unban_time>0?t.data.unban_time:t.global.autoban_def))]),t._v(" ч.)")])]),t._v(" "),n("div",{staticClass:"collapse",class:{show:t.data.unban_change},attrs:{id:"collapseUnban_time"}},[n("i",[t._v("удалять баны через (от "+t._s(t.global.autoban_range[0])+" до "+t._s(t.global.autoban_range[1])+")")]),t._v(" "),n("input",{attrs:{size:"3",min:t.global.autoban_range[0],max:t.global.autoban_range[1],type:"number",autocomplete:"off",name:"unban_time",value:""}}),t._v(" час(ов)\n            ")])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"ban_mute",value:"1"},domProps:{checked:t.data.ban_mute}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("\n                Тихий бан\n                "),n("i",{staticClass:"fa fa-question-circle",attrs:{"data-title":"Не уведомлять собеседника о бане (кроме смотрящих)"}})])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check",attrs:{"data-bs-toggle":"collapse"}},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"conf",value:"1"},domProps:{checked:t.data.conf}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("\n                Разрешить конференцию\n                "),n("i",{staticClass:"fa fa-question-circle",attrs:{"data-title":"К вам сможет присоедениться собеседник"}})])])])])}),[],!1,null,null,null).exports},20261:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={props:{data:{type:Object},chat:{type:Object}},data:function(){return{}},created:function(){},mounted:function(){},methods:{onStreamOff:function(t){-1===t?this.$root.popupFixErr("Трансляция не запущена"):!1===t&&this.$root.popupFixErr("Ошибка остановки трансляции")},onRoomRemove:function(){this.getParent("room_settings").close()}}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",[t._v("Принудительно завершить трансляцию")]),t._v(" "),n("forma",{attrs:{action:"/api/action/streamOff",confirm:"Вы уверены, завершить трансляцию?"},on:{success:t.onStreamOff}},[n("input",{attrs:{type:"hidden",name:"room_id"},domProps:{value:t.data.id}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"obj",value:"chat_room"}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"action",value:"streamOff"}}),t._v(" "),n("button",{staticClass:"btn btn-secondary"},[n("i",{staticClass:"fa fa-stop"}),t._v("\n            Завершить трансляцию\n        ")])]),t._v(" "),n("br"),t._v(" "),n("p",[t._v("Удалить трансляцию. Удалятся все настройки, донаты, модераторы и др.")]),t._v(" "),n("forma",{attrs:{action:"/api/action/roomRemove",confirm:"Вы уверены, УДАЛИТЬ трансляцию?"},on:{success:t.onRoomRemove}},[n("input",{attrs:{type:"hidden",name:"room_id"},domProps:{value:t.data.id}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"obj",value:"chat_room"}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"action",value:"roomRemove"}}),t._v(" "),n("button",{staticClass:"btn btn-danger"},[n("i",{staticClass:"fa fa-remove"}),t._v("\n            Удалить мою трансляцию\n        ")])])],1)}),[],!1,null,null,null).exports},83526:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={props:{data:{type:Object},tab:{type:String}},data:function(){return{}},created:function(){log(this.data)},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row mb-3 flex-column flex-md-row "},[n("div",{staticClass:"col-auto"},[n("uploader",{attrs:{alias:"cover","preview-size":"medium","max-width":"200",label:"",obj:"chat_room","obj-id":t.data.id,image:t.data.cover}})],1),t._v(" "),t._m(0)]),t._v(" "),n("div",{staticClass:"row flex-column flex-md-row"},[n("div",{staticClass:"col-auto"},[n("uploader",{attrs:{alias:"background","preview-size":"medium","max-width":"200",label:"",obj:"chat_room","obj-id":t.data.id,image:t.data.backgroundImage}})],1),t._v(" "),n("div",{staticClass:"col"},[n("forma",{attrs:{action:"/api/roomSaveTheme"}},[n("strong",[t._v("Фон страницы трансляции")]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"my-2 p-2 border"},[n("input",{attrs:{type:"hidden",name:"room_id"},domProps:{value:t.data.id}}),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"background",value:"none"},domProps:{checked:!t.data.background||"none"===t.data.background}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Убрать")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"background",value:"stretch"},domProps:{checked:!t.data.background||"stretch"===t.data.background}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Растянуть")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"background",value:"center"},domProps:{checked:!t.data.background||"center"===t.data.background}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("По центру")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"background",value:"tile"},domProps:{checked:!t.data.background||"tile"===t.data.background}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Плитка")])])]),t._v("\n\n                Фон будет отображаться на странице вашей трансляции (у вас и у зрителей)\n\n\n            ")])],1)])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col"},[n("strong",[t._v("Обложка трансляции")]),t._v(" "),n("br"),t._v("\n            Если вы загрузите изображение, то в списке трансляций будет отображаться это изображение вместо текущего кадра\n        ")])}],!1,null,null,null).exports},25951:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(18516);const r={props:{data:{type:Object},tab:{type:String}},data:function(){return{}},components:{"vote-admin":a.Z},created:function(){},mounted:function(){},methods:{}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("vote-admin",{attrs:{root_comp:"div","room-id":t.data.id}})],1)}),[],!1,null,null,null).exports},73897:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={name:"",props:{prop:{type:String}},data:function(){return{list:null}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("data-loader",{attrs:{loadFunc:"getMyBlacklist"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.list&&t.list.length>0?n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-striped table-hover"},[n("tbody",t._l(t.list,(function(e){return n("tr",{key:e.id,staticClass:"text-nowrap"},[n("td",[n("action",{staticClass:"dotted",attrs:{tag:"span",action:"action/UnBlocking",data:{action:"UnBlocking",obj:"user",id:t.global.uid,uid:e.uid}},on:{success:function(n){return t.list.unset(e.id)}}},[n("i",{staticClass:"fa fa-trash"}),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("удалить")])])],1),t._v(" "),n("td",[n("user",{attrs:{user:e.user}})],1),t._v(" "),n("td",[n("small",{staticClass:"text-muted"},[t._v(t._s(e.date))])])])})),0)])]):n("div",{staticClass:"alert alert-secondary text-center"},[n("i",{staticClass:"fa fa-ug"}),t._v("\n        все чисто "),n("i",{staticClass:"fa fa-smile-o"})])]}}]),model:{value:t.list,callback:function(e){t.list=e},expression:"list"}})}),[],!1,null,null,null).exports},3344:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={name:"",props:{sended:{type:Boolean,default:!1}},data:function(){return{sended$:this.sended,complete:!1}},created:function(){},computed:{saveText:function(){return this.complete?"":this.sended$?"Подтвердить":"Сменить"}},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Сменить e-mail",save:t.saveText}},[t.sended$?n("forma",{key:"code",attrs:{action:"/api/confirmEmail",once:!0},on:{success:function(e){t.complete=!0}}},[t.sended?t._e():n("div",{staticClass:"alert alert-success text-center"},[n("i",{staticClass:"fa fa-check"}),t._v("\n            Вам был выслан код\n        ")]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("\n                Введите код подтверждения:\n            ")]),t._v(" "),n("input",{staticClass:"form-control",attrs:{type:"text",autofocus:"",autocomplete:"off",name:"code",required:"required"}}),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("либо просто перейдите по ссылке, которая содержится в письме")])])]):n("forma",{attrs:{action:"/api/emailChange"},on:{success:function(e){t.sended$=!0}}},[n("div",{attrs:{cla1ss:"form-group"}},[n("label",[t._v("Введите новый e-mail:")]),t._v(" "),n("input",{staticClass:"form-control",attrs:{type:"email",autofocus:"",name:"email",required:"required"}})]),t._v(" "),n("strong",[t._v("Это не ЛОГИН")]),t._v(". На этот e-mail будут приходить уведомления.\n\n    ")])],1)}),[],!1,null,null,null).exports},51129:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(4837);const r={name:"",props:{prop:{type:String}},data:function(){return{passReset:!1,hideForm:!1}},created:function(){},components:{reset_pass:a.Z},mounted:function(){},methods:{}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Сменить пароль",save:"Сменить"}},[t.passReset?n("reset_pass",[n("div",{staticClass:"text-end"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-paper-plane"}),t._v("\n                напомнить\n            ")])])]):t._e(),t._v(" "),n("forma",{ref:"form",attrs:{action:"/api/passChange",reset:""}},[n("div",{staticClass:"form-group"},[n("label",[t._v("Введите текущий пароль ("),n("span",{staticClass:"dotted",on:{click:function(e){t.passReset=!t.passReset}}},[t._v("напомнить?")]),t._v(")")]),t._v(" "),n("input",{staticClass:"form-control",attrs:{type:"password",name:"pass_current",required:"required",value:""}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Введите новый пароль")]),t._v(" "),n("input",{staticClass:"form-control",attrs:{type:"password",name:"pass",required:"required",value:""}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Введите ещё раз")]),t._v(" "),n("input",{staticClass:"form-control",attrs:{type:"password",name:"pass2",required:"required",value:""}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("captcha",{attrs:{ver:2}})],1)])],1)}),[],!1,null,null,null).exports},34419:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var a=n(51129),r=n(3344);const i={name:"",props:{prop:{type:String}},data:function(){return{user:null,aliasShowForce:!1}},created:function(){},mounted:function(){},methods:{clickAlias:function(){var t=this;this.aliasShowForce=!this.aliasShowForce,this.aliasShowForce&&this.$nextTick((function(){t.$refs.alias.focus(),t.$refs.alias.insertAtCaret("")}))},changePassOpen:function(){this.render(a.default)},changeEmail:function(t){this.render(r.default,t||{})}}};const s=(0,n(51900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("data-loader",{attrs:{loadFunc:"getMyProfile"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("p",[n("i",{staticClass:"fa fa-key",attrs:{"aria-hidden":"true"}}),t._v(" Ваш логин для входа:\n            "),t.user.login?n("strong",[t._v("\n                "+t._s(t.user.login)+"\n            ")]):t.user.social_network?n("strong",[t._v("\n                через соц. сеть  ("+t._s(t.user.social_network)+") "),n("a",{attrs:{target:"_blank",href:t.user.social_profile}},[t._v(t._s(t.user.social_profile))])]):t._e()]),t._v(" "),n("p",[n("i",{staticClass:"fa fa-lock"}),t._v(" Ваш пароль:\n            "),t.user.login?n("strong",[n("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:function(e){return t.changePassOpen()}}},[n("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" сменить пароль")])]):n("strong",[n("code",[t._v("без пароля")])])]),t._v(" "),n("div",{staticClass:"mb-3"},[n("i",{staticClass:"fa fa-envelope-o",attrs:{"aria-hidden":"true"}}),t._v(" E-mail:\n            "),t.user.email?n("strong",[t._v(t._s(t.user.email))]):t.user.email_unverified?n("span",[n("strong",[t._v(t._s(t.user.email_unverified))]),t._v(" "),n("code",{staticClass:"text-danger"},[n("strong",[n("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" не проверен")])])]):n("strong",[n("code",{staticClass:"text-danger text-nowrap"},[t._v("не установлен")])]),t._v(" "),n("small",{staticClass:"dotted text-nowrap",on:{click:function(e){return t.changeEmail()}}},[t._v("сменить e-mail")]),t._v(" "),!t.user.verified_email&&t.user.email_unverified?n("div",{staticClass:"my-2"},[n("p",{staticClass:"mt-3"},[n("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){return t.changeEmail({sended:!0})}}},[n("i",{staticClass:"fa fa-code"}),t._v("\n                        Ввести код\n                    ")]),t._v(" "),n("action",{staticClass:"btn btn-danger btn-sm",attrs:{action:"action/sendVerifyEmail",once:!0,data:{obj:"user",action:"sendVerifyEmail"}}},[n("i",{staticClass:"fa fa-envelope-o"}),t._v("\n                        Выслать проверочный код\n                    ")])],1)]):t._e()]),t._v(" "),n("p",{staticClass:"text-break"},[n("i",{staticClass:"fa fa-flag-checkered",attrs:{"aria-hidden":"true"}}),t._v(" Адрес вашей публичной страницы:\n            "),n("a",{directives:[{name:"user",rawName:"v-user",value:t.user.id,expression:"user.id"}],attrs:{target:"_blank",href:t.user.link}},[t._v(t._s(t.$root.uri)+"/user/")]),n("a",{staticClass:"dotted text-danger",attrs:{href:"#","data-title":"изменить адрес"},on:{click:function(e){return e.preventDefault(),t.clickAlias(e)}}},[n("strong",[t._v(t._s(t.user.alias||t.user.id))])])]),t._v(" "),n("forma",{attrs:{action:"/api/save"}},[n("input",{attrs:{type:"hidden",name:"id"},domProps:{value:t.user.id}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"obj",value:"user"}}),t._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"row g-0"},[n("div",{staticClass:"col-auto"},[n("uploader",{ref:"uploader",attrs:{"max-width":"50",obj:"user","obj-id":t.user.id,alias:"avatar","preview-size":"crop",image:t.user.avatar,cropper:{params:{obj:"user",obj_id:t.user.id},minW:t.global.cropper.minW,minH:t.global.cropper.minH},"max-files":1}}),t._v(" "),n("div",[n("small",{staticClass:"dotted",on:{click:function(e){return t.$refs.uploader.open()}}},[t._v("сменить")])])],1),t._v(" "),n("div",{staticClass:"col form-floating"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{name:"name",placeholder:"Ваша имя или кличка",id:"nameInput",autocomplete:"off"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}}),t._v(" "),n("label",{attrs:{for:"nameInput"}},[t._v("Имя или кличка")])])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Немного о себе")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"text",placeholder:"Немного о себе",id:"textInput"}},[t._v(t._s(t.user.text))]),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("чем увлекаетесь, жизненные принципы и т.д.")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.user.alias||t.aliasShowForce,expression:"!user.alias || aliasShowForce"}],staticClass:"form-group was-validated position-relative"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.alias,expression:"user.alias"}],ref:"alias",staticClass:"form-control",attrs:{placeholder:"придумайте уникальный алрес",pattern:"[0-9a-z_]{3,30}",type:"text",name:"alias",required:"",autocomplete:"off",maxlength:"30"},domProps:{value:t.user.alias},on:{input:function(e){e.target.composing||t.$set(t.user,"alias",e.target.value)}}}),t._v(" "),n("div",{staticClass:"invalid-tooltip"},[t._v("латиница, цифры, _")])]),t._v(" "),n("div",{staticClass:"text-center mb-4"},[n("uploader",{attrs:{obj:"user","obj-id":t.user.id,alias:"cover",image:t.user.cover.avaiable?t.user.cover.medium:""}}),t._v(" "),n("br"),t._v("фото профиля\n            ")],1),t._v(" "),n("div",{staticClass:"form-group "},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[t._v("Сохранить")])])])]}}]),model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1)}),[],!1,null,null,null).exports},13320:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={name:"",props:{prop:{type:String}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("about",{attrs:{read:!1}},[n("div",{staticClass:"my-2"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[t._v("Сохранить")])])])],1)}),[],!1,null,null,null).exports},50091:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={name:"",props:{prop:{type:String}},data:function(){return{settings:null}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("data-loader",{attrs:{loadFunc:"getMyPrivateSettings"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("forma",{attrs:{action:"/api/settingsSave"},on:{success:function(t){return e.update()}}},[n("table",{staticClass:"table  table-responsive table-striped table-hover"},[n("tbody",[n("tr",[n("td",[t._v("Кто может писать сообщения:")]),t._v(" "),n("td",{staticClass:"px-0"},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.access_mess,expression:"settings.access_mess"}],staticClass:"form-check-input",attrs:{type:"radio",name:"access_mess",value:"all"},domProps:{checked:t._q(t.settings.access_mess,"all")},on:{change:function(e){return t.$set(t.settings,"access_mess","all")}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Все")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.access_mess,expression:"settings.access_mess"}],staticClass:"form-check-input",attrs:{type:"radio",name:"access_mess",value:"friends"},domProps:{checked:t._q(t.settings.access_mess,"friends")},on:{change:function(e){return t.$set(t.settings,"access_mess","friends")}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Друзья")])])])]),t._v(" "),n("tr",[n("td",[t._v("Кто может оставлять комментарии:")]),t._v(" "),n("td",{staticClass:"px-0"},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.access_comment,expression:"settings.access_comment"}],staticClass:"form-check-input",attrs:{type:"radio",name:"access_comment",value:"all"},domProps:{checked:t._q(t.settings.access_comment,"all")},on:{change:function(e){return t.$set(t.settings,"access_comment","all")}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Все")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.access_comment,expression:"settings.access_comment"}],staticClass:"form-check-input",attrs:{type:"radio",name:"access_comment",value:"friends"},domProps:{checked:t._q(t.settings.access_comment,"friends")},on:{change:function(e){return t.$set(t.settings,"access_comment","friends")}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Друзья")])])])]),t._v(" "),n("tr",[n("td",[t._v("Кто может смотреть историю чата:")]),t._v(" "),n("td",{staticClass:"px-0"},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.access_history,expression:"settings.access_history"}],staticClass:"form-check-input",attrs:{type:"radio",name:"access_history",value:"all"},domProps:{checked:t._q(t.settings.access_history,"all")},on:{change:function(e){return t.$set(t.settings,"access_history","all")}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Все")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.access_history,expression:"settings.access_history"}],staticClass:"form-check-input",attrs:{type:"radio",name:"access_history",value:"friends"},domProps:{checked:t._q(t.settings.access_history,"friends")},on:{change:function(e){return t.$set(t.settings,"access_history","friends")}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Друзья")])])])]),t._v(" "),n("tr",[n("td",[t._v("Кто может смотреть кадры трансляций:")]),t._v(" "),n("td",{staticClass:"px-0"},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.access_screens,expression:"settings.access_screens"}],staticClass:"form-check-input",attrs:{type:"radio",name:"access_screens",value:"all"},domProps:{checked:t._q(t.settings.access_screens,"all")},on:{change:function(e){return t.$set(t.settings,"access_screens","all")}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Все")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.access_screens,expression:"settings.access_screens"}],staticClass:"form-check-input",attrs:{type:"radio",name:"access_screens",value:"friends"},domProps:{checked:t._q(t.settings.access_screens,"friends")},on:{change:function(e){return t.$set(t.settings,"access_screens","friends")}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Друзья")])])])]),t._v(" "),n("tr",[n("td",[t._v("Кто может смотреть записи трансляций:")]),t._v(" "),n("td",{staticClass:"px-0"},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.access_records,expression:"settings.access_records"}],staticClass:"form-check-input",attrs:{type:"radio",name:"access_records",value:"all"},domProps:{checked:t._q(t.settings.access_records,"all")},on:{change:function(e){return t.$set(t.settings,"access_records","all")}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Все")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.access_records,expression:"settings.access_records"}],staticClass:"form-check-input",attrs:{type:"radio",name:"access_records",value:"friends"},domProps:{checked:t._q(t.settings.access_records,"friends")},on:{change:function(e){return t.$set(t.settings,"access_records","friends")}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Друзья")])])])]),t._v(" "),t._e()])]),t._v(" "),n("div",{staticClass:"my-2"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[t._v("Сохранить")])])])]}}]),model:{value:t.settings,callback:function(e){t.settings=e},expression:"settings"}})}),[],!1,null,null,null).exports},14434:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={name:"",props:{prop:{type:String}},data:function(){return{rnd:"",loaded$:!1,enter:!1}},destroyed:function(){this.$root.ws.off("message",this.messageWsListener)},created:function(){this.update(),this.$root.ws.on("message",this.messageWsListener)},mounted:function(){},methods:{messageWsListener:function(t,e,n){switch(t){case"qr":this.enter=!0}},loaded:function(){this.loaded$=!0},update:function(){this.enter=!1,this.loaded$=!1,this.rnd=(new Date).getTime()}}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.enter?n("div",{staticClass:"alert alert-success text-center"},[t._v("Отлично!")]):n("img",{staticClass:"mw-100",attrs:{src:"/qrcode?"+t.rnd},on:{load:t.loaded}}),t._v(" "),n("div",{staticClass:"my-3"},[t.loaded$?n("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.update()}}},[n("i",{staticClass:"fa fa-refresh"}),t._v(" обновить код\n        ")]):n("div",{staticClass:"spinner-border",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[t._v("Loading...")])])])])}),[],!1,null,null,null).exports},86495:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});n(89279);const a={name:"",props:{value:{}},data:function(){return{user:null}},created:function(){this.user=this.global.user},computed:{},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.user?n("forma",{attrs:{action:"/api/profileRemove",confirm:"Вы точно уверенны, удалить профиль?"}},[n("p",[t._v("Вы можете удалить свой публичный профиль")]),t._v(" "),t.user.login?n("div",{staticClass:"form-group"},[n("strong",[t._v("Введите текущий пароль:")]),t._v(" "),n("input",{staticClass:"form-control",attrs:{name:"pass",required:""}})]):t._e(),t._v(" "),n("div",{staticClass:"form-group"},[n("strong",[t._v("Причина удаления (не обязательно)")]),t._v(" "),n("input",{staticClass:"form-control",attrs:{name:"reason"}}),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("любой комментарий администратору")])]),t._v(" "),n("div",{staticClass:"form-group"},[n("captcha",{attrs:{ver:2}})],1),t._v(" "),n("div",{staticClass:"form-group text-end"},[n("button",{staticClass:"btn btn-danger"},[n("i",{staticClass:"fa fa-remove"}),t._v("\n\n                Удалить\n            ")])])]):t._e()],1)}),[],!1,null,null,null).exports},27537:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(89279);const r={name:"",props:{value:{}},data:function(){return{settings:null,limit:0,offset:0,endOfData:!1,loading:!1}},created:function(){this.load(),this.value.fixedY=!0},computed:{items:function(){return this.settings&&this.settings.list instanceof Array?this.settings.list.map((function(t){var e=new UAParser(t.user_agent);return t.browser=e.getBrowser(),t.device=e.getDevice(),t})):[]}},mounted:function(){},methods:{loadMore:function(){this.endOfData||(this.offset++,this.load({offset:this.offset}))},load:function(t){var e=this;t||(t={}),this.loading=!0,a.V.make("getMySecurity",t).then((function(n){e.endOfData=0===n.list.length||!t.offset&&n.list.length<n.limit,e.limit=n.limit,t.offset?e.settings.list.pushItems(n.list):e.settings=n})).catch((function(t){e.$root.popupFixErr(t)})).always((function(){e.loading=!1}))}}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"h-100 overflow-auto"},[t.settings?n("forma",{ref:"form",attrs:{action:"/api/securitySave"}},[n("input",{attrs:{type:"hidden",name:"obj",value:"user"}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"id"},domProps:{value:t.global.uid}}),t._v(" "),n("label",{staticClass:"form-check form-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.not_logout_asn,expression:"settings.not_logout_asn"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"not_logout_asn",value:"1"},domProps:{checked:Array.isArray(t.settings.not_logout_asn)?t._i(t.settings.not_logout_asn,"1")>-1:t.settings.not_logout_asn},on:{change:[function(e){var n=t.settings.not_logout_asn,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.settings,"not_logout_asn",n.concat(["1"])):i>-1&&t.$set(t.settings,"not_logout_asn",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.settings,"not_logout_asn",r)},function(e){return t.$refs.form.submit()}]}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Не выходить, когда меняется провайдер")])])]):t._e(),t._v(" "),t.settings&&t.settings.list.length>0?n("div",[n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-striped table-hover"},[t._m(0),t._v(" "),n("tbody",t._l(t.items,(function(e){return n("tr",{key:e.id,staticClass:"text-nowrap",class:{"table-danger":e.fail}},[n("td",[e.flag?n("img",{staticStyle:{"max-width":"30px"},attrs:{src:e.flag.flag_image}}):t._e()]),t._v(" "),n("td",[t._v("\n                            "+t._s(e.date)+"\n                            "),e.fail?n("div",{staticClass:"text-danger",attrs:{"data-title":"Кто-то пытался войти с не правильным паролем"}},[n("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" "),n("strong",[t._v("ошибка входа!")])]):t._e()]),t._v(" "),n("td",[t._v("\n                            "+t._s(e.asn)+"\n                        ")]),t._v(" "),n("td",[t._v("\n                            "+t._s(e.ip)+"\n                        ")]),t._v(" "),n("td",[n("small",{staticClass:"text-muted",attrs:{title:e.user_agent}},[e.device.type?n("strong",[t._v("\n                                    "+t._s(e.device.type)+"\n                                    "+t._s(e.device.vendor)+"\n                                    "+t._s(e.device.model)+"\n                                ")]):t._e(),t._v("\n                                "+t._s(e.browser.name)+"\n                                "+t._s(e.browser.major)+"\n                            ")])])])})),0)])]),t._v(" "),n("load-more",{directives:[{name:"show",rawName:"v-show",value:!t.endOfData,expression:"!endOfData"}],staticClass:"my-3",attrs:{loading:t.loading},on:{click:t.loadMore}})],1):n("div",{staticClass:"alert alert-secondary text-center"},[n("i",{staticClass:"fa fa-ug"}),t._v("\n        нет авторизаций\n    ")])],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th"),t._v(" "),n("th",[t._v("Время")]),t._v(" "),n("th",[t._v("ISP")]),t._v(" "),n("th",[t._v("Адрес")]),t._v(" "),n("th",[t._v("Браузер")])])])}],!1,null,null,null).exports},92931:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={name:"",props:{prop:{type:String}},data:function(){return{settings:null}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("data-loader",{attrs:{loadFunc:"getMySettings"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("forma",{attrs:{action:"/api/mySettingsSave"},on:{success:function(t){return e.update()}}},[n("table",{staticClass:"table  table-responsive table-striped table-hover"},[n("tbody",[n("tr",[n("td",[t._v("Включить экспериментальные функции:")]),t._v(" "),n("td",{staticClass:"px-0"},[n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.experemental,expression:"settings.experemental"}],staticClass:"form-check-input",attrs:{type:"radio",name:"experemental",value:"1"},domProps:{checked:t._q(t.settings.experemental,"1")},on:{change:function(e){return t.$set(t.settings,"experemental","1")}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Включить")])]),t._v(" "),n("label",{staticClass:"form-check form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.experemental,expression:"settings.experemental"}],staticClass:"form-check-input",attrs:{type:"radio",name:"experemental",value:"0"},domProps:{checked:t._q(t.settings.experemental,"0")},on:{change:function(e){return t.$set(t.settings,"experemental","0")}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Отключить")])])])])])]),t._v(" "),n("div",{staticClass:"my-2"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[t._v("Сохранить")])])])]}}]),model:{value:t.settings,callback:function(e){t.settings=e},expression:"settings"}})}),[],!1,null,null,null).exports},10109:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={name:"",props:{prop:{type:String}},data:function(){return{subscribers:null}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("data-loader",{attrs:{loadFunc:"getMySubscribers"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.subscribers&&t.subscribers.length>0?n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-striped table-hover"},[n("tbody",t._l(t.subscribers,(function(e){return n("tr",{key:e.id,staticClass:"text-nowrap"},[n("td",[n("action",{staticClass:"dotted",attrs:{tag:"span",action:"action/remove",data:{action:"remove",obj:"subscriber",id:e.id}},on:{success:function(n){return t.subscribers.unset(e.id)}}},[n("i",{staticClass:"fa fa-trash"}),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("отписка")])])],1),t._v(" "),n("td",[n("user",{attrs:{user:e.owner}})],1),t._v(" "),n("td",[n("small",{staticClass:"text-muted"},[t._v(t._s(e.date))])])])})),0)])]):n("div",{staticClass:"alert alert-secondary text-center"},[n("i",{staticClass:"fa fa-ug"}),t._v("\n        нет подписок\n    ")])]}}]),model:{value:t.subscribers,callback:function(e){t.subscribers=e},expression:"subscribers"}})}),[],!1,null,null,null).exports},34222:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={name:"home",props:{value:{type:Object}},data:function(){return{}},created:function(){this.$root.updateMe()},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"text-center lh-1"},[n("div",[n("strong",{staticClass:"text-success",staticStyle:{"font-size":"40px"},attrs:{"data-title":"Доступно к выводу"}},[n("rub",{attrs:{money:t.global.user.money}})],1)]),t._v(" "),t._m(0)]),t._v(" "),t.global.user.money_draft?n("div",{staticClass:"text-center mt-2",staticStyle:{"font-size":"20px"}},[t._v("Заморожено "),n("rub",{attrs:{"data-title":"Заморожено",money:t.global.user.money_draft}})],1):t._e()])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("small",{staticClass:"text-muted"},[t._v("\n            Доступно к выводу\n        ")])])}],!1,null,null,null).exports},97693:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(89279);const r={name:"money_out",props:{value:{type:Object}},data:function(){return{outInfo:{account:"",amount:0,method:""},calculating:!1,calculated:null,successOut:!1,sellerInfo:null,tab:"out",methodDefault:null,accountDefault:null,balans:0}},created:function(){var t=this;this.balans=this.global.user.money,this.outInfo.amount=this.balans,this.$watch("outInfo",(function(){t.calculated=null}),{deep:!0}),this.loadInfo()},computed:{methodCurrent:function(){var t=this;return this.outInfo.method?this.sellerInfo.methods.find((function(e,n,a){return e.alias===t.outInfo.method})):null},methodDefaultCurrent:function(){var t=this;return this.methodDefault?this.sellerInfo.methods.find((function(e,n,a){return e.alias===t.methodDefault})):null}},mounted:function(){},methods:{calculate:function(){var t=this;this.calculating=!0,this.calculated=null,a.V.make("checkOut",this.outInfo).then((function(e){t.calculated=e})).catch((function(e){t.$root.popupFixErr(e)})).always((function(){t.calculating=!1}))},loadInfo:function(){var t=this;a.V.make("getMySellerInfo",{}).then((function(e){t.sellerInfo=e,t.outInfo.account=t.sellerInfo.accountDefault||"",t.outInfo.method=t.sellerInfo.methodDefault?t.sellerInfo.methodDefault.alias:"",t.methodDefault=t.sellerInfo.methodDefault?t.sellerInfo.methodDefault.alias:"",t.accountDefault=t.sellerInfo.accountDefault,t.outInfo.amount&&t.outInfo.account&&t.outInfo.method&&t.calculate()})).catch((function(e){t.$root.popupFixErr(e)}))},success:function(){this.successOut=!0},error:function(){}}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"btn-group my-3",attrs:{role:"group"}},[n("button",{staticClass:"btn btn-secondary",class:{active:"out"===t.tab},attrs:{type:"button"},on:{click:function(e){t.tab="out"}}},[t._v("Вывод")]),t._v(" "),n("button",{staticClass:"btn btn-secondary",class:{active:"method"===t.tab},attrs:{type:"button"},on:{click:function(e){t.tab="method"}}},[t._v("Способ вывода")])]),t._v(" "),"out"===t.tab?[t.balans>0?n("forma",{key:t.tab,staticClass:"col-sm-6 col-mg-4",attrs:{action:"/api/moneyOut"},on:{success:t.success,error:t.error}},[n("loader",{directives:[{name:"show",rawName:"v-show",value:!t.sellerInfo,expression:"!sellerInfo"}],attrs:{inline:""}}),t._v(" "),t.sellerInfo?n("div",{directives:[{name:"show",rawName:"v-show",value:!t.successOut,expression:"!successOut"}]},[n("div",{staticClass:"form-group"},[n("label",[t._v("Способ:")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.outInfo.method,expression:"outInfo.method"}],attrs:{name:"method",required:"",disabled:t.calculating},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.outInfo,"method",e.target.multiple?n:n[0])},function(e){t.outInfo.account=""}]}},[n("option",{attrs:{value:""}},[t._v("Выбрать...")]),t._v(" "),t._l(t.sellerInfo.methods,(function(e){return n("option",{key:e.id,domProps:{value:e.alias}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])}))],2)]),t._v(" "),n("div",{staticClass:"form-group"},[n("strong",[t._v("Сколько перечислить:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.outInfo.amount,expression:"outInfo.amount"}],staticClass:"form-control",attrs:{name:"amount",autocomplete:"off",type:"number",required:"",disabled:t.calculating},domProps:{value:t.outInfo.amount},on:{input:function(e){e.target.composing||t.$set(t.outInfo,"amount",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("strong",[t._v("Куда:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.outInfo.account,expression:"outInfo.account"}],staticClass:"form-control",attrs:{disabled:t.calculating,autocomplete:"card"===t.outInfo.method&&"cc-number",pattern:t.methodCurrent?t.methodCurrent.input_regexp:"",required:"required",name:"account",placeholder:t.methodCurrent?t.methodCurrent.input_title:"Введите номер счета"},domProps:{value:t.outInfo.account},on:{input:function(e){e.target.composing||t.$set(t.outInfo,"account",e.target.value)}}}),t._v(" "),t.methodCurrent?n("small",{staticClass:"text-danger"},[t._v(t._s(t.methodCurrent.input_desc))]):t._e()]),t._v(" "),n("captcha"),t._v(" "),t.calculated||t.calculating?n("div",{staticClass:"form-group border p-2"},[t.calculating?[n("div",{staticClass:"spinner-border spinner-border-sm text-secondary",attrs:{role:"status"}},[n("span",{staticClass:"visually-hidden"},[t._v("Loading...")])]),t._v("\n                        рассчет...\n                    ")]:t._e(),t._v(" "),t.calculated?[n("i",{staticClass:"fa fa-check text-success"}),t._v(" С учетом комиссии:\n                        "),n("strong",{staticClass:"text-danger"},[t._v(t._s(t.calculated.amount)+" "),n("rub")],1)]:t._e()],2):t._e(),t._v(" "),n("div",{staticClass:"form-group text-end"},[t.sellerInfo.methodDefault&&t.sellerInfo.methodDefault.alias===t.outInfo.method?t._e():n("label",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"default",checked:"",value:"yes"}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Сделать основным")])]),t._v(" "),t.calculated?n("button",{staticClass:"btn btn-danger",attrs:{type:"submit",disabled:t.calculating}},[n("i",{staticClass:"fa fa-check"}),t._v("\n                        Перевести\n                    ")]):n("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:t.calculating},on:{click:function(e){return t.calculate()}}},[n("i",{staticClass:"fa fa-percent",attrs:{"aria-hidden":"true"}}),t._v("\n                        Рассчитать\n                    ")])])],1):t._e()],1):n("div",{staticClass:"alert alert-secondary text-center"},[t._v("К сожалению, вам нечего выводить")])]:"method"===t.tab&&t.sellerInfo?n("forma",{key:t.tab,attrs:{action:"/api/defaultOut"}},[n("div",{staticClass:"form-group"},[n("label",[t._v("Способ:")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.methodDefault,expression:"methodDefault"}],attrs:{name:"method",required:""},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.methodDefault=e.target.multiple?n:n[0]},function(e){t.accountDefault=""}]}},[n("option",{attrs:{value:""}},[t._v("Выбрать...")]),t._v(" "),t._l(t.sellerInfo.methods,(function(e){return n("option",{key:e.id,domProps:{value:e.alias}},[t._v("\n                    "+t._s(e.name)+"\n                ")])}))],2)]),t._v(" "),n("div",{staticClass:"form-group"},[n("strong",[t._v("Номер счета:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountDefault,expression:"accountDefault"}],staticClass:"form-control",attrs:{autocomplete:"card"===t.methodDefault&&"cc-number",pattern:t.methodDefaultCurrent?t.methodDefaultCurrent.input_regexp:"",required:"required",name:"account",placeholder:t.methodDefaultCurrent?t.methodDefaultCurrent.input_title:"Введите номер счета"},domProps:{value:t.accountDefault},on:{input:function(e){e.target.composing||(t.accountDefault=e.target.value)}}}),t._v(" "),t.methodDefaultCurrent?n("small",{staticClass:"text-danger"},[t._v(t._s(t.methodDefaultCurrent.input_desc))]):t._e()]),t._v(" "),n("div",{staticClass:"form-group"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[t._v("Сменить")])])]):t._e()],2)}),[],!1,null,null,null).exports},21646:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const a={name:"transaction",props:{value:{},params:{}},data:function(){return{items:[],params$:this.params||{}}},computed:{showOwner:function(){return this.params$.all},transactions:function(){return this.items}},created:function(){},mounted:function(){},methods:{}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("data-loader",{attrs:{"load-func":"getTransactions","load-params":t.params$,scroller:!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t.transactions&&t.transactions.length?n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("#")]),t._v(" "),n("th",[t._v("Дата")]),t._v(" "),n("th",[t._v("Сумма")]),t._v(" "),t.showOwner?n("th",[t._v("Владелец")]):t._e(),t._v(" "),n("th",[t._v("Операция")]),t._v(" "),n("th",[t._v("Назначение")])])]),t._v(" "),n("tbody",t._l(t.transactions,(function(e){return n("tr",{key:e.id,staticClass:"text-nowrap"},[n("td",[n("small",[t._v(t._s(e.id))])]),t._v(" "),n("td",[e.trashed?n("i",{staticClass:"fa fa-exclamation-triangle text-danger",attrs:{"data-title":e.error||"Ошибка транзакции. Обратитесь к администрации"}}):t._e(),t._v(" "),n("small",{staticClass:"text-muted"},[t._v(t._s(e.date))])]),t._v(" "),n("td",["plus"===e.type?n("i",{staticClass:"fa fa-plus text-success"}):t._e(),t._v(" "),"minus"===e.type?n("i",{staticClass:"fa fa-minus text-danger"}):t._e(),t._v(" "),n("rub",{attrs:{money:e.summ,"data-title":"Сумма списания"}}),t._v(" "),"out"===e.tag&&e.summ_gw?n("div",[n("small",{staticClass:"text-muted"},[t._v("+"),n("rub",{attrs:{money:e.summ_gw,"data-title":"Сумма зачисления на ваш счет"}})],1)]):t._e()],1),t._v(" "),t.showOwner?n("td",[n("div",{staticStyle:{"max-width":"200px"}},[n("user",{attrs:{user:e.owner}})],1)]):t._e(),t._v(" "),n("td",[e.freeze?n("i",{staticClass:"fa fa-clock-o",attrs:{"data-title":"Деньги пока заморожены"+(e.freeze_duration?", они окажутся у вас на балансе через "+e.freeze_duration+" час(а)(ов)":"")}}):t._e(),t._v(" "),"donate"===e.tag?[n("i",{staticClass:"fa fa-gift text-primary"}),t._v("\n                        получен донат\n                    ")]:"order"===e.tag?[t._v("\n                        продажа "),n("strong",[t._v(t._s(e.offerName))])]:"out"===e.tag?[n("div",[!e.trashed&&e.cash?n("div",[e.out_success?[n("i",{staticClass:"fa fa-check text-success",attrs:{"data-title":"Выплата совершена"}}),t._v(" "),n("strong",[t._v("перевод выполнен")])]:[e.outed_last_at?n("div",{staticClass:"text-danger"},[n("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" "),n("strong",[t._v(t._s(e.out_error||"Ошибка  вывода. Обратитесь к администрации"))])]):[n("div",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","data-title":"Ожидание выплаты"}},[n("span",{staticClass:"sr-only"},[t._v("Loading...")])]),t._v(" "),n("em",[t._v("ожидание выплаты...")])]]],2):t._e(),t._v(" "),n("i",{staticClass:"fa fa-sign-out"}),t._v("\n                            "+t._s(e.cash?"вывод":"списание")+"\n                            "),e.cash?n("strong",[t._v("\n                                "+t._s(e.cash.name)+"\n                            ")]):t._e()])]:"pay_order"===e.tag?[e.offer&&"donate"===e.offer.type?[n("i",{staticClass:"fa fa-gift text-primary"}),t._v("\n                            подарок\n                        ")]:[t._v("\n                            оплата счета № "),n("strong",{staticClass:"dotted cursor-pointer",on:{click:function(n){return t.$root.openOrder({id:e.order_id,secret:e.order_secret})}}},[t._v(t._s(e.order_id))]),t._v(" "),e.offer?n("div",[n("strong",[t._v(t._s(e.offer.name))])]):t._e()]]:[t._v("\n                        "+t._s(e.descr)+"\n                    ")],t._v(" "),e.comment&&("donate"===e.tag||"pay_order"===e.tag&&e.offer&&"donate"===e.offer.type)?n("div",{staticStyle:{"max-width":"200px"}},[n("small",{staticClass:"text-muted",attrs:{"data-title":"Сообщение"}},[t._v("«"+t._s(e.comment)+"»")])]):t._e()],2),t._v(" "),n("td",[e.account?n("strong",{},[n("code",[t._v(t._s(e.account))])]):t._e(),t._v(" "),e.user?n("user",{attrs:{user:e.user}}):t._e(),t._v(" "),-1!==["pay_order"].indexOf(e.tag)&&e.offer&&e.offer.owner?n("user",{attrs:{user:e.offer.owner}}):t._e()],1)])})),0)]):n("div",{staticClass:"alert alert-secondary text-center"},[n("strong",[t._v("На вашем счете ещё не было операций")])])]}}]),model:{value:t.items,callback:function(e){t.items=e},expression:"items"}})}),[],!1,null,null,null).exports},2471:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var a=n(89279);const r={name:"video_frame_choose",props:{url:{type:String},filters:{type:Array,default:function(){return[{name:"blur",unit:"px",config:{min:0,max:100,value:0}},{name:"brightness",unit:"%",config:{min:0,max:200,value:100}},{name:"grayscale",unit:"%",config:{min:0,max:100}},{name:"contrast",unit:"%",config:{min:0,max:200,value:100}}]}},obj:{},objId:{},alias:{}},data:function(){return{filterToken:0,filters$:this.filters,filtersValues:{},context:null,videoError:"",videoInfo:null,uploading:!1,uploaded:!1}},created:function(){},mounted:function(){},methods:{capture:function(){var t=this.$refs.video,e=this.$refs.canvas,n=e.getContext("2d");t.pause();var a=t.getBoundingClientRect();e.width=a.width,e.height=a.height;var r=document.createElement("canvas"),i=r.getContext("2d");r.width=i.width=t.videoWidth,r.height=i.height=t.videoHeight,this.context=i,this.contextPreview=n,this.draw()},draw:function(){var t=this.$refs.video;this.contextPreview.drawImage(t,0,0,this.contextPreview.canvas.width,this.contextPreview.canvas.height),this.context.drawImage(t,0,0,t.videoWidth,t.videoHeight)},reset:function(){this.context=null,this.contextPreview=null,this.uploaded=!1},resetFilters:function(){this.filterToken++,this.filtersValues={},this.filterApply()},upload:function(){var t=this;this.context.canvas.toBlob((function(e){info("blob",e);var n=new FormData;n.append("obj",t.obj),t.objId&&n.append("obj_id",t.objId),t.alias&&n.append("alias",t.alias),n.append("file",e),t.uploading=!0,a.V.make("uploadFile",n).then((function(e){t.uploaded=e})).catch((function(e){t.$root.popupFixErr(e)})).always((function(){t.uploading=!1}))}),"image/png")},filterApply:function(t,e){var n="";if(t)for(var a in this.filtersValues[t.name]={f:t,v:e},this.filtersValues){var r=this.filtersValues[a];n+=a+"("+r.v+(r.f.unit||"")+") "}else this.filtersValues={};n||(n="none"),this.context.filter=n,this.contextPreview.filter=n,this.draw()},videoEvent:function(t){"error"===t.type&&(error("video error",t.target.error),this.videoError=t.target.error.message),"loadedmetadata"===t.type&&(this.videoInfo={w:t.target.videoWidth,h:t.target.videoHeight})}}};const i=(0,n(51900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{size:"lg"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.context,expression:"!context"}]},[n("video",{ref:"video",staticClass:"w-100",attrs:{preload:"metadata",src:t.url,controls:""},on:{loadedmetadata:t.videoEvent}}),t._v(" "),t.videoInfo?n("span",[t._v("(разрешение: "+t._s(t.videoInfo.w)+"x"+t._s(t.videoInfo.h)+")")]):t._e(),t._v(" "),n("div",[n("button",{staticClass:"btn btn-secondary",on:{click:t.capture}},[t._v("Захватить")])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.context,expression:"context"}]},[n("canvas",{directives:[{name:"show",rawName:"v-show",value:!t.uploaded,expression:"!uploaded"}],ref:"canvas",staticClass:"w-100"}),t._v(" "),t.uploaded?t._e():n("div",{key:t.filterToken},t._l(t.filters$,(function(e){return n("div",{staticClass:"row g-0 align-items-center"},[n("div",{staticClass:"col-auto pe-3"},[t._v(t._s(e.name))]),t._v(" "),n("slider",{staticClass:"col",attrs:{type:"horizontal",config:e.config||{}},on:{change:function(n){return t.filterApply(e,n)}}})],1)})),0),t._v(" "),t.uploaded?n("a",{attrs:{"data-fancybox":"",href:t.uploaded._orig}},[n("img",{staticClass:"mw-100",attrs:{src:t.uploaded._orig}})]):t._e(),t._v(" "),n("div",{staticClass:"mt-2"},[t.uploaded?t._e():n("button",{staticClass:"btn btn-secondary",attrs:{disabled:t.uploading},on:{click:t.upload}},[n("i",{staticClass:"fa fa-upload"}),t._v("\n                "+t._s(t.uploading?"Загружаю...":"Залить")+"\n            ")]),t._v(" "),n("button",{staticClass:"btn btn-secondary",on:{click:t.resetFilters}},[t._v("\n                Сброс фильтров\n            ")]),t._v(" "),n("button",{staticClass:"btn btn-secondary",on:{click:t.reset}},[n("i",{staticClass:"fa fa-remove"}),t._v("\n                Отмена\n            ")])])])])}),[],!1,null,null,null).exports},18516:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var a=n(94076),r=n(73296);const i={name:"vote_admin",props:{roomId:{type:Number},voteId:{type:Number},scope:{type:String}},data:function(){return{vote$:null,loading:!1,scope$:this.scope}},components:{print:r.Z,create:a.Z},computed:{votes:function(){return this.data&&this.data.votes}},created:function(){this.update()},mounted:function(){},methods:{update:function(){var t=this;this.$api((function(e){t.vote$=e.vote,t.vote$&&t.vote$.site&&"pay"===t.scope$&&(t.scope$=""),t.vote$||"pay"!==t.scope$||(t.vote$={})}),"getVoteAdmin",{room_id:this.roomId,vote_id:this.voteId,scope:this.scope$})},openCreate:function(t){var e=this,n=this.render(a.Z,{roomId:this.roomId,vote:t||{}});n.$on("save",(function(){e.update(),n.$destroy()}))}}};const s=(0,n(51900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t._modal_or_div,{tag:"component",attrs:{title:"Опросы"}},[t.roomId||t.voteId?[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{inline:""}}),t._v(" "),t.loading?t._e():[t.vote$?n("create",{attrs:{"room-id":t.roomId,scope:t.scope$,vote:t.vote$},on:{trash:function(e){t.vote$=null},updateMe:function(e){return t.update()}}}):n("div",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.vote$={}}}},[n("i",{staticClass:"fa fa-plus-square"}),t._v("\n                Создать опрос\n            ")])])]]:n("div",{staticClass:"alert alert-danger text-center"},[n("p",[n("i",{staticClass:"fa fa-info-circle"}),t._v(" Для использования опросов вы должны создать трансляцию")]),t._v(" "),n("router-link",{staticClass:"btn btn-success",attrs:{to:"/start"}},[t._v("Создать")])],1)],2)}),[],!1,null,null,null).exports},94076:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});const a={name:"vote_asks",props:{vote:{type:Object},roomId:{type:Number}},data:function(){return{asks:[].pushItems(this.vote.asks)}},computed:{},created:function(){0===this.asks.length&&this.add()},mounted:function(){},methods:{remove:function(t){this.asks.splice(t,1)},add:function(){this.asks.push({id:this.idRand(),_autofocus:!0})}}};var r=n(51900);const i=(0,r.Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Варианты ответов",save:"Сохранить"}},[0===t.asks.length?n("div",{staticClass:"my-2 text-center"},[n("em",{staticClass:"text-muted"},[t._v("Вопросов нет")])]):t._e(),t._v(" "),n("forma",{attrs:{action:"/api/voteAsk"},on:{success:function(e){return t.$emit("save",e)}}},[n("input",{attrs:{type:"hidden",name:"vote_id"},domProps:{value:t.vote.id}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"room_id"},domProps:{value:t.roomId}}),t._v(" "),t._l(t.asks,(function(e,a){return n("div",{key:e.id,staticClass:"my-2"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"ask.text"}],staticClass:"form-control",attrs:{autocomplete:"off",autofocus:e._autofocus,name:"ask[]"},domProps:{value:e.text},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.add(e))},input:function(n){n.target.composing||t.$set(e,"text",n.target.value)}}})]),t._v(" "),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-danger",attrs:{type:"button",tabindex:"-1","data-help":"удалить вопрос"},on:{click:function(e){return t.remove(a)}}},[n("i",{staticClass:"fa fa-remove"})])])])])}))],2),t._v(" "),n("div",{staticClass:"text-end my-2"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.add}},[n("i",{staticClass:"fa fa-plus"}),t._v(" добавить вопрос")])])],1)}),[],!1,null,null,null).exports;const s={name:"vote_promo",props:{vote:{type:Object}},data:function(){return{success:!1}},created:function(){},mounted:function(){},methods:{onSuccess:function(){this.success=!0,this.$emit("success")}}};const o=(0,r.Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{title:"Продвинуть опрос"}},[t.success?n("div",{staticClass:"alert alert-success text-center"},[n("i",{staticClass:"fa fa-check"}),t._v(" "),n("strong",[t._v("Ваш опрос был опубликован")])]):n("div",[n("div",{staticClass:"alert alert-secondary"},[n("p",[n("i",{staticClass:"fa fa-info-circle"}),t._v("\n                Вы можете разместить свой опрос не только у себя в чате, но и на главной странице сайта")]),t._v("\n            После оплаты специальной услуги, ваш опрос будет виден всем пользователям сайта\n        ")]),t._v(" "),n("service",{attrs:{alias:"vote"}}),t._v(" "),n("div",{staticClass:"my-2 text-center"},[n("action",{staticClass:"btn btn-primary",attrs:{action:"/api/voteToHome",data:{vote_id:t.vote.id}},on:{success:t.onSuccess}},[n("i",{staticClass:"fa fa-check"}),t._v("\n            Опубликовать опрос\n            ")])],1)],1)])}),[],!1,null,null,null).exports,c={name:"vote_create",props:{vote:{type:Object},roomId:{type:Number},site:{type:Number,default:0},scope:{type:String}},data:function(){return{vote_:this.vote||{},scope$:this.scope}},watch:{vote_:{deep:!0,handler:function(){this.$emit("update",this.vote_)}}},computed:{vote$:function(){var t=this.vote_&&this.vote_.start_at&&new Date(this.vote_.start_at);return Object.assign(this.vote_||{},{_start:t?{date:this.vote_.start_at.split(" ")[0],hours:t.getHours(),minutes:t.getMinutes()}:{}})},showDates:function(){return"pay"!==this.scope$&&(this.vote$&&!this.vote$.payed||!this.vote$)}},created:function(){},mounted:function(){},methods:{openAsks:function(){var t=this,e=this.render(i,{roomId:this.roomId,vote:this.vote$});e.$on("save",(function(n){t.vote$.asks=n.asks,e.$destroy()}))},onCreate:function(t){this.vote_=t.vote,"pay"===this.scope$&&(this.scope$=""),0===this.vote$.asks.length&&this.openAsks()},openPromo:function(){var t=this,e=this.render(o,{vote:this.vote$});e.$on("success",(function(){setTimeout((function(){t.$emit("updateMe"),e.$destroy()}),3333)}))}}};const l=(0,r.Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["pay"===t.scope$?n("service",{attrs:{alias:"vote"}}):t._e(),t._v(" "),n("forma",{attrs:{action:"/api/voteCreate"},on:{success:t.onCreate}},[t.vote$.ended?n("vote",{staticClass:"mb-3",attrs:{vote:t.vote$,"room-id":t.roomId}}):[n("input",{directives:[{name:"model",rawName:"v-model",value:t.vote$.id,expression:"vote$.id"}],attrs:{type:"hidden",name:"vote_id"},domProps:{value:t.vote$.id},on:{input:function(e){e.target.composing||t.$set(t.vote$,"id",e.target.value)}}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"room_id"},domProps:{value:t.roomId}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"site"},domProps:{value:t.site}}),t._v(" "),"pay"===t.scope$?n("input",{attrs:{type:"hidden",name:"pay",value:"1"}}):t._e(),t._v(" "),t.vote$&&t.vote$.site?n("div",{staticClass:"mb-2"},[n("strong",{staticClass:"text-primary"},[n("i",{staticClass:"fa fa-check"}),t._v("\n                    глобальный опрос\n                ")]),t._v(" "),t.vote$&&t.vote$.deactivate?n("div",{staticClass:"alert alert-danger text-center"},[n("strong",[t._v("\n                        Ваш опрос заблокирован за нарушение правил. Исправьте его  и "),n("span",{staticClass:"app-link",on:{click:function(e){return t.$root.openSupport()}}},[t._v("напишите в поддержку")]),t._v(".\n                    ")])]):t._e()]):t._e(),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[t._v("Предмет опроса:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.vote$.name,expression:"vote$.name"}],staticClass:"form-control",attrs:{name:"name",autofocus:"",required:"required",placeholder:"название"},domProps:{value:t.vote$.name},on:{input:function(e){e.target.composing||t.$set(t.vote$,"name",e.target.value)}}})]),t._v(" "),t.global.admin?n("div",{staticClass:"form-group"},[n("label",[t._v("Alias:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.vote$.alias,expression:"vote$.alias"}],staticClass:"form-control",attrs:{name:"alias",placeholder:"alias"},domProps:{value:t.vote$.alias},on:{input:function(e){e.target.composing||t.$set(t.vote$,"alias",e.target.value)}}})]):t._e(),t._v(" "),t.showDates?n("div",{staticClass:"form-group"},[n("label",[n("label",{staticClass:"form-check",attrs:{"data-bs-toggle":"collapse",href:"#lkjhguyjufjgyfdsjg345"}},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"_start_edit",value:"1"},domProps:{checked:t.vote$.start_at}}),t._v(" "),n("span",{staticClass:"form-check-label"},[n("i",{staticClass:"fa fa-clock-o"}),t._v(" Дата и время начала")])])]),t._v(" "),n("div",{staticClass:"collapse",class:{show:t.vote$.start_at},attrs:{id:"lkjhguyjufjgyfdsjg345"}},[t.vote$.start_at?n("div",[n("strong",{staticClass:"text-danger"},[t._v("начало: "+t._s(t.vote$._start_at)+" (MSK)")])]):t._e(),t._v(" "),n("datepicker",{attrs:{future:!0,name:"start_at",value:"",placeholder:"Дата"}}),t._v(" "),n("select",{attrs:{name:"start_at_hour"}},[n("option",{attrs:{value:""}},[t._v("—")]),t._v(" "),t._l(24,(function(e,a){return n("option",{domProps:{value:a}},[t._v(t._s(a<10?"0":"")+t._s(a))])}))],2),t._v(" ЧЧ :\n\n                    "),n("select",{attrs:{name:"start_at_minute"}},[n("option",{attrs:{value:""}},[t._v("—")]),t._v(" "),t._l(60,(function(e,a){return a%5==0?n("option",{domProps:{value:a}},[t._v(t._s(a<10?"0":"")+t._s(a))]):t._e()}))],2),t._v(" ММ\n                    (MSK)\n                ")],1)]):t._e(),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[n("label",{staticClass:"form-check",attrs:{"data-bs-toggle":t.showDates?"collapse":"",href:"#lkjhguyjufjgyfdsjg"}},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"_expired_edit",value:"1",disabled:!t.showDates},domProps:{checked:t.vote$.expired_at}}),t._v(" "),n("span",{staticClass:"form-check-label"},[n("i",{staticClass:"fa fa-clock-o"}),t._v(" Продолжительность опроса")])])]),t._v(" "),n("div",{staticClass:"collapse",class:{show:t.vote$.expired_at},attrs:{id:"lkjhguyjufjgyfdsjg"}},[t.vote$.expired_at?n("div",[n("strong",{staticClass:"text-danger"},[t._v("истекает: "+t._s(t.vote$._expired_at)+" (MSK)")])]):t._e(),t._v(" "),t.showDates?[n("div",[n("input",{staticStyle:{width:"80px"},attrs:{name:"expire_days",type:"number"}}),t._v(" дней\n                            "),n("input",{staticStyle:{width:"80px"},attrs:{name:"expire_hours",type:"number",value:""}}),t._v(" часов\n                        ")]),t._v(" "),n("div",{staticClass:"lh-1"},[n("small",{staticClass:"text-muted"},[t._v("Не вводите ничего, если опрос бессрочный. Не вводите дни, если нужны только часы")])])]:t._e()],2)]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.vote$.multiple,expression:"vote$.multiple"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"multiple",value:"1"},domProps:{checked:Array.isArray(t.vote$.multiple)?t._i(t.vote$.multiple,"1")>-1:t.vote$.multiple},on:{change:function(e){var n=t.vote$.multiple,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.vote$,"multiple",n.concat(["1"])):i>-1&&t.$set(t.vote$,"multiple",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.vote$,"multiple",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Несколько вариантов ответа")])])]),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.vote$.streamers_only,expression:"vote$.streamers_only"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"streamers_only",value:"1"},domProps:{checked:Array.isArray(t.vote$.streamers_only)?t._i(t.vote$.streamers_only,"1")>-1:t.vote$.streamers_only},on:{change:function(e){var n=t.vote$.streamers_only,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.vote$,"streamers_only",n.concat(["1"])):i>-1&&t.$set(t.vote$,"streamers_only",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.vote$,"streamers_only",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Голосуют только трансляторы")])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check",attrs:{"data-bs-toggle":"collapse",href:"#collapseNewbie_deny"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.vote$.newbie_deny,expression:"vote$.newbie_deny"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"newbie_deny",value:"1"},domProps:{checked:Array.isArray(t.vote$.newbie_deny)?t._i(t.vote$.newbie_deny,"1")>-1:t.vote$.newbie_deny},on:{change:function(e){var n=t.vote$.newbie_deny,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.vote$,"newbie_deny",n.concat(["1"])):i>-1&&t.$set(t.vote$,"newbie_deny",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.vote$,"newbie_deny",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Запретить голосовать новичкам")])]),t._v(" "),n("div",{staticClass:"collapse",class:{show:t.vote$.newbie_deny},attrs:{id:"collapseNewbie_deny"}},[n("i",[t._v("новый пользователь должен быть зарегестрирован не менее\n                        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.vote$.newbie_deny,expression:"vote$.newbie_deny"}],attrs:{size:"3",min:"1",max:"168",type:"number",autocomplete:"off",name:"newbie_deny_time",value:"1"},domProps:{value:t.vote$.newbie_deny},on:{input:function(e){e.target.composing||t.$set(t.vote$,"newbie_deny",e.target.value)}}}),t._v(" час(ов)")])])]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check",attrs:{"data-bs-toggle":"collapse",href:"#collapseUsers_checked"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.vote$.users_checked,expression:"vote$.users_checked"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"users_checked",value:"1"},domProps:{checked:Array.isArray(t.vote$.users_checked)?t._i(t.vote$.users_checked,"1")>-1:t.vote$.users_checked},on:{change:function(e){var n=t.vote$.users_checked,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.vote$,"users_checked",n.concat(["1"])):i>-1&&t.$set(t.vote$,"users_checked",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.vote$,"users_checked",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("\n                        Голосуют только выбранные пользователи\n                        "),t.vote$.users_checked&&t.vote$.users&&t.vote$.users.length?[t._v("\n                            ("+t._s(t.vote$.users.length)+")\n                        ")]:t._e()],2)]),t._v(" "),n("div",{staticClass:"collapse",class:{show:t.vote$.users_checked},attrs:{id:"collapseUsers_checked"}},[t._l(t.vote$.users,(function(e){return t.vote$.users?n("div",{key:e.id,staticClass:"mb-1"},[n("input",{attrs:{type:"hidden",name:"users_selected[]"},domProps:{value:e.id}}),t._v(" "),n("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button","data-title":"удалить"},on:{click:function(n){return t.vote$.users.unset(e.id)}}},[n("i",{staticClass:"fa fa-trash"})]),t._v(" "),n("user",{attrs:{user:e}})],1):t._e()})),t._v(" "),n("em",[t._v("Скопируйте сюда ссылки на профиль или логины пользователей, разделенные новой строкой")]),t._v(" "),n("textarea",{staticClass:"form-control",attrs:{name:"users_links"}})],2)]),t._v(" "),t.global.admin?n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.vote$.konkurs,expression:"vote$.konkurs"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"konkurs",value:"1"},domProps:{checked:Array.isArray(t.vote$.konkurs)?t._i(t.vote$.konkurs,"1")>-1:t.vote$.konkurs},on:{change:function(e){var n=t.vote$.konkurs,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,"1");a.checked?i<0&&t.$set(t.vote$,"konkurs",n.concat(["1"])):i>-1&&t.$set(t.vote$,"konkurs",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.vote$,"konkurs",r)}}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Конкурс")])])]):t._e()],t._v(" "),t.vote$.id?[t.vote$.ended?n("div",[t.vote$.trashed?t._e():n("action",{staticClass:"btn btn-danger",attrs:{confirm:"Удалить опрос?",action:"action/voteRemove",data:{action:"voteRemove",obj:"vote",vote_id:t.vote$.id,room_id:t.roomId}},on:{success:function(e){return t.$emit("trash",t.vote$.id)}}},[n("i",{staticClass:"fa fa-trash"}),t._v(" Удалить")])],1):n("div",{staticClass:"row"},[n("div",{staticClass:"col-auto"},[n("action",{staticClass:"btn btn-warning btn-sm",attrs:{confirm:"Остановить опрос?",action:"action/voteStop",data:{action:"voteStop",obj:"vote",vote_id:t.vote$.id,room_id:t.roomId}},on:{success:function(e){t.vote_=e.vote}}},[n("i",{staticClass:"fa fa-power-off"}),t._v(" "),n("span",{staticClass:"d-none d-sm-inline-block"},[t._v("Завершить")])])],1),t._v(" "),n("div",{staticClass:"col text-end"},[t.vote$.site||"pay"===t.scope$?t._e():n("button",{staticClass:"btn btn-dark btn-sm",attrs:{type:"button","data-help":"Продвинуть"},on:{click:t.openPromo}},[n("em",{staticClass:"em em-muscle"})]),t._v(" "),n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:t.openAsks}},[n("i",{staticClass:"fa fa-list"}),t._v(" Вопросы "),n("span",{class:{"text-danger":0===t.vote$.asks.lengt}},[t._v("("+t._s(t.vote$.asks.length>0?t.vote$.asks.length:"нет")+")")])]),t._v(" "),n("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[n("i",{staticClass:"fa",class:{"fa-save":"pay"!==t.scope$,"fa-check":"pay"===t.scope$}}),t._v("\n                        "+t._s("pay"===t.scope$?"Опубликовать":"Сохранить")+"\n                    ")])])])]:n("div",[n("button",{staticClass:"btn btn-primary btn-lg",attrs:{type:"submit"}},[t._v("\n                Создать опрос\n            ")])])],2)],1)}),[],!1,null,null,null).exports},73296:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a={name:"vote_print",props:{vote:{type:Object,required:!0},roomId:{type:Number}},data:function(){return{vote$:this.vote,showEdit:!this.getParent("vote_create"),sort:!1}},destroyed:function(){},computed:{isOwner:function(){return this.vote$&&this.vote$.owner&&this.vote$.owner.id===this.global.uid},asks:function(){return this.sort?this.vote$.asks.slice().sort((function(t,e){return t.count>e.count?-1:t.count<e.count?1:0})):this.vote$.asks}},created:function(){var t=this;this.setWsHandler((function(e,n){"Voted"===e&&t.vote$&&t.vote$.id===n.vote_id&&(t.vote$.asks=n.asks),"voteUpdate"===e&&t.vote$&&t.vote$.id===n.vote_id&&(n.vote?(t.vote$=Object.assign(t.vote$,n.vote),n.ended&&(t.vote$.canVote=!1)):t.vote$=null)}))},mounted:function(){},methods:{onVoteSuccess:function(t){this.vote$=t.vote},onVoteError:function(t){this.vote$&&(this.vote$.canVote=!1),this.$root.popupFixErr(t)}}};const r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.vote$?n("div",{staticClass:"row  justify-content-center"},[n("div",{staticClass:"col-auto"},[n("div",{staticClass:"row  justify-content-center"},[n("div",{staticClass:"col-auto"},[n("div",{staticClass:"text-center"},[n("strong",[t.vote$.waiting?n("i",{staticClass:"fa fa-hourglass-o",attrs:{"aria-hidden":"true","data-title":"Опрос ещё не начат"}}):t._e(),t._v(" "),(t.isOwner||t.global.moder)&&t.showEdit?n("span",{staticClass:"app-link",on:{click:function(e){return t.$root.openVoteAdmin({roomId:t.roomId,voteId:t.vote$.id})}}},[n("i",{staticClass:"fa fa-pencil"}),t._v("\n                            "+t._s(t.vote$.name)+"\n                        ")]):n("span",[t._v(t._s(t.vote$.name))]),t._v(" "),t.vote$.ended?n("div",{staticClass:"text-center"},[t._m(0)]):t._e()])]),t._v(" "),t.vote$.asks.length>0?[t.vote$.canVote?n("div",[n("forma",{attrs:{action:"/api/vote","show-errors":!1},on:{success:t.onVoteSuccess,error:t.onVoteError}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.vote$.id,expression:"vote$.id"}],attrs:{type:"hidden",name:"vote_id"},domProps:{value:t.vote$.id},on:{input:function(e){e.target.composing||t.$set(t.vote$,"id",e.target.value)}}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"room_id"},domProps:{value:t.roomId}}),t._v(" "),t._l(t.vote$.asks,(function(e){return n("div",{key:e.id,staticClass:"my-2"},[t.vote$.multiple?n("label",{staticClass:"form-check"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",name:"ask[]"},domProps:{value:e.id}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v(t._s(e.text))])]):n("label",{staticClass:"form-check"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"ask[]"},domProps:{value:e.id}}),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v(t._s(e.text))])])])})),t._v(" "),n("div",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[t._v("Тыц!")])])],2)],1):n("div",[t._l(t.asks,(function(e){return n("div",{key:e.id,staticClass:"my-2"},[t._v("\n                            "+t._s(e.text)+" "),e.count>0?[t._v("("+t._s(e.count)+")")]:t._e(),t._v(" "),n("small",{staticClass:"text-muted"},[t._v(t._s(e.percent_show)+"%")]),t._v(" "),t._e(),t._v(" "),e.count?n("div",{staticClass:"line bg-primary",style:"height:3px; width:"+(e.percent?e.percent+"%":"1%")}):n("div",[t._m(1,!0)])],2)})),t._v(" "),n("i",{staticClass:"fa cursor-pointer",class:{"fa-sort-amount-asc":t.sort,"fa-sort-amount-desc":!t.sort},attrs:{"aria-hidden":"true","data-title":"Сортировать"},on:{click:function(e){t.sort=!t.sort}}})],2)]:n("div",{staticClass:"my-2 text-center"},[n("em",{staticClass:"text-muted"},[t._v("автор опроса ещё не добавил вариантов ответа")])])],2)]),t._v(" "),n("div",{staticClass:"text-center my-2"},[n("small",{staticClass:"app-link text-muted",attrs:{"data-bs-toggle":"collapse",href:"#"+t.idStatic("vote")}},[n("i",{staticClass:"fa fa-info-circle"}),t._v(" информация")])]),t._v(" "),n("div",{staticClass:"collapse",attrs:{id:t.idStatic("vote")}},[n("div",{staticClass:"mb-2"},[t._v("\n                Автор опроса:"),n("br"),t._v(" "),n("user",{attrs:{user:t.vote$.owner}}),n("br")],1),t._v(" "),n("div",[t._v("всего голосов: "),n("strong",[t._v(t._s(t.vote$.count))])]),t._v(" "),t.vote$.start_at?n("div",[n("small",[t._v("начало: "),n("strong",[t._v(t._s(t.vote$._start_at))])])]):t._e(),t._v(" "),t.vote$.expired_at?n("div",[n("small",[t._v("окончание: "),n("strong",[t._v(t._s(t.vote$._expired_at))])])]):t._e(),t._v(" "),t.vote$.stoped_at?n("div",[n("small",[t._v("остановлен: "),n("strong",[t._v(t._s(t.vote$._stoped_at))])])]):t._e(),t._v(" "),n("div",[n("small",{},[t._v("создан: "),n("strong",[t._v(t._s(t.vote$._created_at))])])]),t._v(" "),t.vote$.newbie_deny?n("div",[n("small",{attrs:{"data-title":"регистрация не менее "+t.vote$.newbie_deny+"ч."}},[n("i",{staticClass:"fa fa-info-circle text-danger"}),t._v(" кроме новичков (> "+t._s(t.vote$.newbie_deny)+" ч.)")])]):t._e(),t._v(" "),t.vote$.users_checked?n("div",[n("small",{attrs:{"data-title":"участвуют только выбранные пользователи"}},[n("i",{staticClass:"fa fa-info-circle text-danger"}),t._v(" выбранные пользователи ("+t._s(t.vote$.users_count)+")")])]):t._e(),t._v(" "),t.vote$.streamers_only?n("div",[t._m(2)]):t._e(),t._v(" "),t.global.moder?n("div",{staticClass:"my-2"},[n("label",{staticClass:"form-check form-switch"},[n("action",{staticClass:"form-check-input",attrs:{tag:"input",type:"checkbox",action:"/moder/voteToggle",data:{vote_id:t.vote$.id}},model:{value:t.vote$.deactivate,callback:function(e){t.$set(t.vote$,"deactivate",e)},expression:"vote$.deactivate"}},[t._v("Скрыть")]),t._v(" "),n("span",{staticClass:"form-check-label"},[t._v("Скрыть")])],1)]):t._e()])])]):n("div",[t._m(3)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("small",[n("em",{staticClass:"text-danger"},[t._v("завершен")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("small",{staticClass:"text-muted"},[n("em",[t._v("нет голосов")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("small",{},[n("i",{staticClass:"fa fa-info-circle text-danger"}),t._v(" только трансляторы")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert alert-secondary text-center"},[n("i",{staticClass:"fa fa-trash"}),t._v("\n        Опрос удален\n    ")])}],!1,null,null,null).exports},51900:(t,e,n)=>{"use strict";function a(t,e,n,a,r,i,s,o){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),a&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=o?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:l}}n.d(e,{Z:()=>a})},5122:(t,e,n)=>{function a(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var a=n(n.s=ENTRY_MODULE);return a.default||a}var r="[\\.|\\-|\\+|\\w|/|@]+",i="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function s(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(t,e,a){var o={};o[a]=[];var c=e.toString(),l=c.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return o;for(var u,d=l[1],f=new RegExp("(\\\\n|\\W)"+s(d)+i,"g");u=f.exec(c);)"dll-reference"!==u[3]&&o[a].push(u[3]);for(f=new RegExp("\\("+s(d)+'\\("(dll-reference\\s('+r+'))"\\)\\)'+i,"g");u=f.exec(c);)t[u[2]]||(o[a].push(u[1]),t[u[2]]=n(u[1]).m),o[u[2]]=o[u[2]]||[],o[u[2]].push(u[4]);for(var h,p=Object.keys(o),m=0;m<p.length;m++)for(var v=0;v<o[p[m]].length;v++)h=o[p[m]][v],isNaN(1*h)||(o[p[m]][v]=1*o[p[m]][v]);return o}function c(t){return Object.keys(t).reduce((function(e,n){return e||t[n].length>0}),!1)}t.exports=function(t,e){e=e||{};var r={main:n.m},i=e.all?{main:Object.keys(r.main)}:function(t,e){for(var n={main:[e]},a={main:[]},r={main:{}};c(n);)for(var i=Object.keys(n),s=0;s<i.length;s++){var l=i[s],u=n[l].pop();if(r[l]=r[l]||{},!r[l][u]&&t[l][u]){r[l][u]=!0,a[l]=a[l]||[],a[l].push(u);for(var d=o(t,t[l][u],l),f=Object.keys(d),h=0;h<f.length;h++)n[f[h]]=n[f[h]]||[],n[f[h]]=n[f[h]].concat(d[f[h]])}}return a}(r,t),s="";Object.keys(i).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;i[t][e];)e++;i[t].push(e),r[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",s=s+"var "+t+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i[t].map((function(e){return JSON.stringify(e)+": "+r[t][e].toString()})).join(",")+"});\n"})),s=s+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i.main.map((function(t){return JSON.stringify(t)+": "+r.main[t].toString()})).join(",")+"}))(self);";var l=new window.Blob([s],{type:"text/javascript"});if(e.bare)return l;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),d=new window.Worker(u);return d.objectURL=u,d}},90964:(t,e,n)=>{var a={"./record":16929,"./record.vue":16929,"./speech":77655,"./speech.vue":77655};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=i,t.exports=r,r.id=90964},71033:(t,e,n)=>{var a={"./join":89256,"./join.vue":89256,"./member":63720,"./member.vue":63720,"./members":7188,"./members.vue":7188,"./results":23684,"./results.vue":23684,"./rules":13657,"./rules.vue":13657,"./sponsors":80445,"./sponsors.vue":80445,"./tasks":73509,"./tasks.vue":73509};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=i,t.exports=r,r.id=71033},41711:(t,e,n)=>{var a={"./join":94094,"./join.vue":94094,"./member":81656,"./member.vue":81656,"./members":36859,"./members.vue":36859,"./results":46914,"./results.vue":46914,"./rules":28137,"./rules.vue":28137,"./sponsors":23948,"./sponsors.vue":23948,"./tasks":13886,"./tasks.vue":13886};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=i,t.exports=r,r.id=41711},7482:(t,e,n)=>{var a={"./join":37042,"./join.vue":37042,"./member":51517,"./member.vue":51517,"./members":57789,"./members.vue":57789,"./results":13569,"./results.vue":13569,"./rules":78725,"./rules.vue":78725,"./sponsors":9933,"./sponsors.vue":9933,"./tasks":79975,"./tasks.vue":79975};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=i,t.exports=r,r.id=7482},69247:(t,e,n)=>{var a={"./donationsalerts.vue":3509,"./qiwi.vue":86864,"./self.vue":40645};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=i,t.exports=r,r.id=69247},17014:(t,e,n)=>{var a={"./access":47121,"./access.vue":47121,"./bans":30743,"./bans.vue":30743,"./coupons":6183,"./coupons.vue":6183,"./donate_progress_helper":58120,"./donate_progress_helper.vue":58120,"./donation":31756,"./donation.vue":31756,"./links":79459,"./links.vue":79459,"./main":79346,"./main.vue":79346,"./moders":77046,"./moders.vue":77046,"./programms":68170,"./programms.vue":68170,"./protect":34523,"./protect.vue":34523,"./remove":20261,"./remove.vue":20261,"./theme":83526,"./theme.vue":83526,"./vote":25951,"./vote.vue":25951};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=i,t.exports=r,r.id=17014},35361:(t,e,n)=>{var a={"./blacklist":73897,"./blacklist.vue":73897,"./change_email":3344,"./change_email.vue":3344,"./change_pass":51129,"./change_pass.vue":51129,"./home":34419,"./home.vue":34419,"./intim":13320,"./intim.vue":13320,"./private":50091,"./private.vue":50091,"./qr":14434,"./qr.vue":14434,"./remove_profile":86495,"./remove_profile.vue":86495,"./security":27537,"./security.vue":27537,"./settings":92931,"./settings.vue":92931,"./subscribers":10109,"./subscribers.vue":10109};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=i,t.exports=r,r.id=35361},65603:(t,e,n)=>{var a={"./home":34222,"./home.vue":34222,"./money_out":97693,"./money_out.vue":97693,"./transaction":21646,"./transaction.vue":21646};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=i,t.exports=r,r.id=65603}},a={};function r(t){var e=a[t];if(void 0!==e)return e.exports;var i=a[t]={id:t,loaded:!1,exports:{}};return n[t].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=n,t=[],r.O=(e,n,a,i)=>{if(!n){var s=1/0;for(l=0;l<t.length;l++){for(var[n,a,i]=t[l],o=!0,c=0;c<n.length;c++)(!1&i||s>=i)&&Object.keys(r.O).every((t=>r.O[t](n[c])))?n.splice(c--,1):(o=!1,i<s&&(s=i));o&&(t.splice(l--,1),e=a())}return e}i=i||0;for(var l=t.length;l>0&&t[l-1][2]>i;l--)t[l]=t[l-1];t[l]=[n,a,i]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((e,n)=>(r.f[n](t,e),e)),[])),r.u=t=>{if(339===t)return"js/v2/app/streamer.js"},r.miniCssF=t=>({16:"css/v2/ny",334:"css/v2/admin",481:"css/v2/app",501:"css/v2/theme_dark",703:"css/v2/theme_light",851:"css/v2/moder"}[t]+".css"),r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),e={},r.l=(t,n,a,i)=>{if(e[t])e[t].push(n);else{var s,o;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==t){s=u;break}}s||(o=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=t),e[t]=[n];var d=(n,a)=>{s.onerror=s.onload=null,clearTimeout(f);var r=e[t];if(delete e[t],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((t=>t(a))),n)return n(a)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),o&&document.head.appendChild(s)}},r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),r.p="/",(()=>{var t={973:0,481:0,16:0,334:0,851:0,501:0,703:0};r.f.j=(e,n)=>{var a=r.o(t,e)?t[e]:void 0;if(0!==a)if(a)n.push(a[2]);else if(/^(339|973)$/.test(e)){var i=new Promise(((n,r)=>a=t[e]=[n,r]));n.push(a[2]=i);var s=r.p+r.u(e),o=new Error;r.l(s,(n=>{if(r.o(t,e)&&(0!==(a=t[e])&&(t[e]=void 0),a)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;o.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,a[1](o)}}),"chunk-"+e,e)}else t[e]=0},r.O.j=e=>0===t[e];var e=(e,n)=>{var a,i,[s,o,c]=n,l=0;for(a in o)r.o(o,a)&&(r.m[a]=o[a]);for(c&&c(r),e&&e(n);l<s.length;l++)i=s[l],r.o(t,i)&&t[i]&&t[i][0](),t[s[l]]=0;r.O()},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),r.O(void 0,[481,16,334,851,501,703],(()=>r(90215))),r.O(void 0,[481,16,334,851,501,703],(()=>r(21029))),r.O(void 0,[481,16,334,851,501,703],(()=>r(2130))),r.O(void 0,[481,16,334,851,501,703],(()=>r(77332))),r.O(void 0,[481,16,334,851,501,703],(()=>r(90900))),r.O(void 0,[481,16,334,851,501,703],(()=>r(66830)));var i=r.O(void 0,[481,16,334,851,501,703],(()=>r(87636)));i=r.O(i)})();